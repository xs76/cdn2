window.__require=function e(t,o,n){function r(i,s){if(!o[i]){if(!t[i]){var c=i.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return r(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({ASBMessageDefines:[function(e,t){"use strict";cc._RF.push(t,"b0c03T9SbtJgq6uN9MRV/Z7","ASBMessageDefines");var o=e("protobufjs/minimal"),n=o.Reader,r=o.Writer,a=o.util,i=o.roots.asb||(o.roots.asb={});i.SKIN=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.Booster=0,e.prototype.Hat="",e.prototype.Glasses="",e.prototype.Dress="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.Booster&&Object.hasOwnProperty.call(e,"Booster")&&t.uint32(0).int32(e.Booster),null!=e.Hat&&Object.hasOwnProperty.call(e,"Hat")&&t.uint32(10).string(e.Hat),null!=e.Glasses&&Object.hasOwnProperty.call(e,"Glasses")&&t.uint32(18).string(e.Glasses),null!=e.Dress&&Object.hasOwnProperty.call(e,"Dress")&&t.uint32(26).string(e.Dress),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.SKIN;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.Booster=e.int32();break;case 1:r.Hat=e.string();break;case 2:r.Glasses=e.string();break;case 3:r.Dress=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.Booster&&e.hasOwnProperty("Booster")&&!a.isInteger(e.Booster)?"Booster: integer expected":null!=e.Hat&&e.hasOwnProperty("Hat")&&!a.isString(e.Hat)?"Hat: string expected":null!=e.Glasses&&e.hasOwnProperty("Glasses")&&!a.isString(e.Glasses)?"Glasses: string expected":null!=e.Dress&&e.hasOwnProperty("Dress")&&!a.isString(e.Dress)?"Dress: string expected":null},e.fromObject=function(e){if(e instanceof i.SKIN)return e;var t=new i.SKIN;return null!=e.Booster&&(t.Booster=0|e.Booster),null!=e.Hat&&(t.Hat=String(e.Hat)),null!=e.Glasses&&(t.Glasses=String(e.Glasses)),null!=e.Dress&&(t.Dress=String(e.Dress)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.Booster=0,o.Hat="",o.Glasses="",o.Dress=""),null!=e.Booster&&e.hasOwnProperty("Booster")&&(o.Booster=e.Booster),null!=e.Hat&&e.hasOwnProperty("Hat")&&(o.Hat=e.Hat),null!=e.Glasses&&e.hasOwnProperty("Glasses")&&(o.Glasses=e.Glasses),null!=e.Dress&&e.hasOwnProperty("Dress")&&(o.Dress=e.Dress),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.POSITION=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.x=0,e.prototype.y=0,e.prototype.z=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(5).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(13).float(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(21).float(e.z),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.POSITION;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.x=e.float();break;case 1:r.y=e.float();break;case 2:r.z=e.float();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},e.fromObject=function(e){if(e instanceof i.POSITION)return e;var t=new i.POSITION;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.x=0,o.y=0,o.z=0),null!=e.x&&e.hasOwnProperty("x")&&(o.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(o.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(o.z=t.json&&!isFinite(e.z)?String(e.z):e.z),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.PlayerState=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.netID="",e.prototype.posInMap=0,e.prototype.position=null,e.prototype.curDirection=0,e.prototype.curSpeed=0,e.prototype.timeChangeState=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.curState=0,e.prototype.data=a.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(10).string(e.netID),null!=e.posInMap&&Object.hasOwnProperty.call(e,"posInMap")&&t.uint32(16).uint32(e.posInMap),null!=e.position&&Object.hasOwnProperty.call(e,"position")&&i.POSITION.encode(e.position,t.uint32(26).fork()).ldelim(),null!=e.curDirection&&Object.hasOwnProperty.call(e,"curDirection")&&t.uint32(32).int32(e.curDirection),null!=e.curSpeed&&Object.hasOwnProperty.call(e,"curSpeed")&&t.uint32(40).int32(e.curSpeed),null!=e.timeChangeState&&Object.hasOwnProperty.call(e,"timeChangeState")&&t.uint32(48).uint64(e.timeChangeState),null!=e.curState&&Object.hasOwnProperty.call(e,"curState")&&t.uint32(56).int32(e.curState),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(66).bytes(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.PlayerState;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.netID=e.string();break;case 2:r.posInMap=e.uint32();break;case 3:r.position=i.POSITION.decode(e,e.uint32());break;case 4:r.curDirection=e.int32();break;case 5:r.curSpeed=e.int32();break;case 6:r.timeChangeState=e.uint64();break;case 7:r.curState=e.int32();break;case 8:r.data=e.bytes();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID))return"netID: string expected";if(null!=e.posInMap&&e.hasOwnProperty("posInMap")&&!a.isInteger(e.posInMap))return"posInMap: integer expected";if(null!=e.position&&e.hasOwnProperty("position")){var t=i.POSITION.verify(e.position);if(t)return"position."+t}return null!=e.curDirection&&e.hasOwnProperty("curDirection")&&!a.isInteger(e.curDirection)?"curDirection: integer expected":null!=e.curSpeed&&e.hasOwnProperty("curSpeed")&&!a.isInteger(e.curSpeed)?"curSpeed: integer expected":null!=e.timeChangeState&&e.hasOwnProperty("timeChangeState")&&!(a.isInteger(e.timeChangeState)||e.timeChangeState&&a.isInteger(e.timeChangeState.low)&&a.isInteger(e.timeChangeState.high))?"timeChangeState: integer|Long expected":null!=e.curState&&e.hasOwnProperty("curState")&&!a.isInteger(e.curState)?"curState: integer expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||a.isString(e.data))?"data: buffer expected":null},e.fromObject=function(e){if(e instanceof i.PlayerState)return e;var t=new i.PlayerState;if(null!=e.netID&&(t.netID=String(e.netID)),null!=e.posInMap&&(t.posInMap=e.posInMap>>>0),null!=e.position){if("object"!=typeof e.position)throw TypeError(".PlayerState.position: object expected");t.position=i.POSITION.fromObject(e.position)}return null!=e.curDirection&&(t.curDirection=0|e.curDirection),null!=e.curSpeed&&(t.curSpeed=0|e.curSpeed),null!=e.timeChangeState&&(a.Long?(t.timeChangeState=a.Long.fromValue(e.timeChangeState)).unsigned=!0:"string"==typeof e.timeChangeState?t.timeChangeState=parseInt(e.timeChangeState,10):"number"==typeof e.timeChangeState?t.timeChangeState=e.timeChangeState:"object"==typeof e.timeChangeState&&(t.timeChangeState=new a.LongBits(e.timeChangeState.low>>>0,e.timeChangeState.high>>>0).toNumber(!0))),null!=e.curState&&(t.curState=0|e.curState),null!=e.data&&("string"==typeof e.data?a.base64.decode(e.data,t.data=a.newBuffer(a.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.netID="",o.posInMap=0,o.position=null,o.curDirection=0,o.curSpeed=0,a.Long){var n=new a.Long(0,0,!0);o.timeChangeState=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timeChangeState=t.longs===String?"0":0;o.curState=0,t.bytes===String?o.data="":(o.data=[],t.bytes!==Array&&(o.data=a.newBuffer(o.data)))}return null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.posInMap&&e.hasOwnProperty("posInMap")&&(o.posInMap=e.posInMap),null!=e.position&&e.hasOwnProperty("position")&&(o.position=i.POSITION.toObject(e.position,t)),null!=e.curDirection&&e.hasOwnProperty("curDirection")&&(o.curDirection=e.curDirection),null!=e.curSpeed&&e.hasOwnProperty("curSpeed")&&(o.curSpeed=e.curSpeed),null!=e.timeChangeState&&e.hasOwnProperty("timeChangeState")&&("number"==typeof e.timeChangeState?o.timeChangeState=t.longs===String?String(e.timeChangeState):e.timeChangeState:o.timeChangeState=t.longs===String?a.Long.prototype.toString.call(e.timeChangeState):t.longs===Number?new a.LongBits(e.timeChangeState.low>>>0,e.timeChangeState.high>>>0).toNumber(!0):e.timeChangeState),null!=e.curState&&e.hasOwnProperty("curState")&&(o.curState=e.curState),null!=e.data&&e.hasOwnProperty("data")&&(o.data=t.bytes===String?a.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.PlayerStartingData=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.name="",e.prototype.netID="",e.prototype.startPointIndex=0,e.prototype.skin="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(2).string(e.name),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(10).string(e.netID),null!=e.startPointIndex&&Object.hasOwnProperty.call(e,"startPointIndex")&&t.uint32(16).int32(e.startPointIndex),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(26).string(e.skin),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.PlayerStartingData;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.name=e.string();break;case 1:r.netID=e.string();break;case 2:r.startPointIndex=e.int32();break;case 3:r.skin=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name)?"name: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&!a.isInteger(e.startPointIndex)?"startPointIndex: integer expected":null!=e.skin&&e.hasOwnProperty("skin")&&!a.isString(e.skin)?"skin: string expected":null},e.fromObject=function(e){if(e instanceof i.PlayerStartingData)return e;var t=new i.PlayerStartingData;return null!=e.name&&(t.name=String(e.name)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.startPointIndex&&(t.startPointIndex=0|e.startPointIndex),null!=e.skin&&(t.skin=String(e.skin)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.name="",o.netID="",o.startPointIndex=0,o.skin=""),null!=e.name&&e.hasOwnProperty("name")&&(o.name=e.name),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&(o.startPointIndex=e.startPointIndex),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.BombStatus=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.mixedValue=0,e.prototype.timePlaced=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.mixedValue&&Object.hasOwnProperty.call(e,"mixedValue")&&t.uint32(8).uint32(e.mixedValue),null!=e.timePlaced&&Object.hasOwnProperty.call(e,"timePlaced")&&t.uint32(16).uint64(e.timePlaced),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.BombStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.mixedValue=e.uint32();break;case 2:r.timePlaced=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.mixedValue&&e.hasOwnProperty("mixedValue")&&!a.isInteger(e.mixedValue)?"mixedValue: integer expected":null!=e.timePlaced&&e.hasOwnProperty("timePlaced")&&!(a.isInteger(e.timePlaced)||e.timePlaced&&a.isInteger(e.timePlaced.low)&&a.isInteger(e.timePlaced.high))?"timePlaced: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.BombStatus)return e;var t=new i.BombStatus;return null!=e.mixedValue&&(t.mixedValue=e.mixedValue>>>0),null!=e.timePlaced&&(a.Long?(t.timePlaced=a.Long.fromValue(e.timePlaced)).unsigned=!0:"string"==typeof e.timePlaced?t.timePlaced=parseInt(e.timePlaced,10):"number"==typeof e.timePlaced?t.timePlaced=e.timePlaced:"object"==typeof e.timePlaced&&(t.timePlaced=new a.LongBits(e.timePlaced.low>>>0,e.timePlaced.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.mixedValue=0,a.Long){var n=new a.Long(0,0,!0);o.timePlaced=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timePlaced=t.longs===String?"0":0;return null!=e.mixedValue&&e.hasOwnProperty("mixedValue")&&(o.mixedValue=e.mixedValue),null!=e.timePlaced&&e.hasOwnProperty("timePlaced")&&("number"==typeof e.timePlaced?o.timePlaced=t.longs===String?String(e.timePlaced):e.timePlaced:o.timePlaced=t.longs===String?a.Long.prototype.toString.call(e.timePlaced):t.longs===Number?new a.LongBits(e.timePlaced.low>>>0,e.timePlaced.high>>>0).toNumber(!0):e.timePlaced),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_RequestCreateBot=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.botID="",e.prototype.name="",e.prototype.skin="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.botID&&Object.hasOwnProperty.call(e,"botID")&&t.uint32(18).string(e.botID),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(34).string(e.skin),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_RequestCreateBot;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.botID=e.string();break;case 3:r.name=e.string();break;case 4:r.skin=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.botID&&e.hasOwnProperty("botID")&&!a.isString(e.botID)?"botID: string expected":null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name)?"name: string expected":null!=e.skin&&e.hasOwnProperty("skin")&&!a.isString(e.skin)?"skin: string expected":null},e.fromObject=function(e){if(e instanceof i.Client_RequestCreateBot)return e;var t=new i.Client_RequestCreateBot;return null!=e.message&&(t.message=e.message>>>0),null!=e.botID&&(t.botID=String(e.botID)),null!=e.name&&(t.name=String(e.name)),null!=e.skin&&(t.skin=String(e.skin)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.botID="",o.name="",o.skin=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.botID&&e.hasOwnProperty("botID")&&(o.botID=e.botID),null!=e.name&&e.hasOwnProperty("name")&&(o.name=e.name),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_Ping=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.id="",e.prototype.pong=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_Ping;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.id&&e.hasOwnProperty("id")&&!a.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null},e.fromObject=function(e){if(e instanceof i.Client_Ping)return e;var t=new i.Client_Ping;return null!=e.message&&(t.message=e.message>>>0),null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.id="",o.pong=!1),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_PlantBomb=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.planterStartPoint=0,e.prototype.gridX=0,e.prototype.gridY=0,e.prototype.srvTimePlanted=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.type=0,e.prototype.range=0,e.prototype.ownerWorldPos=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.planterStartPoint&&Object.hasOwnProperty.call(e,"planterStartPoint")&&t.uint32(24).uint32(e.planterStartPoint),null!=e.gridX&&Object.hasOwnProperty.call(e,"gridX")&&t.uint32(32).uint32(e.gridX),null!=e.gridY&&Object.hasOwnProperty.call(e,"gridY")&&t.uint32(40).uint32(e.gridY),null!=e.srvTimePlanted&&Object.hasOwnProperty.call(e,"srvTimePlanted")&&t.uint32(48).uint64(e.srvTimePlanted),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(56).uint32(e.type),null!=e.range&&Object.hasOwnProperty.call(e,"range")&&t.uint32(64).uint32(e.range),null!=e.ownerWorldPos&&Object.hasOwnProperty.call(e,"ownerWorldPos")&&t.uint32(72).uint32(e.ownerWorldPos),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlantBomb;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.planterStartPoint=e.uint32();break;case 4:r.gridX=e.uint32();break;case 5:r.gridY=e.uint32();break;case 6:r.srvTimePlanted=e.uint64();break;case 7:r.type=e.uint32();break;case 8:r.range=e.uint32();break;case 9:r.ownerWorldPos=e.uint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.planterStartPoint&&e.hasOwnProperty("planterStartPoint")&&!a.isInteger(e.planterStartPoint)?"planterStartPoint: integer expected":null!=e.gridX&&e.hasOwnProperty("gridX")&&!a.isInteger(e.gridX)?"gridX: integer expected":null!=e.gridY&&e.hasOwnProperty("gridY")&&!a.isInteger(e.gridY)?"gridY: integer expected":null!=e.srvTimePlanted&&e.hasOwnProperty("srvTimePlanted")&&!(a.isInteger(e.srvTimePlanted)||e.srvTimePlanted&&a.isInteger(e.srvTimePlanted.low)&&a.isInteger(e.srvTimePlanted.high))?"srvTimePlanted: integer|Long expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isInteger(e.type)?"type: integer expected":null!=e.range&&e.hasOwnProperty("range")&&!a.isInteger(e.range)?"range: integer expected":null!=e.ownerWorldPos&&e.hasOwnProperty("ownerWorldPos")&&!a.isInteger(e.ownerWorldPos)?"ownerWorldPos: integer expected":null},e.fromObject=function(e){if(e instanceof i.Client_PlantBomb)return e;var t=new i.Client_PlantBomb;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.planterStartPoint&&(t.planterStartPoint=e.planterStartPoint>>>0),null!=e.gridX&&(t.gridX=e.gridX>>>0),null!=e.gridY&&(t.gridY=e.gridY>>>0),null!=e.srvTimePlanted&&(a.Long?(t.srvTimePlanted=a.Long.fromValue(e.srvTimePlanted)).unsigned=!0:"string"==typeof e.srvTimePlanted?t.srvTimePlanted=parseInt(e.srvTimePlanted,10):"number"==typeof e.srvTimePlanted?t.srvTimePlanted=e.srvTimePlanted:"object"==typeof e.srvTimePlanted&&(t.srvTimePlanted=new a.LongBits(e.srvTimePlanted.low>>>0,e.srvTimePlanted.high>>>0).toNumber(!0))),null!=e.type&&(t.type=e.type>>>0),null!=e.range&&(t.range=e.range>>>0),null!=e.ownerWorldPos&&(t.ownerWorldPos=e.ownerWorldPos>>>0),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.message=0,o.gameID="",o.planterStartPoint=0,o.gridX=0,o.gridY=0,a.Long){var n=new a.Long(0,0,!0);o.srvTimePlanted=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.srvTimePlanted=t.longs===String?"0":0;o.type=0,o.range=0,o.ownerWorldPos=0}return null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.planterStartPoint&&e.hasOwnProperty("planterStartPoint")&&(o.planterStartPoint=e.planterStartPoint),null!=e.gridX&&e.hasOwnProperty("gridX")&&(o.gridX=e.gridX),null!=e.gridY&&e.hasOwnProperty("gridY")&&(o.gridY=e.gridY),null!=e.srvTimePlanted&&e.hasOwnProperty("srvTimePlanted")&&("number"==typeof e.srvTimePlanted?o.srvTimePlanted=t.longs===String?String(e.srvTimePlanted):e.srvTimePlanted:o.srvTimePlanted=t.longs===String?a.Long.prototype.toString.call(e.srvTimePlanted):t.longs===Number?new a.LongBits(e.srvTimePlanted.low>>>0,e.srvTimePlanted.high>>>0).toNumber(!0):e.srvTimePlanted),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.range&&e.hasOwnProperty("range")&&(o.range=e.range),null!=e.ownerWorldPos&&e.hasOwnProperty("ownerWorldPos")&&(o.ownerWorldPos=e.ownerWorldPos),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_ProvideGameMap=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.mapData=a.newBuffer([]),e.prototype.mapSize=0,e.prototype.finalShowdownTiles=0,e.prototype.matchDuration=0,e.prototype.extraDuration=0,e.prototype.finalShowdownDuration=0,e.prototype.bombDuration=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.mapData&&Object.hasOwnProperty.call(e,"mapData")&&t.uint32(26).bytes(e.mapData),null!=e.mapSize&&Object.hasOwnProperty.call(e,"mapSize")&&t.uint32(32).uint32(e.mapSize),null!=e.finalShowdownTiles&&Object.hasOwnProperty.call(e,"finalShowdownTiles")&&t.uint32(40).uint32(e.finalShowdownTiles),null!=e.matchDuration&&Object.hasOwnProperty.call(e,"matchDuration")&&t.uint32(48).uint32(e.matchDuration),null!=e.extraDuration&&Object.hasOwnProperty.call(e,"extraDuration")&&t.uint32(56).uint32(e.extraDuration),null!=e.finalShowdownDuration&&Object.hasOwnProperty.call(e,"finalShowdownDuration")&&t.uint32(64).uint32(e.finalShowdownDuration),null!=e.bombDuration&&Object.hasOwnProperty.call(e,"bombDuration")&&t.uint32(72).uint32(e.bombDuration),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_ProvideGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.mapData=e.bytes();break;case 4:r.mapSize=e.uint32();break;case 5:r.finalShowdownTiles=e.uint32();break;case 6:r.matchDuration=e.uint32();break;case 7:r.extraDuration=e.uint32();break;case 8:r.finalShowdownDuration=e.uint32();break;case 9:r.bombDuration=e.uint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.mapData&&e.hasOwnProperty("mapData")&&!(e.mapData&&"number"==typeof e.mapData.length||a.isString(e.mapData))?"mapData: buffer expected":null!=e.mapSize&&e.hasOwnProperty("mapSize")&&!a.isInteger(e.mapSize)?"mapSize: integer expected":null!=e.finalShowdownTiles&&e.hasOwnProperty("finalShowdownTiles")&&!a.isInteger(e.finalShowdownTiles)?"finalShowdownTiles: integer expected":null!=e.matchDuration&&e.hasOwnProperty("matchDuration")&&!a.isInteger(e.matchDuration)?"matchDuration: integer expected":null!=e.extraDuration&&e.hasOwnProperty("extraDuration")&&!a.isInteger(e.extraDuration)?"extraDuration: integer expected":null!=e.finalShowdownDuration&&e.hasOwnProperty("finalShowdownDuration")&&!a.isInteger(e.finalShowdownDuration)?"finalShowdownDuration: integer expected":null!=e.bombDuration&&e.hasOwnProperty("bombDuration")&&!a.isInteger(e.bombDuration)?"bombDuration: integer expected":null},e.fromObject=function(e){if(e instanceof i.Client_ProvideGameMap)return e;var t=new i.Client_ProvideGameMap;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.mapData&&("string"==typeof e.mapData?a.base64.decode(e.mapData,t.mapData=a.newBuffer(a.base64.length(e.mapData)),0):e.mapData.length&&(t.mapData=e.mapData)),null!=e.mapSize&&(t.mapSize=e.mapSize>>>0),null!=e.finalShowdownTiles&&(t.finalShowdownTiles=e.finalShowdownTiles>>>0),null!=e.matchDuration&&(t.matchDuration=e.matchDuration>>>0),null!=e.extraDuration&&(t.extraDuration=e.extraDuration>>>0),null!=e.finalShowdownDuration&&(t.finalShowdownDuration=e.finalShowdownDuration>>>0),null!=e.bombDuration&&(t.bombDuration=e.bombDuration>>>0),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.gameID="",t.bytes===String?o.mapData="":(o.mapData=[],t.bytes!==Array&&(o.mapData=a.newBuffer(o.mapData))),o.mapSize=0,o.finalShowdownTiles=0,o.matchDuration=0,o.extraDuration=0,o.finalShowdownDuration=0,o.bombDuration=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.mapData&&e.hasOwnProperty("mapData")&&(o.mapData=t.bytes===String?a.base64.encode(e.mapData,0,e.mapData.length):t.bytes===Array?Array.prototype.slice.call(e.mapData):e.mapData),null!=e.mapSize&&e.hasOwnProperty("mapSize")&&(o.mapSize=e.mapSize),null!=e.finalShowdownTiles&&e.hasOwnProperty("finalShowdownTiles")&&(o.finalShowdownTiles=e.finalShowdownTiles),null!=e.matchDuration&&e.hasOwnProperty("matchDuration")&&(o.matchDuration=e.matchDuration),null!=e.extraDuration&&e.hasOwnProperty("extraDuration")&&(o.extraDuration=e.extraDuration),null!=e.finalShowdownDuration&&e.hasOwnProperty("finalShowdownDuration")&&(o.finalShowdownDuration=e.finalShowdownDuration),null!=e.bombDuration&&e.hasOwnProperty("bombDuration")&&(o.bombDuration=e.bombDuration),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_BroadcastMessage=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.netID="",e.prototype.type="",e.prototype.payload="",e.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(34).string(e.type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_BroadcastMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.type=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!a.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(a.isInteger(e.timestamp)||e.timestamp&&a.isInteger(e.timestamp.low)&&a.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Client_BroadcastMessage)return e;var t=new i.Client_BroadcastMessage;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.type&&(t.type=String(e.type)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=0,o.gameID="",o.netID="",o.type="",o.payload="",a.Long){var n=new a.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?a.Long.prototype.toString.call(e.timestamp):t.longs===Number?new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_PlayerExitGame=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.netID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlayerExitGame;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null},e.fromObject=function(e){if(e instanceof i.Client_PlayerExitGame)return e;var t=new i.Client_PlayerExitGame;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_ClaimUniqueItem=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.playerNetID="",e.prototype.uniqueItemID="",e.prototype.uniqueItemInfo="",e.prototype.posInMap=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.uniqueItemID&&Object.hasOwnProperty.call(e,"uniqueItemID")&&t.uint32(34).string(e.uniqueItemID),null!=e.uniqueItemInfo&&Object.hasOwnProperty.call(e,"uniqueItemInfo")&&t.uint32(42).string(e.uniqueItemInfo),null!=e.posInMap&&Object.hasOwnProperty.call(e,"posInMap")&&t.uint32(48).uint32(e.posInMap),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_ClaimUniqueItem;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.uniqueItemID=e.string();break;case 5:r.uniqueItemInfo=e.string();break;case 6:r.posInMap=e.uint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!a.isString(e.playerNetID)?"playerNetID: string expected":null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&!a.isString(e.uniqueItemID)?"uniqueItemID: string expected":null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&!a.isString(e.uniqueItemInfo)?"uniqueItemInfo: string expected":null!=e.posInMap&&e.hasOwnProperty("posInMap")&&!a.isInteger(e.posInMap)?"posInMap: integer expected":null},e.fromObject=function(e){if(e instanceof i.Client_ClaimUniqueItem)return e;var t=new i.Client_ClaimUniqueItem;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.uniqueItemID&&(t.uniqueItemID=String(e.uniqueItemID)),null!=e.uniqueItemInfo&&(t.uniqueItemInfo=String(e.uniqueItemInfo)),null!=e.posInMap&&(t.posInMap=e.posInMap>>>0),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.gameID="",o.playerNetID="",o.uniqueItemID="",o.uniqueItemInfo="",o.posInMap=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&(o.uniqueItemID=e.uniqueItemID),null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&(o.uniqueItemInfo=e.uniqueItemInfo),null!=e.posInMap&&e.hasOwnProperty("posInMap")&&(o.posInMap=e.posInMap),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Client_PlayerStateData=function(){function e(e){if(this.playerData=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.netID="",e.prototype.playerData=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.playerData&&e.playerData.length)for(var o=0;o<e.playerData.length;++o)i.PlayerState.encode(e.playerData[o],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlayerStateData;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.playerData&&r.playerData.length||(r.playerData=[]),r.playerData.push(i.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message))return"message: integer expected";if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID))return"netID: string expected";if(null!=e.playerData&&e.hasOwnProperty("playerData")){if(!Array.isArray(e.playerData))return"playerData: array expected";for(var t=0;t<e.playerData.length;++t){var o=i.PlayerState.verify(e.playerData[t]);if(o)return"playerData."+o}}return null},e.fromObject=function(e){if(e instanceof i.Client_PlayerStateData)return e;var t=new i.Client_PlayerStateData;if(null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),e.playerData){if(!Array.isArray(e.playerData))throw TypeError(".Client_PlayerStateData.playerData: array expected");t.playerData=[];for(var o=0;o<e.playerData.length;++o){if("object"!=typeof e.playerData[o])throw TypeError(".Client_PlayerStateData.playerData: object expected");t.playerData[o]=i.PlayerState.fromObject(e.playerData[o])}}return t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerData=[]),t.defaults&&(o.message=0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),e.playerData&&e.playerData.length){o.playerData=[];for(var n=0;n<e.playerData.length;++n)o.playerData[n]=i.PlayerState.toObject(e.playerData[n],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_RequestGameMap=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_RequestGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null},e.fromObject=function(e){if(e instanceof i.Server_RequestGameMap)return e;var t=new i.Server_RequestGameMap;return null!=e.message&&(t.message=e.message>>>0),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_DeliverGameMap=function(){function e(e){if(this.explodedPosList=[],this.bombs=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.explodedPosList=a.emptyArray,e.prototype.mapData=a.newBuffer([]),e.prototype.bombs=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.explodedPosList&&e.explodedPosList.length){t.uint32(18).fork();for(var o=0;o<e.explodedPosList.length;++o)t.uint32(e.explodedPosList[o]);t.ldelim()}if(null!=e.mapData&&Object.hasOwnProperty.call(e,"mapData")&&t.uint32(26).bytes(e.mapData),null!=e.bombs&&e.bombs.length)for(o=0;o<e.bombs.length;++o)i.BombStatus.encode(e.bombs[o],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_DeliverGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:if(r.explodedPosList&&r.explodedPosList.length||(r.explodedPosList=[]),2==(7&a))for(var s=e.uint32()+e.pos;e.pos<s;)r.explodedPosList.push(e.uint32());else r.explodedPosList.push(e.uint32());break;case 3:r.mapData=e.bytes();break;case 4:r.bombs&&r.bombs.length||(r.bombs=[]),r.bombs.push(i.BombStatus.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message))return"message: integer expected";if(null!=e.explodedPosList&&e.hasOwnProperty("explodedPosList")){if(!Array.isArray(e.explodedPosList))return"explodedPosList: array expected";for(var t=0;t<e.explodedPosList.length;++t)if(!a.isInteger(e.explodedPosList[t]))return"explodedPosList: integer[] expected"}if(null!=e.mapData&&e.hasOwnProperty("mapData")&&!(e.mapData&&"number"==typeof e.mapData.length||a.isString(e.mapData)))return"mapData: buffer expected";if(null!=e.bombs&&e.hasOwnProperty("bombs")){if(!Array.isArray(e.bombs))return"bombs: array expected";for(t=0;t<e.bombs.length;++t){var o=i.BombStatus.verify(e.bombs[t]);if(o)return"bombs."+o}}return null},e.fromObject=function(e){if(e instanceof i.Server_DeliverGameMap)return e;var t=new i.Server_DeliverGameMap;if(null!=e.message&&(t.message=e.message>>>0),e.explodedPosList){if(!Array.isArray(e.explodedPosList))throw TypeError(".Server_DeliverGameMap.explodedPosList: array expected");t.explodedPosList=[];for(var o=0;o<e.explodedPosList.length;++o)t.explodedPosList[o]=e.explodedPosList[o]>>>0}if(null!=e.mapData&&("string"==typeof e.mapData?a.base64.decode(e.mapData,t.mapData=a.newBuffer(a.base64.length(e.mapData)),0):e.mapData.length&&(t.mapData=e.mapData)),e.bombs){if(!Array.isArray(e.bombs))throw TypeError(".Server_DeliverGameMap.bombs: array expected");for(t.bombs=[],o=0;o<e.bombs.length;++o){if("object"!=typeof e.bombs[o])throw TypeError(".Server_DeliverGameMap.bombs: object expected");t.bombs[o]=i.BombStatus.fromObject(e.bombs[o])}}return t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.explodedPosList=[],o.bombs=[]),t.defaults&&(o.message=0,t.bytes===String?o.mapData="":(o.mapData=[],t.bytes!==Array&&(o.mapData=a.newBuffer(o.mapData)))),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),e.explodedPosList&&e.explodedPosList.length){o.explodedPosList=[];for(var n=0;n<e.explodedPosList.length;++n)o.explodedPosList[n]=e.explodedPosList[n]}if(null!=e.mapData&&e.hasOwnProperty("mapData")&&(o.mapData=t.bytes===String?a.base64.encode(e.mapData,0,e.mapData.length):t.bytes===Array?Array.prototype.slice.call(e.mapData):e.mapData),e.bombs&&e.bombs.length)for(o.bombs=[],n=0;n<e.bombs.length;++n)o.bombs[n]=i.BombStatus.toObject(e.bombs[n],t);return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_MapShrinked=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.curRound=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.curRound&&Object.hasOwnProperty.call(e,"curRound")&&t.uint32(16).uint32(e.curRound),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_MapShrinked;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.curRound=e.uint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.curRound&&e.hasOwnProperty("curRound")&&!a.isInteger(e.curRound)?"curRound: integer expected":null},e.fromObject=function(e){if(e instanceof i.Server_MapShrinked)return e;var t=new i.Server_MapShrinked;return null!=e.message&&(t.message=e.message>>>0),null!=e.curRound&&(t.curRound=e.curRound>>>0),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.curRound=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.curRound&&e.hasOwnProperty("curRound")&&(o.curRound=e.curRound),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_FullGameState=function(){function e(e){if(this.playerState=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.gameClock=0,e.prototype.gameState="",e.prototype.gameStateMsgID=0,e.prototype.playerState=a.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameClock&&Object.hasOwnProperty.call(e,"gameClock")&&t.uint32(24).uint32(e.gameClock),null!=e.gameState&&Object.hasOwnProperty.call(e,"gameState")&&t.uint32(34).string(e.gameState),null!=e.gameStateMsgID&&Object.hasOwnProperty.call(e,"gameStateMsgID")&&t.uint32(40).uint32(e.gameStateMsgID),null!=e.playerState&&e.playerState.length)for(var o=0;o<e.playerState.length;++o)i.PlayerState.encode(e.playerState[o],t.uint32(50).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_FullGameState;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.gameClock=e.uint32();break;case 4:r.gameState=e.string();break;case 5:r.gameStateMsgID=e.uint32();break;case 6:r.playerState&&r.playerState.length||(r.playerState=[]),r.playerState.push(i.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message))return"message: integer expected";if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.gameClock&&e.hasOwnProperty("gameClock")&&!a.isInteger(e.gameClock))return"gameClock: integer expected";if(null!=e.gameState&&e.hasOwnProperty("gameState")&&!a.isString(e.gameState))return"gameState: string expected";if(null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&!a.isInteger(e.gameStateMsgID))return"gameStateMsgID: integer expected";if(null!=e.playerState&&e.hasOwnProperty("playerState")){if(!Array.isArray(e.playerState))return"playerState: array expected";for(var t=0;t<e.playerState.length;++t){var o=i.PlayerState.verify(e.playerState[t]);if(o)return"playerState."+o}}return null},e.fromObject=function(e){if(e instanceof i.Server_FullGameState)return e;var t=new i.Server_FullGameState;if(null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameClock&&(t.gameClock=e.gameClock>>>0),null!=e.gameState&&(t.gameState=String(e.gameState)),null!=e.gameStateMsgID&&(t.gameStateMsgID=e.gameStateMsgID>>>0),e.playerState){if(!Array.isArray(e.playerState))throw TypeError(".Server_FullGameState.playerState: array expected");t.playerState=[];for(var o=0;o<e.playerState.length;++o){if("object"!=typeof e.playerState[o])throw TypeError(".Server_FullGameState.playerState: object expected");t.playerState[o]=i.PlayerState.fromObject(e.playerState[o])}}return t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerState=[]),t.defaults&&(o.message=0,o.gameID="",o.gameClock=0,o.gameState="",o.gameStateMsgID=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameClock&&e.hasOwnProperty("gameClock")&&(o.gameClock=e.gameClock),null!=e.gameState&&e.hasOwnProperty("gameState")&&(o.gameState=e.gameState),null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&(o.gameStateMsgID=e.gameStateMsgID),e.playerState&&e.playerState.length){o.playerState=[];for(var n=0;n<e.playerState.length;++n)o.playerState[n]=i.PlayerState.toObject(e.playerState[n],t)}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_OrderCreateBot=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.botID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.botID&&Object.hasOwnProperty.call(e,"botID")&&t.uint32(18).string(e.botID),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_OrderCreateBot;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.botID=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.botID&&e.hasOwnProperty("botID")&&!a.isString(e.botID)?"botID: string expected":null},e.fromObject=function(e){if(e instanceof i.Server_OrderCreateBot)return e;var t=new i.Server_OrderCreateBot;return null!=e.message&&(t.message=e.message>>>0),null!=e.botID&&(t.botID=String(e.botID)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.botID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.botID&&e.hasOwnProperty("botID")&&(o.botID=e.botID),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_HandoverBot=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.botNetID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.botNetID&&Object.hasOwnProperty.call(e,"botNetID")&&t.uint32(18).string(e.botNetID),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_HandoverBot;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.botNetID=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.botNetID&&e.hasOwnProperty("botNetID")&&!a.isString(e.botNetID)?"botNetID: string expected":null},e.fromObject=function(e){if(e instanceof i.Server_HandoverBot)return e;var t=new i.Server_HandoverBot;return null!=e.message&&(t.message=e.message>>>0),null!=e.botNetID&&(t.botNetID=String(e.botNetID)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.botNetID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.botNetID&&e.hasOwnProperty("botNetID")&&(o.botNetID=e.botNetID),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_GameStartingStatus=function(){function e(e){if(this.PlayerStartingDatas=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.gameParameters=null,e.prototype.PlayerStartingDatas=a.emptyArray,e.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameParameters&&Object.hasOwnProperty.call(e,"gameParameters")&&i.Server_GameStartingStatus.GAMEPARAMETER.encode(e.gameParameters,t.uint32(26).fork()).ldelim(),null!=e.PlayerStartingDatas&&e.PlayerStartingDatas.length)for(var o=0;o<e.PlayerStartingDatas.length;++o)i.PlayerStartingData.encode(e.PlayerStartingDatas[o],t.uint32(34).fork()).ldelim();return null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_GameStartingStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.decode(e,e.uint32());break;case 4:r.PlayerStartingDatas&&r.PlayerStartingDatas.length||(r.PlayerStartingDatas=[]),r.PlayerStartingDatas.push(i.PlayerStartingData.decode(e,e.uint32()));break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message))return"message: integer expected";if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o=i.Server_GameStartingStatus.GAMEPARAMETER.verify(e.gameParameters)))return"gameParameters."+o;if(null!=e.PlayerStartingDatas&&e.hasOwnProperty("PlayerStartingDatas")){if(!Array.isArray(e.PlayerStartingDatas))return"PlayerStartingDatas: array expected";for(var t=0;t<e.PlayerStartingDatas.length;++t){var o;if(o=i.PlayerStartingData.verify(e.PlayerStartingDatas[t]))return"PlayerStartingDatas."+o}}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Server_GameStartingStatus)return e;var t=new i.Server_GameStartingStatus;if(null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameParameters){if("object"!=typeof e.gameParameters)throw TypeError(".Server_GameStartingStatus.gameParameters: object expected");t.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.fromObject(e.gameParameters)}if(e.PlayerStartingDatas){if(!Array.isArray(e.PlayerStartingDatas))throw TypeError(".Server_GameStartingStatus.PlayerStartingDatas: array expected");t.PlayerStartingDatas=[];for(var o=0;o<e.PlayerStartingDatas.length;++o){if("object"!=typeof e.PlayerStartingDatas[o])throw TypeError(".Server_GameStartingStatus.PlayerStartingDatas: object expected");t.PlayerStartingDatas[o]=i.PlayerStartingData.fromObject(e.PlayerStartingDatas[o])}}return null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.PlayerStartingDatas=[]),t.defaults)if(o.message=0,o.gameID="",o.gameParameters=null,a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;if(null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.toObject(e.gameParameters,t)),e.PlayerStartingDatas&&e.PlayerStartingDatas.length){o.PlayerStartingDatas=[];for(var r=0;r<e.PlayerStartingDatas.length;++r)o.PlayerStartingDatas[r]=i.PlayerStartingData.toObject(e.PlayerStartingDatas[r],t)}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e.GAMEPARAMETER=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.gameMinPlayers=0,e.prototype.gameMaxPlayers=0,e.prototype.timeGameStart=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.gameMinPlayers&&Object.hasOwnProperty.call(e,"gameMinPlayers")&&t.uint32(0).int32(e.gameMinPlayers),null!=e.gameMaxPlayers&&Object.hasOwnProperty.call(e,"gameMaxPlayers")&&t.uint32(8).int32(e.gameMaxPlayers),null!=e.timeGameStart&&Object.hasOwnProperty.call(e,"timeGameStart")&&t.uint32(16).uint64(e.timeGameStart),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_GameStartingStatus.GAMEPARAMETER;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.gameMinPlayers=e.int32();break;case 1:r.gameMaxPlayers=e.int32();break;case 2:r.timeGameStart=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&!a.isInteger(e.gameMinPlayers)?"gameMinPlayers: integer expected":null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&!a.isInteger(e.gameMaxPlayers)?"gameMaxPlayers: integer expected":null!=e.timeGameStart&&e.hasOwnProperty("timeGameStart")&&!(a.isInteger(e.timeGameStart)||e.timeGameStart&&a.isInteger(e.timeGameStart.low)&&a.isInteger(e.timeGameStart.high))?"timeGameStart: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Server_GameStartingStatus.GAMEPARAMETER)return e;var t=new i.Server_GameStartingStatus.GAMEPARAMETER;return null!=e.gameMinPlayers&&(t.gameMinPlayers=0|e.gameMinPlayers),null!=e.gameMaxPlayers&&(t.gameMaxPlayers=0|e.gameMaxPlayers),null!=e.timeGameStart&&(a.Long?(t.timeGameStart=a.Long.fromValue(e.timeGameStart)).unsigned=!0:"string"==typeof e.timeGameStart?t.timeGameStart=parseInt(e.timeGameStart,10):"number"==typeof e.timeGameStart?t.timeGameStart=e.timeGameStart:"object"==typeof e.timeGameStart&&(t.timeGameStart=new a.LongBits(e.timeGameStart.low>>>0,e.timeGameStart.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.gameMinPlayers=0,o.gameMaxPlayers=0,a.Long){var n=new a.Long(0,0,!0);o.timeGameStart=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timeGameStart=t.longs===String?"0":0;return null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&(o.gameMinPlayers=e.gameMinPlayers),null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&(o.gameMaxPlayers=e.gameMaxPlayers),null!=e.timeGameStart&&e.hasOwnProperty("timeGameStart")&&("number"==typeof e.timeGameStart?o.timeGameStart=t.longs===String?String(e.timeGameStart):e.timeGameStart:o.timeGameStart=t.longs===String?a.Long.prototype.toString.call(e.timeGameStart):t.longs===Number?new a.LongBits(e.timeGameStart.low>>>0,e.timeGameStart.high>>>0).toNumber(!0):e.timeGameStart),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),e}(),i.Server_Ping=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.id="",e.prototype.pong=!1,e.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(32).uint64(e.serverTime),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_Ping;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;case 4:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.id&&e.hasOwnProperty("id")&&!a.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Server_Ping)return e;var t=new i.Server_Ping;return null!=e.message&&(t.message=e.message>>>0),null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=0,o.id="",o.pong=!1,a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_UniqueItemClaimed=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.playerNetID="",e.prototype.uniqueItemID="",e.prototype.uniqueItemInfo="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.uniqueItemID&&Object.hasOwnProperty.call(e,"uniqueItemID")&&t.uint32(34).string(e.uniqueItemID),null!=e.uniqueItemInfo&&Object.hasOwnProperty.call(e,"uniqueItemInfo")&&t.uint32(42).string(e.uniqueItemInfo),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_UniqueItemClaimed;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.uniqueItemID=e.string();break;case 5:r.uniqueItemInfo=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!a.isString(e.playerNetID)?"playerNetID: string expected":null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&!a.isString(e.uniqueItemID)?"uniqueItemID: string expected":null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&!a.isString(e.uniqueItemInfo)?"uniqueItemInfo: string expected":null},e.fromObject=function(e){if(e instanceof i.Server_UniqueItemClaimed)return e;var t=new i.Server_UniqueItemClaimed;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.uniqueItemID&&(t.uniqueItemID=String(e.uniqueItemID)),null!=e.uniqueItemInfo&&(t.uniqueItemInfo=String(e.uniqueItemInfo)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.gameID="",o.playerNetID="",o.uniqueItemID="",o.uniqueItemInfo=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&(o.uniqueItemID=e.uniqueItemID),null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&(o.uniqueItemInfo=e.uniqueItemInfo),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_BroadcastMessage=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.gameID="",e.prototype.type="",e.prototype.playerID="",e.prototype.payload="",e.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(26).string(e.type),null!=e.playerID&&Object.hasOwnProperty.call(e,"playerID")&&t.uint32(34).string(e.playerID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_BroadcastMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.gameID=e.string();break;case 3:r.type=e.string();break;case 4:r.playerID=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.playerID&&e.hasOwnProperty("playerID")&&!a.isString(e.playerID)?"playerID: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!a.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(a.isInteger(e.timestamp)||e.timestamp&&a.isInteger(e.timestamp.low)&&a.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Server_BroadcastMessage)return e;var t=new i.Server_BroadcastMessage;return null!=e.message&&(t.message=e.message>>>0),null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.type&&(t.type=String(e.type)),null!=e.playerID&&(t.playerID=String(e.playerID)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=0,o.gameID="",o.type="",o.playerID="",o.payload="",a.Long){var n=new a.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.playerID&&e.hasOwnProperty("playerID")&&(o.playerID=e.playerID),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?a.Long.prototype.toString.call(e.timestamp):t.longs===Number?new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_PartyStatus=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.partyID="",e.prototype.partyParamemters="",e.prototype.playerList="",e.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.partyID&&Object.hasOwnProperty.call(e,"partyID")&&t.uint32(18).string(e.partyID),null!=e.partyParamemters&&Object.hasOwnProperty.call(e,"partyParamemters")&&t.uint32(26).string(e.partyParamemters),null!=e.playerList&&Object.hasOwnProperty.call(e,"playerList")&&t.uint32(34).string(e.playerList),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_PartyStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.partyID=e.string();break;case 3:r.partyParamemters=e.string();break;case 4:r.playerList=e.string();break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.partyID&&e.hasOwnProperty("partyID")&&!a.isString(e.partyID)?"partyID: string expected":null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&!a.isString(e.partyParamemters)?"partyParamemters: string expected":null!=e.playerList&&e.hasOwnProperty("playerList")&&!a.isString(e.playerList)?"playerList: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},e.fromObject=function(e){if(e instanceof i.Server_PartyStatus)return e;var t=new i.Server_PartyStatus;return null!=e.message&&(t.message=e.message>>>0),null!=e.partyID&&(t.partyID=String(e.partyID)),null!=e.partyParamemters&&(t.partyParamemters=String(e.partyParamemters)),null!=e.playerList&&(t.playerList=String(e.playerList)),null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=0,o.partyID="",o.partyParamemters="",o.playerList="",a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.partyID&&e.hasOwnProperty("partyID")&&(o.partyID=e.partyID),null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&(o.partyParamemters=e.partyParamemters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.ServerMessage_TechMessage=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.type="",e.prototype.title="",e.prototype.description="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).string(e.title),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(34).string(e.description),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.ServerMessage_TechMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.type=e.string();break;case 3:r.title=e.string();break;case 4:r.description=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.title&&e.hasOwnProperty("title")&&!a.isString(e.title)?"title: string expected":null!=e.description&&e.hasOwnProperty("description")&&!a.isString(e.description)?"description: string expected":null},e.fromObject=function(e){if(e instanceof i.ServerMessage_TechMessage)return e;var t=new i.ServerMessage_TechMessage;return null!=e.message&&(t.message=e.message>>>0),null!=e.type&&(t.type=String(e.type)),null!=e.title&&(t.title=String(e.title)),null!=e.description&&(t.description=String(e.description)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.type="",o.title="",o.description=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.title&&e.hasOwnProperty("title")&&(o.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(o.description=e.description),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),i.Server_RoomInit=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.message=0,e.prototype.playerID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).uint32(e.message),null!=e.playerID&&Object.hasOwnProperty.call(e,"playerID")&&t.uint32(18).string(e.playerID),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_RoomInit;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.uint32();break;case 2:r.playerID=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isInteger(e.message)?"message: integer expected":null!=e.playerID&&e.hasOwnProperty("playerID")&&!a.isString(e.playerID)?"playerID: string expected":null},e.fromObject=function(e){if(e instanceof i.Server_RoomInit)return e;var t=new i.Server_RoomInit;return null!=e.message&&(t.message=e.message>>>0),null!=e.playerID&&(t.playerID=String(e.playerID)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=0,o.playerID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=e.message),null!=e.playerID&&e.hasOwnProperty("playerID")&&(o.playerID=e.playerID),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),t.exports=i,cc._RF.pop()},{"protobufjs/minimal":101}],ASBMessages:[function(e,t,o){"use strict";cc._RF.push(t,"f9336mN3qZLLqvG7x1+x886","ASBMessages"),Object.defineProperty(o,"__esModule",{value:!0}),o.Msg_Server_RoomInit=o.Msg_ServerMessage_TechMessage=o.Msg_Server_PartyStatus=o.Msg_Server_BroadcastMessage=o.Msg_Server_UniqueItemClaimed=o.Msg_Server_Ping=o.Msg_Server_GameStartingStatus=o.Msg_Server_HandoverBot=o.Msg_Server_OrderCreateBot=o.Msg_Server_FullGameState=o.Msg_Server_MapShrinked=o.Msg_Server_DeliverGameMap=o.Msg_Server_RequestGameMap=o.Msg_Client_PlayerStateData=o.Msg_Client_PlayerExitGame=o.Msg_Client_BroadcastMessage=o.Msg_Client_ProvideGameMap=o.Msg_Client_ClaimUniqueItem=o.Msg_Client_PlantBomb=o.Msg_Client_Ping=o.Msg_Client_RequestCreateBot=o.MapObjectType=o.MessageType=void 0;var n,r=e("./ASBMessageDefines");(function(e){e[e.CLIENT_REQUESTJOINGAME=21]="CLIENT_REQUESTJOINGAME",e[e.CLIENT_PING=22]="CLIENT_PING",e[e.CLIENT_SENDVERSION=23]="CLIENT_SENDVERSION",e[e.CLIENT_PLAYERSTATEDATA=24]="CLIENT_PLAYERSTATEDATA",e[e.CLIENT_PLAYERSTATEDATA_MULTI=25]="CLIENT_PLAYERSTATEDATA_MULTI",e[e.CLIENT_EXITGAME=26]="CLIENT_EXITGAME",e[e.CLIENT_BROADCASTMESSAGE=27]="CLIENT_BROADCASTMESSAGE",e[e.SERVER_GAMESTARTINGSTATUS=28]="SERVER_GAMESTARTINGSTATUS",e[e.SERVER_PING=29]="SERVER_PING",e[e.SERVER_FULLGAMESTATE=30]="SERVER_FULLGAMESTATE",e[e.SERVER_ORDERCREATEBOT=31]="SERVER_ORDERCREATEBOT",e[e.SERVER_HANDOVERBOT=32]="SERVER_HANDOVERBOT",e[e.SERVER_BROADCASTMESSAGE=33]="SERVER_BROADCASTMESSAGE",e[e.SERVER_CHECKVERSION=34]="SERVER_CHECKVERSION",e[e.CLIENT_REQUESTCREATEBOT=35]="CLIENT_REQUESTCREATEBOT",e[e.CLIENT_SENDMESSAGETOPARTY=36]="CLIENT_SENDMESSAGETOPARTY",e[e.SERVER_PARTYSTATUS=37]="SERVER_PARTYSTATUS",e[e.CLIENT_CLAIM_UNIQUE_ITEM=38]="CLIENT_CLAIM_UNIQUE_ITEM",e[e.SERVER_UNIQUE_ITEM_CLAIMED=39]="SERVER_UNIQUE_ITEM_CLAIMED",e[e.SERVER_REQUESTGAMEMAP=40]="SERVER_REQUESTGAMEMAP",e[e.CLIENT_PROVIDEGAMEMAP=41]="CLIENT_PROVIDEGAMEMAP",e[e.SERVER_DELIVERGAMEMAP=42]="SERVER_DELIVERGAMEMAP",e[e.SERVER_MAPSHRINKED=43]="SERVER_MAPSHRINKED",e[e.CLIENT_PLANTBOMB=44]="CLIENT_PLANTBOMB",e[e.NONE=45]="NONE",e[e.SERVER_ROOMINIT=46]="SERVER_ROOMINIT"})(n=o.MessageType||(o.MessageType={})),function(e){e[e.EMPTY=1]="EMPTY",e[e.FLOOR=2]="FLOOR",e[e.BORDER=3]="BORDER",e[e.HARD_BLOCK=4]="HARD_BLOCK",e[e.PLAYER=11]="PLAYER",e[e.BOMB=12]="BOMB",e[e.EXPLOSION=13]="EXPLOSION",e[e.PU_BOMB_RANGE=21]="PU_BOMB_RANGE",e[e.PU_BOMB_NUMBER=22]="PU_BOMB_NUMBER",e[e.PU_MOVE_SPEED=23]="PU_MOVE_SPEED",e[e.PU_HEART=24]="PU_HEART",e[e.PU_BOMB_PIERCE=25]="PU_BOMB_PIERCE",e[e.PU_BOMB_PASS=26]="PU_BOMB_PASS",e[e.PU_BOMB_DANGER=27]="PU_BOMB_DANGER",e[e.PU_BOMB_POWER=28]="PU_BOMB_POWER",e[e.PD_BOMB_RANGE=41]="PD_BOMB_RANGE",e[e.PD_BOMB_NUMBER=42]="PD_BOMB_NUMBER",e[e.PD_MOVE_SPEED=43]="PD_MOVE_SPEED",e[e.NEG_SLOW=44]="NEG_SLOW",e[e.SOFT_BLOCK=64]="SOFT_BLOCK",e[e.AI_DANGEROUS=128]="AI_DANGEROUS"}(o.MapObjectType||(o.MapObjectType={})),o.Msg_Client_RequestCreateBot=function(e,t,o){var a=r.Client_RequestCreateBot.create({message:n.CLIENT_REQUESTCREATEBOT,botID:e,name:t,skin:o});return r.Client_RequestCreateBot.encode(a).finish()},o.Msg_Client_Ping=function(){},o.Msg_Client_PlantBomb=function(e,t,o,a,i,s,c,l){var u=r.Client_PlantBomb.create({message:n.CLIENT_PLANTBOMB,gameID:e,planterStartPoint:t,gridX:o,gridY:a,srvTimePlanted:i,type:s,range:c,ownerWorldPos:l});return r.Client_PlantBomb.encode(u).finish()},o.Msg_Client_ClaimUniqueItem=function(e,t,o,a,i){var s=r.Client_ClaimUniqueItem.create({message:n.CLIENT_CLAIM_UNIQUE_ITEM,gameID:e,playerNetID:t,uniqueItemID:o,uniqueItemInfo:a,posInMap:i});return r.Client_ClaimUniqueItem.encode(s).finish()},o.Msg_Client_ProvideGameMap=function(e,t,o,a,i,s,c,l){var u=r.Client_ProvideGameMap.create({message:n.CLIENT_PROVIDEGAMEMAP,gameID:e,mapData:t,mapSize:o,finalShowdownTiles:a,matchDuration:i,extraDuration:s,finalShowdownDuration:c,bombDuration:l});return r.Client_ProvideGameMap.encode(u).finish()},o.Msg_Client_BroadcastMessage=function(){},o.Msg_Client_PlayerExitGame=function(){},o.Msg_Client_PlayerStateData=function(e,t){var o=r.Client_PlayerStateData.create({message:n.CLIENT_PLAYERSTATEDATA,gameID:t,playerData:e});return r.Client_PlayerStateData.encode(o).finish()},o.Msg_Server_RequestGameMap=function(){var e=r.Server_RequestGameMap.create({message:n.SERVER_REQUESTGAMEMAP});return r.Server_RequestGameMap.encode(e).finish()},o.Msg_Server_DeliverGameMap=function(e,t,o){var a=r.Server_DeliverGameMap.create({message:n.SERVER_DELIVERGAMEMAP,explodedPosList:e,mapData:t,bombs:o});return r.Server_DeliverGameMap.encode(a).finish()},o.Msg_Server_MapShrinked=function(e){var t=r.Server_MapShrinked.create({message:n.SERVER_MAPSHRINKED,curRound:e});return r.Server_MapShrinked.encode(t).finish()},o.Msg_Server_FullGameState=function(e,t,o,a,i){for(var s=r.Server_FullGameState.create({message:n.SERVER_FULLGAMESTATE,gameID:e,gameClock:t,gameState:o,gameStateMsgID:a,playerState:[]}),c=0,l=i;c<l.length;c++){var u=l[c];u.position=r.POSITION.create(u.position),s.playerState.push(r.PlayerState.create(u))}return r.Server_FullGameState.encode(s).finish()},o.Msg_Server_OrderCreateBot=function(e){var t=r.Server_OrderCreateBot.create({message:n.SERVER_ORDERCREATEBOT,botID:e});return r.Server_OrderCreateBot.encode(t).finish()},o.Msg_Server_HandoverBot=function(e){var t=r.Server_HandoverBot.create({message:n.SERVER_HANDOVERBOT,botNetID:e});return r.Server_HandoverBot.encode(t).finish()},o.Msg_Server_GameStartingStatus=function(e,t,o,a){var i=r.Server_GameStartingStatus.create({message:n.SERVER_GAMESTARTINGSTATUS,gameID:e,gameParameters:r.Server_GameStartingStatus.GAMEPARAMETER.create(t),PlayerStartingDatas:o,serverTime:a});return r.Server_GameStartingStatus.encode(i).finish()},o.Msg_Server_Ping=function(){},o.Msg_Server_UniqueItemClaimed=function(e,t,o,a){var i=r.Server_UniqueItemClaimed.create({message:n.SERVER_UNIQUE_ITEM_CLAIMED,gameID:e,playerNetID:t,uniqueItemID:o,uniqueItemInfo:a});return r.Server_UniqueItemClaimed.encode(i).finish()},o.Msg_Server_BroadcastMessage=function(){},o.Msg_Server_PartyStatus=function(){},o.Msg_ServerMessage_TechMessage=function(){},o.Msg_Server_RoomInit=function(e){var t=r.Server_RoomInit.create({message:n.SERVER_ROOMINIT,playerID:e});return r.Server_RoomInit.encode(t).finish()},cc._RF.pop()},{"./ASBMessageDefines":"ASBMessageDefines"}],AStarNodeBase:[function(e,t,o){"use strict";cc._RF.push(t,"e7222/cEY5HZpuBNdCBQhIi","AStarNodeBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.AStarNodeBase=void 0;var n=function(){function e(e){this._f=0,this._g=0,this._h=0,this.cameFrom=null,this.owner=null,this.owner=e}return e.prototype.clear=function(){},Object.defineProperty(e.prototype,"f",{get:function(){return this._f},set:function(e){this._f=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this._g},set:function(e){this._g=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"h",{get:function(){return this._h},set:function(e){this._h=e},enumerable:!1,configurable:!0}),e.prototype.reconstructPath=function(){for(var e=[],t=this;t&&e.length<=1e4;)e.unshift(t),t=t.cameFrom,1e4===e.length&&cc.error("Why path lenght is very HUGE");return e},e}();o.AStarNodeBase=n,cc._RF.pop()},{}],AStarNode_UASB:[function(e,t,o){"use strict";cc._RF.push(t,"3f134y0pyRDAIAbh6J2PBT4","AStarNode_UASB");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AStarNode_UASB=void 0;var a=e("../GameObjects/GameObjectBase"),i=e("./AStarNodeBase"),s=e("./MapManager"),c=function(e){function t(t,o,n){var r=e.call(this,n)||this;return r.neighbors=[],r.x=t,r.y=o,r.owner=n,r}return r(t,e),t.prototype.getID=function(){return this.x+","+this.y},t.prototype.estimateCostToNode=function(e){return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)},t.prototype.calcActualCostToNeighbor=function(e){if(!e.isNeighbor(this))return console.error("AStar error: Invalid neighbor"),Number.MAX_VALUE;var o=this.owner,n=o.refPlayer,r=(s.default.inst.getBoard(this.x,this.y),s.default.inst.getBoard(e.x,e.y)),i=n.tilesDistanceToPos({x:e.x,y:e.y});return n.canSeeGameObjectFromDist(r,i)?r==a.GameObjectType.Block_Hard?Number.MAX_VALUE:r==a.GameObjectType.Block_Border?Number.MAX_VALUE:r==a.GameObjectType.Block_Soft?o.assumePassSoftBlocks?t.SOFT_BLOCK_COST:Number.MAX_VALUE:r==a.GameObjectType.Bomb?t.BOMB_COST:r==a.GameObjectType.Explosion?t.EXPLOSION_COST:r==a.GameObjectType.PU_Bomb_Number||r==a.GameObjectType.PU_Bomb_Pierce||r==a.GameObjectType.PU_Bomb_Range||r==a.GameObjectType.PD_Bomb_Number||r==a.GameObjectType.PD_Mov_Speed||r==a.GameObjectType.PD_Bomb_Range?t.POWERUP_COST:t.EMPTY_COST:t.UNKNOWN_COST},t.prototype.isSameLocation=function(e){return e.x==this.x&&e.y==this.y},t.prototype.isNeighbor=function(e){return 1==Math.abs(e.x-this.x)+Math.abs(e.y-this.y)},t.prototype.getNeighbors=function(){if(this.neighbors.length>0)return this.neighbors;var e=this.owner,t=e.getNode(this.x-1,this.y),o=e.getNode(this.x+1,this.y),n=e.getNode(this.x,this.y-1),r=e.getNode(this.x,this.y+1);return t&&this.neighbors.push(t),o&&this.neighbors.push(o),n&&this.neighbors.push(n),r&&this.neighbors.push(r),this.neighbors},t.EMPTY_COST=3,t.SOFT_BLOCK_COST=8,t.BOMB_COST=20,t.EXPLOSION_COST=5,t.POWERUP_COST=1,t.UNKNOWN_COST=2,t}(i.AStarNodeBase);o.AStarNode_UASB=c,cc._RF.pop()},{"../GameObjects/GameObjectBase":"GameObjectBase","./AStarNodeBase":"AStarNodeBase","./MapManager":"MapManager"}],AStar_UASB:[function(e,t,o){"use strict";cc._RF.push(t,"9d910TCd85GconJIY7ndUVV","AStar_UASB");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AStar_UASB=void 0;var a=e("./AStar"),i=e("./AStarNode_UASB"),s=function(e){function t(t,o){var n=e.call(this)||this;n.nodeGrid=[],n.xdim=0,n.ydim=0,n.refPlayer=null,n.assumePassSoftBlocks=!1,n.xdim=t,n.ydim=o;for(var r=0;r<n.xdim;r++){n.nodeGrid[r]=[];for(var a=n.nodeGrid[r],s=0;s<n.ydim;s++){var c=new i.AStarNode_UASB(r,s,n);a.push(c)}}return n}return r(t,e),t.prototype.findPathForPlayer=function(e,o,n,r){this.refPlayer=e;var i=this.getNode(o,n),s=this.getNode(e.posInMap.x,e.posInMap.y);this.assumePassSoftBlocks=r;var c=a.AStar.totalNeighbors,l=this.calcPath(s,i,t.maxEstDist),u=a.AStar.totalNeighbors-c;return s.isSameLocation(i)?null:(u>2e3&&(console.log("WHAT THHE HELL? "),l=this.calcPath(s,i,t.maxEstDist)),this.refPlayer=null,l)},t.prototype.getNode=function(e,t){return e<0?null:e>=this.xdim?null:t<0?null:t>=this.ydim?null:this.nodeGrid[e][t]},t.maxEstDist=10,t}(a.AStar);o.AStar_UASB=s,cc._RF.pop()},{"./AStar":"AStar","./AStarNode_UASB":"AStarNode_UASB"}],AStar:[function(e,t,o){"use strict";cc._RF.push(t,"41d03+KzQlMIIzaa3U0xKH0","AStar"),Object.defineProperty(o,"__esModule",{value:!0}),o.AStar=void 0;var n=e("../Main"),r=e("collections/sorted-array"),a=function(){function e(){this.limitEstimatedCost=0}return e.DebugWorkStatsReporting=function(){e.lastFrameStatsReported!=n.Main.inst.frameCounter&&(e.reportStats(),e.clearStats(),e.lastFrameStatsReported=n.Main.inst.frameCounter)},e.clearStats=function(){e.totalBestFScoreFinds=0,e.totalPathFinds=0,e.totalNeighbors=0,e.fromTo=[]},e.reportStats=function(){var t="Frame  "+n.Main.inst.frameCounter;t+="/ PathFinds = "+e.totalPathFinds,t+="/ BestFScoreFinds = "+e.totalBestFScoreFinds,t+="/ TotalNeighbors = "+e.totalNeighbors,console.log(t)},e.prototype.findLowestFScore=function(t){e.totalBestFScoreFinds++;for(var o=Number.MAX_VALUE,n=-1,r=t.length,a=0;a<r;a++){var i=t[a];i.f<o&&(o=i.f,n=a)}return t[n]},e.prototype.findLowestFScoreMap=function(t){e.totalBestFScoreFinds++;var o=Number.MAX_VALUE,n=null;return t.forEach(function(e){var t=e;t.f<o&&(o=t.f,n=e)}),n},e.prototype.calcPath_Map=function(t,o){e.totalPathFinds++;var n=new Map,r=new Map;for(t.f=t.g=t.h=0,t.cameFrom=null,n.set(t.getID(),t);n.size>0;){var a=this.findLowestFScoreMap(n);if(a.isSameLocation(o))return a.reconstructPath();n.delete(a.getID()),r.set(a.getID(),a);for(var i=a.getNeighbors(),s=0;s<i.length;s++){e.totalNeighbors++;var c=i[s];if(!(this.limitEstimatedCost>0&&t.estimateCostToNode(c)>this.limitEstimatedCost)&&!r.has(c.getID())){var l=a.calcActualCostToNeighbor(c);if(l!=Number.MAX_VALUE){var u=a.g+l;(!n.has(c.getID())||u<c.g)&&(c.cameFrom=a,c.g=u,c.h=c.estimateCostToNode(o),c.f=c.g+c.h,n.has(c.getID())||n.set(c.getID(),c))}}}}return null},e.prototype.calcPath_SortedArray=function(t,o){e.totalPathFinds++,new Map;var n=new Map,a=new r([],function(e,t){return e.isSameLocation(t)},function(e,t){return e.f-t.f});for(t.f=t.g=t.h=0,t.cameFrom=null,a.push(t);a.length>0;){var i=a.shift();if(i.isSameLocation(o))return i.reconstructPath();n.set(i,i);for(var s=i.getNeighbors(),c=0;c<s.length;c++){e.totalNeighbors++;var l=s[c];if(!n.has(l)){var u=i.calcActualCostToNeighbor(l);if(u!=Number.MAX_VALUE){var p=i.g+u;(!a.has(l)||p<l.g)&&(l.cameFrom=i,l.g=p,l.h=l.estimateCostToNode(o),l.f=l.g+l.h,a.has(l)||a.push(l))}}}}return null},e.prototype.calcPath_Array=function(t,o){e.totalPathFinds++;var n=[],r=[];for(t.f=t.g=t.h=0,t.cameFrom=null,n.push(t);n.length>0;){var a=this.findLowestFScore(n);if(a.isSameLocation(o))return a.reconstructPath();n.splice(n.indexOf(a),1),r.push(a);for(var i=a.getNeighbors(),s=0;s<i.length;s++){e.totalNeighbors++;var c=i[s];if(!(r.indexOf(c)>=0)){var l=a.calcActualCostToNeighbor(c);if(l!=Number.MAX_VALUE){var u=a.g+l;(n.indexOf(c)<0||u<c.g)&&(c.cameFrom=a,c.g=u,c.h=c.estimateCostToNode(o),c.f=c.g+c.h,n.indexOf(c)<0&&n.push(c))}}}}return null},e.prototype.calcPath=function(e,t,o){return o&&(this.limitEstimatedCost=o),this.calcPath_Map(e,t)},e.lastFrameStatsReported=-1,e.totalBestFScoreFinds=0,e.totalPathFinds=0,e.totalNeighbors=0,e.fromTo=[],e}();o.AStar=a,cc._RF.pop()},{"../Main":"Main","collections/sorted-array":30}],AddODRToChildren:[function(e,t,o){"use strict";cc._RF.push(t,"db975whlFFCtaXsAzCPpSrZ","AddODRToChildren");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./OffscreenDisableRender"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.referenceCamera=null,t}return r(t,e),t.prototype.start=function(){var e=0,t=this.node.getComponentsInChildren(cc.RenderComponent),o=this;t.forEach(function(t){var n=t.node.addComponent(i.default);n.renderComponent=t,n.referenceCamera=o.referenceCamera,e++}),console.log("["+this.node.name+"] Adding ODR to "+e+" objects")},a([l(cc.Camera)],t.prototype,"referenceCamera",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./OffscreenDisableRender":"OffscreenDisableRender"}],AdsCoolDownMessage:[function(e,t,o){"use strict";cc._RF.push(t,"47810iJ7dhJ1JWhVRbSIlH5","AdsCoolDownMessage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="./Prefabs/Dialogs/AdsCoolDownMessage",t.bundleName="resources",t.dialogType="AdsCoolDownMessage",a([c],t)}(i.NgcMessageDialog));o.default=l,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog"}],AdsManager_impl:[function(e,t,o){"use strict";cc._RF.push(t,"08e10f30eZCdqhW2DkZA4Xt","AdsManager_impl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Services/Ads/Ads"),i=e("../../../Services/Telemetry/Telemetry"),s=e("../BuildConfig"),c=e("../NgcScreenManager"),l=e("../NgcSoundManager"),u=e("../NgcUserInfo"),p=e("./NgcAdsManager"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(e,t,o,n,r,s){if(-1===p.default.inst.getAllowedPointcut().indexOf(e))return r&&r(),void(s&&s(!1,0));if(a.NgcAds.inst){if(!a.NgcAds.inst.adsIsAvailable(t))return r&&r(),void(s&&s(!1,0));switch(t){case a.AdsType.Banner:cc.log("AdsManager","Show Ads Banner",e),a.NgcAds.inst.isBannerShowing&&this.hide(p.default.lastBannerPointcutID),c.default.inst&&c.default.inst.showBanner(),p.default.lastBannerPointcutID=e,p.default.showBannerTimeStamp=Date.now(),i.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Banner,e),a.NgcAds.inst.showAds(a.AdsType.Banner,null,null),i.NgcTelemetry.inst.LogEvent_GameAdsStart(u.default.numberOfAdsWatched,u.default.numberAdsSession,!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Banner,e);break;case a.AdsType.Interstitial:cc.log("AdsManager","Show Ads Interstitial",e);var d=Date.now(),f=d;switch(e){case p.NgcPointcuts.interPreGame:i.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterRequest({adsProvider:a.NgcAds.inst.getName()})}i.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,e),a.NgcAds.inst.showAds(a.AdsType.Interstitial,function(t){switch(r&&r(),t||l.NgcSoundManager.inst.stopMusic(),u.default.updateAdsInfo(),e){case p.NgcPointcuts.interPreGame:i.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-d})}f=Date.now(),i.NgcTelemetry.inst.LogEvent_GameAdsStart(u.default.numberOfAdsWatched,u.default.numberAdsSession,!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,e)},function(t,o){switch(t||u.default.updateAdsInfo(),l.NgcSoundManager.inst.resumeLastPlayedMusic(),s&&s(t,o),e){case p.NgcPointcuts.interPreGame:i.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-f})}i.NgcTelemetry.inst.LogEvent_GameAdsStop("null",0,t?1:0,a.NgcAds.inst.getName(),a.AdsType.Interstitial,o,null,e,!t)});break;case a.AdsType.VideoReward:cc.log("AdsManager","Show Ads VideoReward",e);var h=Date.now(),g=h;switch(e){case p.NgcPointcuts.videoDaily:i.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoRequest({adsProvider:a.NgcAds.inst.getName()});break;case p.NgcPointcuts.videoRewardDialog:i.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoRequest({adsProvider:a.NgcAds.inst.getName()})}i.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,a.NgcAds.inst.getName(),a.AdsType.VideoReward,e),a.NgcAds.inst.showAds(a.AdsType.VideoReward,function(t){switch(r&&r(),t||l.NgcSoundManager.inst.stopMusic(),u.default.updateAdsInfo(),g=Date.now(),e){case p.NgcPointcuts.videoDaily:i.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-h});break;case p.NgcPointcuts.videoRewardDialog:i.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoStart({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-h})}i.NgcTelemetry.inst.LogEvent_GameAdsStart(u.default.numberOfAdsWatched,u.default.numberAdsSession,!0,o,n,a.NgcAds.inst.getName(),a.AdsType.VideoReward,e)},function(t,r){switch(t||u.default.updateAdsInfo(),l.NgcSoundManager.inst.resumeLastPlayedMusic(),s&&s(t,r),e){case p.NgcPointcuts.videoDaily:i.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-g,checker:t});break;case p.NgcPointcuts.videoRewardDialog:i.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoEnd({adsProvider:a.NgcAds.inst.getName(),actualSec:Date.now()-g})}i.NgcTelemetry.inst.LogEvent_GameAdsStop(o,n,t?1:0,a.NgcAds.inst.getName(),a.AdsType.VideoReward,r,0,e,!t)})}}},t.prototype.hide=function(e,t){switch(void 0===e&&(e=null),void 0===t&&(t=a.AdsType.Banner),t){case a.AdsType.Banner:if(s.NgcBuildConfig.offlineMode){c.default.inst&&c.default.inst.hideBanner();break}if(this.hasAds(a.AdsType.Banner)){if(e){if(e!=p.default.lastBannerPointcutID)return}else e=p.default.lastBannerPointcutID;if(cc.log("AdsManager","Hide Banner",e),a.NgcAds.inst.isBannerShowing){c.default.inst&&c.default.inst.hideBanner();var o=Date.now()-p.default.showBannerTimeStamp;a.NgcAds.inst.isBannerShowing&&i.NgcTelemetry.inst.LogEvent_GameAdsStop(null,null,1,a.NgcAds.inst.getName(),a.AdsType.Banner,o,0,e),a.NgcAds.inst.hideAds(a.AdsType.Banner)}}break;case a.AdsType.Interstitial:case a.AdsType.VideoReward:}},t.prototype.hasAds=function(e){if(a.NgcAds.inst)switch(e){case a.AdsType.Banner:return a.NgcAds.inst.adsIsAvailable(a.AdsType.Banner);case a.AdsType.Interstitial:return a.NgcAds.inst.adsIsAvailable(a.AdsType.Interstitial);case a.AdsType.VideoReward:return a.NgcAds.inst.adsIsAvailable(a.AdsType.VideoReward)}return!1},t}(p.default);o.default=d,cc._RF.pop()},{"../../../Services/Ads/Ads":"Ads","../../../Services/Telemetry/Telemetry":"Telemetry","../BuildConfig":"BuildConfig","../NgcScreenManager":"NgcScreenManager","../NgcSoundManager":"NgcSoundManager","../NgcUserInfo":"NgcUserInfo","./NgcAdsManager":"NgcAdsManager"}],Ads_impl_AdInPlaySrv:[function(e,t,o){"use strict";cc._RF.push(t,"7658bpOhmtNppCARZX3dNHT","Ads_impl_AdInPlaySrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Ads"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._adBannerId1=null,t._adBanner1=null,t._adBanner2=null,t._adVideo=null,t._preShowCallBack=null,t._postShowCallBack=null,t._showTimeStamp=null,t._isRewardGranted=!1,t.adContainer=null,t}return r(t,e),t.prototype.interstitialSuccessCallback=function(e){console.log("Ads_impl_AdInPlay Interstitial Ad Completed with evt",e),this._postShowCallBack&&("video-ad-completed"==e||"video-ad-skipped"==e?this._postShowCallBack(!0,Date.now()-this._showTimeStamp):this._postShowCallBack(!1,0))},t.prototype.videoRewardSuccessCallback=function(e){this._postShowCallBack&&(this._postShowCallBack(!0,Date.now()-this._showTimeStamp),this._isRewardGranted=!0),console.log("Ads_impl_AdInPlay Video Ad Granted with evt",e)},t.prototype.videoRewardClosedCallback=function(e){console.log("Ads_impl_AdInPlay Video Ad Closed with evt",e),this._isRewardGranted?this._isRewardGranted=!1:this._postShowCallBack&&this._postShowCallBack(!1,0)},t.prototype._preInit=function(){return adPrepollCallback=this.interstitialSuccessCallback.bind(this),adRewardGrantedCB=this.videoRewardSuccessCallback.bind(this),adRewardClosedCB=this.videoRewardClosedCallback.bind(this),new Promise(function(e){e("Ads_impl_AdInPlay pre-initialized")})},t.prototype._getName=function(){return"AdInPlay"},t.prototype.initializePlaceHolder=function(){this._bannerContainer=this._appendAdPlaceholder("BannerContainer"),this._adBanner1=this._appendAdPlaceholder(this._adBannerId1,this._bannerContainer),console.log("Ads_impl_AdInPlay initializing PlaceHolder _adVideoId =",adVideoGlobalId),this._adVideo=this._appendAdPlaceholder(adVideoGlobalId)},t.prototype._appendAdPlaceholder=function(e,t){var o=document.createElement("div");return o.setAttribute("id",e),t?t.appendChild(o):this.adContainer.appendChild(o),o},t.prototype._removeAdPlaceholder=function(e){this.adContainer.removeChild(e)},t.prototype._init=function(e){return this._adBannerId1=e.Ads.adInPlayBannerID1,aiptag.subid=e.Ads.subID,console.log("AdInPlay: subid: "+aiptag.subid),this.adContainer=document.getElementById("adContainer"),this.adContainer.style.display="flex",this.initializePlaceHolder(),this.adContainer.addEventListener("click",this.adContainerClick),new Promise(function(e){e("Ads_impl_AdInPlay initialized")})},t.prototype._preCacheAds=function(){return!0},t.prototype._adsIsAvailable=function(e){switch(e){case i.AdsType.Banner:case i.AdsType.Interstitial:case i.AdsType.VideoReward:return!0}return!0},t.prototype._showAds=function(e,t,o){switch(console.log("Ads_impl_AdInPlay show Ads adsType =",e),t&&(this._preShowCallBack=t),o&&(this._postShowCallBack=o),e){case i.AdsType.Banner:this.showBanner();break;case i.AdsType.Interstitial:this.showInterstitial();break;case i.AdsType.VideoReward:this.showRewardedVideo()}},t.prototype._hideAds=function(e,t){switch(console.log("Ads_impl_AdInPlay hide Ads adsType =",e),e){case i.AdsType.Banner:this.hideBanner();break;case i.AdsType.Interstitial:case i.AdsType.VideoReward:}t&&t()},t.prototype.showBanner=function(){console.log("Ads_impl_AdInPlay show banner"),this._bannerContainer.setAttribute("style","display: flex;");var e=this;return aiptag.cmd.display.push(function(){aipDisplayTag.display(e._adBannerId1)}),this.isBannerShowing=!0,this.isBannerShowing},t.prototype.hideBanner=function(){console.log("Ads_impl_AdInPlay hide banner"),this._bannerContainer.setAttribute("style","display: none;");for(var e=0;e<this._adBanner1.childElementCount;e++)this._adBanner1.removeChild(this._adBanner1.children[e]);return this.isBannerShowing=!1,this.isBannerShowing},t.prototype.showInterstitial=function(){"undefined"!=typeof adplayer?(this._preShowCallBack&&this._preShowCallBack(!1,null),console.log("Ads_impl_AdInPlay show interstitial adplayer =",adplayer),this.adContainer.style.display="flex",this._showTimeStamp=Date.now(),aiptag.cmd.player.push(function(){adplayer.startPreRoll()})):this._preShowCallBack&&(this._preShowCallBack(!0,0),this._postShowCallBack(!1,0))},t.prototype.showRewardedVideo=function(){"undefined"!=typeof adplayer?(this._preShowCallBack&&this._preShowCallBack(!1,null),console.log("Ads_impl_AdInPlay show rewarded video adplayer =",adplayer),this._showTimeStamp=Date.now(),aiptag.cmd.player.push(function(){adplayer.startRewardedAd()})):this._preShowCallBack&&(this._preShowCallBack(!0,null),this._postShowCallBack(!1,0))},t.prototype.adContainerClick=function(){console.log("ad container clicked")},a([c],t)}(i.NgcAds));o.default=l,cc._RF.pop()},{"./Ads":"Ads"}],Ads_impl_AdSenseSrv:[function(e,t,o){"use strict";cc._RF.push(t,"53736jfLl5Np4tHN0ycnFat","Ads_impl_AdSenseSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameFramework/Scripts/NgcScreenManager"),s=e("./Ads"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCanvas=null,t.adsLoaded=!1,t.adContainer=null,t.adDisplayContainer=null,t.adsLoader=null,t.adsManager=null,t.googleModuleAvailAble=!0,t.callbackAfterPlayVideo=null,t.callbackBeforePlayVideo=null,t.startShowVideoAdsFn=null,t._interStitialCanShow=!1,t._videoRewardCanShow=!1,t.timeOutFn=null,t}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("Ads_impl_Adsense pre-initialized")})},t.prototype._getName=function(){return"AdSense"},t.prototype._init=function(){try{this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.gameCanvas),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer)}catch(t){this.googleModuleAvailAble=!1}var e=document.getElementsByClassName("adsbygoogle RWR_TOP_BANNER")[0];return e.style.display="inline-block",e.style.opacity="1",e.style.zIndex="-1",this.showVideoRewards(null,null),adConfig({preloadAdBreaks:"on"}),new Promise(function(e){e("Ads_impl_AdSense initialized")})},t.prototype._preCacheAds=function(){return!0},t.prototype._adsIsAvailable=function(){return!0},t.prototype._showAds=function(e,t,o){switch(e){case s.AdsType.Banner:t&&t(),this.showBanner(),o&&o();break;case s.AdsType.Interstitial:this.showInterstitial(t,o);break;case s.AdsType.VideoReward:console.log("showVideoRewards 138"),this.showVideoRewards(t,o)}},t.prototype._hideAds=function(e,t){switch(e){case s.AdsType.Banner:this.hideBanner();break;case s.AdsType.Interstitial:case s.AdsType.VideoReward:}t&&t()},t.prototype.showBanner=function(){return document.getElementsByClassName("adsbygoogle RWR_TOP_BANNER")[0].style.zIndex="0",this.isBannerShowing=!0,this.isBannerShowing},t.prototype.hideBanner=function(){return document.getElementsByClassName("adsbygoogle RWR_TOP_BANNER")[0].style.zIndex="-1",i.default.inst.topBannerIsActive=this.isBannerShowing=!1,this.isBannerShowing},t.prototype.showInterstitial=function(e,t){var o=Date.now(),n=Date.now(),r=this;this._interStitialCanShow=!1,adBreak({type:"next",name:"start-game",beforeAd:function(){r._interStitialCanShow=!0,e&&e()},afterAd:function(){n=Date.now()-o,t&&t(!0,n),r.showInterstitial(null,null)}}),setTimeout(function(){r._interStitialCanShow||t&&t(!1,0)},200)},t.prototype._targetingPersonalAds=function(){},t.prototype.showVideoRewards=function(e,t){var o=this;if(console.log("waitingNewVideo",this.waitingNewVideo),this.waitingNewVideo)return e&&e(),void(t&&t(!1,0,this.timeStartWaitNewVideo));var n=Date.now(),r=Date.now(),a=this;this._videoRewardCanShow=!1;var i=setTimeout(function(){a._videoRewardCanShow||t&&t(!1,0,0,"NotAvailable")},500);adBreak({type:"reward",beforeAd:function(){clearTimeout(i),a._videoRewardCanShow=!0,e&&e()},afterAd:function(){},beforeReward:function(e){e()},adDismissed:function(){r=Date.now()-n,t&&t(!1,r),o.waitVideoRewardReady()},adViewed:function(){r=Date.now()-n,t&&t(!0,r),o.waitVideoRewardReady()},adBreakDone:function(e){console.log(e)}})},t.prototype._waitVideoRewardReady=function(){var e=this;this.waitingNewVideo=!0,this.timeStartWaitNewVideo=Date.now(),clearTimeout(this.timeOutFn),this.timeOutFn=setTimeout(function(){e.waitingNewVideo=!1},1500)},a([l],t)}(s.NgcAds));o.default=u,cc._RF.pop()},{"../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","./Ads":"Ads"}],Ads_impl_GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"d850eSWn+9FvItc+9AYBkZU","Ads_impl_GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameFramework/Scripts/NgcScreenManager"),s=e("./Ads"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCanvas=null,t.adsLoaded=!1,t.adContainer=null,t.adDisplayContainer=null,t.adsLoader=null,t.adsManager=null,t.googleModuleAvailAble=!0,t.callbackAfterPlayVideo=null,t.callbackBeforePlayVideo=null,t.startShowVideoAdsFn=null,t.banner=null,t._interStitialCanShow=!1,t._videoRewardCanShow=!1,t.timeOutFn=null,t}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("NgcAds_impl_GameDistribution pre-initialized")})},t.prototype._getName=function(){return"GameDistribution"},t.prototype._init=function(){return this.showBannerElement(!0),new Promise(function(e){e("NgcAds_impl_GameDistribution initialized")})},t.prototype.showBannerElement=function(e){void 0===e&&(e=!1),this.banner=document.getElementById("canvas-ad"),this.banner&&(this.banner.style.zIndex=e?"1":"-1")},t.prototype._preCacheAds=function(){return!0},t.prototype._adsIsAvailable=function(e){switch(e){case s.AdsType.Banner:case s.AdsType.Interstitial:return!0;case s.AdsType.VideoReward:return!this.waitingNewVideo}return!0},t.prototype._showAds=function(e,t,o){switch(e){case s.AdsType.Banner:t&&t(),this.showBanner(),o&&o();break;case s.AdsType.Interstitial:this.showInterstitial(t,o);break;case s.AdsType.VideoReward:this.showVideoRewards(t,o)}},t.prototype._hideAds=function(e,t){switch(e){case s.AdsType.Banner:this.hideBanner();break;case s.AdsType.Interstitial:case s.AdsType.VideoReward:}t&&t()},t.prototype.showBanner=function(){return this.showBannerElement(!0),this.GDShowDisplayAd(),this.isBannerShowing=!0,this.isBannerShowing},t.prototype.hideBanner=function(){return this.showBannerElement(!1),i.default.inst.topBannerIsActive=this.isBannerShowing=!1,this.isBannerShowing},t.prototype.showInterstitial=function(e,t){var o=Date.now();e(),window.showGDInterstitial=!0,window.onGDAdsComplete=function(){var e=Date.now()-o;t(!0,e),window.onGDAdsComplete=null,window.showGDInterstitial=null},window.onGDAdsError=function(e){if("303"!==e&&"400"!==e){var n=Date.now()-o;t(!1,n),window.onGDAdsError=null,window.showGDInterstitial=null}},this.GDShowInterstitialAd()},t.prototype._targetingPersonalAds=function(){},t.prototype.showVideoRewards=function(e,t){var o=Date.now();e(),window.showGDVideoReward=!0,window.onGDAdsError=function(){var e=Date.now()-o;t(!1,e),window.onGDAdsError=null,window.onGDAdsComplete=null,window.showGDVideoReward=null},window.onGDAdsComplete=function(){var e=Date.now()-o;t(!0,e),window.onGDAdsComplete=null,window.showGDVideoReward=null},this.GDShowRewardedAd()},t.prototype._waitVideoRewardReady=function(){this.waitingNewVideo=!1},t.prototype.GDShowInterstitialAd=function(){try{window.gdsdk.showAd()}catch(e){cc.warn("Can't show ad",e)}},t.prototype.GDShowRewardedAd=function(){try{window.gdsdk.showAd("rewarded")}catch(e){cc.warn("Can't show ad reward",e)}},t.prototype.GDShowDisplayAd=function(){try{window.gdsdk.showAd("display",{containerId:"canvas-ad"}).then(function(){return cc.log("Successfully show ads")}).catch(function(e){return console.info(e)})}catch(e){cc.warn("Can't show ad reward",e)}},a([l],t)}(s.NgcAds));o.default=u,cc._RF.pop()},{"../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","./Ads":"Ads"}],Ads:[function(e,t,o){"use strict";cc._RF.push(t,"5a2dbbDz9BGc67fknl+eSq6","Ads");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAds=o.AdsType=void 0;var i=e("../Service"),s=e("../Platform/Platform"),c=cc._decorator,l=c.ccclass;c.property,function(e){e[e.Banner=0]="Banner",e[e.Interstitial=1]="Interstitial",e[e.VideoReward=2]="VideoReward"}(o.AdsType||(o.AdsType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBannerShowing=!1,t.waitingNewVideo=!1,t.timeStartWaitNewVideo=null,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheAds=function(e){this._preCacheAds(e)},t.prototype.adsIsAvailable=function(e){return!s.NgcPlatform.isOfflineMode()&&this._adsIsAvailable(e)},t.prototype.showAds=function(e,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this._showAds(e,t,o)},t.prototype.targetingPersonalAds=function(e){this._targetingPersonalAds(e)},t.prototype.hideAds=function(e,t){void 0===t&&(t=null),this._hideAds(e,t)},t.prototype.waitVideoRewardReady=function(){this._waitVideoRewardReady()},t.prototype.start=function(){},t.prototype.isFakeAdsPlatform=function(){return!1},t.srvInstances=[],t.inst=null,a([l],t)}(i.NgcService);o.NgcAds=u,cc._RF.pop()},{"../Platform/Platform":"Platform","../Service":"Service"}],AlreadyActivatedBoosterDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b76c1Mg7iBEroKUWiAXrZ1k","AlreadyActivatedBoosterDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t}return r(t,e),t.prototype.init=function(e){void 0===e&&(e=null),e?(this.icon.spriteFrame=e,this.icon.node.active=!0):this.icon.node.active=!1},t.prototype.OkOnClick=function(){this.hide()},t.urlPrefab="Prefabs/Dialogs/AlreadyActivatedBoosterDialog",t.bundleName="resources",t.dialogType="AlreadyActivatedBoosterDialog",a([l(cc.Sprite)],t.prototype,"icon",void 0),a([c],t)}(i.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase"}],AsbBuildConfig:[function(e,t,o){"use strict";cc._RF.push(t,"b0240lAxdBDhLHwcOKkDZ01","AsbBuildConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.AsbBuildConfig=void 0,o.AsbBuildConfig={UseAsbLog:(cc.sys.isBrowser||(cc.sys.os,cc.sys.OS_ANDROID),!1)},cc._RF.pop()},{}],AsbLog:[function(e,t,o){"use strict";cc._RF.push(t,"d32b9o9SlNIzZjAuJBOo5EO","AsbLog");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.LogLevel=void 0;var a,i=cc._decorator,s=i.ccclass;i.property,function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(a=o.LogLevel||(o.LogLevel={}));var c=function(){function e(){this._logs=[],this._ccLogF=null,this._ccWarnF=null,this._ccErrorF=null,this._downloadElement=null,this._downloadEvent=null}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),e.prototype.setupHook=function(e){switch(this.resetHook(),e){case a.Info:this.hookCcLog();case a.Warning:this.hookCcWarn();case a.Error:this.hookCcError()}cc.warn("AsbLog doesn't support substitutions!")},e.prototype.resetHook=function(){this._ccLogF&&(cc.log=this._ccLogF,this._ccLogF=null),this._ccWarnF&&(cc.log=this._ccWarnF,this._ccWarnF=null),this._ccErrorF&&(cc.log=this._ccErrorF,this._ccErrorF=null)},e.prototype.hookCcLog=function(){var e=this;this._ccLogF=cc.log,cc.log=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("I/ "+(new Date).getTime().toLocaleString()+" "+t+"\n"),e._ccLogF.apply(e,r([t],o))}},e.prototype.hookCcWarn=function(){var e=this;this._ccWarnF=cc.warn,cc.warn=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("W/ "+(new Date).getTime().toLocaleString()+" "+t+"\n"),e._ccWarnF.apply(e,r([t],o))}},e.prototype.hookCcError=function(){var e=this;this._ccErrorF=cc.error,cc.error=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];e._logs.push("E/ "+(new Date).getTime().toLocaleString()+" "+t+"'\n'"),e._ccErrorF.apply(e,r([t],o))}},e.prototype.flush=function(){this._logs=[]},e.prototype.setupSaving=function(){this._downloadEvent=document.createEvent("MouseEvents"),this._downloadElement=document.createElement("a"),this._downloadEvent.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)},e.prototype.save=function(e){void 0===e&&(e=null),this.setupSaving();var t=new Blob(this._logs,{type:"text/text"});this._downloadElement.href=window.URL.createObjectURL(t),this._downloadElement.download=e||"log.txt",this._downloadElement.dataset.downloadurl=["text/text",this._downloadElement.download,this._downloadElement.href].join(":"),this._downloadElement.dispatchEvent(this._downloadEvent)},e._inst=null,t=n([s],e)}();o.default=c,cc._RF.pop()},{}],AssetPreloader:[function(e,t,o){"use strict";cc._RF.push(t,"3d5d8xf1ORBX4c8fKY3yTFz","AssetPreloader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configFile=null,t}return r(t,e),t.prototype.start=function(){},a([c],t.prototype,"configFile",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],AutoTest:[function(e,t,o){"use strict";cc._RF.push(t,"f157eYJaLxAXLNoorhqgjW+","AutoTest");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Screens/StartScreen/StartMain"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTestRunning=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Can only have one AutoTest object"):o.inst=this},t.run=function(){o.inst?o.inst.runTest():console.error("Missing AutoTest object")},t.prototype.runTest=function(){this.isTestRunning?console.error("Test already running"):(this.isTestRunning=!0,this.scheduleOnce(function(){i.default.inst.playerClickedStart()},3))},t.prototype.start=function(){},t.prototype.update=function(){},t.inst=null,o=a([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./Screens/StartScreen/StartMain":"StartMain"}],AvatarSFHandler:[function(e,t,o){"use strict";cc._RF.push(t,"740bcNN4ItP3oRGpC5kujx5","AvatarSFHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Utils/ConstConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AuroraSF=null,t.EzioSF=null,t.FenyxSF=null,t.GrandmaSF=null,t.NomadSF=null,t.PandaSF=null,t.RabbidSF=null,t.RaymanSF=null,t.SamFisherSF=null,t.TheprinceSF=null,t.VaasSF=null,t.WrenchSF=null,t.AngelSF=null,t.AntonSF=null,t.ApollyonSF=null,t.AshSF=null,t.BUDSF=null,t.BayekSF=null,t.BodvarSF=null,t.EivorSF=null,t.JadeSF=null,t.RabbidHungrySharkSF=null,t.PunkRiderSF=null,t}return r(t,e),t.prototype.onLoad=function(){this._avatarHeroesMap=new Map([[i.ConstConfig.INVENTORY.ITEM_ID.AURORA,this.AuroraSF],[i.ConstConfig.INVENTORY.ITEM_ID.EZIO,this.EzioSF],[i.ConstConfig.INVENTORY.ITEM_ID.NOMAD,this.NomadSF],[i.ConstConfig.INVENTORY.ITEM_ID.FENYX,this.FenyxSF],[i.ConstConfig.INVENTORY.ITEM_ID.GRANDMA,this.GrandmaSF],[i.ConstConfig.INVENTORY.ITEM_ID.PANDA,this.PandaSF],[i.ConstConfig.INVENTORY.ITEM_ID.RAYMAN,this.RaymanSF],[i.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,this.SamFisherSF],[i.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,this.TheprinceSF],[i.ConstConfig.INVENTORY.ITEM_ID.RABBID,this.RabbidSF],[i.ConstConfig.INVENTORY.ITEM_ID.VAAS,this.VaasSF],[i.ConstConfig.INVENTORY.ITEM_ID.WRENCH,this.WrenchSF],[i.ConstConfig.INVENTORY.ITEM_ID.ANGEL,this.AngelSF],[i.ConstConfig.INVENTORY.ITEM_ID.ANTON,this.AntonSF],[i.ConstConfig.INVENTORY.ITEM_ID.APOLLYON,this.ApollyonSF],[i.ConstConfig.INVENTORY.ITEM_ID.ASH,this.AshSF],[i.ConstConfig.INVENTORY.ITEM_ID.BUD,this.BUDSF],[i.ConstConfig.INVENTORY.ITEM_ID.BAYEK,this.BayekSF],[i.ConstConfig.INVENTORY.ITEM_ID.BODVAR,this.BodvarSF],[i.ConstConfig.INVENTORY.ITEM_ID.EIVOR,this.EivorSF],[i.ConstConfig.INVENTORY.ITEM_ID.JADE,this.JadeSF],[i.ConstConfig.INVENTORY.ITEM_ID.RABBIDHUNGRYSHARK,this.RabbidHungrySharkSF],[i.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER,this.PunkRiderSF]])},t.prototype.getAvatarSFFromHero=function(e){return this._avatarHeroesMap.get(e)},a([l(cc.SpriteFrame)],t.prototype,"AuroraSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"EzioSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"FenyxSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"GrandmaSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"NomadSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"PandaSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"RabbidSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"RaymanSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"SamFisherSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"TheprinceSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"VaasSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"WrenchSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"AngelSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"AntonSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"ApollyonSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"AshSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"BUDSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"BayekSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"BodvarSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"EivorSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"JadeSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"RabbidHungrySharkSF",void 0),a([l(cc.SpriteFrame)],t.prototype,"PunkRiderSF",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig"}],BadConnectionNotification:[function(e,t,o){"use strict";cc._RF.push(t,"cc8c1yHvwNOCqAGDj7biarD","BadConnectionNotification");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(1,{opacity:100}).to(1,{opacity:100}).to(1,{opacity:255}).to(1,{opacity:255}).to(1,{opacity:100}).to(1,{opacity:255})).start()},a([c],t.prototype,"from",void 0),a([c],t.prototype,"to",void 0),a([c],t.prototype,"cycleTimeSec",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],BigDay:[function(e,t,o){"use strict";cc._RF.push(t,"4b0fewk7HNAibRnnkQyZwKD","BigDay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBigDay=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.items=null,t.specialReward=null,t.specialIcon=null,t.dayLabel=null,t.timeRemaining=null,t.multiNum=null,t.itemIcon=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),a([l(cc.Node)],t.prototype,"today",void 0),a([l(cc.Node)],t.prototype,"tomorrow",void 0),a([l(cc.Node)],t.prototype,"other",void 0),a([l(cc.Node)],t.prototype,"items",void 0),a([l(cc.Node)],t.prototype,"specialReward",void 0),a([l(cc.Sprite)],t.prototype,"specialIcon",void 0),a([l(i.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),a([l(cc.Label)],t.prototype,"timeRemaining",void 0),a([l(cc.Label)],t.prototype,"multiNum",void 0),a([l(cc.Sprite)],t.prototype,"itemIcon",void 0),a([c],t)}(cc.Component);o.NgcBigDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],BlendAnimBase:[function(e,t,o){"use strict";cc._RF.push(t,"ed650LbQ9lJv5xykMAtLvMr","BlendAnimBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),s=e("./Player/PlayerSkinMgr"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.allAnims=[],t.skin="",t.queuedSkin=null,t}var o;return r(t,e),o=t,t.prototype.idle=function(){},t.prototype.getSkin=function(){return this.skin},t.prototype.queueSkin=function(e){this.queuedSkin=e},t.prototype.setSkinByName=function(e){this.getSkeleton().setSkin(e),this.skin=e},t.prototype.findSkinIndexByName=function(e){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){if(n[o].name==e)return t;t++}return-1},t.prototype.getSkinNameByIndex=function(e){return e<0||e>=s.default.listHeroes.length?(console.error("Invalid skin index"),""):s.default.listHeroes[e]},t.prototype.setSkinByIndex=function(e){if(!(e<0||e>=this.getNumSkins())){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){var r=n[o];if(t==e)return this.setSkinByName(r.name),r.name;t++}return""}console.log("Skin idx out of range")},t.prototype.setRandomSkin=function(){this.setSkinByIndex(i.NgcNetUtils.RandomRange(1,this.getNumSkins()-1,!0))},t.prototype.getNumSkins=function(){return s.default.listHeroes.length},t.prototype.playAnim=function(e){this.getSkeleton().setAnimation(0,e.name,e.loop)},t.prototype.getSkeleton=function(){return this.skeleton?this.skeleton:(this.skeleton=this.node.getComponent(sp.Skeleton),this.skeleton)},t.prototype.init=function(e){this.mixFlatAnimArray(e)},t.prototype.onLoad=function(){var e=this.flattenAllAnims();this.init(e)},t.prototype.start=function(){},t.prototype.flattenAllAnims=function(){for(var e=[],t=0;t<this.allAnims.length;t++)for(var o=this.allAnims[t],n=0;n<o.length;n++)e.push(o[n]);return e},t.prototype.mixFlatAnimArray=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)this.getSkeleton().setMix(e[t],e[n],o.defaultBlendTimeSec),this.getSkeleton().setMix(e[n],e[t],o.defaultBlendTimeSec)},t.prototype.update=function(){this.queuedSkin&&(this.setSkinByName(this.queuedSkin),this.queuedSkin=null)},t.defaultBlendTimeSec=.1,a([u(sp.Skeleton)],t.prototype,"skeleton",void 0),o=a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","./Player/PlayerSkinMgr":"PlayerSkinMgr"}],BlockExplosion:[function(e,t,o){"use strict";cc._RF.push(t,"c2836y2kkVPpLobV6/eR4jH","BlockExplosion");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/MapManager"),s=e("../MaterialMgr"),c=e("./Bomb"),l=e("./GameObjectBase"),u=e("./GameObjMgr"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockSprite=null,t.explosionAnim=null,t.onAnimFinishedCallback=null,t}return r(t,e),t.prototype.init=function(e,t,o){this.onAnimFinishedCallback=e,t&&(this.posInMap=t,i.default.inst.addObjectToMapBoardComponents(this)),o===c.E_BOMB_TYPE.Pierce?this.blockSprite.setMaterial(0,s.default.inst.blueExplodingMaterial):this.blockSprite.setMaterial(0,s.default.inst.redExplodingMaterial)},t.prototype.playExplosionAnim=function(){this.explosionAnim.play(),this.explosionAnim.once(cc.Animation.EventType.FINISHED,this.onAnimFinished,this)},t.prototype.onAnimFinished=function(){this.onAnimFinishedCallback&&this.onAnimFinishedCallback(),this.release()},t.prototype.release=function(){var e;i.default.inst.removeComponentInMapBoard(this),(null===(e=this.renderComponent)||void 0===e?void 0:e.node.getNumberOfRunningActions())>0&&cc.Tween.stopAllByTarget(this.renderComponent.node),this.renderComponent.node.color=cc.Color.WHITE,u.GameObjMgr.inst.putBlockExplosion(this)},t.instantiate=function(){var e=u.GameObjMgr.inst.getBlockExplosion();return e||(e=cc.instantiate(u.GameObjMgr.inst.blockExplosionPrefab)),e},a([f(cc.Sprite)],t.prototype,"blockSprite",void 0),a([f(cc.Animation)],t.prototype,"explosionAnim",void 0),a([d],t)}(l.default);o.default=h,cc._RF.pop()},{"../Maps/MapManager":"MapManager","../MaterialMgr":"MaterialMgr","./Bomb":"Bomb","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],BlockTop:[function(e,t,o){"use strict";cc._RF.push(t,"651fbQ+KkRLqofWcS43xvQU","BlockTop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/MapManager"),s=e("./GameObjectBase"),c=e("./GameObjMgr"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockSprite=null,t}return r(t,e),t.prototype.init=function(e){e?(this.posInMap=e,i.default.inst.addObjectToMapBoardComponents(this)):cc.log("BlockTop instantiae without posInMap"),this.onOutScreen()},t.prototype.release=function(){i.default.inst.removeComponentInMapBoard(this),this.renderComponent.node.color=cc.Color.WHITE,c.GameObjMgr.inst.putBlockTop(this)},t.pool=new cc.NodePool("BlockTop"),a([p(cc.Sprite)],t.prototype,"blockSprite",void 0),a([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../Maps/MapManager":"MapManager","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],Block:[function(e,t,o){"use strict";cc._RF.push(t,"92760O+YA1H05U3vq33YBSt","Block");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../NanoGameCore/Services/Platform/Platform"),s=e("../Game"),c=e("../Maps/MapManager"),l=e("../Maps/ThemeManager"),u=e("../Tutorial/Tutorial"),p=e("./BlockExplosion"),d=e("./BlockTop"),f=e("./GameObjectBase"),h=e("./GameObjMgr"),g=e("./PowerUpItem"),m=cc._decorator,y=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockSprite=null,t.blockTop=null,t.isDestroying=!1,t.powerUpTypeInside=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.reset()},t.prototype.reset=function(){this.isDestroying=!1,this.powerUpTypeInside=null,this.onOutScreen()},t.prototype.init=function(e,t,o,n){void 0===t&&(t=0),void 0===o&&(o=0),this.node.opacity=255,this.isDestroying=!1,this.objectType=e,this.posInMap=cc.v2(t,o);var r=!(this.objectType===f.GameObjectType.Block_Border&&c.default.inst.getBoard(t,o+1)===f.GameObjectType.Block_Border);switch(r&&(this.blockTop=h.GameObjMgr.inst.getBlockTop(),this.blockTop.getComponent(d.default).init(this.posInMap)),this.objectType){case f.GameObjectType.Block_Soft:this.blockSprite.spriteFrame=l.default.inst.getSoftBlockSF(),this.blockTop.children[0].getComponent(cc.Sprite).spriteFrame=l.default.inst.getSoftBlockTopSF(),n&&(this.powerUpTypeInside=this.randomPowerup(),c.default.inst.setMixedBoard(t,o,f.GameObjectType.Block_Soft|this.powerUpTypeInside));break;case f.GameObjectType.Block_Hard:this.blockSprite.spriteFrame=l.default.inst.getHardBlockSF(),this.blockTop.children[0].getComponent(cc.Sprite).spriteFrame=l.default.inst.getHardBlockTopSF();break;case f.GameObjectType.Block_Border:r&&(this.blockTop.children[0].getComponent(cc.Sprite).spriteFrame=l.default.inst.getBorderBlockTopSF()),this.blockSprite.spriteFrame=l.default.inst.getBorderBlockSF()}r&&(this.blockTop.parent=c.default.inst.EffectNode,this.blockTop.setPosition(this.node.getPosition())),this.onOutScreen(),c.default.inst.addObjectToMapBoardComponents(this)},t.prototype.randomPowerup=function(){var e=null;if(c.default.randomNumberGenerator.randomUnit()<=o.ITEM_DENSITY){var t=c.default.randomNumberGenerator.randomUnit(1,g.default.getTotalWeight());(e=g.default.getItemTypeByWeight(t))==f.GameObjectType.Unknown&&cc.error("Block randomPowerup FAILED")}return e},t.prototype.destroyBlock=function(e){var t;this.isDestroying=!0,this.blockTop.getComponent(d.default).release(),this.node.opacity=0;var o=p.default.instantiate();o.parent=c.default.inst.GradientMappingEffect,o.setPosition(this.node.getPosition());var n=o.getComponent(p.default);n.init(this.destroyAnimationFinished.bind(this),this.posInMap,e),n.playExplosionAnim(),s.default.inst.startingTutorial&&(null===(t=s.default.inst.tutorialHandler)||void 0===t?void 0:t.getTutorialCurTurn())===u.E_TUTORIAL_TURN.MOVE_SAFER&&s.default.inst.tutorialHandler.startTutorialTurn(u.E_TUTORIAL_TURN.ELIMINATE)},t.prototype.destroyAnimationFinished=function(){c.default.inst.getBoard(this.posInMap.x,this.posInMap.y)==this.objectType&&c.default.inst.setBoard(this.posInMap.x,this.posInMap.y,f.GameObjectType.Empty),i.NgcPlatform.isOfflineMode()&&(this.powerUpTypeInside?(this.spawnPowerUpItem(),c.default.inst.setBoard(this.posInMap.x,this.posInMap.y,this.powerUpTypeInside,!0)):c.default.inst.setBoard(this.posInMap.x,this.posInMap.y,f.GameObjectType.Empty,!0)),this.release()},t.prototype.spawnPowerUpItem=function(){if(c.default.inst.getBoard(this.posInMap.x,this.posInMap.y)==f.GameObjectType.Empty){var e=g.default.instantiate();e.parent=c.default.inst.ObjectsNode,e.setPosition(c.default.inst.mapInfo.sizeOfTile.x*this.posInMap.x,c.default.inst.mapInfo.sizeOfTile.y*this.posInMap.y),e.getComponent(g.default).init(this.powerUpTypeInside,{x:this.posInMap.x,y:this.posInMap.y})}},t.prototype.release=function(){var e;if(this.reset(),cc.js.array.remove(c.default.inst.softBlock,this),null===(e=this.blockTop)||void 0===e?void 0:e.isValid){var t=this.blockTop.getComponent(d.default);c.default.inst.removeComponentInMapBoard(t),t.release()}c.default.inst.removeComponentInMapBoard(this),this.renderComponent.node.color=cc.Color.WHITE,h.GameObjMgr.inst.putBlock(this)},t.ITEM_DENSITY=.25,t.pool=new cc.NodePool("Block"),a([_(cc.Sprite)],t.prototype,"blockSprite",void 0),o=a([y],t)}(f.default);o.default=v,cc._RF.pop()},{"../../NanoGameCore/Services/Platform/Platform":"Platform","../Game":"Game","../Maps/MapManager":"MapManager","../Maps/ThemeManager":"ThemeManager","../Tutorial/Tutorial":"Tutorial","./BlockExplosion":"BlockExplosion","./BlockTop":"BlockTop","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase","./PowerUpItem":"PowerUpItem"}],BombButton:[function(e,t,o){"use strict";cc._RF.push(t,"7fc69uF1DRD3qpB7aO4wJ7I","BombButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._originPos=null,t}return r(t,e),t.prototype.onLoad=function(){this._originPos=this.node.position},t.prototype.hide=function(){this.node.setPosition(this._originPos.x,this._originPos.y-this.node.height)},t.prototype.fadeIn=function(e){var t=cc.tween().to(e,{position:this._originPos});cc.tween(this.node).then(t).start()},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],BombSFHandler:[function(e,t,o){"use strict";cc._RF.push(t,"74ceeUuwVhOdrV5APQuWGkJ","BombSFHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameObjects/Bomb"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalBomb_SF=null,t.pierceBomb_SF=null,t.dangerousBomb_SF=null,t.powerBomb_SF=null,t}return r(t,e),t.prototype.getBombSpriteFrameByType=function(e){switch(e){case i.E_BOMB_TYPE.Normal:return this.normalBomb_SF;case i.E_BOMB_TYPE.Pierce:return this.pierceBomb_SF;case i.E_BOMB_TYPE.Dangerous:return this.dangerousBomb_SF;case i.E_BOMB_TYPE.Power:return this.powerBomb_SF;default:return cc.error("Bomb type NOT found"),null}},a([l(cc.SpriteFrame)],t.prototype,"normalBomb_SF",void 0),a([l(cc.SpriteFrame)],t.prototype,"pierceBomb_SF",void 0),a([l(cc.SpriteFrame)],t.prototype,"dangerousBomb_SF",void 0),a([l(cc.SpriteFrame)],t.prototype,"powerBomb_SF",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameObjects/Bomb":"Bomb"}],Bomb:[function(e,t,o){"use strict";cc._RF.push(t,"652dafJzP1HYbLCPo0HVFUA","Bomb");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_BOMB_TYPE=o.E_BOMB_STATE=void 0;var i,s,c=e("../Game"),l=e("../GameCamera"),u=e("../Maps/MapManager"),p=e("../Player/PlayerController"),d=e("../Tracking/TrackingManager"),f=e("./Explosion"),h=e("./GameObjectBase"),g=e("../SoundManager"),m=e("../Utils/ConstConfig"),y=e("../GameSpriteFrameMgr"),_=e("../Network/ImprovedNetClient"),v=e("./FloorPlate"),S=e("../../NanoGameCore/Services/Platform/Platform"),b=e("./GameObjMgr");(function(e){e[e.None=0]="None",e[e.Planting=1]="Planting",e[e.Counting=2]="Counting",e[e.Exploding=3]="Exploding",e[e.Destroying=4]="Destroying"})(i=o.E_BOMB_STATE||(o.E_BOMB_STATE={})),function(e){e[e.Normal=0]="Normal",e[e.Pierce=1]="Pierce",e[e.Dangerous=2]="Dangerous",e[e.Power=3]="Power"}(s=o.E_BOMB_TYPE||(o.E_BOMB_TYPE={}));var N=cc._decorator,P=N.ccclass,I=N.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.appearanceNode=null,t.shadowNode=null,t.bombSprite=null,t.bombIgnitionAnim=null,t.renderComponents=[],t._isInitialized=!1,t._playersInRange=[],t.timeToExplosion=3e3,t.timeplanted=0,t.state=i.Planting,t.range=1,t._bombType=s.Normal,t.nodeTweenMap=new Map,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isExploding",{get:function(){return this.state==i.Exploding},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._bombType},enumerable:!1,configurable:!0}),t.Create=function(e,t,n,r,a){var i=b.GameObjMgr.inst.getBomb();i.parent=u.default.inst.BombsNode;var s=u.default.inst.mapInfo.sizeOfTile;i.setPosition(r.x*s.x,r.y*s.y);var c=i.getComponent(o);return c.init(e,t,n,r,a),c},t.prototype.onLoad=function(){this.reset()},t.prototype.start=function(){},t.prototype.init=function(e,t,o,n,r,a){void 0===a&&(a=!1),this.objectType=h.GameObjectType.Bomb,this.posInMap=n,this.playerOwner=e,this._bombType=t,this.range=o,this.timeplanted=r||_.default.inst.getCurrentGameServerTime(),this.state=i.Planting,this.bombSprite.spriteFrame=y.default.inst.bombSFHandler.getBombSpriteFrameByType(this.type),this.playerOwner.data.curBombPlanted+=1,this.addDangerousTiles(),this.bombIgnitionAnim.play(this.bombIgnitionAnim.defaultClip.name),this.playerOwner.data.curBombs.push(this),c.default.inst.bombs.push(this),u.default.inst.addObjectToMapBoardComponents(this),this.nodeTweenMap.clear(),u.default.inst.mapShrinkingAnim.playBombPlacementAnim(this.posInMap),this.playflashIndicatorAnim(),S.NgcPlatform.isOfflineMode()&&(this.state=i.Counting,u.default.inst.setBoard(this.posInMap.x,this.posInMap.y,this.objectType,!0),this.display()),this._isInitialized=!0},t.prototype.reset=function(){this._isInitialized=!1,this.state=i.None,this.shadowNode.opacity=this.bombSprite.node.opacity=0,this.nodeTweenMap.forEach(function(e,t){e.stop(),t.getComponent(v.default).release()}),this.nodeTweenMap.clear(),this._playersInRange=[]},t.prototype.onInScreen=function(){e.prototype.onInScreen.call(this),this.renderComponents.forEach(function(e){return e.enabled=!0})},t.prototype.onOutScreen=function(){e.prototype.onOutScreen.call(this),this.renderComponents.forEach(function(e){return e.enabled=!1})},t.prototype.display=function(){this.shadowNode.opacity=this.bombSprite.node.opacity=255},t.prototype.isConfirmedByServer=function(){return this.state==i.Counting},t.prototype.onServerConfirm=function(e){var t=this;void 0===e&&(e=!1),this.state==i.Planting&&(this.state=i.Counting,u.default.inst.setBoard(this.posInMap.x,this.posInMap.y,this.objectType,!0),e?this.display():this.scheduleOnce(function(){return t.display()},.2))},t.prototype.playflashIndicatorAnim=function(e){if(void 0===e&&(e=o.TILE_DISTANCE),this.playerOwner.isLocalHuman()){if(!o.SELF_BOMB_TOGGLE)return}else if(!o.ENEMY_BOMB_TOGGLE)return;var t=this.posInMap.x,n=this.posInMap.y,r=p.PlayerController.localPlayer;if(!(Math.abs(n-r.posInMap.y)+Math.abs(t-r.posInMap.x)>e)){var a=o.getListHardObject(this._bombType);if(this.TileFlashIndicatorAnim(cc.v2(t,n),o.BOMB_TIMER),this._bombType!=s.Dangerous){for(var i=t+1;i<=t+this.range;++i){var c=cc.v2(i,n);if(a.includes(u.default.inst.getObjectTypeByPosInMap(c)))break;this.TileFlashIndicatorAnim(c,o.BOMB_TIMER)}for(var l=t-1;l>=t-this.range&&(c=cc.v2(l,n),!a.includes(u.default.inst.getObjectTypeByPosInMap(c)));--l)this.TileFlashIndicatorAnim(c,o.BOMB_TIMER);for(var d=n+1;d<=n+this.range&&(c=cc.v2(t,d),!a.includes(u.default.inst.getObjectTypeByPosInMap(c)));++d)this.TileFlashIndicatorAnim(c,o.BOMB_TIMER);for(d=n-1;d>=n-this.range&&(c=cc.v2(t,d),!a.includes(u.default.inst.getObjectTypeByPosInMap(c)));--d)this.TileFlashIndicatorAnim(c,o.BOMB_TIMER)}else for(var f=1;f<=this.range;++f){for(var h=-f,g=f;h<=f;++h){var m=cc.v2(t+h,n+g);a.includes(u.default.inst.getObjectTypeByPosInMap(m))||this.TileFlashIndicatorAnim(m,o.BOMB_TIMER);var y=cc.v2(t+h,n-g);a.includes(u.default.inst.getObjectTypeByPosInMap(y))||this.TileFlashIndicatorAnim(y,o.BOMB_TIMER)}for(g=-f,h=f;g<=f;++g){var _=cc.v2(t+h,n+g);a.includes(u.default.inst.getObjectTypeByPosInMap(_))||this.TileFlashIndicatorAnim(_,o.BOMB_TIMER);var v=cc.v2(t-h,n+g);a.includes(u.default.inst.getObjectTypeByPosInMap(v))||this.TileFlashIndicatorAnim(v,o.BOMB_TIMER)}}}},t.prototype.TileFlashIndicatorAnim=function(e,t,n,r){void 0===n&&(n=o.FLASH_DURATION_PERCT),void 0===r&&(r=o.INDICATOR_OPACITY);var a=t*n,i=(t-a)/1e3,s=(Math.floor(a/.5),v.default.instantiate(e));s.parent=u.default.inst.FloorNode;var c=cc.v2(e.x*u.default.inst.mapInfo.sizeOfTile.x,e.y*u.default.inst.mapInfo.sizeOfTile.y);s.opacity=0,s.color=cc.Color.WHITE,s.setPosition(c);var l=cc.tween(s).delay(i).repeatForever(cc.tween().to(.25,{color:cc.Color.RED,opacity:r}).to(.25,{opacity:0}));this.nodeTweenMap.set(s,l),l.start()},t.prototype.explosion=function(){var e;if(this.isConfirmedByServer()&&this.state!=i.Exploding&&this.state!=i.Destroying){this.state=i.Exploding;var t=cc.v2(p.PlayerController.localPlayer.posInMap).sub(cc.v2(this.posInMap)).len();l.default.inst.shakeCamera(t);var n=m.ConstConfig.PARAMS.SOUND_MAX_EXPLOSION_VOLUME*((m.ConstConfig.PARAMS.SOUND_RADIUS-t)/m.ConstConfig.PARAMS.SOUND_RADIUS);n>0&&n<=m.ConstConfig.PARAMS.SOUND_MAX_EXPLOSION_VOLUME&&g.SoundManager.inst.playSound(g.SoundManager.inst.AudioClips.BombExplosionClip,n),u.default.inst.setBoard(this.posInMap.x,this.posInMap.y,h.GameObjectType.Empty,!0);var r=o.getListHardObject(this.type);if(this._getListPlayerInBombRange(),this._bombType===s.Dangerous)this.dangerousBombExposion();else{var a=0,f=0;a+=this.addExplosion(cc.v2(this.posInMap.x,this.posInMap.y));for(var y=this.posInMap.x+1;y<=this.posInMap.x+this.range;y++){var _=cc.v2(y,this.posInMap.y);if(f+=this.checkPreventedObject(_),r.indexOf(u.default.inst.getBoard(y,this.posInMap.y))>=0)break;a+=this.addExplosion(_)}for(y=this.posInMap.x-1;y>=this.posInMap.x-this.range&&(_=cc.v2(y,this.posInMap.y),f+=this.checkPreventedObject(_),!(r.indexOf(u.default.inst.getBoard(y,this.posInMap.y))>=0));y--)a+=this.addExplosion(_);for(y=this.posInMap.y+1;y<=this.posInMap.y+this.range&&(_=cc.v2(this.posInMap.x,y),f+=this.checkPreventedObject(_),!(r.indexOf(u.default.inst.getBoard(this.posInMap.x,y))>=0));y++)a+=this.addExplosion(_);for(y=this.posInMap.y-1;y>=this.posInMap.y-this.range&&(_=cc.v2(this.posInMap.x,y),f+=this.checkPreventedObject(_),!(r.indexOf(u.default.inst.getBoard(this.posInMap.x,y))>=0));y--)a+=this.addExplosion(_);this.playerOwner.isLocalHuman()&&(console.log("%c [BOMB]Players affected: "+a,"color: darkred"),null===(e=d.default.inst)||void 0===e||e.onBombExplode(this._bombType,a,f,c.default.inst.totalTime,c.default.gameMode,c.default.inst.getNumPlayersAlive(),p.PlayerController.localPlayer.data,c.default.inst.fps))}this.release()}},t.prototype.dangerousBombExposion=function(){for(var e,t=0,n=0,r=this.posInMap,a=o.getListHardObject(this.type),i=0;i<this.range+1;i++){for(var s=-i,l=i;s<=i;s++){var f=cc.v2(r.x+s,r.y+l);n+=this.checkPreventedObject(f),a.includes(u.default.inst.getObjectTypeByPosInMap(f))||(t+=this.addExplosion(f));var h=cc.v2(r.x+s,r.y-l);n+=this.checkPreventedObject(h),a.includes(u.default.inst.getObjectTypeByPosInMap(f))||(t+=this.addExplosion(h))}for(l=-i,s=i;l<i;l++)f=cc.v2(r.x+s,r.y+l),n+=this.checkPreventedObject(f),a.includes(u.default.inst.getObjectTypeByPosInMap(f))||(t+=this.addExplosion(f)),h=cc.v2(r.x-s,r.y+l),n+=this.checkPreventedObject(h),a.includes(u.default.inst.getObjectTypeByPosInMap(h))||(t+=this.addExplosion(h))}this.playerOwner.isLocalHuman()&&(console.log("%c [BOMB]Players affected: "+t,"color: darkred"),null===(e=d.default.inst)||void 0===e||e.onBombExplode(this._bombType,t,n,c.default.inst.totalTime,c.default.gameMode,c.default.inst.getNumPlayersAlive(),p.PlayerController.localPlayer.data,c.default.inst.fps))},t.prototype.addExplosion=function(e){if(void 0===u.default.inst.getBoard(e.x,e.y)||u.default.inst.getBoard(e.x,e.y)===h.GameObjectType.Block_Border)return 0;var t=f.default.instantiate();return t.parent=u.default.inst.GradientMappingEffect,t.setPosition(u.default.inst.mapInfo.sizeOfTile.x*e.x,u.default.inst.mapInfo.sizeOfTile.y*e.y),t.getComponent(f.default).init(this.playerOwner,h.GameObjectType.Explosion,this,e,this._playersInRange)},t.prototype.checkPreventedObject=function(e){var t=this;if(void 0===u.default.inst.getBoard(e.x,e.y))return 0;var o=0;return u.default.inst.getMapBoardComponentsByPosInMap(e).forEach(function(e){switch(e.objectType){case h.GameObjectType.Block_Soft:e.destroyBlock(t._bombType),o++;break;case h.GameObjectType.Bomb:e.explosion()}}),o},t.prototype.addDangerousTiles=function(){var e=o.getListHardObject(this.type);if(this.type===s.Dangerous)for(var t=this.posInMap,n=0;n<this.range+1;n++){for(var r=-n,a=n;r<=n;r++){var i=cc.v2(t.x+r,t.y+a);e.includes(u.default.inst.getObjectTypeByPosInMap(i))||c.default.inst.addDangerousTile(i.x,i.y);var l=cc.v2(t.x+r,t.y-a);e.includes(u.default.inst.getObjectTypeByPosInMap(i))||c.default.inst.addDangerousTile(l.x,l.y)}for(a=-n,r=n;a<n;a++)i=cc.v2(t.x+r,t.y+a),e.includes(u.default.inst.getObjectTypeByPosInMap(i))||c.default.inst.addDangerousTile(i.x,i.y),l=cc.v2(t.x-r,t.y+a),e.includes(u.default.inst.getObjectTypeByPosInMap(l))||c.default.inst.addDangerousTile(l.x,l.y)}else{for(n=this.posInMap.x+1;n<=this.posInMap.x+this.range&&!(e.indexOf(u.default.inst.getBoard(n,this.posInMap.y))>=0);n++)c.default.inst.addDangerousTile(n,this.posInMap.y);for(n=this.posInMap.x-1;n>=this.posInMap.x-this.range&&!(e.indexOf(u.default.inst.getBoard(n,this.posInMap.y))>=0);n--)c.default.inst.addDangerousTile(n,this.posInMap.y);for(n=this.posInMap.y+1;n<=this.posInMap.y+this.range&&!(e.indexOf(u.default.inst.getBoard(this.posInMap.x,n))>=0);n++)c.default.inst.addDangerousTile(this.posInMap.x,n);for(n=this.posInMap.y-1;n>=this.posInMap.y-this.range&&!(e.indexOf(u.default.inst.getBoard(this.posInMap.x,n))>=0);n--)c.default.inst.addDangerousTile(this.posInMap.x,n)}},t.prototype.release=function(){var e;this.state!=i.Destroying&&(this.state=i.Destroying,this._isInitialized?this.playerOwner.data.curBombPlanted-=1:cc.warn("Bomb is not initialized but call release. Why?"),cc.js.array.remove(c.default.inst.bombs,this),cc.js.array.remove(this.playerOwner.data.curBombs,this),u.default.inst.removeComponentInMapBoard(this),this.reset(),(null===(e=this.renderComponent)||void 0===e?void 0:e.node.getNumberOfRunningActions())>0&&cc.Tween.stopAllByTarget(this.renderComponent.node),b.GameObjMgr.inst.putBomb(this))},t.getListHardObject=function(e){switch(e){case s.Normal:case s.Power:return o._listHardObj_A;case s.Pierce:case s.Dangerous:return o._listHardObj_B;default:return o._listHardObj_A}},t.prototype._getListPlayerInBombRange=function(){var e=this.posInMap.x,t=this.posInMap.y,n=this.range+o.EXTRA_MOVING_RANGE;this._playersInRange=c.default.inst.players.filter(function(o){return Math.abs(t-o.posInMap.y)+Math.abs(e-o.posInMap.x)<=n})},t.BOMB_TIMER=3e3,t.DANGEROUS_BOMB_MAX_LENGTH=2,t._listHardObj_A=[h.GameObjectType.Block_Hard,h.GameObjectType.Block_Soft,h.GameObjectType.Block_Border],t._listHardObj_B=[h.GameObjectType.Block_Hard,h.GameObjectType.Block_Border],t.SELF_BOMB_TOGGLE=!0,t.ENEMY_BOMB_TOGGLE=!0,t.FLASH_DURATION_PERCT=.4,t.TILE_DISTANCE=10,t.INDICATOR_OPACITY=50,t.EXTRA_MOVING_RANGE=13,a([I(cc.Node)],t.prototype,"appearanceNode",void 0),a([I(cc.Node)],t.prototype,"shadowNode",void 0),a([I(cc.Sprite)],t.prototype,"bombSprite",void 0),a([I(cc.Animation)],t.prototype,"bombIgnitionAnim",void 0),a([I([cc.RenderComponent])],t.prototype,"renderComponents",void 0),o=a([P],t)}(h.default);o.default=C,cc._RF.pop()},{"../../NanoGameCore/Services/Platform/Platform":"Platform","../Game":"Game","../GameCamera":"GameCamera","../GameSpriteFrameMgr":"GameSpriteFrameMgr","../Maps/MapManager":"MapManager","../Network/ImprovedNetClient":"ImprovedNetClient","../Player/PlayerController":"PlayerController","../SoundManager":"SoundManager","../Tracking/TrackingManager":"TrackingManager","../Utils/ConstConfig":"ConstConfig","./Explosion":"Explosion","./FloorPlate":"FloorPlate","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],BrandLogoSFHandler:[function(e,t,o){"use strict";cc._RF.push(t,"f944cipurRJzZc0nUieH0wg","BrandLogoSFHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Utils/ConstConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Fenyx2020=null,t.AC2=null,t.ACB=null,t.ACO=null,t.ACV=null,t.BGAE=null,t.BGAE2_E3=null,t.BrawlHalla=null,t.COL=null,t.EraOfChaos=null,t.FC3=null,t.FC6=null,t.FH2Line=null,t.GH=null,t.GhostRecon=null,t.HungrySharkEvo=null,t.JDBlueYellow=null,t.POP=null,t.R6S=null,t.Rabbids=null,t.RaymanLegends=null,t.TTC=null,t.UASB=null,t.WatchDog2=null,t.WDL=null,t.RiderRepublic=null,t._listWhiteLogoByHeroId=[],t}return r(t,e),t.prototype.onLoad=function(){this._heroBrandLogoMap=new Map([[i.ConstConfig.INVENTORY.ITEM_ID.AURORA,this.COL],[i.ConstConfig.INVENTORY.ITEM_ID.EZIO,this.ACB],[i.ConstConfig.INVENTORY.ITEM_ID.FENYX,this.Fenyx2020],[i.ConstConfig.INVENTORY.ITEM_ID.GRANDMA,this.WDL],[i.ConstConfig.INVENTORY.ITEM_ID.NOMAD,this.GhostRecon],[i.ConstConfig.INVENTORY.ITEM_ID.PANDA,this.JDBlueYellow],[i.ConstConfig.INVENTORY.ITEM_ID.RAYMAN,this.RaymanLegends],[i.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,this.TTC],[i.ConstConfig.INVENTORY.ITEM_ID.RABBID,this.Rabbids],[i.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,this.POP],[i.ConstConfig.INVENTORY.ITEM_ID.VAAS,this.FC3],[i.ConstConfig.INVENTORY.ITEM_ID.WRENCH,this.WatchDog2],[i.ConstConfig.INVENTORY.ITEM_ID.ANGEL,this.EraOfChaos],[i.ConstConfig.INVENTORY.ITEM_ID.ANTON,this.FC6],[i.ConstConfig.INVENTORY.ITEM_ID.APOLLYON,this.FH2Line],[i.ConstConfig.INVENTORY.ITEM_ID.ASH,this.R6S],[i.ConstConfig.INVENTORY.ITEM_ID.BUD,this.GH],[i.ConstConfig.INVENTORY.ITEM_ID.BAYEK,this.ACO],[i.ConstConfig.INVENTORY.ITEM_ID.BODVAR,this.BrawlHalla],[i.ConstConfig.INVENTORY.ITEM_ID.EIVOR,this.ACV],[i.ConstConfig.INVENTORY.ITEM_ID.JADE,this.BGAE],[i.ConstConfig.INVENTORY.ITEM_ID.RABBIDHUNGRYSHARK,this.HungrySharkEvo],[i.ConstConfig.INVENTORY.ITEM_ID.KNOX,this.BGAE2_E3],[i.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER,this.RiderRepublic]]),this._listWhiteLogoByHeroId=[i.ConstConfig.INVENTORY.ITEM_ID.BAYEK,i.ConstConfig.INVENTORY.ITEM_ID.EIVOR,i.ConstConfig.INVENTORY.ITEM_ID.JADE,i.ConstConfig.INVENTORY.ITEM_ID.NOMAD,i.ConstConfig.INVENTORY.ITEM_ID.RABBIDHUNGRYSHARK,i.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,i.ConstConfig.INVENTORY.ITEM_ID.GRANDMA,i.ConstConfig.INVENTORY.ITEM_ID.BUD,i.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,i.ConstConfig.INVENTORY.ITEM_ID.APOLLYON]},t.prototype.getBrandLogoByHero=function(e){return this._heroBrandLogoMap.get(e)},t.prototype.isWhiteLogo=function(e){return this._listWhiteLogoByHeroId.includes(e)},a([l(cc.SpriteFrame)],t.prototype,"Fenyx2020",void 0),a([l(cc.SpriteFrame)],t.prototype,"AC2",void 0),a([l(cc.SpriteFrame)],t.prototype,"ACB",void 0),a([l(cc.SpriteFrame)],t.prototype,"ACO",void 0),a([l(cc.SpriteFrame)],t.prototype,"ACV",void 0),a([l(cc.SpriteFrame)],t.prototype,"BGAE",void 0),a([l(cc.SpriteFrame)],t.prototype,"BGAE2_E3",void 0),a([l(cc.SpriteFrame)],t.prototype,"BrawlHalla",void 0),a([l(cc.SpriteFrame)],t.prototype,"COL",void 0),a([l(cc.SpriteFrame)],t.prototype,"EraOfChaos",void 0),a([l(cc.SpriteFrame)],t.prototype,"FC3",void 0),a([l(cc.SpriteFrame)],t.prototype,"FC6",void 0),a([l(cc.SpriteFrame)],t.prototype,"FH2Line",void 0),a([l(cc.SpriteFrame)],t.prototype,"GH",void 0),a([l(cc.SpriteFrame)],t.prototype,"GhostRecon",void 0),a([l(cc.SpriteFrame)],t.prototype,"HungrySharkEvo",void 0),a([l(cc.SpriteFrame)],t.prototype,"JDBlueYellow",void 0),a([l(cc.SpriteFrame)],t.prototype,"POP",void 0),a([l(cc.SpriteFrame)],t.prototype,"R6S",void 0),a([l(cc.SpriteFrame)],t.prototype,"Rabbids",void 0),a([l(cc.SpriteFrame)],t.prototype,"RaymanLegends",void 0),a([l(cc.SpriteFrame)],t.prototype,"TTC",void 0),a([l(cc.SpriteFrame)],t.prototype,"UASB",void 0),a([l(cc.SpriteFrame)],t.prototype,"WatchDog2",void 0),a([l(cc.SpriteFrame)],t.prototype,"WDL",void 0),a([l(cc.SpriteFrame)],t.prototype,"RiderRepublic",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig"}],BuildConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a3c26DUjBdO/py9pJ58vSjj","BuildConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBuildConfig=void 0,o.NgcBuildConfig={buildVersionName:"20220322.59.48.Gamedistribution",offlineMode:!1,platformGameID:"ASB",buildPlatform:"GameDistribution",uplayGenomeId:"77da9473-1ffa-40d8-bc35-a694196475ef",gameClientURL:"https://nano.ubisoft.com/AllStarBlast/index.html",shortGameClientURL:"uat.nano.ubisoft.com/?gameID=ASB",serverSplitting:!1,useNgcServer:!0,alwaysOfferFreeRevive:!1,enabledDebugMode:!1,gameServerURL:"wss://asb-gameserver.nano.ubisoft.com:1340",tuningDataURL:"https://nanoservices-storage-prod.s3.ap-south-1.amazonaws.com/ASB/1626752543317-GameParameters.yaml",characterUpgradesURL:"https://nanoservices-storage-prod.s3.ap-south-1.amazonaws.com/ASB/1626752580374-CharacterUpgrades.CSV",versionValidURL:"",deploymentEnvironment:"Live",SDK:{FacebookSrv:{appID:0x982e565822f1e,secret:""},NanoSrv:{url:"https://services.nano.ubisoft.com"},UplaySrv:{urlConnect:"https://connect.ubisoft.com",env:"PROD"}},services:{NavBar:{shareButton:!1,backToAppButton:!1,settingButton:!0,abountButton:!0,howtoPlayButton:!0,moreGamesButton:!1,currentGamesButton:!1,likeUsButton:!1,loginButton:!1,addToHomeButton:!1,languageButton:!0,controlButton:!1,cookieButton:!1,shareUrl:"https://nano.ubisoft.com/AllStarBlast/index.html?share=true",shareDescription:"Play free live multiplayer games with Ubisoft Nano!",shareGameName:"All Star Blast!"},Ads:{adInPlayBannerID1:"nano-ubisoft-com_728x90",subID:"TMBNano",bannerHeight:100,timeWaitNewVideo:30},PWF:{mandatoryLogIn:!1,active:!0},Tips:{bundles:"01_Tip_Texture"},ShareMe:{facebook:!0,twitter:!0,email:!0}}},cc._RF.pop()},{}],BundleAsset:[function(e,t,o){"use strict";cc._RF.push(t,"57a8eJYSkBFLJtQk8h3J0G5","BundleAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BundleAsset=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnselected=null,t.backgroundSelected=null,t}return r(t,e),a([c(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),a([s],t)}(cc.Component);o.BundleAsset=l,cc._RF.pop()},{}],Bundle:[function(e,t,o){"use strict";cc._RF.push(t,"dbf3cbUs+NIEaq/YmepHEbz","Bundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Bundle=void 0;var i=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../GameFramework/Scripts/NgcShopManager"),u=e("../AssetComponent/BundleAsset"),p=e("../ItemPool"),d=e("./ItemShop"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.bundleName=null,t.promoteTag=null,t.timeContainer=null,t.itemContainer=null,t.itemContainerLayout=null,t.timeExpired=null,t.fullCost=null,t.fullCostCurrencyIcon=null,t.actualCost=null,t.actualCostCurrencyIcon=null,t.reducePercent=null,t.coinSpriteFrame=null,t.starSpriteFrame=null,t._bundleAsset=null,t._displayingItemInfoList=[],t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._bundleAsset=this.node.getComponent(u.BundleAsset),this.updateBackground()},t.prototype.childUpdateInfo=function(){var e=this.ItemInfo;this.bundleName.setLocalizedText(e.bundleName),this.promoteTag.setLocalizedText(e.xValue),this.fullCost.string=e.fullCost.value.toString(),this.fullCostCurrencyIcon.spriteFrame="coin"===e.fullCost.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.string=this._itemInfo.price.value.toString(),this.actualCostCurrencyIcon.spriteFrame="coin"===e.price.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.node.opacity=l.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<this._itemInfo.price.value?100:255,this.reducePercent.string=e.promoTag.toString()+"%",this.setTimeExpired(),this.updateItems()},t.prototype.childSelect=function(){this.updateBackground()},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateBackground=function(){this.background.spriteFrame=this._isSelected?this._bundleAsset.backgroundSelected:this._bundleAsset.backgroundUnselected},t.prototype.setTimeExpired=function(){this.schedule(this.timerCountDown,1,cc.macro.REPEAT_FOREVER),this.timerCountDown()},t.prototype.timerCountDown=function(){var e=this._itemInfo,t=Date.parse(e.timer)-(new Date).getTime(),o=new Date(t),n=Math.floor(t/864e5),r=o.getHours(),a="0"+o.getMinutes(),i="0"+o.getSeconds();this.timeExpired.string=n.toString()+(n>1?" Days ":" Day ")+r+":"+a.substr(-2)+":"+i.substr(-2),t<0&&l.NgcShopManager.getInstance().checkRemoveEliminatedBundle()},t.prototype.isNewItemList=function(){for(var e=function(e){if(-1==t._displayingItemInfoList.findIndex(function(t){return t.itemID===e}))return{value:!0}},t=this,o=0,n=this.ItemInfo.itemIDs;o<n.length;o++){var r=e(n[o]);if("object"==typeof r)return r.value}return!1},t.prototype.updateItems=function(){this.isNewItemList()&&(this.removeOldItems(),this.addNewItems())},t.prototype.removeOldItems=function(){this.itemContainerLayout.node.children.forEach(function(e){p.NgcItemPool.inst.putShopItem(e)}),this.itemContainerLayout.node.removeAllChildren()},t.prototype.addNewItems=function(){var e=this;this._displayingItemInfoList=[],this.ItemInfo.itemIDs.map(function(e){return c.NgcItemInfoManager.getInstance().getSingleItemInfo(e)}).forEach(function(t){var o=p.NgcItemPool.inst.getSingleItem(t.displayType);e.itemContainerLayout.node.addChild(o);var n=o.getComponent(d.ItemShop);n.Interactable=!1;var r={};Object.assign(r,t),r.isBought=!0,r.itemStatusType=c.NgcItemStatusType.Unlock,n.updateInfo(r),e._displayingItemInfoList.push(r)})},t.prototype.resize=function(e){i.ResizableComponent.getResizableComponent(this.node).baseSize.x=this.node.x=0,i.ResizableComponent.resizeNodeByWidth(this.node,e),this.resizeItems()},t.prototype.resizeItems=function(){var e=this.itemContainerLayout.node.children[0].getComponent(i.ResizableComponent).baseSize.width,t=this.itemContainerLayout.node.children[0].getComponent(i.ResizableComponent).baseSize.height,o=this.itemContainerLayout,n=this.itemContainerLayout.node.children.length,r=this.itemContainer.height,a=(this.itemContainer.width-o.paddingLeft-o.paddingRight-(n-1)*o.spacingX)/n;if(a/e*t<=r){var s=Math.floor(a);this.itemContainerLayout.node.children.forEach(function(e){return i.ResizableComponent.resizeNodeByWidth(e,s)})}else{var c=Math.floor(r);this.itemContainerLayout.node.children.forEach(function(e){return i.ResizableComponent.resizeNodeByHeight(e,c)})}},a([g(cc.Sprite)],t.prototype,"background",void 0),a([g(s.NgcLabelLocalized)],t.prototype,"bundleName",void 0),a([g(s.NgcLabelLocalized)],t.prototype,"promoteTag",void 0),a([g(cc.Node)],t.prototype,"timeContainer",void 0),a([g(cc.Node)],t.prototype,"itemContainer",void 0),a([g(cc.Layout)],t.prototype,"itemContainerLayout",void 0),a([g(cc.Label)],t.prototype,"timeExpired",void 0),a([g(cc.Label)],t.prototype,"fullCost",void 0),a([g(cc.Sprite)],t.prototype,"fullCostCurrencyIcon",void 0),a([g(cc.Label)],t.prototype,"actualCost",void 0),a([g(cc.Sprite)],t.prototype,"actualCostCurrencyIcon",void 0),a([g(cc.Label)],t.prototype,"reducePercent",void 0),a([g(cc.SpriteFrame)],t.prototype,"coinSpriteFrame",void 0),a([g(cc.SpriteFrame)],t.prototype,"starSpriteFrame",void 0),a([h],t)}(d.ItemShop);o.Bundle=m,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/BundleAsset":"BundleAsset","../ItemPool":"ItemPool","./ItemShop":"ItemShop"}],1:[function(e,t){var o,n,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(o===setTimeout)return setTimeout(e,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}function c(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}})();var l,u=[],p=!1,d=-1;function f(){p&&l&&(p=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!p){var e=s(f);p=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,p=!1,c(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new g(e,t)),1!==u.length||p||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],2:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},{}],3:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,t,o){(function(t,n){var r=/%[sdj%]/g;o.format=function(e){if(!b(e)){for(var t=[],o=0;o<arguments.length;o++)t.push(s(arguments[o]));return t.join(" ")}o=1;for(var n=arguments,a=n.length,i=String(e).replace(r,function(e){if("%%"===e)return"%";if(o>=a)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}default:return e}}),c=n[o];o<a;c=n[++o])v(c)||!I(c)?i+=" "+c:i+=" "+s(c);return i},o.deprecate=function(e,r){if(N(n.process))return function(){return o.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return e.apply(this,arguments)}};var a,i={};function s(e,t){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&o._extend(n,t),N(n.showHidden)&&(n.showHidden=!1),N(n.depth)&&(n.depth=2),N(n.colors)&&(n.colors=!1),N(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var o=s.styles[t];return o?"\x1b["+s.colors[o][0]+"m"+e+"\x1b["+s.colors[o][1]+"m":e}function l(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function p(e,t,n){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==o.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return b(r)||(r=p(e,r,n)),r}var a=d(e,t);if(a)return a;var i=Object.keys(t),s=u(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),w(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(t);if(0===i.length){if(O(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(P(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(C(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return f(t)}var l,_="",v=!1,S=["{","}"];return y(t)&&(v=!0,S=["[","]"]),O(t)&&(_=" [Function"+(t.name?": "+t.name:"")+"]"),P(t)&&(_=" "+RegExp.prototype.toString.call(t)),C(t)&&(_=" "+Date.prototype.toUTCString.call(t)),w(t)&&(_=" "+f(t)),0!==i.length||v&&0!=t.length?n<0?P(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=v?h(e,t,n,s,i):i.map(function(o){return g(e,t,n,s,o,v)}),e.seen.pop(),m(l,_,S)):S[0]+_+S[1]}function d(e,t){if(N(t))return e.stylize("undefined","undefined");if(b(t)){var o="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(o,"string")}return S(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,o,n,r){for(var a=[],i=0,s=t.length;i<s;++i)R(t,String(i))?a.push(g(e,t,o,n,String(i),!0)):a.push("");return r.forEach(function(r){r.match(/^\d+$/)||a.push(g(e,t,o,n,r,!0))}),a}function g(e,t,o,n,r,a){var i,s,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),R(n,r)||(i="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(o)?p(e,c.value,null):p(e,c.value,o-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),N(i)){if(a&&r.match(/^\d+$/))return s;(i=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function m(e,t,o){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?o[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+o[1]:o[0]+t+" "+e.join(", ")+" "+o[1]}function y(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function v(e){return null===e}function S(e){return"number"==typeof e}function b(e){return"string"==typeof e}function N(e){return void 0===e}function P(e){return I(e)&&"[object RegExp]"===T(e)}function I(e){return"object"==typeof e&&null!==e}function C(e){return I(e)&&"[object Date]"===T(e)}function w(e){return I(e)&&("[object Error]"===T(e)||e instanceof Error)}function O(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}o.debuglog=function(e){if(N(a)&&(a=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!i[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=t.pid;i[e]=function(){var t=o.format.apply(o,arguments);console.error("%s %d: %s",e,n,t)}}else i[e]=function(){};return i[e]},o.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=y,o.isBoolean=_,o.isNull=v,o.isNullOrUndefined=function(e){return null==e},o.isNumber=S,o.isString=b,o.isSymbol=function(e){return"symbol"==typeof e},o.isUndefined=N,o.isRegExp=P,o.isObject=I,o.isDate=C,o.isError=w,o.isFunction=O,o.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},o.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o.log=function(){console.log("%s - %s",D(),o.format.apply(o,arguments))},o.inherits=e("inherits"),o._extend=function(e,t){if(!t||!I(t))return e;for(var o=Object.keys(t),n=o.length;n--;)e[o[n]]=t[o[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:1,inherits:2}],CCGIFTest:[function(e,t,o){"use strict";cc._RF.push(t,"95292FzWddAUopOS5LSKBKW","CCGIFTest");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CCGIFTest=void 0;var c=e("./CCGIF"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifImage=null,t}return r(t,e),t.prototype.start=function(){return i(this,void 0,void 0,function(){return s(this,function(){return cc.find("Canvas/loading").active=!0,cc.find("Canvas/btnPlay").active=!1,cc.find("Canvas/loading").active=!1,cc.find("Canvas/btnPlay").active=!0,console.debug("preload success"),[2]})})},t.prototype.onLoad=function(){this.gifImage.getComponent(c.default).loadUrl("https://nanoservices-storage.s3.ap-south-1.amazonaws.com/NGC/1636532242433-UnE.gif")},a([p(cc.Node)],t.prototype,"gifImage",void 0),a([u],t)}(cc.Component);o.CCGIFTest=d,cc._RF.pop()},{"./CCGIF":"CCGIF"}],CCGIF:[function(e,t,o){"use strict";cc._RF.push(t,"c0ff5NcIN5BPITgP1IQiCbP","CCGIF");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./GIF"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="",t.delays=[],t.frames=[],t.frameIdx=0,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.preload=function(){return i(this,void 0,void 0,function(){var e=this;return s(this,function(){return c.GIFCache.getInstance(),[2,new Promise(function(t,o){cc.resources.load(e.path,function(n,r){console.log(n,r),n?o(n):(e.delays=r._nativeAsset.delays.map(function(e){return e/100}),e.frames=r._nativeAsset.spriteFrames,t())})})]})})},t.prototype.loadUrl=function(e,t,o){var n=this;this.gifSp=e,this.gifSp.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.gifSp.node.setContentSize(152,152),c.GIFCache.getInstance(),console.log("@@@@ load loadUrl ",t),cc.assetManager.loadAny({url:t},function(e,r){console.log(e,r),e||(n.delays=r.delays.map(function(e){return e/100}),n.frames=r.spriteFrames,console.log("@@@@ .play ",t),o&&o(),n.play(!0))})},t.prototype.play=function(e,t){var o=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),t||this.stop(),this.frames.length){if(this.frameIdx>=this.frames.length&&(this.frameIdx=0,!e))return;this.gifSp.spriteFrame=this.frames[this.frameIdx],this.scheduleOnce(function(){o.play(e,!0)},this.delays[this.frameIdx]),this.frameIdx++}},t.prototype.stop=function(){this.frameIdx=0,this.unscheduleAllCallbacks()},a([p(cc.String)],t.prototype,"path",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./GIF":"GIF"}],CONSTANTS:[function(e,t,o){"use strict";cc._RF.push(t,"ded84qp1pxDWZW97OXieGnS","CONSTANTS"),Object.defineProperty(o,"__esModule",{value:!0}),o.NGC_CONSTANTS=void 0,o.NGC_CONSTANTS={LOCALIZATION_LANG:{ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"},LEADER_BOARD_UI_URL:{leaderBoardUIPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI",leaderBoardUIPCPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI_PC"},LOCALIZATION_JSON_URL:"Json/Localization/Localization",INVENTORY:{TYPE:{CURRENCY:"currency",EQUIPPABLE:"equippable",COMSUMABLE:"consumable"},CATEGORY:{SOFT_CURRENCY:"sort_currency",HEAD:"head",BODY:"body",FACE:"face",BOOSTER:"booster"},ITEM_ID:{COIN:"coin",STAR:"star",MAGNET:"magnet",GOLD:"gold",ELECTRO:"electro"}}},cc._RF.pop()},{}],CameraHelper:[function(e,t,o){"use strict";cc._RF.push(t,"1f81ccUni5CcZTGMTQ10cvc","CameraHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Main"),s=cc._decorator,c=s.ccclass,l=s.requireComponent,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myCameraOb=null,t.screenHeight=0,t.screenWidth=0,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t}return r(t,e),t.prototype.onLoad=function(){this.myCameraOb=this.node.getComponent(cc.Camera),this.myCameraOb||console.error("MISSING CAMERA")},t.prototype.recalc=function(){this.screenHeight=i.Main.inst.mainCanvas.node.height,this.screenWidth=i.Main.inst.mainCanvas.node.width;var e=cc.v2(this.screenWidth,this.screenHeight),t=cc.v2(0,0),o=this.myCameraOb.getScreenToWorldPoint(e);this.topOfScreenInWorldUnits=o.y,this.rightOfScreenInWorldUnits=o.x;var n=this.myCameraOb.getScreenToWorldPoint(t);this.bottomOfScreenInWorldUnits=n.y,this.leftOfScreenInWorldUnits=n.x},t.prototype.start=function(){},t.prototype.update=function(){this.recalc()},a([l(cc.Camera)],t.prototype,"onLoad",null),a([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Main":"Main"}],CharacterControllerBase:[function(e,t,o){"use strict";cc._RF.push(t,"a7cd5sZ9WhDfYvA3d7+NbZJ","CharacterControllerBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Game"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.groundHeightBelowCharacter=0,t.normalOfGroundBelowCharacter=cc.v2(0,1),t.ceilingAboveCharacter=0,t.characterHeight=0,t._data=null,t}return r(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.setup=function(){},t.prototype.spawnFlyawayText=function(e){var t=cc.instantiate(i.default.inst.characterFlyawayText),o=t.getComponent(cc.Label);return t.parent=this.node.parent,t.setPosition(this.node.getPosition()),o.string=e,t.y+=this.characterHeight,cc.tween(t).by(.4,{position:cc.v3(0,this.characterHeight)}).call(function(){t.destroy()}).start(),o},t.prototype.findGround=function(){},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.start=function(){var e=this.node.getComponentInChildren(sp.Skeleton).node;this.characterHeight=e.getBoundingBoxToWorld().height},a([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./Game":"Game"}],CharacterUpgradeUI:[function(e,t,o){"use strict";cc._RF.push(t,"e38f3/r5nZAA4MBomaRr2Ag","CharacterUpgradeUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../NanoGameCore/Services/Inventory/Inventory"),l=e("../../GameSpriteFrameMgr"),u=e("../../Main"),p=e("../../Player/CharacterUpgradesMgr"),d=e("../../Player/PlayerSkinMgr"),f=e("../../Tracking/TrackingManager"),h=e("../../UserInfo"),g=e("../../Utils/ConstConfig"),m=e("./ItemUpgrade"),y=cc._decorator,_=y.ccclass,v=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logoBrandSprite=null,t.upgradeItems=[],t.costLabel=null,t.upgradeButton=null,t.upgradeLayoutWidget=null,t.brandLogoBGNode=null,t.rewardClaimAnimation=null,t.shopScreenRef=null,t._curCost=0,t._curHero="",t._curItemIcon=null,t._buttonIsWorking=!1,t._upgradeLayoutWidgetChange={up:100,down:60},t}return r(t,e),t.prototype.onLoad=function(){this._defaultBrandLogoSize=this.logoBrandSprite.node.getContentSize()},t.prototype.updateUI=function(e){this._curHero=e;var t=d.default.inst.getHeroUpgradeSlot(e),o=p.default.inst.getHeroUpgradeDataStatus(e),n=this.upgradeItems.length;this.upgradeButton.node.active=t<n&&d.default.inst.getUnlockedHeroes().includes(this._curHero),this.updateBrandLogo(this._curHero);for(var r=0;r<n;r++){var a=this.upgradeItems[r];if(a){var i=r+1,s=i>t;a.lockNode.active=s;var c=o[i],l=p.default.inst.getItemUpgradeSpriteFrame(c.value1);a.itemSprite.spriteFrame=l,i===t+1&&(this._curCost=c.cost,this.costLabel.string=c.cost.toString(),this._curItemIcon=l)}}this.readaptBox()},t.prototype.onButtonUpgradeClick=function(){var e=this;if(h.UserInfo.curCoin<this._curCost)u.Main.inst.showNotEnoughCoinMessage(this.upgradeButton.node);else if(!this._buttonIsWorking){this._buttonIsWorking=!0;var t=[{itemID:this._curHero.concat("_upgrade"),count:1},{itemID:g.ConstConfig.INVENTORY.ITEM_ID.COIN,count:-this._curCost}];c.NgcInventory.inst.addItemList(t,function(){h.UserInfo.updateInventoryWithPlatform().then(function(){e.updateUI(e._curHero),e.shopScreenRef&&(e.shopScreenRef.coinNumber.string=h.UserInfo.curCoin.toString()),e._buttonIsWorking=!1}),e.rewardClaimAnimation&&e.rewardClaimAnimation.showClaimRewardAnimationForHeroUpgrade(e._curItemIcon,s.NgcLocalizedManager.t("ASB_UNLOCKED").text);var t=d.default.inst.getHeroUpgradeSlot(e._curHero).toString();f.default.inst.onCharacterUpgrade(e._curHero,t,e._curCost,e._curCost)})}},t.prototype.updateBrandLogo=function(e){var t=l.default.inst.brandLogoSFHandler.getBrandLogoByHero(this._curHero);this.logoBrandSprite.node.scale=1,this.logoBrandSprite.spriteFrame=t,this.logoBrandSprite.node.setContentSize(t.getOriginalSize());var o=this._defaultBrandLogoSize.width/this.logoBrandSprite.node.width,n=this._defaultBrandLogoSize.height/this.logoBrandSprite.node.height;this.logoBrandSprite.node.scale=o<n?o:n,this.logoBrandSprite.node.setPosition(0,0);var r=l.default.inst.brandLogoSFHandler.isWhiteLogo(e);this.brandLogoBGNode.color=r?cc.Color.BLACK:cc.Color.WHITE},t.prototype.readaptBox=function(){var e=this.upgradeButton.node.active?this._upgradeLayoutWidgetChange.up:this._upgradeLayoutWidgetChange.down;this.upgradeLayoutWidget.bottom=e,this.upgradeLayoutWidget.updateAlignment()},a([v(cc.Sprite)],t.prototype,"logoBrandSprite",void 0),a([v({tooltip:"For slot 1 2 3",type:[m.default]})],t.prototype,"upgradeItems",void 0),a([v(i.NgcLabelLocalized)],t.prototype,"costLabel",void 0),a([v(cc.Button)],t.prototype,"upgradeButton",void 0),a([v(cc.Widget)],t.prototype,"upgradeLayoutWidget",void 0),a([v(cc.Node)],t.prototype,"brandLogoBGNode",void 0),a([_],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../GameSpriteFrameMgr":"GameSpriteFrameMgr","../../Main":"Main","../../Player/CharacterUpgradesMgr":"CharacterUpgradesMgr","../../Player/PlayerSkinMgr":"PlayerSkinMgr","../../Tracking/TrackingManager":"TrackingManager","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","./ItemUpgrade":"ItemUpgrade"}],CharacterUpgradesMgr:[function(e,t,o){"use strict";cc._RF.push(t,"4554fbxv/NEZqJu0U7Llvso","CharacterUpgradesMgr");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_UPGRADE_VALUE_1=void 0;var r,a=e("../../NanoGameCore/Core/nCSV"),i=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../../NanoGameCore/SDK/Nano/NanoSrv"),c=e("../GameObjects/GameObjectBase"),l=e("../GameSpriteFrameMgr"),u=cc._decorator,p=u.ccclass;u.property,function(e){e.speed_up="speed_up",e.bomb_up="bomb_up",e.bomb_pass="bomb_pass",e.max_bomb="max_bomb",e.mine_bomb="mine_bomb",e.fire_up="fire_up",e.dangerous_bomb="dangerous_bomb",e.max_fire="max_fire",e.max_health="max_health",e.power_bomb="power_bomb",e.pierce_bomb="pierce_bomb",e.max_speed="max_speed",e.rubber_bomb="rubber_bomb"}(r=o.E_UPGRADE_VALUE_1||(o.E_UPGRADE_VALUE_1={}));var d=function(){function e(){this._characterUpgradesURL="",this._isInitialized=!1,this._characterUpdateTable={}}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return t._inst||(t._inst=new t),t._inst},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e=this;return this._itemUpgradeSFMap=new Map([[r.speed_up,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Mov_Speed)],[r.bomb_up,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Number)],[r.bomb_pass,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Pass)],[r.fire_up,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Range)],[r.dangerous_bomb,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Danger)],[r.power_bomb,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Power)],[r.pierce_bomb,l.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(c.GameObjectType.PU_Bomb_Pierce)]]),this._characterUpgradesURL=i.NgcBuildConfig.characterUpgradesURL,!i.NgcBuildConfig.enabledDebugMode&&this._characterUpgradesURL.length>0&&!i.NgcBuildConfig.offlineMode?new Promise(function(t,o){e._loadFromRemote(t,o)}):new Promise(function(t,o){e._loadFromLocal(t,o)})},e.prototype._loadFromRemote=function(e,t){var o=s.default.inst.getCurGameInfo()._custom.CharacterUpgrades.data.table;o.length>0?this._initTypeTable(o)&&(this._isInitialized=!0,e(),cc.log("LOAD FROM LIVEOPS")):(cc.warn("CAN'T NOT LOAD DATA FROM REMOTE"),this._loadFromLocal(e,t))},e.prototype._loadFromLocal=function(e,o){var n=this;cc.resources.load(t.CHA_UPGRADE_DATA_PATH,function(t,r){if(!t&&(r||r.text))return n._initTypeTableFromCSV(r.text)?(n._isInitialized=!0,e(),void cc.log("LOAD FROM LOCAL")):void o();o()})},e.prototype._initTypeTable=function(e){if(!e||0===e.length)return!1;var t=this;return this._characterUpdateTable={},e.forEach(function(e){var o=e.hero;t._characterUpdateTable[o]||(t._characterUpdateTable[o]=[]),e.value2&&(e.value2=parseInt(e.value2.toString())),t._characterUpdateTable[o][e.slot]=e}),!0},e.prototype._initTypeTableFromCSV=function(e){var t=a.nCSV.parseTable(e);if(!t)return!1;var o=this;return this._characterUpdateTable={},t.forEach(function(e){var t=e.hero;o._characterUpdateTable[t]||(o._characterUpdateTable[t]=[]),e.value2&&(e.value2=parseInt(e.value2.toString())),o._characterUpdateTable[t][e.slot]=e}),!0},e.prototype.getHeroUpgradeDataStatus=function(e){return this._characterUpdateTable[e]||[]},e.prototype.getItemUpgradeSpriteFrame=function(e){var t=null;return l.default.inst?t=this._itemUpgradeSFMap.get(e):t},e.CHA_UPGRADE_DATA_PATH="Text/CharacterUpgrades",e._inst=null,t=n([p],e)}();o.default=d,cc._RF.pop()},{"../../NanoGameCore/Core/nCSV":"nCSV","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../GameObjects/GameObjectBase":"GameObjectBase","../GameSpriteFrameMgr":"GameSpriteFrameMgr"}],ConstConfig:[function(e,t,o){"use strict";cc._RF.push(t,"81007HJ4aNIy64xPOXXbO+j","ConstConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConstConfig=void 0,o.ConstConfig={CROSS_PROMOTION:{GAME_NAME:"dunkshot",JSON_CONFIG_URL:"https://umc-static-content.upaidui.com/crosspromotion/cp_config.json",PREFAB_URL:{CROSS_PROM:"Prefabs/CrossPromotion/CrossSection",POPUP_PROM:"Prefabs/CrossPromotion/PopupSection",MARQUEE_PROM:"Prefabs/CrossPromotion/MarqueeSection",HIGHLIGHTED_PROM:"Prefabs/CrossPromotion/HighlightedSection"}},GROUP_NODE:{FIXED_POS_UI:"FixedPosUI"},TRACKING:{ITEM_NONE:"none",POINTCUT:{BANNER_MAINMENU:"banner_mainmenu",BANNER_SHOP:"banner_shop",BANNER_LEADERBOARD:"banner_leaderboard",BANNER_POSITIONBOARD:"banner_positionboard",BANNER_REWARD:"banner_reward",BANNER_PARTYROOM:"banner_partyroom",BANNER_LOADING:"banner_loading",BANNER_GAME:"banner_game",BANNER_REVIVE:"banner_revive",INTER_PREGAME:"inter_pregame",VIDEO_BOOSTER:"video_booster",VIDEO_MULTIPLY:"video_multiply",VIDEO_DAILY2X:"video_daily2x",VIDEO_SHOP:"video_shop",VIDEO_RIVIVE:"video_revive"}},SUBPACKAGE_NAME:{},SCENE:{GAME_SCENE:"GameScene"},PARAMS:{TIME_INVULNERABLE:15,HAT_SLOTS:["acc_1","4_head"],DRESS_SLOTS:["5_body","5_hand_R","5_hand_L","5_leg_R","5_leg_L","L_sholder"],GLASSES_SLOTS:["acc_2","acc_3","acc_4","go_1"],BOOSTER_SKIN:{ELECTRIC:"ELECTRIC",MAGNET:"MAGNET",SHIELD:"SHIELD",NONE:"NAKED"},POS_X_START_COUNT_DISTANCE:1e3,BOOSTER_PRICE:30,SOUND_RADIUS:10,SOUND_SHRINKING_RADIUS:1e3,SOUND_MAX_VOLUME:.2,SOUND_MAX_EXPLOSION_VOLUME:.2,SOUND_MAX_SHRINKING_VOLUME:.07,MAX_EXPLOSION_SOUNDS:4,DEFAULT_COIN:0,FIX_SCREEN:cc.v2(640,960),SPEED_TREADMILL_BACKWARD:.5,SPEED_TREADMILL_FORWARD:2,MAX_ENEMIES_IN_SECTION:4,OBSTACLE_POINT_START:10,BENEFIT_POINT_START:30,ENEMY_POINT_START:1,OBSTACLE_POINT_ADD_IN_SECTION:3,BENEFIT_POINT_ADD_IN_SECTION:3,ENEMY_POINT_ADD_IN_SECTION:1,LOOT_COIN_MAX:10,LOOT_COIN_RATE:.5,LOOT_COIN_MIN:5,TIME_START_VERY_EASY_PHASE:0,TIME_START_EASY_PHASE:10,TIME_START_MEDIUM_PHASE:40,TIME_START_HARD_PHASE:100,TIME_START_EXTREME_PHASE:180,TIME_TO_MAX_SPEED_EXTREME:30,GAME_SPEED_VERY_EASY:1,GAME_SPEED_EASY:1,GAME_SPEED_MEDIUM:1.25,GAME_SPEED_HARD:1.5,GAME_SPEED_EXTREME:2,percentRateOfMagnet:.1,percentRateOfTurbo:.1,percentRateOfShield:.3,timeRespawnCoin:2,timeRespawnStar:2,URL_CHECK_COUNTRY:"https://www.cloudflare.com/cdn-cgi/trace",POS_EMOJI:cc.v2(80,110),SECRET_KEY:"123321",FORWARD_SPEED_BOOSTERS:40,VERTICAL_SPEED_BOOSTERS:25,AMPLITUDE_MOVING_BOOSTER:50,BOOSTER_POS_Y_MIN:400,BOOSTER_POS_Y_MAX:700,DIFFICULTY_MULTIPLIER:.4,SCORE_PER_PIXEL:.1,LAND_MARKER_DISTANCE:250,MULTIPLY_VIDEO_REWARD:2,COIN_BONUS_VIDEO_REWARD:50,RATE_DISPLAY_VIDEO_REWARD:.5,DEFAULT_BENEFIT_MULTIPLIER:2,MAX_BENEFIT_MULTIPLIER:5,INCREMENTAL_REWARD_MULTIPLIER:.5,REVIVE:{OFFER_COUNT_DOWN:5,MIN_SCORE:0,MIN_REMAINING_PLAYERS:5,REVIVE_INVINCIBLE_DURATION:2,MIN_DISTANCE_FROM_SHRINKING_LAYER:5}},DIALOG_URLS:{NoticeDialog:"Prefabs/Dialogs/NoticeDialog",YesNoDialog:"Prefabs/Dialogs/YesNoDialog",ConfirmDialog:"Prefabs/Dialogs/ConfirmDialog",SelectionDialog:"Prefabs/Dialogs/SelectionDialog",TextboxDialog:"Prefabs/Dialogs/TextboxDialog",BuyGoldDialog:"Prefabs/Dialogs/BuyGoldDialog",OptionDialog:"Prefabs/Dialogs/OptionDialog",SelectLanguageDialog:"Prefabs/Dialogs/SelectLanguage",ParamsDebugDialog:"Prefabs/Dialogs/ParamsDebugDialog",AlreadyActivatedBoosterDialog:"Prefabs/Dialogs/AlreadyActivatedBoosterDialog",MessageDialog:"Prefabs/Dialogs/MessageDialog",ShareDialog:"Prefabs/Dialogs/ShareDialog",ConflictDialog:"Prefabs/Dialogs/ConflictDialog"},TERRAIN_URLS:{Terrain1:"Prefabs/TerrainPieces/Terrain1",Terrain2:"Prefabs/TerrainPieces/Terrain2",Terrain3:"Prefabs/TerrainPieces/Terrain3",Terrain4:"Prefabs/TerrainPieces/Terrain4",Terrain5:"Prefabs/TerrainPieces/Terrain5",Terrain6:"Prefabs/TerrainPieces/Terrain6",Terrain7:"Prefabs/TerrainPieces/Terrain7",Terrain8:"Prefabs/TerrainPieces/Terrain8"},OBSTACLE_URLS:{Obstacle1:"Prefabs/Obstacles/Small/ElectroBeamSmall2Coin",Obstacle2:"Prefabs/Obstacles/Small/ElectroBeamSmall2CoinH",Obstacle3:"Prefabs/Obstacles/Small/ElectroBeamTiny2Coin",Obstacle4:"Prefabs/Obstacles/Small/ElectroBeamTiny2CoinH",Obstacle5:"Prefabs/Obstacles/Small/Treadmill",Obstacle6:"Prefabs/Obstacles/Medium/2ElectroBeamSmall4",Obstacle7:"Prefabs/Obstacles/Medium/2ElectroBeamSmall4Coins",Obstacle8:"Prefabs/Obstacles/Medium/2ElectroBeamSmall4Coins2",Obstacle9:"Prefabs/Obstacles/Medium/ElectroBeamMed6Coin",Obstacle10:"Prefabs/Obstacles/Medium/ElectroBeamSmall8Coins",Obstacle11:"Prefabs/Obstacles/Medium/ElectroBeamSmall8Coins2",Obstacle12:"Prefabs/Obstacles/Medium/ElectroBeamSmall8Coins3",Obstacle13:"Prefabs/Obstacles/Medium/ElectroBeamTiny4Coin",Obstacle14:"Prefabs/Obstacles/Medium/TreadmillLong",Obstacle15:"Prefabs/Obstacles/Big/2ElectroBeam12Coins",Obstacle16:"Prefabs/Obstacles/Big/2ElectroBeam12Coins2",Obstacle17:"Prefabs/Obstacles/Big/2ElectroBeam12Coins3",Obstacle18:"Prefabs/Obstacles/Big/2ElectroBeam12Coins4",Obstacle19:"Prefabs/Obstacles/Big/2ElectroBeam12Coins5",Obstacle20:"Prefabs/Obstacles/Big/2ElectroBeam12Coins6",Obstacle21:"Prefabs/Obstacles/Big/4ElectroBeamTiny4Coin"},BENEFIT_URLS:{Benefit1:"Prefabs/Benefits/2CoinsStar",Benefit2:"Prefabs/Benefits/4CoinsStar",Benefit3:"Prefabs/Benefits/9Coins",Benefit4:"Prefabs/Benefits/12Coins",Benefit5:"Prefabs/Benefits/12CoinsStar",Benefit6:"Prefabs/Benefits/16Coins",Benefit7:"Prefabs/Benefits/25Coins",Benefit8:"Prefabs/Benefits/25Coins",Benefit9:"Prefabs/Benefits/platformStar",Benefit10:"Prefabs/Benefits/4CoinsStar2",Benefit11:"Prefabs/Benefits/16CoinsStar2",Benefit12:"Prefabs/Benefits/Turbo",Benefit14:"Prefabs/Benefits/Magnet"},ENEMY_URLS:{BazookaEnemy:"Prefabs/Enemies/BazookaEnemy",BlowTorchEnemy:"Prefabs/Enemies/BlowTorchEnemy",UziEnemy:"Prefabs/Enemies/UziEnemy",platformUziEnemy:"Prefabs/Enemies/platformUziEnemy",platformBazookaEnemy:"Prefabs/Enemies/platformBazookaEnemy"},LEADER_BOARD_UI_URL:{leaderBoardUIPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI",leaderBoardUIPCPrefab:"CrossFeature/Prefabs/LeaderBoard/LeaderBoardUI_PC"},COIN:"COIN",STAR:"STAR",BEST_SCORE:"BEST_SCORE",IS_DAILYREWARD_ALREADY_SHOW:"IS_DAILYREWARD_ALREADY_SHOW",IS_ALREADY_UPDATE_OLD_BEST_SCORE:"IS_ALREADY_UPDATE_OLD_BEST_SCORE",IS_HARD_RESET_DATA:"IS_HARD_RESET_DATA",NUMBER_OF_ADS_WATCHED:"NUMBER_OF_ADS_WATCHED",NUMBER_OF_ADS_SESSION:"NUMBER_OF_ADS_SESSION",ITEMS_BOUGHT:"ITEMS_BOUGHT",USER_NAME_LOCAL:"USER_NAME_LOCAL",TOTAL_TIME_SPENT:"TOTAL_TIME_SPENT",CUR_BOOSTER:"CUR_BOOSTER",CUR_FACEBOOK_ID:"CUR_FACEBOOK_ID",CUR_SOCIAL_ID:"CUR_SOCIAL_ID",CUR_AVATAR_URL:"CUR_AVATAR_URL",CUR_LOCALIZATION_LANG:"CUR_LOCALIZATION_LANG",FACEBOOK_ACCESS_TOKEN:"FACEBOOK_ACCESS_TOKEN",LOCALIZATION_JSON_URL:"Json/Localization/Localization",SECRET_KEY:"secretKey",LOCALIZATION_LANG:{ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"},INVENTORY:{TYPE:{CURRENCY:"currency",EQUIPPABLE:"equippable",UPGRADE:"upgrade",CONSUMABLE:"consumable"},CATEGORY:{SOFT_CURRENCY:"sort_currency",HERO:"hero"},ITEM_ID:{AURORA:"Aurora",EZIO:"Ezio",FENYX:"Fenyx",NOMAD:"Nomad",PANDA:"Panda",RABBID:"Rabbid",RAYMAN:"Rayman",SAM_FISHER:"SamFisher",THE_PRINCE:"Theprince",VAAS:"Vaas",WRENCH:"Wrench",COIN:"coin",CROWN:"crown",GRANDMA:"Grandma",ANGEL:"Angel",ANTON:"Anton",APOLLYON:"Apollyon",ASH:"Ash",BUD:"BUD",BAYEK:"Bayek",BODVAR:"Bodvar",EIVOR:"Eivor",JADE:"Jade",RABBIDHUNGRYSHARK:"RabbidHungryShark",KNOX:"Knox",PUNKRIDER:"Punkrider",SPEED_UP:"speed_up",BOMB_UP:"bomb_up",FIRE_UP:"fire_up"}},FACEBOOK_APP_ID:"2677196552548126",SHOP:{UNLOCK_ITEM_PRICE:100},LOCAL_SAVE_KEY:{ALREADY_FTUE:"ALREADY_FTUE",PLAYER_SKIN_DATA:"PLAYER_SKIN_DATA",CROWN_AMOUNT:"CROWN_AMOUNT",FIRST_GAME_TIME:"FIRST_GAME_TIME",GAME_ROUND_COUNT:"GAME_ROUND_COUNT",COIN_AMOUNT:"COIN_AMOUNT"}},cc._RF.pop()},{}],ControlHint:[function(e,t,o){"use strict";cc._RF.push(t,"d5d21cMgbtJJoH9cHOH5T9p","ControlHint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tapHint=null,t.spaceHint=null,t}return r(t,e),t.prototype.start=function(){var e=cc.sys.isMobile;this.tapHint.active=e,this.spaceHint.active=!e;var t=e?this.tapHint:this.spaceHint;cc.tween(t).delay(3).to(7,{opacity:0}).call(function(){t.active=!1}).start()},a([c(cc.Node)],t.prototype,"tapHint",void 0),a([c(cc.Node)],t.prototype,"spaceHint",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CountDown:[function(e,t,o){"use strict";cc._RF.push(t,"1c72fvy8a1J+bSoVgpOkHs1","CountDown");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/Core/Delegate"),s=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SLIDE_DURATION=.1,t.SLIDE_DISTANCE=50,t.label1=null,t.label2=null,t._originPos=null,t._originLabelPos=null,t.countDownStarted=!1,t.delegateOnCountDownEnds=new i.default,t}return r(t,e),t.prototype.onLoad=function(){this._originPos=this.node.position,this._originLabelPos=this.label1.node.position,this.reset()},t.prototype.countDown=function(e){this.countDownStarted=!0;var t=(e=Math.round(e))%2!=0?this.label1:this.label2,o=e%2!=0?this.label2:this.label1;0!=e?t.string=" "+e+" ":c.NgcLocalizedManager.setTextKey(t,"NGC_GO"),3==e?this.slideIn():this.slideLabels(t.node,o.node),e>0?this.scheduleOnce(function(){this.countDown(e-1)}.bind(this),1):this.scheduleOnce(function(){this.reset(),this.delegateOnCountDownEnds.call()}.bind(this),1)},t.prototype.reset=function(){this.node.opacity=0,this.label1.node.opacity=255,this.label2.node.opacity=0,this.label2.node.x=this._originPos.x-this.SLIDE_DISTANCE},t.prototype.slideIn=function(){this.node.x=this._originPos.x-50;var e=cc.tween().to(this.SLIDE_DURATION,{opacity:255},{easing:"sineOut"}),t=cc.tween().to(this.SLIDE_DURATION,{x:this._originPos.x},{easing:"sineOut"});cc.tween(this.node).parallel(e,t).start()},t.prototype.fadeOut=function(){var e=cc.tween().to(.2,{opacity:0},{easing:"sineOut"});cc.tween(this.node).then(e).start()},t.prototype.slideLabels=function(e,t){var o=this._originLabelPos.x+this.SLIDE_DISTANCE,n=cc.tween().to(this.SLIDE_DURATION,{x:o},{easing:"sineOut"}),r=cc.tween().to(this.SLIDE_DURATION,{opacity:0},{easing:"sineOut"});cc.tween(t).parallel(n,r).call(function(){t.x=this._originLabelPos.x-this.SLIDE_DISTANCE}.bind(this)).start();var a=cc.tween().to(this.SLIDE_DURATION,{x:this._originLabelPos.x},{easing:"sineOut"}),i=cc.tween().to(this.SLIDE_DURATION,{opacity:255},{easing:"sineOut"});cc.tween(e).parallel(a,i).start()},a([p(s.NgcLabelLocalized)],t.prototype,"label1",void 0),a([p(s.NgcLabelLocalized)],t.prototype,"label2",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../NanoGameCore/Core/Delegate":"Delegate","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],CountryFlagsManager:[function(e,t,o){"use strict";cc._RF.push(t,"e71bbwOSCZKxp7FQ1DVnUpo","CountryFlagsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCountryFlagsManager=void 0;var i=e("../../Core/Utils"),s=e("./BuildConfig"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countriesFlagSpriteFrame=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this)},t.getLocalCountry=function(){var e=this;s.NgcBuildConfig.offlineMode||i.Utils.getHttp(this.url_check_country,{},function(t,o){t?console.error(t):e.setLocalCountry(o)})},t.setOnGetContryCompletedCallback=function(e){this.callBack=e},t.prototype.getFlagSpriteFrame=function(e){return e?(e=e.toUpperCase(),"CN"===o.localCountry&&["TW","HK","MO"].indexOf(e)>=0&&(e="CN"),e=e.toLowerCase(),this.countriesFlagSpriteFrame.getSpriteFrame(e)):null},t.prototype.getCountryCodes=function(){return i.Utils.getKeys(this.countriesFlagSpriteFrame._spriteFrames)},t.prototype.getRandomCountryCode=function(){return i.Utils.randomArr(this.getCountryCodes())},t.prototype.getRandomFlagSpriteFrame=function(){return i.Utils.randomArr(this.countriesFlagSpriteFrame.getSpriteFrames())},t.setLocalCountry=function(e){var t=e.split("\n");for(var o in t)if(t[o].indexOf("loc=")>=0){var n=t[o].replace("loc=","");n=n.toLowerCase(),this.localCountry=n}this.onGetCountryCompleted()},t.onGetCountryCompleted=function(){this.callBack&&this.callBack()},t.inst=null,t.localCountry="",t.callBack=null,t.url_check_country="https://www.cloudflare.com/cdn-cgi/trace",a([u(cc.SpriteAtlas)],t.prototype,"countriesFlagSpriteFrame",void 0),o=a([l],t)}(cc.Component);o.NgcCountryFlagsManager=p,cc._RF.pop()},{"../../Core/Utils":"Utils","./BuildConfig":"BuildConfig"}],CrownRoadComp:[function(e,t,o){"use strict";cc._RF.push(t,"cb2aahf0LNJfIWUi8p1tQWe","CrownRoadComp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.crownRoadUIParent=null,t.crownRoadUIPrefab=null,t}return r(t,e),t.prototype.start=function(){cc.instantiate(this.crownRoadUIPrefab).parent=this.crownRoadUIParent},a([c(cc.Node)],t.prototype,"crownRoadUIParent",void 0),a([c(cc.Prefab)],t.prototype,"crownRoadUIPrefab",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CrownRoadItem:[function(e,t,o){"use strict";cc._RF.push(t,"a44141OfgROxazS0dmyJl/c","CrownRoadItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCrownRoadItem=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../Services/Inventory/Inventory"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardIcon=null,t.rewardNumberLabel=null,t.checkIconNode=null,t.defaultItemSpriteFrame=null,t.dimColor=new cc.Color(150,150,150),t.glowNode=null,t.rewardItemID=null,t.rankNumber=null,t}return r(t,e),t.prototype.start=function(){this.checkIconNode.active=!1},t.prototype.setDimStatus=function(e){void 0===e&&(e=!0),e=!this.rankNumber&&e,this.rewardIcon.color=e?this.dimColor:cc.color(255,255,255),this.rewardNumberLabel.node.color=e?this.dimColor:cc.color(255,255,255),this.checkIconNode.active=e},t.prototype.setRewardItem=function(e,t,o,n,r){var a=this;void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=!1);var i=null;try{i=s.NgcInventory.inst.objectTypeTable[e].picture,cc.loader.loadRes(i,cc.SpriteFrame,function(e,t){a.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?a.defaultItemSpriteFrame:t})}catch(c){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=this.defaultItemSpriteFrame}null!==o&&(this.rewardIcon.scale=o),null!==t&&t>1?(this.rewardNumberLabel.node.opacity=r?0:255,this.setRewardNumber(t)):this.rewardNumberLabel.node.opacity=0,this.rewardItemID=e,this.rankNumber=n},t.prototype.emptyNextReward=function(){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=null,this.rewardNumberLabel.node.opacity=0,this.rewardItemID=null,this.rankNumber=null},t.prototype.setRewardNumber=function(e){this.rewardNumberLabel.string="x"+e},a([u(cc.Node)],t.prototype,"rewardIcon",void 0),a([u(i.NgcLabelLocalized)],t.prototype,"rewardNumberLabel",void 0),a([u(cc.Node)],t.prototype,"checkIconNode",void 0),a([u(cc.SpriteFrame)],t.prototype,"defaultItemSpriteFrame",void 0),a([u(cc.Color)],t.prototype,"dimColor",void 0),a([u(cc.Node)],t.prototype,"glowNode",void 0),a([l],t)}(cc.Component);o.NgcCrownRoadItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Services/Inventory/Inventory":"Inventory"}],CrownRoadManager:[function(e,t,o){"use strict";cc._RF.push(t,"f84d7w85X1OPYX6iiD3XdHZ","CrownRoadManager");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../Core/nCSV"),a=e("../../../Core/Utils"),i=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../SDK/Nano/NanoSrv"),c=e("../../../Services/Inventory/Inventory"),l=e("../../../Services/Platform/Platform"),u=e("../../../Services/Telemetry/Telemetry"),p=e("../../GameMode/Script/GameModeManager"),d=cc._decorator,f=d.ccclass,h=(d.property,function(){function e(){this.CROWN_BALANCING_PATH="Text/crownBalancing.csv",this.CROWN_REWARDS_PATH="Text/crownRewards.csv",this.crownRank=1,this.rewardData=null,this.balancingData=null,this.loadingTimeout=null,this.fetchDataFromServer(this.onLoadingDataCompleted.bind(this))}var t;return t=e,e.init=function(){t.inst?console.warn("NgcCrownRoadManager was initialized!!"):i.NgcBuildConfig.offlineMode||(t.inst=new t)},e.isInitialized=function(){var e=t.inst;return!!e&&c.NgcInventory.inst&&Object.keys(c.NgcInventory.inst.objectTypeTable).length>0&&e.rewardData&&e.balancingData},e.prototype.onLoadingDataCompleted=function(e,o){var n=this;"rewards"===e&&(this.rewardData={},o.forEach(function(e){if(0!==e.milestone.length){var t=null;e.itemID.match(/crownRank(\d+)/i)&&(t=parseInt(RegExp.$1)),n.rewardData[e.milestone]=[e.itemID,parseInt(e.quantity),t,e.label]}}),t.getCrownRoadData(function(e){t.inst.getRewardsBaseOnPoint(e.crownRank)})),"balancing"===e&&(this.balancingData={},o.forEach(function(e){var t;if(0!==(null===(t=e.crownRank)||void 0===t?void 0:t.length)){var o={};for(var r in e)"crownRank"!==r&&(o[r]=parseInt(e[r]));n.balancingData[e.crownRank]=o}}))},e.prototype.getRewardsBaseOnPoint=function(e,t){void 0===t&&(t=!1);var o=0,n=null,r=null;for(var a in this.rewardData){var i=parseInt(a);if(t?e<=i:e<i)return n=this.rewardData[a],[{point:o,reward:this.rewardData[o]},{point:i,reward:n},r];null!==this.rewardData[a][2]&&(this.crownRank=this.rewardData[a][2],r={point:i,reward:this.rewardData[a]}),o=i}return null},e.prototype.fetchDataFromServer=function(e){var t=this;if(l.NgcPlatform.isOfflineMode())cc.loader.loadRes(this.CROWN_REWARDS_PATH,function(o,n){if(!o&&n.text){var a=r.nCSV.parseTable(n.text);e("rewards",a)}else e("Failed to get data from url "+t.CROWN_REWARDS_PATH,null)}),cc.loader.loadRes(this.CROWN_BALANCING_PATH,function(o,n){if(!o&&n.text){var a=r.nCSV.parseTable(n.text);e("balancing",a)}else e("Failed to get data from url "+t.CROWN_BALANCING_PATH,null)});else{clearTimeout(this.loadingTimeout);try{var o=s.default.inst.getCurGameInfo().crownRoad;e("rewards",o.rewardTable),this.balancingData={}}catch(n){this.loadingTimeout=setTimeout(function(){t.fetchDataFromServer(e)},100)}}},e.updateRank=function(e,t){var o={rank:e};p.NgcGameModeManager.inst.selectedModeId&&(o.gameMode=p.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/updaterank",JSON.stringify(o),function(e,o){e||(a.Utils.log("Successfully update rank!",o),t&&t(JSON.parse(o).data))})},e.checkReward=function(e,t){var o={rank:e};p.NgcGameModeManager.inst.selectedModeId&&(o.gameMode=p.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/checkreward",JSON.stringify(o),function(e,o){e||(a.Utils.log("Successfully check crown reward",o),t&&t(JSON.parse(o).data))})},e.getCrownRoadData=function(e){s.default.inst.serviceGet("/playerdata",null,function(o,n){if(!o){var r=JSON.parse(n).data.crownRoad||{crownRank:0,highestRank:0,milestone:[]};t.crownRoadData=r,e&&e(r)}})},e.setGameRoundOverExtraParams=function(){u.NgcTelemetry.inst.setGameRoundOverExtraParam({NGC:!0})},e.sendGameOverTracking=function(e,o){var n=t.inst.crownRank;t.inst.getRewardsBaseOnPoint(e);var r=t.inst.crownRank;a.Utils.log(e,n);var i="Maintained";r>n&&(i="Promoted"),r<n&&(i="Demoted"),t.setGameRoundOverExtraParams(),u.NgcTelemetry.inst.LogEvent_GameRoundOver({crownRank:r,crownEarnings:o,crownResult:i})},e.inst=null,e.crownRoadUIInst=null,e.crownRoadData=null,e.playerRank=0,t=n([f],e)}());o.default=h,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../Core/nCSV":"nCSV","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../GameMode/Script/GameModeManager":"GameModeManager"}],CrownRoadMilestoneItem:[function(e,t,o){"use strict";cc._RF.push(t,"6bbb0z+kLxIKLBqWOuKAgjb","CrownRoadMilestoneItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMilestoneItem=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankBG=null,t.rankPointLabel=null,t.rewardBG=null,t.rewardIcon=null,t.rewardNumberLabel=null,t.rewardNameLabel=null,t.checkIconNode=null,t.defaultItemSpriteFrame=null,t}return r(t,e),t.prototype.setRewardNumber=function(e){var t="";e>1&&(t="x"+e),this.rewardNumberLabel.string=t},t.prototype.setRewardName=function(e){e?s.NgcLocalizedManager.setTextKey(this.rewardNumberLabel,e):this.rewardNumberLabel.node.active=!1},a([u(cc.Node)],t.prototype,"rankBG",void 0),a([u(i.NgcLabelLocalized)],t.prototype,"rankPointLabel",void 0),a([u(cc.Node)],t.prototype,"rewardBG",void 0),a([u(cc.Node)],t.prototype,"rewardIcon",void 0),a([u(i.NgcLabelLocalized)],t.prototype,"rewardNumberLabel",void 0),a([u(i.NgcLabelLocalized)],t.prototype,"rewardNameLabel",void 0),a([u(cc.Node)],t.prototype,"checkIconNode",void 0),a([u(cc.SpriteFrame)],t.prototype,"defaultItemSpriteFrame",void 0),a([l],t)}(cc.Component);o.NgcMilestoneItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],CrownRoadProgressionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3cd60SaUBhHraLYv6vTdXdC","CrownRoadProgressionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCrownRoadProgressionDialog=void 0;var i=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),l=e("../../../Services/Inventory/Inventory"),u=e("../../Dialogs/Script/DialogBase"),p=e("./CrownRoadManager"),d=e("./CrownRoadMilestoneItem"),f=e("./CrownRoadUI"),h=cc._decorator,g=h.ccclass,m=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NO_RANK_TITLE_KEY="CRD_NORANK",t.milestoneItem=null,t.scrollView=null,t.progressBarBG=null,t.progressBar=null,t.backProgressBar=null,t.currentMarker=null,t.currentRankLabel=null,t.currentRankSprite=null,t.normalItemScale=1,t.rankItemScale=.75,t.customScaleTable=[],t.markerPointLabel=null,t.scaleHashTable=null,t.isLoading=!1,t.filesNeedToBeLoaded=0,t}return r(t,e),t.prototype.onLoad=function(){this.markerPointLabel=this.currentMarker.getComponentInChildren(s.NgcLabelLocalized),this.milestoneItem.active=!1,this.scaleTableToHashTable()},t.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},t.prototype.getUnitLength=function(e){var t=Number.POSITIVE_INFINITY,o=null;for(var n in e){if(null!==o){var r=parseInt(n)-o;r<t&&(t=r)}o=parseInt(n)}return t},t.prototype.calculateContentHeight=function(e,t,o,n,r,a){var i=0,s=null;for(var c in e){if(s)if(parseInt(c)>=r&&a){var l=1.25;l=1,i+=this.milestoneItem.height+t*l,n[c]=l}else l=(parseInt(c)-s)/o,l=1,i+=this.milestoneItem.height+t*l,n[c]=l;else n[c]=1,i+=this.milestoneItem.height;s=c}return i},t.prototype.getMaxRewardMilestonePoint=function(e){var t=Number.NEGATIVE_INFINITY;for(var o in e)parseInt(o)>t&&(t=parseInt(o));return t},t.prototype.update=function(){this.updateLoading()},t.prototype.updateLoading=function(){this.isLoading&&this.filesNeedToBeLoaded<=0&&(this.isLoading=!1,cc.tween(this.scrollView.node).to(.5,{opacity:255}).start())},t.prototype.hide=function(){e.prototype.hide.call(this,this.onHideCB)},t.prototype.init=function(e,t,o,n,r){var a=this;if(cc.sys.isMobile){var s=this.dialogNode.getComponent(cc.Widget);s.enabled=!0,s.top=60,s.bottom=60,s.isAlignBottom=!0,s.updateAlignment(),s.enabled=!1,this.scrollView.getComponent(cc.Widget).updateAlignment()}this.onHideCB=r,this.isLoading=!0,this.filesNeedToBeLoaded=0,this.scrollView.node.opacity=0,t<=e&&(t=e,this.backProgressBar.active=!1);var u={};for(var f in p.default.inst.rewardData)u[f]=p.default.inst.rewardData[f];void 0===u[0]&&(u[0]=[null,null,null]);var h=this.getMaxRewardMilestonePoint(u),g=!1;e>h&&(u[e]=[null,null],h=e,g=!0),t>h&&(u[t]=[null,null]);var m=this.getUnitLength(u),y=this.milestoneItem.height/2+30,_={},v=this.calculateContentHeight(u,30,m,_,h,g)+y;this.scrollView.content.height=v;var S,b,N=null,P=null,I=null,C=0,w={},O=l.NgcInventory.inst.objectTypeTable,T=function(o){var r=u[o][0],s=u[o][1],c=u[o][3],l=cc.instantiate(E.milestoneItem),p=l.getComponent(d.NgcMilestoneItem),f=p.rewardBG.parent;if(f.active=!1,p.rankBG.active=!1,p.rewardBG.active=!1,p.checkIconNode.active=!1,w[o]=l,l.active=!0,I?(l.y=I+l.height+30*_[o],I=l.y):(l.y=-v+y,I=l.y),p.rankPointLabel.string=o,null!==r){f.active=!0,0===s?(c=O[r].displayName,p.rankBG.active=!0,p.rewardIcon.getComponent(cc.Widget)):(p.rewardBG.active=!0,p.checkIconNode.active=!!n[o]),s>1?p.setRewardNumber(s):p.setRewardName(c);var h=E.scaleHashTable[r]||(0===s?E.rankItemScale:E.normalItemScale);p.rewardIcon.scale=h;var g=null;try{g=O[r].picture,E.filesNeedToBeLoaded+=1,cc.loader.loadRes(g,cc.SpriteFrame,function(e,t){a.filesNeedToBeLoaded-=1,p.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?p.defaultItemSpriteFrame:t})}catch(b){p.rewardIcon.getComponent(cc.Sprite).spriteFrame=p.defaultItemSpriteFrame}}if(E.scrollView.content.addChild(l),!N&&parseInt(o)>=e){var m=(e-C)/(parseInt(o)-C),S=Math.abs(i.Utils.getWorldPos(w[o]).y-i.Utils.getWorldPos(w[C]).y);N=i.Utils.getWorldPos(w[C]).y+m*S}!P&&parseInt(o)>=t&&(m=(t-C)/(parseInt(o)-C),S=Math.abs(i.Utils.getWorldPos(w[o]).y-i.Utils.getWorldPos(w[C]).y),P=i.Utils.getWorldPos(w[C]).y+m*S),C=parseInt(o)},E=this;for(var M in u)T(M);S=i.Utils.getWorldPos(w[0]).y,this.progressBar.height=Math.abs(N-S)+0,this.progressBar.anchorY=0,this.progressBar.y=-this.scrollView.content.height+y-0,this.backProgressBar.height=Math.abs(P-S)+0,this.backProgressBar.anchorY=0,this.backProgressBar.y=-this.scrollView.content.height+y-0,b=i.Utils.getWorldPos(w[C]).y,this.progressBarBG.height=Math.abs(b-S)+0,this.progressBarBG.anchorY=0,this.progressBarBG.y=-this.scrollView.content.height+y-0,this.currentMarker.parent=null,this.currentMarker.parent=this.scrollView.content,this.currentMarker.y=-this.scrollView.content.height+this.progressBar.height-0+y,this.markerPointLabel.string=e.toString();var D=cc.v2(0,-this.currentMarker.y);D.y-=this.scrollView.node.height/2,this.scrollView.scrollToOffset(D,0),o?(c.NgcLocalizedManager.setTextKey(this.currentRankLabel,o.displayName),cc.loader.loadRes(o.picture,cc.SpriteFrame,function(e,t){e||(a.currentRankSprite.spriteFrame=t)})):(this.currentRankSprite.node.active=!1,c.NgcLocalizedManager.setTextKey(this.currentRankLabel,this.NO_RANK_TITLE_KEY))},t.urlPrefab="CrownRoadProgressionDialog",t.bundleName="02_crown_road",t.dialogType="CrownRoadProgressionDialog",a([m(cc.Node)],t.prototype,"milestoneItem",void 0),a([m(cc.ScrollView)],t.prototype,"scrollView",void 0),a([m(cc.Node)],t.prototype,"progressBarBG",void 0),a([m(cc.Node)],t.prototype,"progressBar",void 0),a([m(cc.Node)],t.prototype,"backProgressBar",void 0),a([m(cc.Node)],t.prototype,"currentMarker",void 0),a([m(s.NgcLabelLocalized)],t.prototype,"currentRankLabel",void 0),a([m(cc.Sprite)],t.prototype,"currentRankSprite",void 0),a([m()],t.prototype,"normalItemScale",void 0),a([m()],t.prototype,"rankItemScale",void 0),a([m([f.CrownRoadItemScalable])],t.prototype,"customScaleTable",void 0),a([g],t)}(u.NgcDialogBase);o.NgcCrownRoadProgressionDialog=y,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/DialogBase":"DialogBase","./CrownRoadManager":"CrownRoadManager","./CrownRoadMilestoneItem":"CrownRoadMilestoneItem","./CrownRoadUI":"CrownRoadUI"}],CrownRoadUI:[function(e,t,o){"use strict";cc._RF.push(t,"10dffqe9PpL1591LwUViE8d","CrownRoadUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CrownRoadItemScalable=void 0;var l=e("../../../../Scripts/UserInfo"),u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),d=e("../../../GameFramework/Scripts/NgcScreenManager"),f=e("../../../GameFramework/Scripts/NgcShopManager"),h=e("../../../Services/Inventory/Inventory"),g=e("../../../Services/Platform/Platform"),m=e("../../../Services/Telemetry/Telemetry"),y=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),_=e("../../Dialogs/Script/NgcDialogManager"),v=e("../../GameMode/Script/GameModeManager"),S=e("../../LuckyBooster/Script/NgcLuckyBoosterManager"),b=e("./CrownRoadItem"),N=e("./CrownRoadManager"),P=e("./CrownRoadProgressionDialog"),I=cc._decorator,C=I.ccclass,w=I.property,O=function(){function e(){this.itemID="",this.scale=1}return i([w()],e.prototype,"itemID",void 0),i([w()],e.prototype,"scale",void 0),i([C("CrownRoadScalable")],e)}();o.CrownRoadItemScalable=O;var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.crownItem=null,t.currentRankNode=null,t.crownNumberLabel=null,t.positiveColor=cc.color(134,227,60),t.negativeColor=cc.color(255,97,97),t.crownIconNode=null,t.crownFlyTargetNode=null,t.normalItemScale=1,t.rankItemScale=.35,t.customScaleTable=[],t.needRefresh=!1,t.downRank=!1,t.scaleHashTable=null,t.canShowUI=!1,t.lastPoint=0,t.currentPoint=0,t.highestPoint=0,t.RANK_UP_TEXT_KEY="CRD_RANK_UP",t.PROGRESS_TWEEN_DURATION=.85,t.devButtons=null,t.lastTouchStatus=void 0,t.currentRankItemID=null,t.unlockAnimationCB=null,t.customRewardAnimationFunc={},t.DELAY_BEFORE_TWEEN=.45,t.lastRankItem=null,t.unlockedMilestones={},t.lastUnlockedMilestones={},t.progressUIClicked=!1,t.afterRewardCallback=null,t.crownDisplayTargetNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.devButtons=this.node.getChildByName("DevButtons")},t.prototype.start=function(){N.default.crownRoadUIInst=this,this.scaleTableToHashTable(),this.node.opacity=0,this.progressBar.progress=0,this.devButtons.active=!0,this.addCustomRewardAnimation("game_mode_unlock",this.unlockGameModeAnimation.bind(this)),cc.systemEvent.on("refreshCrownRoad",this.onSocialCallBack.bind(this))},t.prototype.onSocialCallBack=function(){var e=this;this.unlockedMilestones={},this.lastUnlockedMilestones={},this.getCurrentPoint(function(){e.lastPoint=e.currentPoint,e.updateUI()})},t.prototype.lateUpdate=function(){this.checkShowUI()},t.prototype.checkRefreshUI=function(){var e=this;this.needRefresh&&(this.lastTouchStatus=d.default.inst.currentTouchStatus(),d.default.inst.setTouchStatus(!1),this.getCurrentPoint(function(){e.currentPoint>e.lastPoint&&e.playCrownFlyingAnimation(),e.updateUI()}),this.needRefresh=!1)},t.prototype.checkShowUI=function(){var e=this;this.canShowUI||N.default.isInitialized()&&(g.NgcPlatform.isOfflineMode()||(this.getCurrentPoint(function(){cc.tween(e.node).to(.25,{opacity:255}).start(),e.lastPoint=e.currentPoint,e.lastUnlockedMilestones=a({},e.unlockedMilestones),e.updateUI()}),this.canShowUI=!0))},t.prototype.getCurrentRankData=function(){if(this.currentRankItemID){var e=h.NgcInventory.inst.objectTypeTable[this.currentRankItemID];return{picture:e.picture,displayName:e.displayName}}return null},t.prototype.updateUI=function(e){var t=this,o=void 0===e?{}:e,n=o.included,r=void 0!==n&&n,i=o.animate,u=void 0!==i&&i;o.recursive,this.currentPoint<0&&(this.currentPoint=0);var p=this.currentPoint;p<this.lastPoint&&(r=!1),p<this.lastPoint&&(this.lastPoint=p);var d=N.default.inst.getRewardsBaseOnPoint(this.lastPoint,r),g=!1,_=1,v=0,b=0;if(d){v=d[0].point,b=d[1].point,d[0].reward;var P=d[1].reward,I=d[2]?d[2].reward:null;I&&(this.currentRankItemID=I[0],this.setCurrentRank(this.currentRankItemID,u)),_=(p-v)/(b-v);var C=null!==P[2],w=!C&&!!this.lastUnlockedMilestones[b];this.lastUnlockedMilestones[b]=this.unlockedMilestones[b],this.setNextReward(P[0],P[1],w,P[2],u)}else g=!0,this.crownItem.emptyNextReward();if(p===this.lastPoint||g)return this.crownNumberLabel.string=p.toString(),this.progressBar.progress=_,this.onAfterRewardAnimation(),void(this.lastUnlockedMilestones=a({},this.unlockedMilestones));var O=this.DELAY_BEFORE_TWEEN,T=this.PROGRESS_TWEEN_DURATION;if(p<this.lastPoint&&(p<v?this.lastPoint==v?(this.lastPoint-=1,this.scheduleOnce(function(){t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})},O+.05)):(_=0,this.playProgressBarFillAnimation(_,T,O,function(){t.lastPoint=v,t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})})):this.playProgressBarFillAnimation(_,T,O,function(){t.lastPoint=p,t.onAfterRewardAnimation()})),p>this.lastPoint)if(p>=b){_=1;var E=function(){t.lastPoint=b,t.updateUI({included:!1,animate:!0,recursive:!0})};this.tweenCrownNumber(this.lastPoint,b),this.playProgressBarFillAnimation(_,T,O,this.playClaimRewardAnimation.bind(this,function(){if(!1===w){m.NgcTelemetry.inst.LogEvent_PlayerCrownRewardCollect({itemRewardID:P[0],itemRewardValue:Math.max(P[1],1)});var e=t.crownItem.glowNode.scale;t.crownItem.glowNode.scale=0,t.crownItem.glowNode.opacity=0,t.crownItem.glowNode.active=!0,t.node.getComponent(cc.Animation).play(),t.unlockAnimationCB=function(){t.scheduleOnce(function(){t.crownItem.glowNode.active=!1,t.crownItem.glowNode.scale=e},1),t.hasCustomRewardAnimation(P[0])?t.playCustomRewardAnimation(P[0],E.bind(t)):cc.tween(t.crownItem.node).to(.25,{opacity:0}).call(function(){var e=h.NgcInventory.inst.objectTypeTable[P[0]],o="equippable"===e.type;e.category,h.NgcInventory.inst.forceFetchInventory(function(){return s(t,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,l.UserInfo.updateInventoryWithPlatform()];case 1:return e.sent(),y.default.inst.showRewardAnimation({itemID:P[0],count:P[1]},function(){f.NgcShopManager.getInstance().updateBoughtItem(P[0]),S.NgcLuckyBoosterManager.getInstance().applyBooster(),S.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),E()},o,C?this.RANK_UP_TEXT_KEY:null),[2]}})})})}).start()}}else E()}))}else this.tweenCrownNumber(this.lastPoint,p),this.playProgressBarFillAnimation(_,T,O,function(){t.lastPoint=p,t.onAfterRewardAnimation()})},t.prototype.onUnlockAnimationCompleted=function(){this.unlockAnimationCB&&this.unlockAnimationCB()},t.prototype.addCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]=t},t.prototype.hasCustomRewardAnimation=function(e){return!!this.customRewardAnimationFunc[e]},t.prototype.playCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]&&this.customRewardAnimationFunc[e](t)},t.prototype.unlockGameModeAnimation=function(e){var t=this,o=v.NgcGameModeManager.inst.lockIconNode(),n=this.crownItem.node.parent.convertToNodeSpaceAR(u.Utils.getWorldPos(o)),r=cc.v2(this.crownItem.node.position),a=cc.v2(r.x+60,r.y),i=cc.v2(n.x+60,r.y);cc.tween(this.crownItem.node).delay(.6).to(.15,{opacity:0,scale:1}).start(),u.Utils.tweenNodeToNode(this.crownItem.node,o,cc.v2(0,0),null,.75,"quartInOut",!0,a,i).call(function(){t.crownItem.node.setPosition(r),v.NgcGameModeManager.inst.playUnlockAnimation(.01,function(){v.NgcGameModeManager.inst.unlock(),e()})}).start()},t.prototype.tweenCrownNumber=function(e,t){var o=this,n=this.DELAY_BEFORE_TWEEN,r=this.PROGRESS_TWEEN_DURATION,a=e<=t?this.positiveColor:this.negativeColor,i=20/Math.abs(t-e)*80;i=Math.max(80,Math.min(i,20)),Math.abs(t-e)<5&&(i=300),cc.tween(this.node).delay(n).call(function(){u.Utils.tweenNumber(e,t,r,function(e,t){o.crownNumberLabel.string=e.toString(),t?(o.crownNumberLabel.node.color=cc.color(255,255,255),cc.tween(o.crownNumberLabel.node).to(.25,{scale:1}).start()):(o.crownNumberLabel.node.color=a,o.crownNumberLabel.node.scale=1+Math.abs(.25*Math.cos(Date.now()/i)))}).start()}).start()},t.prototype.onAfterRewardAnimation=function(){void 0!==this.lastTouchStatus&&(d.default.inst.setTouchStatus(!0),this.lastTouchStatus=void 0),this.afterRewardCallback&&this.afterRewardCallback()},t.prototype.playProgressBarFillAnimation=function(e,t,o,n){cc.tween(this.progressBar).delay(o).to(t,{progress:e},{easing:"cubicInOut"}).call(function(){n&&n()}).start()},t.prototype.playClaimRewardAnimation=function(e){this.progressBar.progress=0,e&&e()},t.prototype.setCurrentRank=function(e,t){if(void 0===t&&(t=!1),this.lastRankItem!==e){this.lastRankItem=e;var o=this.currentRankNode.getComponentInChildren(cc.Sprite),n=h.NgcInventory.inst.objectTypeTable[e].picture;cc.loader.loadRes(n,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t)});var r=this.scaleHashTable[e]||this.rankItemScale;if(o.node.scale=r,t){var a=o.node.scale;o.node.scale=0,cc.tween(o.node).to(.25,{scale:a}).start()}}},t.prototype.setNextReward=function(e,t,o,n,r){var a,i=this;void 0===r&&(r=!1),r&&(this.crownItem.node.originY=null!==(a=this.crownItem.node.originY)&&void 0!==a?a:this.crownItem.node.y,this.crownItem.node.y-=10,this.crownItem.node.opacity=0,this.crownItem.node.scale=0,this.crownItem.rewardNumberLabel.node.opacity=0,cc.tween(this.crownItem.node).to(.35,{y:this.crownItem.node.originY+10,opacity:255,scale:1.15}).to(.15,{y:this.crownItem.node.originY,scale:.73}).to(.05,{scale:1}).delay(.1).call(function(){t>1&&cc.tween(i.crownItem.rewardNumberLabel.node).to(.2,{opacity:255}).start()}).start());var s=this.scaleHashTable[e]||(null!==n?this.rankItemScale:this.normalItemScale);this.crownItem.setRewardItem(e,t,s,n,r),this.crownItem.setDimStatus(o)},t.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},t.prototype.onDebugClick=function(e,t){var o,n=this;o="0"===t?1:32,d.default.inst.setTouchStatus(!1),N.default.updateRank(o,function(){n.needRefresh=!0,n.checkRefreshUI()})},t.prototype.getCurrentPoint=function(e){var t=this;N.default.getCrownRoadData(function(o){return s(t,void 0,void 0,function(){var t=this;return c(this,function(){return this.currentPoint=o.crownRank,this.highestPoint=o.highestRank,o.milestone.forEach(function(e){t.unlockedMilestones[e]=!0}),e&&e(this.currentPoint),[2]})})})},t.prototype.onProgressBarClick=function(){return s(this,void 0,void 0,function(){var e,t,o=this;return c(this,function(n){switch(n.label){case 0:return this.canShowUI?this.progressUIClicked?[2]:(this.progressUIClicked=!0,[4,_.NgcDialogManager.createDialog(P.NgcCrownRoadProgressionDialog.dialogType,P.NgcCrownRoadProgressionDialog.urlPrefab,P.NgcCrownRoadProgressionDialog.bundleName)]):[2];case 1:return e=n.sent(),(t=e.getComponent(P.NgcCrownRoadProgressionDialog)).init(this.currentPoint,this.highestPoint,this.getCurrentRankData(),this.unlockedMilestones,function(){o.progressUIClicked=!1}),t.show(),[2]}})})},t.prototype.setAfterRewardCallback=function(e){this.afterRewardCallback=e},t.prototype.setCrownDisplayTarget=function(e){this.crownDisplayTargetNode=e},t.prototype.playCrownFlyingAnimation=function(){for(var e=this,t=function(){var t=cc.instantiate(o.crownIconNode),r=1+.75*Math.random();t.scale=r,t.parent=o.crownFlyTargetNode,u.Utils.setWorldPos(t,u.Utils.getWorldPos(o.crownDisplayTargetNode));var a=t.position,i=o.crownIconNode.position,s=cc.v2(a.x-100,a.y+15),c=cc.v2(i.x-100,i.y-15);s.x-=Math.floor(50*Math.random()),setTimeout(function(){var o=e.PROGRESS_TWEEN_DURATION;cc.tween(t).to(o/2,{scale:r}).to(o/2,{scale:1}).start(),cc.tween(e.crownIconNode).delay(o-.25).to(.1,{scale:1.65}).to(.1,{scale:1}).start(),u.Utils.tweenNodeToNode(t,e.crownIconNode,cc.v2(0,0),null,o,"quartInOut",!0,s,c).call(function(){t.destroy()}).start()},110*n)},o=this,n=0;n<4;n++)t()},i([w(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([w(b.NgcCrownRoadItem)],t.prototype,"crownItem",void 0),i([w(cc.Node)],t.prototype,"currentRankNode",void 0),i([w(p.NgcLabelLocalized)],t.prototype,"crownNumberLabel",void 0),i([w(cc.Color)],t.prototype,"positiveColor",void 0),i([w(cc.Color)],t.prototype,"negativeColor",void 0),i([w(cc.Node)],t.prototype,"crownIconNode",void 0),i([w(cc.Node)],t.prototype,"crownFlyTargetNode",void 0),i([w()],t.prototype,"normalItemScale",void 0),i([w()],t.prototype,"rankItemScale",void 0),i([w([O])],t.prototype,"customScaleTable",void 0),i([C],t)}(cc.Component);o.default=T,cc._RF.pop()},{"../../../../Scripts/UserInfo":"UserInfo","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GameMode/Script/GameModeManager":"GameModeManager","../../LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","./CrownRoadItem":"CrownRoadItem","./CrownRoadManager":"CrownRoadManager","./CrownRoadProgressionDialog":"CrownRoadProgressionDialog"}],5:[function(e,t){"use strict";t.exports=function(e,t){for(var o=new Array(arguments.length-1),n=0,r=2,a=!0;r<arguments.length;)o[n++]=arguments[r++];return new Promise(function(r,i){o[n]=function(e){if(a)if(a=!1,e)i(e);else{for(var t=new Array(arguments.length-1),o=0;o<t.length;)t[o++]=arguments[o];r.apply(null,t)}};try{e.apply(t||null,o)}catch(s){a&&(a=!1,i(s))}})}},{}],6:[function(e,t,o){"use strict";var n=o;n.length=function(e){var t=e.length;if(!t)return 0;for(var o=0;--t%4>1&&"="===e.charAt(t);)++o;return Math.ceil(3*e.length)/4-o};for(var r=new Array(64),a=new Array(123),i=0;i<64;)a[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;n.encode=function(e,t,o){for(var n,a=null,i=[],s=0,c=0;t<o;){var l=e[t++];switch(c){case 0:i[s++]=r[l>>2],n=(3&l)<<4,c=1;break;case 1:i[s++]=r[n|l>>4],n=(15&l)<<2,c=2;break;case 2:i[s++]=r[n|l>>6],i[s++]=r[63&l],c=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),s=0)}return c&&(i[s++]=r[n],i[s++]=61,1===c&&(i[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,i.slice(0,s))),a.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.decode=function(e,t,o){for(var n,r=o,i=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&i>1)break;if(void 0===(c=a[c]))throw Error("invalid encoding");switch(i){case 0:n=c,i=1;break;case 1:t[o++]=n<<2|(48&c)>>4,n=c,i=2;break;case 2:t[o++]=(15&n)<<4|(60&c)>>2,n=c,i=3;break;case 3:t[o++]=(3&n)<<6|c,i=0}}if(1===i)throw Error("invalid encoding");return o-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],7:[function(e,t){"use strict";function o(){this._listeners={}}t.exports=o,o.prototype.on=function(e,t,o){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:o||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var o=this._listeners[e],n=0;n<o.length;)o[n].fn===t?o.splice(n,1):++n;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var o=[],n=1;n<arguments.length;)o.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,o)}return this}},{}],8:[function(e,t){"use strict";function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),n=128===o[3];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3]}function a(e,n,r){t[0]=e,n[r]=o[3],n[r+1]=o[2],n[r+2]=o[1],n[r+3]=o[0]}function i(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],t[0]}function s(e,n){return o[3]=e[n],o[2]=e[n+1],o[1]=e[n+2],o[0]=e[n+3],t[0]}e.writeFloatLE=n?r:a,e.writeFloatBE=n?a:r,e.readFloatLE=n?i:s,e.readFloatBE=n?s:i}():function(){function t(e,t,o,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,o,n);else if(isNaN(t))e(2143289344,o,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,o,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,o,n);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,o,n)}}function o(e,t,o){var n=e(t,o),r=2*(n>>31)+1,a=n>>>23&255,i=8388607&n;return 255===a?i?NaN:r*(1/0):0===a?1401298464324817e-60*r*i:r*Math.pow(2,a-150)*(i+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,a),e.readFloatBE=o.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),n=128===o[7];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3],n[r+4]=o[4],n[r+5]=o[5],n[r+6]=o[6],n[r+7]=o[7]}function a(e,n,r){t[0]=e,n[r]=o[7],n[r+1]=o[6],n[r+2]=o[5],n[r+3]=o[4],n[r+4]=o[3],n[r+5]=o[2],n[r+6]=o[1],n[r+7]=o[0]}function i(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],o[4]=e[n+4],o[5]=e[n+5],o[6]=e[n+6],o[7]=e[n+7],t[0]}function s(e,n){return o[7]=e[n],o[6]=e[n+1],o[5]=e[n+2],o[4]=e[n+3],o[3]=e[n+4],o[2]=e[n+5],o[1]=e[n+6],o[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:a,e.writeDoubleBE=n?a:r,e.readDoubleLE=n?i:s,e.readDoubleBE=n?s:i}():function(){function t(e,t,o,n,r,a){var i=n<0?1:0;if(i&&(n=-n),0===n)e(0,r,a+t),e(1/n>0?0:2147483648,r,a+o);else if(isNaN(n))e(0,r,a+t),e(2146959360,r,a+o);else if(n>17976931348623157e292)e(0,r,a+t),e((i<<31|2146435072)>>>0,r,a+o);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,r,a+t),e((i<<31|s/4294967296)>>>0,r,a+o);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,r,a+t),e((i<<31|c+1023<<20|1048576*s&1048575)>>>0,r,a+o)}}}function o(e,t,o,n,r){var a=e(n,r+t),i=e(n,r+o),s=2*(i>>31)+1,c=i>>>20&2047,l=4294967296*(1048575&i)+a;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,a,0,4),e.readDoubleBE=o.bind(null,i,4,0)}(),e}function n(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}function r(e,t,o){t[o]=e>>>24,t[o+1]=e>>>16&255,t[o+2]=e>>>8&255,t[o+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=o(o)},{}],9:[function(require,module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],10:[function(e,t){"use strict";t.exports=function(e,t,o){var n=o||8192,r=n>>>1,a=null,i=n;return function(o){if(o<1||o>r)return e(o);i+o>n&&(a=e(n),i=0);var s=t.call(a,i,i+=o);return 7&i&&(i=1+(7|i)),s}}},{}],11:[function(e,t,o){"use strict";var n=o;n.length=function(e){for(var t=0,o=0,n=0;n<e.length;++n)(o=e.charCodeAt(n))<128?t+=1:o<2048?t+=2:55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,o){if(o-t<1)return"";for(var n,r=null,a=[],i=0;t<o;)(n=e[t++])<128?a[i++]=n:n>191&&n<224?a[i++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[i++]=55296+(n>>10),a[i++]=56320+(1023&n)):a[i++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),i=0);return r?(i&&r.push(String.fromCharCode.apply(String,a.slice(0,i))),r.join("")):String.fromCharCode.apply(String,a.slice(0,i))},n.write=function(e,t,o){for(var n,r,a=o,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t[o++]=n:n<2048?(t[o++]=n>>6|192,t[o++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(i+1)))?(n=65536+((1023&n)<<10)+(1023&r),++i,t[o++]=n>>18|240,t[o++]=n>>12&63|128,t[o++]=n>>6&63|128,t[o++]=63&n|128):(t[o++]=n>>12|224,t[o++]=n>>6&63|128,t[o++]=63&n|128);return o-a}},{}],12:[function(e,t){"use strict";e("./shim");var o=e("./generic-collection"),n=e("./generic-map");function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||Function.noop,this.getDefault=t,this.store=Object.create(null),this.length=0,this.addEach(e)}t.exports=r,r.Dict=r,Object.addEach(r.prototype,o.prototype),Object.addEach(r.prototype,n.prototype),r.from=o.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.getDefault)},r.prototype.assertString=function(e){if("string"!=typeof e)throw new TypeError("key must be a string but Got "+e)},Object.defineProperty(r.prototype,"$__proto__",{writable:!0}),Object.defineProperty(r.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this._protoValue}}),Object.defineProperty(r.prototype,"_protoValue",{get:function(){return this.$__proto__},set:function(e){this.$__proto__=e}}),Object.defineProperty(r.prototype,"size",o._sizePropertyDescriptor),r.prototype.get=function(e,t){return this.assertString(e),"__proto__"===e?this._hasProto?this._protoValue:arguments.length>1?t:this.getDefault(e):e in this.store?this.store[e]:arguments.length>1?t:this.getDefault(e)},r.prototype.set=function(e,t){this.assertString(e);var o="__proto__"===e;return(o?this._hasProto:e in this.store)?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,o?this._protoValue:this.store[e]),o?this._protoValue=t:this.store[e]=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t),!1):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.length++,o?this._protoValue=t:this.store[e]=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t),!0)},r.prototype.has=function(e){return this.assertString(e),"__proto__"===e?this._hasProto:e in this.store},r.prototype.delete=function(e){return this.assertString(e),"__proto__"===e?!!this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this._protoValue),this._protoValue=void 0,this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0):e in this.store&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.store[e]),delete this.store[e],this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0)},r.prototype.clear=function(){var e;for(e in this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange("__proto__",this._protoValue),this._protoValue=void 0,this.dispatchesMapChanges&&this.dispatchMapChange("__proto__",void 0)),this.store)this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.store[e]),delete this.store[e],this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0);this.length=0},r.prototype.reduce=function(e,t,o){this._hasProto&&(t=e.call(o,t,"$__proto__","__proto__",this));var n=this.store;for(var r in this.store)t=e.call(o,t,n[r],r,this);return t},r.prototype.reduceRight=function(e,t,o){var n=this,r=this.store;return t=Object.keys(this.store).reduceRight(function(t,a){return e.call(o,t,r[a],a,n)},t),this._hasProto?e.call(o,t,this._protoValue,"__proto__",n):t},r.prototype.one=function(){var e;for(e in this.store)return this.store[e];return this._protoValue},r.prototype.toJSON=function(){return this.toObject()}},{"./generic-collection":17,"./generic-map":18,"./shim":29}],13:[function(e,t){"use strict";e("./shim");var o=e("./_dict"),n=e("./_list"),r=e("./generic-collection"),a=e("./generic-set"),i=e("./tree-log");function s(e,t,o,n){if(!(this instanceof s))return new s(e,t,o,n);t=t||Object.equals,o=o||Object.hash,n=n||Function.noop,this.contentEquals=t,this.contentHash=o,this.getDefault=n;var r=this;this.buckets=new this.Buckets(null,function(){return new r.Bucket}),this.length=0,this.addEach(e)}Object.prototype.hasOwnProperty,t.exports=s,s.FastSet=s,Object.addEach(s.prototype,r.prototype),Object.addEach(s.prototype,a.prototype),s.from=r.from,s.prototype.Buckets=o,s.prototype.Bucket=n,s.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},s.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},s.prototype.get=function(e,t){if(t)throw new Error("FastSet#get does not support second argument: equals");var o=this.contentHash(e),n=this.buckets;return n.has(o)?n.get(o).get(e):this.getDefault(e)},s.prototype.delete=function(e,t){if(t)throw new Error("FastSet#delete does not support second argument: equals");var o=this.contentHash(e),n=this.buckets;if(n.has(o)){var r=n.get(o);if(r.delete(e))return this.length--,0===r.length&&n.delete(o),!0}return!1},s.prototype.clear=function(){this.buckets.clear(),this.length=0},s.prototype.add=function(e){var t=this.contentHash(e),o=this.buckets;return o.has(t)||o.set(t,new this.Bucket(null,this.contentEquals)),!o.get(t).has(e)&&(o.get(t).add(e),this.length++,!0)},s.prototype.reduce=function(e,t){var o=arguments[2],n=this.buckets,r=0;return n.reduce(function(t,n){return n.reduce(function(t,n){return e.call(o,t,n,r++,this)},t,this)},t,this)},s.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},s.prototype.iterate=function(){return this.buckets.valuesArray().flatten().iterate()},s.prototype.log=function(e,t,o,n){e=e||i.unicodeSharp,t=t||this.logNode,o||(o=console.log,n=console),o=o.bind(n);for(var r,a,s,c,l=this.buckets,u=l.size,p=l.keys(),d=0;r=p.next().value;)d===u-1?(a=e.fromAbove,s=" "):0===d?(a=e.branchDown,s=e.strafe):(a=e.fromBoth,s=e.strafe),c=l.get(r),o.call(n,a+e.through+e.branchDown+" "+r),c.forEach(function(r,a){var i,l,u;a===c.head.prev?(i=e.fromAbove,l=" "):(i=e.fromBoth,l=e.strafe),t(a,function(t){u?o.call(n,s+" "+l+"  "+t):(o.call(n,s+" "+i+e.through+e.through+t),u=!0)},function(t){o.call(n,s+" "+e.strafe+"  "+t)})}),d++},s.prototype.logNode=function(e,t){var o=e.value;Object(o)===o?JSON.stringify(o,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+o)}},{"./_dict":12,"./_list":14,"./generic-collection":17,"./generic-set":20,"./shim":29,"./tree-log":31}],14:[function(e,t){"use strict";t.exports=r,e("./shim");var o=e("./generic-collection"),n=e("./generic-order");function r(e,t,o){return r._init(r,this,e,t,o)}function a(e){this.head=e,this.at=e.next}function i(e){this.value=e,this.prev=null,this.next=null}r._init=function(e,t,o,n,r){if(!(t instanceof e))return new e(o,n,r);var a=t.head=new t.Node;a.next=a,a.prev=a,t.contentEquals=n||Object.equals,t.getDefault=r||Function.noop,t.length=0,t.addEach(o)},r.List=r,Object.addEach(r.prototype,o.prototype),Object.addEach(r.prototype,n.prototype),r.from=o.from,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.getDefault)},r.prototype.find=function(e,t,o){t=t||this.contentEquals;for(var n=this.head,r=this.scan(o,n.next);r!==n;){if(t(r.value,e))return r;r=r.next}},r.prototype.findLast=function(e,t,o){t=t||this.contentEquals;for(var n=this.head,r=this.scan(o,n.prev);r!==n;){if(t(r.value,e))return r;r=r.prev}},r.prototype.has=function(e,t){return!!this.find(e,t)},r.prototype.get=function(e,t){var o=this.find(e,t);return o?o.value:this.getDefault(e)},r.prototype.delete=function(e,t){var o=this.findLast(e,t);return!!o&&(o.delete(),this.length--,!0)},r.prototype.deleteAll=function(e,t){t=t||this.contentEquals;for(var o=this.head,n=o.next,r=0;n!==o;)t(e,n.value)&&(n.delete(),r++),n=n.next;return this.length-=r,r},r.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},r.prototype.add=function(e){var t=new this.Node(e);return this._addNode(t)},r.prototype._addNode=function(e){return this.head.addBefore(e),this.length++,!0},r.prototype.push=function(){for(var e=this.head,t=0;t<arguments.length;t++){var o=arguments[t],n=new this.Node(o);e.addBefore(n)}this.length+=arguments.length},r.prototype.unshift=function(){for(var e=this.head,t=0;t<arguments.length;t++){var o=arguments[t],n=new this.Node(o);e.addAfter(n),e=n}this.length+=arguments.length},r.prototype._shouldPop=function(){var e,t=this.head;return t.prev!==t&&(e=t.prev.value),e},r.prototype.pop=function(e,t){var o,n=this.head;if(n.prev!==n){o=n.prev.value;var r=this.length-1,a=e?e.call(this,o,r):void 0;n.prev.delete(),this.length--,t&&t.call(this,o,r,a)}return o},r.prototype.shift=function(e,t){var o,n=this.head;if(n.prev!==n){o=n.next.value;var r=e?e.call(this,o,0):void 0;n.next.delete(),this.length--,t&&t.call(this,o,0,r)}return o},r.prototype.peek=function(){if(this.head!==this.head.next)return this.head.next.value},r.prototype.poke=function(e){this.head!==this.head.next?this.head.next.value=e:this.push(e)},r.prototype.one=function(){return this.peek()},r.prototype.scan=function(e,t){var o=this.head;if("number"==typeof e){var n=e;if(n>=0)for(e=o.next;n&&(n--,(e=e.next)!=o););else for(e=o;n<0&&(n++,(e=e.prev)!=o););return e}return e||t},r.prototype.slice=function(e,t){var o=[],n=this.head;for(e=this.scan(e,n.next),t=this.scan(t,n);e!==t&&e!==n;)o.push(e.value),e=e.next;return o},r.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},r.prototype.swap=function(e,t,o,n,r){var a=e;e=this.scan(e,this.head),null==t&&(t=1/0),o=Array.from(o);for(var i=[],s=e;t--&&t>=0&&s!==this.head;)i.push(s.value),s=s.next;n&&n.call(this,e,o,i),s=e;var c=0;for(s=e;c<i.length;c++,s=s.next)s.delete();for(null==a&&s===this.head&&(s=this.head.next),c=0;c<o.length;c++){var l=new this.Node(o[c]);s.addBefore(l)}return this.length+=o.length-i.length,r&&r.call(this,e,o,i),i},r.prototype.reverse=function(){var e=this.head;do{var t=e.next;e.next=e.prev,e.prev=t,e=e.next}while(e!==this.head);return this},r.prototype.sort=function(){this.swap(0,this.length,this.sorted.apply(this,arguments))},r.prototype.reduce=function(e,t){for(var o=arguments[2],n=this.head,r=n.next;r!==n;)t=e.call(o,t,r.value,r,this),r=r.next;return t},r.prototype.reduceRight=function(e,t){for(var o=arguments[2],n=this.head,r=n.prev;r!==n;)t=e.call(o,t,r.value,r,this),r=r.prev;return t},r.prototype.updateIndexes=function(e,t){for(;e!==this.head;)e.index=t++,e=e.next},r.prototype.iterate=function(){return new a(this.head)},a.prototype.__iterationObject=null,Object.defineProperty(a.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),a.prototype.next=function(){if(this.at===this.head)this._iterationObject.done=!0,this._iterationObject.value=void 0;else{var e=this.at.value;this.at=this.at.next,this._iterationObject.value=e}return this._iterationObject},r.prototype.Node=i,i.prototype.delete=function(){this.prev.next=this.next,this.next.prev=this.prev},i.prototype.addBefore=function(e){var t=this.prev;this.prev=e,e.prev=t,t.next=e,e.next=this},i.prototype.addAfter=function(e){var t=this.next;this.next=e,e.next=t,t.prev=e,e.prev=this}},{"./generic-collection":17,"./generic-order":19,"./shim":29}],15:[function(e,t){(function(o){"use strict";e("./shim");var n,r,a,i=e("./generic-collection");if(void 0!==o.Map&&"function"==typeof o.Set.prototype.values){var s;r=n=t.exports=o.Map,n.Map=n,s={}.__proto__===Object.prototype?function(){this.__proto__=g}:function(){Object.defineProperties(this,observableSetProperties)},Object.defineProperty(n.prototype,"makeObservable",{value:s,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(n.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),n.prototype.constructClone=function(e){return new this.constructor(e)},n.prototype.isMap=!0,n.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)!0===e.isMap?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);return this},n.prototype.add=function(e,t){return this.set(t,e)},n.prototype.reduce=function(e,t){var o=arguments[2];return this.forEach(function(n,r){t=e.call(o,t,n,r,this)}),t},n.prototype.reduceRight=function(e,t){for(var o,n=arguments[2],r=this.keys(),a=this.size,i=new Array(this.size),s=0;o=r.next().value;)i[--a]=o;for(;s++<a;)t=e.call(n,t,this.get(i[s]),i[s],this);return t},n.prototype.equals=function(e,t){return t=t||Object.equals,this===e||(e&&"function"==typeof e.every?e.size===this.size&&e.every(function(e,o){return t(this.get(o),e)},this):Object.keys(e).length===this.size&&Object.keys(e).every(function(o){return t(this.get(o),e[o])},this))};var c=function(e,t){return t};n.prototype.keysArray=function(){return this.map(c)};var l=function(e){return e};n.prototype.valuesArray=function(){return this.map(l)};var u=function(e,t){return[t,e]};n.prototype.entriesArray=function(){return this.map(u)},n.prototype.toJSON=function(){return this.entriesArray()},n.prototype.items=function(){return this.entriesArray()},n.from=function(e){var t=new this;return t.addEach(e),t},Object.defineProperty(n.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0});var p=n.prototype.clear,d=n.prototype.set,f=n.prototype.delete,h={clear:{value:function(){var e;this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),p.call(this),this.dispatchesMapChanges&&e.forEach(function(e){this.dispatchMapChange(e)},this)},writable:!0,configurable:!0},set:{value:function(e,t){var o=this.get(e);return o?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,o),d.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),d.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),this},writable:!0,configurable:!0},delete:{value:function(e){return!!this.has(e)&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.get(e)),f.call(this,e),this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0)}}};Object.addEach(n.prototype,i.prototype,!1);var g=Object.create(n.prototype,h)}var m=e("./_set").CollectionsSet,y=e("./generic-map");a=n=function e(t,o,n,r){if(!(this instanceof e))return new e(t,o,n,r);o=o||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=o,this.contentHash=n,this.getDefault=r,this.store=new m(void 0,function(e,t){return o(e.key,t.key)},function(e){return n(e.key)}),this.length=0,this.addEach(t)},n.Map=n,Object.addEach(n.prototype,i.prototype),Object.addEach(n.prototype,y.prototype),Object.defineProperty(n.prototype,"size",i._sizePropertyDescriptor),n.from=i.from,n.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},n.prototype.log=function(e,t,o,n){t=t||this.logNode,this.store.log(e,function(e,o,n){t(e.value.value,o,n)},o,n)},n.prototype.logNode=function(e,t){t(" key: "+e.key),t(" value: "+e.value)},r?(t.exports=r,r.CollectionsMap=a):t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_set":16,"./generic-collection":17,"./generic-map":18,"./shim":29}],16:[function(e,t){(function(o){"use strict";e("./shim");var n,r,a=e("./generic-collection"),i=e("./generic-set");void 0!==o.Set&&"function"==typeof o.Set.prototype.values&&((n=t.exports=o.Set).Set=n,n.prototype.reduce=function(e,t){var o=arguments[2];return this.forEach(function(n){t=e.call(o,t,n,this)}),t},n.prototype.reduceRight=function(e,t){for(var o,n=arguments[2],r=this.values(),a=this.size,i=new Array(this.size),s=a;o=r.next().value;)i[--s]=o;for(;s<a;)t=e.call(n,t,i[s++],this);return t},n.prototype.equals=function(e,t){var o=this;return e&&"function"==typeof e.reduce&&this.size===(e.size||e.length)&&e.reduce(function(e,n){return e&&o.has(n,t)},!0)},n.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},n.prototype.toJSON=function(){return this.entriesArray()},n.prototype.one=function(){if(this.size>0)return this.values().next().value},n.prototype.pop=function(){if(this.size){for(var e,t,o=this.values();e=o.next().value;)t=e;return this.delete(t,this.size-1),t}},n.prototype.shift=function(){if(this.size){var e=this.values().next().value;return this.delete(e,0),e}},Object.defineProperty(n.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),n.from=function(e){var t=new this;return t.addEach(e),t},Object.addEach(n.prototype,a.prototype,!1),Object.addEach(n.prototype,i.prototype,!1));var s=e("./_list"),c=e("./_fast-set"),l=e("./iterator");(r=function e(t,o,n,r){return e._init(e,this,t,o,n,r)})._init=function(e,t,o,n,r,a){if(!(t instanceof e))return new e(o,n,r,a);n=n||Object.equals,r=r||Object.hash,a=a||Function.noop,t.contentEquals=n,t.contentHash=r,t.getDefault=a,t.order=new t.Order(void 0,n),t.store=new t.Store(void 0,function(e,t){return n(e.value,t.value)},function(e){return r(e.value)}),t.length=0,t.addEach(o)},r.Set=r,r.CollectionsSet=r,Object.addEach(r.prototype,a.prototype),Object.addEach(r.prototype,i.prototype),r.from=a.from,Object.defineProperty(r.prototype,"size",a._sizePropertyDescriptor),r.prototype.Order=s,r.prototype.Store=c,r.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},r.prototype.has=function(e){var t=new this.order.Node(e);return this.store.has(t)},r.prototype.get=function(e,t){if(t)throw new Error("Set#get does not support second argument: equals");var o=new this.order.Node(e);return(o=this.store.get(o))?o.value:this.getDefault(e)},r.prototype.add=function(e){var t=new this.order.Node(e);return!this.store.has(t)&&(this.length,this.order.add(e),t=this.order.head.prev,this.store.add(t),this.length++,!0)},r.prototype.delete=function(e,t){if(t)throw new Error("Set#delete does not support second argument: equals");var o=new this.order.Node(e);return!!this.store.has(o)&&(o=this.store.get(o),this.store.delete(o),this.order.splice(o,1),this.length--,!0)},r.prototype.pop=function(){if(this.length){var e=this.order.head.prev.value;return this.delete(e),e}},r.prototype.shift=function(){if(this.length){var e=this.order.head.next.value;return this.delete(e),e}},r.prototype.one=function(){if(this.length>0)return this.store.one().value},r.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},Object.defineProperty(r.prototype,"_clear",{value:r.prototype.clear}),r.prototype.reduce=function(e,t){var o=arguments[2],n=this.order,r=0;return n.reduce(function(t,n){return e.call(o,t,n,r++,this)},t,this)},r.prototype.reduceRight=function(e,t){var o=arguments[2],n=this.order,r=this.length-1;return n.reduceRight(function(t,n){return e.call(o,t,n,r--,this)},t,this)},r.prototype.iterate=function(){return this.order.iterate()},r.prototype.values=function(){return new l(this.valuesArray(),!0)},r.prototype.log=function(){var e=this.store;return e.log.apply(e,arguments)},n?(n.prototype.valuesArray=i.prototype.valuesArray,n.prototype.entriesArray=i.prototype.entriesArray,t.exports=n,n.CollectionsSet=r):t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_fast-set":13,"./_list":14,"./generic-collection":17,"./generic-set":20,"./iterator":21,"./shim":29}],17:[function(e,t){(function(o){"use strict";function n(){throw new Error("Can't construct. GenericCollection is a mixin.")}t.exports=n;var r=o.DOMTokenList||function(){};n.EmptyArray=Object.freeze([]),n.prototype.addEach=function(e,t,o){if(e&&(e instanceof Array||e instanceof r||e instanceof String))if(t)for(var n=0;n<e.length;n++)this.add(t.call(o,e[n]),n);else for(n=0;n<e.length;n++)this.add(e[n],n);else if(e&&Object(e)===e)if("function"==typeof e.forEach)t?e.map(t,o).forEach(this.add,this):e.forEach(this.add,this);else if("function"==typeof e.next){var a;if(n=0,t)for(;a=e.next().value;)this.add(t.call(o,a),n++);else for(;a=e.next().value;)this.add(a,n++)}else if("number"==typeof e.length)if(t)for(n=0;n<e.length;n++)this.add(t.call(o,e[n]),n);else for(n=0;n<e.length;n++)this.add(e[n],n);else t?Object.keys(e).forEach(function(n){this.add(t.call(o,e[n]),n)},this):Object.keys(e).forEach(function(t){this.add(e[t],t)},this);return this},n.prototype.deleteEach=function(e,t){return e.forEach(function(e){this.delete(e,t)},this),this},n.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(o,n,r,a,i){e.call(t,n,r,a,i)},void 0)},n.prototype.map=function(e){var t=arguments[1],o=[];return this.reduce(function(n,r,a,i,s){o.push(e.call(t,r,a,i,s))},void 0),o},n.prototype.enumerate=function(e){null==e&&(e=0);var t=[];return this.reduce(function(o,n){t.push([e++,n])},void 0),t},n.prototype.group=function(e,t,o){o=o||Object.equals;var n=[],r=[];return this.forEach(function(a,i,s){i=e.call(t,a,i,s);var c,l=r.indexOf(i,o);-1===l?(c=[],n.push([i,c]),r.push(i)):c=n[l][1],c.push(a)}),n},n.prototype.toArray=function(){return this.map(Function.identity)},n.prototype.toObject=function(){var e={};return this.reduce(function(t,o,n){e[n]=o},void 0),e},n.from=function(){return this.apply(this,arguments)},n.prototype.filter=function(e){var t=arguments[1],o=this.constructClone();return this.reduce(function(n,r,a,i,s){e.call(t,r,a,i,s)&&o.add(r,a)},void 0),o},n.prototype.every=function(e){var t=arguments[1];return this.reduce(function(o,n,r,a,i){return o&&e.call(t,n,r,a,i)},!0)},n.prototype.some=function(e){var t=arguments[1];return this.reduce(function(o,n,r,a,i){return o||e.call(t,n,r,a,i)},!1)},n.prototype.all=function(){return this.every(Boolean)},n.prototype.any=function(){return this.some(Boolean)},n.prototype.min=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(o,n){return t?(t=!1,n):e(n,o)<0?n:o},void 0)},n.prototype.max=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(o,n){return t?(t=!1,n):e(n,o)>0?n:o},void 0)},n.prototype.sum=function(e){return e=void 0===e?0:e,this.reduce(function(e,t){return e+t},e)},n.prototype.average=function(e){var t=void 0===e?0:e,o=void 0===e?0:e;return this.reduce(function(e,n){t+=n,o+=1},void 0),t/o},n.prototype.concat=function(){for(var e=this.constructClone(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},n.prototype.flatten=function(){var e=this;return this.reduce(function(t,o){return o.forEach(function(e){this.push(e)},t,e),t},[])},n.prototype.zip=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),Array.unzip(e)},n.prototype.join=function(e){return this.reduce(function(t,o){return void 0===t?o:t+e+o},void 0)},n.prototype.sorted=function(e,t,o){return(e=e||this.contentCompare||Object.compare).by?(t=e.by,e=e.compare||this.contentCompare||Object.compare):t=t||Function.identity,void 0===o&&(o=1),this.map(function(e){return{by:t(e),value:e}}).sort(function(t,n){return e(t.by,n.by)*o}).map(function(e){return e.value})},n.prototype.reversed=function(){return this.constructClone(this).reverse()},n.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var o=this.constructClone();return this.forEach(function(n,r){o.add(Object.clone(n,e-1,t),r)},this),o},n.prototype.only=function(){if(1===this.length)return this.one()},n.prototype.iterator=function(){return this.iterate.apply(this,arguments)},n._sizePropertyDescriptor={get:function(){return this.length},enumerable:!1,configurable:!0},Object.defineProperty(n.prototype,"size",n._sizePropertyDescriptor),e("./shim-array")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./shim-array":25}],18:[function(e,t){"use strict";var o=e("./shim-object"),n=e("./iterator");function r(){throw new Error("Can't construct. GenericMap is a mixin.")}function a(e,t){this.key=e,this.value=t}t.exports=r,r.prototype.isMap=!0,r.prototype.addEach=function(e){var t;if(e&&o(e)===e)if("function"==typeof e.forEach)!0===e.isMap?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);else o.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);return this},r.prototype.get=function(e,t){var o=this.store.get(new this.Item(e));return o?o.value:arguments.length>1?(console.log("Use of a second argument as default value is deprecated to match standards"),t):this.getDefault(e)},r.prototype.set=function(e,t){var o=new this.Item(e,t),n=this.store.get(o);return n?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n.value),n.value=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(o)&&this.length++,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),this},r.prototype.add=function(e,t){return this.set(t,e)},r.prototype.has=function(e){return this.store.has(new this.Item(e))},r.prototype.delete=function(e){var t=new this.Item(e);if(this.store.has(t)){var o=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,o),this.store.delete(t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},r.prototype.clear=function(){var e,t;if(this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),this.store.clear(),this.length=0,this.dispatchesMapChanges)for(var o=0;t=e[o];o++)this.dispatchMapChange(t)},r.prototype.reduce=function(e,t,o){return this.store.reduce(function(t,n){return e.call(o,t,n.value,n.key,this)},t,this)},r.prototype.reduceRight=function(e,t,o){return this.store.reduceRight(function(t,n){return e.call(o,t,n.value,n.key,this)},t,this)},r.prototype.keysArray=function(){return this.map(function(e,t){return t})},r.prototype.keys=function(){return new n(this.keysArray(),!0)},r.prototype.valuesArray=function(){return this.map(Function.identity)},r.prototype.values=function(){return new n(this.valuesArray(),!0)},r.prototype.entriesArray=function(){return this.map(function(e,t){return[t,e]})},r.prototype.entries=function(){return new n(this.entriesArray(),!0)},r.prototype.items=function(){return this.entriesArray()},r.prototype.equals=function(e,t){return t=t||o.equals,this===e||(e&&"function"==typeof e.every?e.length===this.length&&e.every(function(e,o){return t(this.get(o),e)},this):o.keys(e).length===this.length&&o.keys(e).every(function(o){return t(this.get(o),e[o])},this))},r.prototype.toJSON=function(){return this.entriesArray()},r.prototype.Item=a,a.prototype.equals=function(e){return o.equals(this.key,e.key)&&o.equals(this.value,e.value)},a.prototype.compare=function(e){return o.compare(this.key,e.key)}},{"./iterator":21,"./shim-object":27}],19:[function(e,t){var o=e("./shim-object");function n(){throw new Error("Can't construct. GenericOrder is a mixin.")}t.exports=n,n.prototype.equals=function(e,t){return t=t||this.contentEquals||o.equals,this===e||!!e&&(this.length===e.length&&this.zip(e).every(function(e){return t(e[0],e[1])}))},n.prototype.compare=function(e,t){if(t=t||this.contentCompare||o.compare,this===e)return 0;if(!e)return 1;var n=Math.min(this.length,e.length),r=this.zip(e).reduce(function(e,o,r){return 0===e?r>=n?e:t(o[0],o[1]):e},0);return 0===r?this.length-e.length:r},n.prototype.toJSON=function(){return this.toArray()}},{"./shim-object":27}],20:[function(e,t){function o(){throw new Error("Can't construct. GenericSet is a mixin.")}t.exports=o,o.prototype.isSet=!0,o.prototype.union=function(e){var t=this.constructClone(this);return t.addEach(e),t},o.prototype.intersection=function(e){return this.constructClone(this.filter(function(t){return e.has(t)}))},o.prototype.difference=function(e){var t=this.constructClone(this);return t.deleteEach(e),t},o.prototype.symmetricDifference=function(e){var t=this.union(e),o=this.intersection(e);return t.difference(o)},o.prototype.deleteAll=function(e){return+this.delete(e)},o.prototype.equals=function(e,t){var o=this;return e&&"function"==typeof e.reduce&&this.length===e.length&&e.reduce(function(e,n){return e&&o.has(n,t)},!0)},o.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(o,n,r,a,i){e.call(t,n,n,a,i)},void 0)},o.prototype.toJSON=function(){return this.toArray()},o.prototype.contains=function(e){return this.has(e)},o.prototype.remove=function(e){return this.delete(e)},o.prototype.toggle=function(e){this.has(e)?this.delete(e):this.add(e)};var n=function(e){return e};o.prototype.valuesArray=function(){return this.map(n)};var r=function(e,t){return[t,e]};o.prototype.entriesArray=function(){return this.map(r)}},{}],21:[function(e,t){"use strict";t.exports=r;var o=e("./shim-object"),n=e("./generic-collection");function r(e,t){var n=t&&e&&e.values&&e.values();if(n&&"function"==typeof n.next)return n;if(!(this instanceof r))return new r(e);if(Array.isArray(e)||"string"==typeof e)return r.iterate(e);if((e=o(e))instanceof r)return e;if(e.next)this.next=function(){return e.next()};else if(e.iterate){var a=e.iterate();this.next=function(){return a.next()}}else{if("[object Function]"!==o.prototype.toString.call(e))throw new TypeError("Can't iterate "+e);this.next=e}}r.prototype.forEach=n.prototype.forEach,r.prototype.map=n.prototype.map,r.prototype.filter=n.prototype.filter,r.prototype.every=n.prototype.every,r.prototype.some=n.prototype.some,r.prototype.any=n.prototype.any,r.prototype.all=n.prototype.all,r.prototype.min=n.prototype.min,r.prototype.max=n.prototype.max,r.prototype.sum=n.prototype.sum,r.prototype.average=n.prototype.average,r.prototype.flatten=n.prototype.flatten,r.prototype.zip=n.prototype.zip,r.prototype.enumerate=n.prototype.enumerate,r.prototype.sorted=n.prototype.sorted,r.prototype.group=n.prototype.group,r.prototype.reversed=n.prototype.reversed,r.prototype.toArray=n.prototype.toArray,r.prototype.toObject=n.prototype.toObject,r.prototype.iterator=n.prototype.iterator,r.prototype.__iterationObject=null,o.defineProperty(r.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:void 0})}}),r.prototype.constructClone=function(e){var t=[];return t.addEach(e),t},r.prototype.mapIterator=function(e){var t=r(this),n=arguments[1],a=0;if("[object Function]"!=o.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(!0!==t._iterationObject.done){var o=e.call(n,t.next().value,a++,t);t._iterationObject.value=o}return t._iterationObject})},r.prototype.filterIterator=function(e){var t=r(this),n=arguments[1],a=0;if("[object Function]"!=o.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){for(var o;;){if(!0===(o=t.next()).done)return o;if(e.call(n,o.value,a++,t))return o}})},r.prototype.reduce=function(e){var t,n=r(this),a=arguments[1],i=arguments[2],s=0;if("[object Function]"!=o.prototype.toString.call(e))throw new TypeError;if(!0===(t=n.next()).done){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(a=arguments.length>1?e.call(i,a,t.value,s,n):t.value,s++;;){if(!0===(t=n.next()).done)return a;a=e.call(i,a,t.value,s,n),s++}},r.prototype.concat=function(){return r.concat(Array.prototype.concat.apply(this,arguments))},r.prototype.dropWhile=function(e){var t,n,a=r(this),i=arguments[1],s=!1,c=0;if("[object Function]"!=o.prototype.toString.call(e))throw new TypeError;for(;!0!==(n=a.next()).done;){if(!e.call(i,n.value,c,a)){s=!0,t=n.value;break}c++}return s?a.constructor([t]).concat(a):a.constructor([])},r.prototype.takeWhile=function(e){var t=r(this),n=arguments[1],a=0;if("[object Function]"!=o.prototype.toString.call(e))throw new TypeError;return new t.constructor(function(){if(!0!==t._iterationObject.done){var o=t.next().value;e.call(n,o,a++,t)?t._iterationObject.value=o:(t._iterationObject.done=!0,t._iterationObject.value=void 0)}return t._iterationObject})},r.prototype.zipIterator=function(){return r.unzip(Array.prototype.concat.apply(this,arguments))},r.prototype.enumerateIterator=function(e){return r.count(e).zipIterator(this)},r.iterate=function(e){var t;return t=0,new r(function(){if("object"==typeof e)for(;!(t in e);){if(t>=e.length){this._iterationObject.done=!0,this._iterationObject.value=void 0;break}t+=1}else t>=e.length&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);return this._iterationObject.done||(this._iterationObject.value=e[t],t+=1),this._iterationObject})},r.cycle=function(e,t){var o;return arguments.length<2&&(t=1/0),new r(function(){var n,a;return o&&(a=o()),o&&!0!==a.done||(t>0?(t--,n=r.iterate(e),a=(o=n.next.bind(n))()):(this._iterationObject.done=!0,a=this._iterationObject)),a})},r.concat=function(e){var t;return e=r(e),new r(function(){var o,n;return t&&(n=t()),n&&!0!==n.done?n:!1===(n=e.next()).done?(o=r(n.value),(t=o.next.bind(o))()):n})},r.unzip=function(e){return 0===(e=r(e).map(r)).length?new r([]):new r(function(){var t,o,n=e.map(function(e){return!0===(o=e.next()).done&&(t=!0),o.value});return t?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=n,this._iterationObject})},r.zip=function(){return r.unzip(Array.prototype.slice.call(arguments))},r.chain=function(){return r.concat(Array.prototype.slice.call(arguments))},r.range=function(e,t,o){return arguments.length<3&&(o=1),arguments.length<2&&(t=e,e=0),e=e||0,o=o||1,new r(function(){e>=t&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);var n=e;return e+=o,this._iterationObject.value=n,this._iterationObject})},r.count=function(e,t){return r.range(e,1/0,t)},r.repeat=function(e,t){return new r.range(t).mapIterator(function(){return e})}},{"./generic-collection":17,"./shim-object":27}],22:[function(e,t){var o=e("../_map"),n=t.exports.ObjectChangeDescriptor=function(e){return this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null,this};Object.defineProperties(n.prototype,{name:{value:null,writable:!0},isActive:{value:!1,writable:!0},_willChangeListeners:{value:null,writable:!0},willChangeListeners:{get:function(){return this._willChangeListeners||(this._willChangeListeners=new this.willChangeListenersRecordConstructor(this.name))}},_changeListeners:{value:null,writable:!0},changeListeners:{get:function(){return this._changeListeners||(this._changeListeners=new this.changeListenersRecordConstructor(this.name))}},changeListenersRecordConstructor:{value:i,writable:!0},willChangeListenersRecordConstructor:{value:c,writable:!0}});var r=t.exports.ListenerGhost=Object.create(null),a=new o;function i(e){var t=a.get(e);return t||(t="handle",t+=e,t+="Change",a.set(e,t)),this._current=null,this._current=null,this.specificHandlerMethodName=t,this}t.exports.ChangeListenersRecord=i,Object.defineProperties(i.prototype,{_current:{value:null,writable:!0},current:{get:function(){return this._current},set:function(e){this._current=e}},ListenerGhost:{value:r,writable:!0},ghostCount:{value:0,writable:!0},maxListenerGhostRatio:{value:.3,writable:!0},listenerGhostFilter:{value:function(e){return e!==this.ListenerGhost}},removeCurrentGostListenersIfNeeded:{value:function(){return this._current&&this.ghostCount/this._current.length>this.maxListenerGhostRatio&&(this.ghostCount=0,this._current=this._current.filter(this.listenerGhostFilter,this)),this._current}},dispatchBeforeChange:{value:!1,writable:!0},genericHandlerMethodName:{value:"handlePropertyChange",writable:!0}}),t.exports.WillChangeListenersRecord=c;var s=new o;function c(e){var t=s.get(e);return t||(t="handle",t+=e,t+="WillChange",s.set(e,t)),this.specificHandlerMethodName=t,this}c.prototype=new i,c.prototype.constructor=c,c.prototype.genericHandlerMethodName="handlePropertyWillChange"},{"../_map":15}],23:[function(e,t){function o(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}Object.prototype.hasOwnProperty,t.exports=o,e("../shim");var n=e("../_map"),r=e("../weak-map"),a=e("./change-descriptor"),i=a.ObjectChangeDescriptor,s=a.ListenerGhost;o.debug=!0;var c=new r,l=new n;function u(e,t,o,n){if(e&&e._current){var r,a,i,c,l,u=e.specificHandlerMethodName,p=e.genericHandlerMethodName,d=s;if(Array.isArray(e._current)){for(i=0,c=(r=e.removeCurrentGostListenersIfNeeded()).length;i<c;i++)if((l=r[i])!==d){if(!(a=l[u]||l[p]||l).call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+a);a.call(l,o,t,n)}}else{if(!(a=(l=e._current)[u]||l[p]||l).call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+a);a.call(l,o,t,n)}}}o.ObjectChangeDescriptor=function(){},o.prototype.getOwnPropertyChangeDescriptor=function(e){var t,o=c.get(this);if(o||(o=Object.create(null),c.set(this,o)),void 0===(t=o[e])){var n=l.get(e);return n||(n=(n=String(e))&&n[0].toUpperCase()+n.slice(1),l.set(e,n)),o[e]=new i(n)}return t},o.prototype.hasOwnPropertyChangeDescriptor=function(e){var t=c.get(this);return!(!t||e&&void 0===t[e])},o.prototype.addOwnPropertyChangeListener=function(e,t,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var r=o.getOwnPropertyChangeDescriptor(this,e),a=n?r.willChangeListeners:r.changeListeners;o.makePropertyObservable(this,e),a._current?Array.isArray(a._current)?a._current.push(t):a._current=[a._current,t]:a._current=t;var i=this;return function(){o.removeOwnPropertyChangeListener(i,e,t,n),i=null}},o.prototype.addBeforeOwnPropertyChangeListener=function(e,t){return o.addOwnPropertyChangeListener(this,e,t,!0)},o.prototype.removeOwnPropertyChangeListener=function e(t,n,r){var a,i=o.getOwnPropertyChangeDescriptor(this,t);if((a=r?i._willChangeListeners:i._changeListeners)&&a._current)if(a._current===n)a._current=null;else{var s=a._current.lastIndexOf(n);if(-1===s)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(t));i.isActive?(a.ghostCount=a.ghostCount+1,a._current[s]=e.ListenerGhost):a._current.spliceOne(s)}},o.prototype.removeOwnPropertyChangeListener.ListenerGhost=s,o.prototype.removeBeforeOwnPropertyChangeListener=function(e,t){return o.removeOwnPropertyChangeListener(this,e,t,!0)},o.prototype.dispatchOwnPropertyChange=function e(t,n,r){var a,i=o.getOwnPropertyChangeDescriptor(this,t);if(!i.isActive){i.isActive=!0,a=r?i._willChangeListeners:i._changeListeners;try{e.dispatchEach(a,t,n,this)}finally{i.isActive=!1}}},o.prototype.dispatchOwnPropertyChange.dispatchEach=u,u.ListenerGhost=s,o.prototype.dispatchBeforeOwnPropertyChange=function(e,t){return o.dispatchOwnPropertyChange(this,e,t,!0)};var p=new r,d=(new r,{get:void 0,set:void 0,configurable:!0,enumerable:!1});o.prototype.makePropertyObservable=function(e){var t=p.get(this);if(!t||void 0===t.get(e)){if(!t){if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");t=new n,p.set(this,t)}var o,r=this;do{if(o=Object.getOwnPropertyDescriptor(r,e))break;r=Object.getPrototypeOf(r)}while(r);if(o){if(!o.configurable)return;if(!o.writable&&!o.set)return}else o={value:void 0,enumerable:!0,writable:!0,configurable:!0};t.set(e,o),"value"in o?(d.get=function e(){return e.overriddenDescriptor.value},d.set=function e(t){var o,n,r=e.overriddenDescriptor;if(t!==r.value){if(!(n=(o=e.descriptor).isActive)){o.isActive=!0;try{e.dispatchEach(o._willChangeListeners,e.key,r.value,this)}finally{}}if(r.value=t,!n)try{e.dispatchEach(o._changeListeners,e.key,t,this)}finally{o.isActive=!1}}},d.set.dispatchEach=u,d.set.key=e,d.get.overriddenDescriptor=d.set.overriddenDescriptor=o,d.set.descriptor=c.get(this)[e],d.enumerable=o.enumerable,d.configurable=!0):(d.get=o.get,d.set=function t(){var o,n,r,a=t.overriddenGetter.call(this);if(1===arguments.length?t.overriddenSetter.call(this,arguments[0]):2===arguments.length?t.overriddenSetter.call(this,arguments[0],arguments[1]):t.overriddenSetter.apply(this,arguments),(r=t.overriddenGetter.call(this))!==a){if(!(n=(o=t.descriptor).isActive)){o.isActive=!0;try{t.dispatchEach(o._willChangeListeners,e,a,this)}finally{}}if(!n)try{t.dispatchEach(o._changeListeners,e,r,this)}finally{o.isActive=!1}}},d.enumerable=o.enumerable,d.configurable=!0,d.set.dispatchEach=u,d.set.overriddenSetter=o.set,d.set.overriddenGetter=o.get,d.set.descriptor=c.get(this)[e]),Object.defineProperty(this,e,d)}},o.getOwnPropertyChangeDescriptor=function(e,t){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(t):o.prototype.getOwnPropertyChangeDescriptor.call(e,t)},o.hasOwnPropertyChangeDescriptor=function(e,t){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(t):o.prototype.hasOwnPropertyChangeDescriptor.call(e,t)},o.addOwnPropertyChangeListener=function(e,t,o,n){if(Object.isObject(e))return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(t,o,n):this.prototype.addOwnPropertyChangeListener.call(e,t,o,n)},o.removeOwnPropertyChangeListener=function(e,t,n,r){if(Object.isObject(e))return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(t,n,r):o.prototype.removeOwnPropertyChangeListener.call(e,t,n,r)},o.dispatchOwnPropertyChange=function(e,t,n,r){if(Object.isObject(e))return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(t,n,r):o.prototype.dispatchOwnPropertyChange.call(e,t,n,r)},o.addBeforeOwnPropertyChangeListener=function(e,t,n){return o.addOwnPropertyChangeListener(e,t,n,!0)},o.removeBeforeOwnPropertyChangeListener=function(e,t,n){return o.removeOwnPropertyChangeListener(e,t,n,!0)},o.dispatchBeforeOwnPropertyChange=function(e,t,n){return o.dispatchOwnPropertyChange(e,t,n,!0)},o.makePropertyObservable=function(e,t){return e.makePropertyObservable?e.makePropertyObservable(t):o.prototype.makePropertyObservable.call(e,t)}},{"../_map":15,"../shim":29,"../weak-map":32,"./change-descriptor":22}],24:[function(e,t){"use strict";var o=e("../weak-map"),n=e("../_map"),r=e("./change-descriptor"),a=r.ObjectChangeDescriptor,i=r.ChangeListenersRecord,s=r.ListenerGhost,c=new o;function l(e){this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null}l.prototype=new a,l.prototype.constructor=l,l.prototype.changeListenersRecordConstructor=p,l.prototype.willChangeListenersRecordConstructor=f,Object.defineProperty(l.prototype,"active",{get:function(){return this._active||(this._active=this._current?this._current.slice():[])}});var u=new n;function p(e){var t=u.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="RangeChange",u.set(e,t)),this.specificHandlerMethodName=t,this}p.prototype=new i,p.prototype.constructor=p;var d=new n;function f(e){var t=d.get(e);return t||(t="handle",t+=e.slice(0,1).toUpperCase(),t+=e.slice(1),t+="RangeWillChange",d.set(e,t)),this.specificHandlerMethodName=t,this}function h(){throw new Error("Can't construct. RangeChanges is a mixin.")}f.prototype=new i,f.prototype.constructor=f,t.exports=h,h.prototype.getAllRangeChangeDescriptors=function(){return c.has(this)||c.set(this,new n),c.get(this)},h.prototype.getRangeChangeDescriptor=function(e){var t=this.getAllRangeChangeDescriptors();return e=e||"",t.has(e)||t.set(e,new l(e)),t.get(e)};var g=new o,m={get:function(){return g.get(this)},set:function(e){return g.set(this,e)},configurable:!0,enumerable:!1};h.prototype.addRangeChangeListener=function(e,t,o){!this.isObservable&&this.makeObservable&&this.makeObservable();var n,r=this.getRangeChangeDescriptor(t);(n=o?r.willChangeListeners:r.changeListeners)._current?Array.isArray(n._current)?n._current.push(e):n._current=[n._current,e]:n._current=e,void 0===Object.getOwnPropertyDescriptor(this.__proto__||Object.getPrototypeOf(this),"dispatchesRangeChanges")&&Object.defineProperty(this.__proto__||Object.getPrototypeOf(this),"dispatchesRangeChanges",m),this.dispatchesRangeChanges=!0;var a=this;return function(){a&&(a.removeRangeChangeListener(e,t,o),a=null)}},h.prototype.removeRangeChangeListener=function(e,t,o){var n,r=this.getRangeChangeDescriptor(t);if((n=o?r._willChangeListeners:r._changeListeners)._current)if(n._current===e)n._current=null;else{var a=n._current.lastIndexOf(e);if(-1===a)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(t));r.isActive?(n.ghostCount=n.ghostCount+1,n._current[a]=s):n._current.spliceOne(a)}},h.prototype.dispatchRangeChange=function(e,t,o,n){var r,a,i,c,l,u,p,d,f=this.getAllRangeChangeDescriptors(),h=f.values();for(f.dispatchBeforeChange=n;r=h.next().value;){if(r.isActive)return;if((a=n?r._willChangeListeners:r._changeListeners)&&a._current)if(i=a.specificHandlerMethodName,Array.isArray(a._current)){if(a._current.length){r.isActive=!0;try{for(p=a.removeCurrentGostListenersIfNeeded(),d=s,c=0,l=p.length;c<l;c++)if((u=p[c])!==d)if(u[i])u[i](e,t,o,this,n);else{if(!u.call)throw new Error("Handler "+u+" has no method "+i+" and is not callable");u.call(this,e,t,o,this,n)}}finally{r.isActive=!1}}}else{r.isActive=!0;try{if((u=a._current)[i])u[i](e,t,o,this,n);else{if(!u.call)throw new Error("Handler "+u+" has no method "+i+" and is not callable");u.call(this,e,t,o,this,n)}}finally{r.isActive=!1}}}},h.prototype.addBeforeRangeChangeListener=function(e,t){return this.addRangeChangeListener(e,t,!0)},h.prototype.removeBeforeRangeChangeListener=function(e,t){return this.removeRangeChangeListener(e,t,!0)},h.prototype.dispatchBeforeRangeChange=function(e,t,o){return this.dispatchRangeChange(e,t,o,!0)}},{"../_map":15,"../weak-map":32,"./change-descriptor":22}],25:[function(e,t){"use strict";e("./shim-function");var o=e("./generic-collection"),n=e("./generic-order"),r=e("./weak-map");t.exports=Array;var a=Array.prototype.splice,i=Array.prototype.slice;Array.empty||(Array.empty=[],Object.freeze&&Object.freeze(Array.empty)),Array.nativeFrom||(Array.nativeFrom=Array.from);var s="undefined"!=typeof Symbol;function c(e,t){Object.defineProperty(Array.prototype,e,{value:t,writable:!0,configurable:!0,enumerable:!1})}Array.from=function(e,t,o){if(s&&e&&("function"==typeof e[Symbol.iterator]||"function"==typeof t))return Array.nativeFrom(e,t,o);var n=[];return n.addEach(e),n},Array.unzip=function(e){for(var t=[],o=1/0,n=0;n<e.length;n++){var r=e[n];e[n]=r.toArray(),r.length<o&&(o=r.length)}for(n=0;n<e.length;n++){r=e[n];for(var a=0;a<r.length;a++)a<o&&a in r&&(t[a]=t[a]||[],t[a][n]=r[a])}return t},c("addEach",o.prototype.addEach),c("deleteEach",o.prototype.deleteEach),c("toArray",o.prototype.toArray),c("toObject",o.prototype.toObject),c("all",o.prototype.all),c("any",o.prototype.any),c("min",o.prototype.min),c("max",o.prototype.max),c("sum",o.prototype.sum),c("average",o.prototype.average),c("only",o.prototype.only),c("flatten",o.prototype.flatten),c("zip",o.prototype.zip),c("enumerate",o.prototype.enumerate),c("group",o.prototype.group),c("sorted",o.prototype.sorted),c("reversed",o.prototype.reversed),c("constructClone",function(e){var t=new this.constructor;return t.addEach(e),t}),c("has",function(e,t){return-1!==this.findValue(e,t)}),c("get",function(e,t){if(+e!==e)throw new Error("Indicies must be numbers");return!e in this?t:this[e]}),c("set",function(e,t){return this[e]=t,!0}),c("add",function(e){return this.push(e),!0}),c("delete",function(e,t){var o=this.findValue(e,t);return-1!==o&&(this.spliceOne(o),!0)}),c("deleteAll",function(e,t){t=t||this.contentEquals||Object.equals;for(var o=0,n=0;n<this.length;)t(e,this[n])?(this.swap(n,1),o++):n++;return o}),Array.prototype.find||c("find",function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<o;){var a=t[r];if(e.call(n,a,r,t))return a;r++}});var l={};function u(e,t){"undefined"!=typeof console&&"function"==typeof console.warn&&!0!==t&&!1===l.hasOwnProperty(e)&&(console.warn(e),l[e]++)}var p=Object.getOwnPropertyDescriptor(Array.prototype,"find").value;function d(e,t,o){this.array=e,this.start=null==t?0:t,this.end=o}c("find",function(){return"function"==typeof arguments[0]&&this instanceof Array?p.apply(this,arguments):(u("Array#find usage is deprecated please use Array#findValue"),this.findValue.apply(this,arguments))}),c("findValue",function(e,t,o){if(o)throw new Error("Array#findValue does not support third argument: index");for(t=t||this.contentEquals||Object.equals,o=0;o<this.length;o++)if(o in this&&t(e,this[o]))return o;return-1}),c("findLast",function(){return u("Array#findLast function is deprecated please use Array#findLastValue instead."),this.findLastValue.apply(this,arguments)}),c("findLastValue",function(e,t){t=t||this.contentEquals||Object.equals;var o=this.length;do{if(--o in this&&t(this[o],e))return o}while(o>0);return-1}),c("swap",function(e,t,o){var n,r,s,c,l;if(e>this.length&&(this.length=e),void 0!==o){if(n=[e,t],Array.isArray(o)||(o=i.call(o)),s=0,(r=o.length)<1e3){for(;s<r;s++)n[s+2]=o[s];return a.apply(this,n)}for(l=a.apply(this,n);s<r;){for(n=[e+s,0],c=2;c<1002&&s<r;c++,s++)n[c]=o[s];a.apply(this,n)}return l}return void 0!==t?a.call(this,e,t):void 0!==e?a.call(this,e):[]}),c("peek",function(){return this[0]}),c("poke",function(e){this.length>0&&(this[0]=e)}),c("peekBack",function(){if(this.length>0)return this[this.length-1]}),c("pokeBack",function(e){this.length>0&&(this[this.length-1]=e)}),c("one",function(){for(var e in this)if(Object.owns(this,e))return this[e]}),Array.prototype.clear||c("clear",function(){return this.length=0,this}),c("compare",function(e,t){var o,r,a;if(t=t||Object.compare,this===e)return 0;if(!e||!Array.isArray(e))return n.prototype.compare.call(this,e,t);for(r=this.length<e.length?this.length:e.length,o=0;o<r;o++)if(o in this){if(!(o in e))return-1;if(a=t(this[o],e[o]))return a}else if(o in e)return 1;return this.length-e.length}),c("equals",function(e,t){t=t||Object.equals;var o=0,r=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return n.prototype.equals.call(this,e);if(r!==e.length)return!1;for(;o<r;++o)if(o in this){if(!(o in e))return!1;if(!t(this[o],e[o]))return!1}else if(o in e)return!1;return!0}),c("clone",function(e,t){if(null==e)e=1/0;else if(0===e)return this;if((t=t||new r).has(this))return t.get(this);var o=new Array(this.length);for(var n in t.set(this,o),this)o[n]=Object.clone(this[n],e-1,t);return o}),c("iterate",function(e,t){return new d(this,e,t)}),void 0===Array.prototype.spliceOne&&c("spliceOne",function(e,t){var o=this.length;if(o)if(1===arguments.length){for(;e<o;)this[e]=this[e+1],e++;this.length--}else this[e]=t}),c("Iterator",d),d.prototype.__iterationObject=null,Object.defineProperty(d.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),d.prototype.next=function(){return this.start===(null==this.end?this.array.length:this.end)?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=this.array[this.start++],this._iterationObject}},{"./generic-collection":17,"./generic-order":19,"./shim-function":26,"./weak-map":32}],26:[function(e,t){t.exports=Function,Function.noop=function(){},Function.identity=function(e){return e},Function.by=function(e,t){t=t||Object.compare,e=e||Function.identity;var o=function(o,n){return t(e(o),e(n))};return o.compare=t,o.by=e,o},Function.get=function(e){return function(t){return Object.get(t,e)}}},{}],27:[function(e,t){"use strict";var o=e("./weak-map");e("./shim-function"),t.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return e&&"function"==typeof e.valueOf&&(e=e.valueOf()),e};var n=new o;Object.hash=function(e){return e&&"function"==typeof e.hash?""+e.hash():Object(e)===e?(n.has(e)||n.set(e,Math.random().toString(36).slice(2)),n.get(e)):""+e};var r=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return r.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw new Error("Object.has can't accept non-object: "+typeof e);if(e&&"function"==typeof e.has)return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,o){if("object"!=typeof e)throw new Error("Object.get can't accept non-object: "+typeof e);return e&&"function"==typeof e.get?e.get(t,o):Object.has(e,t)?e[t]:o},Object.set=function(e,t,o){e&&"function"==typeof e.set?e.set(t,o):e[t]=o},Object.addEach=function(e,t,o){var n=3!==arguments.length||o;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var r=0;r<t.length;r++)e[r]=t[r];else for(var a,i=Object.keys(t),s=0;a=i[s];s++)!n&&Object.owns(e,a)||(e[a]=t[a]);else!0===t.isMap?t.forEach(function(t,o){e[o]=t}):t.forEach(function(t){e[t[0]]=t[1]});return e},Object.defineEach=function(e,t,o,n,r,a){var i=3!==arguments.length||o;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var s=0;s<t.length;s++)Object.defineProperty(e,s,{value:t[s],writable:a,configurable:n,enumerable:r});else for(var c,l=Object.keys(t),u=0;c=l[u];u++)!i&&Object.owns(e,c)||Object.defineProperty(e,c,{value:t[c],writable:a,configurable:n,enumerable:r});else!0===t.isMap?t.forEach(function(t,o){Object.defineProperty(e,o,{value:t,writable:a,configurable:n,enumerable:r})}):t.forEach(function(t){Object.defineProperty(e,t[0],{value:t[1],writable:a,configurable:n,enumerable:r})});return e},Object.forEach=function(e,t,o){for(var n,r=Object.keys(e),a=0;n=r[a];a++)t.call(o,e[n],n,e)},Object.map=function(e,t,o){for(var n,r=Object.keys(e),a=0,i=[];n=r[a];a++)i.push(t.call(o,e[n],n,e));return i},Object.values=function(e){return Object.map(e,Function.identity)},Object.concat=function(){for(var e={},t=0;t<arguments.length;t++)Object.addEach(e,arguments[t]);return e},Object.from=Object.concat,Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Object.equals=function(e,t,n,r){if(n=n||Object.equals,(e=Object.getValueOf(e))===(t=Object.getValueOf(t)))return!0;if(Object.isObject(e)){if((r=r||new o).has(e))return!0;r.set(e,!0)}if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,n,r);if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,n,r);if(Object.isObject(e)&&Object.isObject(t)&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){for(var a in e)if(!n(e[a],t[a],n,r))return!1;for(var a in t)if(!(a in e&&n(t[a],e[a],n,r)))return!1;return!0}return e!=e&&t!=t||(!e||!t)&&e===t},Object.compare=function(e,t){if((e=Object.getValueOf(e))===(t=Object.getValueOf(t)))return 0;var o=typeof e,n=typeof t;return"number"===o&&"number"===n?e-t:"string"===o&&"string"===n?e<t?-1/0:1/0:e&&"function"==typeof e.compare?e.compare(t):t&&"function"==typeof t.compare?-t.compare(e):0},Object.clone=function(e,t,n){if(e=Object.getValueOf(e),n=n||new o,void 0===t)t=1/0;else if(0===t)return e;if(Object.isObject(e)){if(!n.has(e))if(e&&"function"==typeof e.clone)n.set(e,e.clone(t,n));else{var r=Object.getPrototypeOf(e);if(null!==r&&r!==Object.prototype)throw new Error("Can't clone "+e);var a=Object.create(r);for(var i in n.set(e,a),e)a[i]=Object.clone(e[i],t-1,n)}return n.get(e)}return e},Object.clear=function(e){if(e&&"function"==typeof e.clear)e.clear();else for(var t=Object.keys(e),o=t.length;o;)delete e[t[--o]];return e}},{"./shim-function":26,"./weak-map":32}],28:[function(){if(!RegExp.escape){var e=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(e,"\\$&")}}},{}],29:[function(e){e("./shim-array"),e("./shim-object"),e("./shim-function"),e("./shim-regexp")},{"./shim-array":25,"./shim-function":26,"./shim-object":27,"./shim-regexp":28}],30:[function(e,t){"use strict";t.exports=a,e("./shim");var o=e("./generic-collection"),n=e("./listen/property-changes"),r=e("./listen/range-changes");function a(e,t,o,n){if(!(this instanceof a))return new a(e,t,o,n);Array.isArray(e)?(this.array=e,e=e.splice(0,e.length)):this.array=[],this.contentEquals=t||Object.equals,this.contentCompare=o||Object.compare,this.getDefault=n||Function.noop,this.length=0,this.addEach(e)}function i(e,t,o){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>1,i=o(t,e[a]);if(i>0)n=a+1;else{if(!(i<0))return a;r=a-1}}return-(n+1)}function s(e,t,o,n){for(var r=e,a=e;r>0&&0===n(o,t[r-1]);)r--;for(;a<t.length-1&&0===n(o,t[a+1]);)a++;return{start:r,end:a}}function c(e,t,o,n){var r=i(e,t,o);if(r<0)return-1;for(var a=s(r,e,t,o),c=a.start;c<=a.end;c++)if(n(t,e[c]))return c;return-1}function l(e,t,o,n){var r=i(e,t,o);if(r<0)return-1;for(var a=s(r,e,t,o),c=a.end;c>=a.start;c--)if(n(t,e[c]))return c;return-1}function u(e,t,o){var n=i(e,t,o);if(n<0)return-n-1;for(var r=e.length-1;n<r&&0===o(t,e[n+1]);)n++;return n}a.SortedArray=a,a.from=o.from,Object.addEach(a.prototype,o.prototype),Object.addEach(a.prototype,n.prototype),Object.addEach(a.prototype,r.prototype),a.prototype.isSorted=!0,a.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare,this.getDefault)},a.prototype.has=function(e,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");return-1!==c(this.array,e,this.contentCompare,this.contentEquals)},a.prototype.get=function(e,t){if(t)throw new Error("SortedArray#get does not support second argument: equals");var o=c(this.array,e,this.contentCompare,this.contentEquals);return-1!==o?this.array[o]:this.getDefault(e)},a.prototype.add=function(e){var t=u(this.array,e,this.contentCompare);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([e],Array.empty,t),this.array.splice(t,0,e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([e],Array.empty,t),!0},a.prototype.delete=function(e,t){if(t)throw new Error("SortedArray#delete does not support second argument: equals");var o=c(this.array,e,this.contentCompare,this.contentEquals);return-1!==o&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,[e],o),this.array.spliceOne(o),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,[e],o),!0)},a.prototype.deleteAll=function(e,t){if(t){var o=this.array.deleteAll(e,t);return this.length-=o,o}var n=c(this.array,e,this.contentCompare,this.contentEquals);if(-1!==n){for(var r=n;this.contentEquals(e,this.array[r]);)r++;var a=this.slice(n,r);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,a,n),this.array.splice(n,a.length),this.length-=a.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,a,n),a.length}return 0},a.prototype.indexOf=function(e){return c(this.array,e,this.contentCompare,this.contentEquals)},a.prototype.lastIndexOf=function(e){return l(this.array,e,this.contentCompare,this.contentEquals)};var p={};function d(e,t){"undefined"!=typeof console&&"function"==typeof console.warn&&!0!==t&&!1===p.hasOwnProperty(e)&&(console.warn(e),p[e]++)}a.prototype.find=function(){return d("This SortedArray#find usage is deprecated please use SortedArray#findValue"),this.findValue.apply(this,arguments)},a.prototype.findValue=function(e,t,o){if(t)throw new Error("SortedArray#findValue does not support second argument: equals");if(o)throw new Error("SortedArray#findValue does not support third argument: index");return c(this.array,e,this.contentCompare,this.contentEquals)},a.prototype.findLast=function(){return d("This SortedArray#findLast usage is deprecated please use SortedArray#findLastValue"),this.findLastValue.apply(this,arguments)},a.prototype.findLastValue=function(e,t,o){if(t)throw new Error("SortedArray#findLastValue does not support second argument: equals");if(o)throw new Error("SortedArray#findLastValue does not support third argument: index");return l(this.array,e,this.contentCompare,this.contentEquals)},a.prototype.push=function(){this.addEach(arguments)},a.prototype.unshift=function(){this.addEach(arguments)},a.prototype.pop=function(){var e=this.array.pop();return this.length=this.array.length,e},a.prototype.shift=function(){var e=this.array.shift();return this.length=this.array.length,e},a.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},a.prototype.splice=function(e,t){return this.swap(e,t,Array.prototype.slice.call(arguments,2))},a.prototype.swap=function(e,t,o){if(void 0===e&&void 0===t)return Array.empty;(e=e||0)<0&&(e+=this.length),void 0===t&&(t=1/0);var n=this.slice(e,e+t);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(o,n,e),this.array.splice(e,t),this.length-=n.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,n,e),this.addEach(o),n},a.prototype.reduce=function(e,t){var o=arguments[2];return this.array.reduce(function(t,n,r){return e.call(o,t,n,r,this)},t,this)},a.prototype.reduceRight=function(){var e=arguments[2];return this.array.reduceRight(function(t,o,n){return callback.call(e,t,o,n,this)},basis,this)},a.prototype.min=function(){if(this.length)return this.array[0]},a.prototype.max=function(){if(this.length)return this.array[this.length-1]},a.prototype.one=function(){return this.array.one()},a.prototype.clear=function(){var e;this.dispatchesRangeChanges&&(e=this.array.slice(),this.dispatchBeforeRangeChange(Array.empty,e,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,e,0)},a.prototype.equals=function(e,t){return this.array.equals(e,t)},a.prototype.compare=function(e,t){return this.array.compare(e,t)},a.prototype.iterate=function(e,t){return new this.Iterator(this.array,e,t)},a.prototype.toJSON=function(){return this.toArray()},a.prototype.Iterator=Array.prototype.Iterator},{"./generic-collection":17,"./listen/property-changes":23,"./listen/range-changes":24,"./shim":29}],31:[function(e,t){"use strict";function o(){}t.exports=o,o.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},o.unicodeRound={intersection:"\u254b",through:"\u2501",branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u256d",fromAbove:"\u2570",fromBoth:"\u2523",strafe:"\u2503"},o.unicodeSharp={intersection:"\u254b",through:"\u2501",branchUp:"\u253b",branchDown:"\u2533",fromBelow:"\u250f",fromAbove:"\u2517",fromBoth:"\u2523",strafe:"\u2503"}},{}],32:[function(e,t){t.exports="undefined"!=typeof WeakMap?WeakMap:e("weak-map")},{"weak-map":156}],33:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.BlockCipher,n=t.algo,r=[],a=[],i=[],s=[],c=[],l=[],u=[],p=[],d=[],f=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,r[o]=h,a[h]=o;var g=e[o],m=e[g],y=e[m],_=257*e[h]^16843008*h;i[o]=_<<24|_>>>8,s[o]=_<<16|_>>>16,c[o]=_<<8|_>>>24,l[o]=_,_=16843009*y^65537*m^257*g^16843008*o,u[h]=_<<24|_>>>8,p[h]=_<<16|_>>>16,d[h]=_<<8|_>>>24,f[h]=_,o?(o=g^e[e[e[y^g]]],n^=e[e[n]]):o=n=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,n=4*((this._nRounds=o+6)+1),a=this._keySchedule=[],i=0;i<n;i++)if(i<o)a[i]=t[i];else{var s=a[i-1];i%o?o>6&&i%o==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=h[i/o|0]<<24),a[i]=a[i-o]^s}for(var c=this._invKeySchedule=[],l=0;l<n;l++)i=n-l,s=l%4?a[i]:a[i-4],c[l]=l<4||i<=4?s:u[r[s>>>24]]^p[r[s>>>16&255]]^d[r[s>>>8&255]]^f[r[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,s,c,l,r)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,f,a),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,r,a,i,s){for(var c=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],f=4,h=1;h<c;h++){var g=n[l>>>24]^r[u>>>16&255]^a[p>>>8&255]^i[255&d]^o[f++],m=n[u>>>24]^r[p>>>16&255]^a[d>>>8&255]^i[255&l]^o[f++],y=n[p>>>24]^r[d>>>16&255]^a[l>>>8&255]^i[255&u]^o[f++],_=n[d>>>24]^r[l>>>16&255]^a[u>>>8&255]^i[255&p]^o[f++];l=g,u=m,p=y,d=_}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^o[f++],m=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[f++],y=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[f++],_=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^o[f++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=_},keySize:8});t.AES=o._createHelper(g)}(),e.AES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35,"./enc-base64":36,"./evpkdf":38,"./md5":43}],34:[function(e,t,o){var n;n=function(e){e.lib.Cipher||function(t){var o=e,n=o.lib,r=n.Base,a=n.WordArray,i=n.BufferedBlockAlgorithm,s=o.enc,c=(s.Utf8,s.Base64),l=o.algo.EvpKDF,u=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(o,n,r){return e(n).encrypt(t,o,n,r)},decrypt:function(o,n,r){return e(n).decrypt(t,o,n,r)}}}}()}),p=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),o.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=d.extend();function o(e,o,n){var r=this._iv;if(r){var a=r;this._iv=t}else a=this._prevBlock;for(var i=0;i<n;i++)e[o+i]^=a[i]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=e.slice(t,t+r);n.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=a}}),e}(),h=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,i=[],s=0;s<n;s+=4)i.push(r);var c=a.create(i,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,o=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=o.createEncryptor;else n=o.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(o,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;if(o)var n=a.create([1398893684,1701076831]).concat(o).concat(t);else n=t;return n.toString(c)},parse:function(e){var t=c.parse(e),o=t.words;if(1398893684==o[0]&&1701076831==o[1]){var n=a.create(o.slice(2,4));o.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:n})}},y=n.SerializableCipher=r.extend({cfg:r.extend({format:m}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var r=e.createEncryptor(o,n),a=r.finalize(t),i=r.cfg;return g.create({ciphertext:a,key:o,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(o.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=a.random(8));var r=l.create({keySize:t+o}).compute(e,n),i=a.create(r.words.slice(t),4*o);return r.sigBytes=4*t,g.create({key:r,iv:i,salt:n})}},v=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:_}),encrypt:function(e,t,o,n){var r=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=r.iv;var a=y.encrypt.call(this,e,t,r.key,n);return a.mixIn(r),a},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,y.decrypt.call(this,e,t,r.key,n)}})}()},"object"==typeof o?t.exports=o=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(this.CryptoJS)},{"./core":35,"./evpkdf":38}],35:[function(e,t,o){var n;n=function(){var e=e||function(e){var t=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),o={},n=o.lib={},r=n.Base={extend:function(e){var o=t(this);return e&&o.mixIn(e),o.hasOwnProperty("init")&&this.init!==o.init||(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<r;a++){var i=o[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=i<<24-(n+a)%4*8}else for(a=0;a<r;a+=4)t[n+a>>>2]=o[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,n=[],r=function(t){t=t;var o=987654321,n=4294967295;return function(){var r=((o=36969*(65535&o)+(o>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=r(4294967296*(o||e.random()));o=987654071*s(),n.push(4294967296*s()|0)}return new a.init(n,t)}}),i=o.enc={},s=i.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(o,t/2)}},c=i.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(o,t)}},l=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,n=o.words,r=o.sigBytes,i=this.blockSize,s=r/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,l=e.min(4*c,r);if(c){for(var u=0;u<c;u+=i)this._doProcessBlock(n,u);var p=n.splice(0,c);o.sigBytes-=l}return new a.init(p,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(n.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new p.HMAC.init(e,o).finalize(t)}}}),o.algo={});return o}(Math);return e},"object"==typeof o?t.exports=o=n():"function"==typeof define&&define.amd?define([],n):this.CryptoJS=n()},{}],36:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],a=0,i=0;i<t;i++)if(i%4){var s=n[e.charCodeAt(i-1)]<<i%4*2,c=n[e.charCodeAt(i)]>>>6-i%4*2;r[a>>>2]|=(s|c)<<24-a%4*8,a++}return o.create(r,a)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],a=0;a<o;a+=3)for(var i=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<o;s++)r.push(n.charAt(i>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<o.length;a++)r[o.charCodeAt(a)]=a}var i=o.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],37:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray,n=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],a=0;a<o;a+=2){var i=r(t[a>>>2]>>>16-a%4*8&65535);n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,n=[],a=0;a<t;a++)n[a>>>1]|=r(e.charCodeAt(a)<<16-a%2*16);return o.create(n,2*t)}}}(),e.enc.Utf16},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],38:[function(e,t,o){var n;n=function(e){var t,o,n,r,a,i,s;return n=(o=(t=e).lib).Base,r=o.WordArray,i=(a=t.algo).MD5,s=a.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=o.hasher.create(),a=r.create(),i=a.words,s=o.keySize,c=o.iterations;i.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<c;u++)l=n.finalize(l),n.reset();a.concat(l)}return a.sigBytes=4*s,a}}),t.EvpKDF=function(e,t,o){return s.create(o).compute(e,t)},e.EvpKDF},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":35,"./hmac":40,"./sha1":59}],39:[function(e,t,o){var n;n=function(e){var t,o,n;return o=(t=e).lib.CipherParams,n=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return o.create({ciphertext:t})}},e.format.Hex},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],40:[function(e,t,o){var n;n=function(e){var t,o,n;o=(t=e).lib.Base,n=t.enc.Utf8,t.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,r=4*o;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),i=this._iKey=t.clone(),s=a.words,c=i.words,l=0;l<o;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],41:[function(e,t,o){var n;n=function(e){return e},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):this.CryptoJS=n(this.CryptoJS)},{"./aes":33,"./cipher-core":34,"./core":35,"./enc-base64":36,"./enc-utf16":37,"./evpkdf":38,"./format-hex":39,"./hmac":40,"./lib-typedarrays":42,"./md5":43,"./mode-cfb":44,"./mode-ctr":46,"./mode-ctr-gladman":45,"./mode-ecb":47,"./mode-ofb":48,"./pad-ansix923":49,"./pad-iso10126":50,"./pad-iso97971":51,"./pad-nopadding":52,"./pad-zeropadding":53,"./pbkdf2":54,"./rabbit":56,"./rabbit-legacy":55,"./rc4":57,"./ripemd160":58,"./sha1":59,"./sha224":60,"./sha256":61,"./sha3":62,"./sha384":63,"./sha512":64,"./tripledes":65,"./x64-core":66}],42:[function(e,t,o){var n;n=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,o=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],43:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,a=n.Hasher,i=o.algo,s=[];(function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0})();var c=i.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,i=e[t+0],c=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],_=e[t+7],v=e[t+8],S=e[t+9],b=e[t+10],N=e[t+11],P=e[t+12],I=e[t+13],C=e[t+14],w=e[t+15],O=a[0],T=a[1],E=a[2],M=a[3];O=l(O,T,E,M,i,7,s[0]),M=l(M,O,T,E,c,12,s[1]),E=l(E,M,O,T,f,17,s[2]),T=l(T,E,M,O,h,22,s[3]),O=l(O,T,E,M,g,7,s[4]),M=l(M,O,T,E,m,12,s[5]),E=l(E,M,O,T,y,17,s[6]),T=l(T,E,M,O,_,22,s[7]),O=l(O,T,E,M,v,7,s[8]),M=l(M,O,T,E,S,12,s[9]),E=l(E,M,O,T,b,17,s[10]),T=l(T,E,M,O,N,22,s[11]),O=l(O,T,E,M,P,7,s[12]),M=l(M,O,T,E,I,12,s[13]),E=l(E,M,O,T,C,17,s[14]),O=u(O,T=l(T,E,M,O,w,22,s[15]),E,M,c,5,s[16]),M=u(M,O,T,E,y,9,s[17]),E=u(E,M,O,T,N,14,s[18]),T=u(T,E,M,O,i,20,s[19]),O=u(O,T,E,M,m,5,s[20]),M=u(M,O,T,E,b,9,s[21]),E=u(E,M,O,T,w,14,s[22]),T=u(T,E,M,O,g,20,s[23]),O=u(O,T,E,M,S,5,s[24]),M=u(M,O,T,E,C,9,s[25]),E=u(E,M,O,T,h,14,s[26]),T=u(T,E,M,O,v,20,s[27]),O=u(O,T,E,M,I,5,s[28]),M=u(M,O,T,E,f,9,s[29]),E=u(E,M,O,T,_,14,s[30]),O=p(O,T=u(T,E,M,O,P,20,s[31]),E,M,m,4,s[32]),M=p(M,O,T,E,v,11,s[33]),E=p(E,M,O,T,N,16,s[34]),T=p(T,E,M,O,C,23,s[35]),O=p(O,T,E,M,c,4,s[36]),M=p(M,O,T,E,g,11,s[37]),E=p(E,M,O,T,_,16,s[38]),T=p(T,E,M,O,b,23,s[39]),O=p(O,T,E,M,I,4,s[40]),M=p(M,O,T,E,i,11,s[41]),E=p(E,M,O,T,h,16,s[42]),T=p(T,E,M,O,y,23,s[43]),O=p(O,T,E,M,S,4,s[44]),M=p(M,O,T,E,P,11,s[45]),E=p(E,M,O,T,w,16,s[46]),O=d(O,T=p(T,E,M,O,f,23,s[47]),E,M,i,6,s[48]),M=d(M,O,T,E,_,10,s[49]),E=d(E,M,O,T,C,15,s[50]),T=d(T,E,M,O,m,21,s[51]),O=d(O,T,E,M,P,6,s[52]),M=d(M,O,T,E,h,10,s[53]),E=d(E,M,O,T,b,15,s[54]),T=d(T,E,M,O,c,21,s[55]),O=d(O,T,E,M,v,6,s[56]),M=d(M,O,T,E,w,10,s[57]),E=d(E,M,O,T,y,15,s[58]),T=d(T,E,M,O,I,21,s[59]),O=d(O,T,E,M,g,6,s[60]),M=d(M,O,T,E,N,10,s[61]),E=d(E,M,O,T,f,15,s[62]),T=d(T,E,M,O,S,21,s[63]),a[0]=a[0]+O|0,a[1]=a[1]+T|0,a[2]=a[2]+E|0,a[3]=a[3]+M|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;o[r>>>5]|=128<<24-r%32;var a=t.floor(n/4294967296),i=n;o[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o[14+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(o.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,o,n,r,a,i){var s=e+(t&o|~t&n)+r+i;return(s<<a|s>>>32-a)+t}function u(e,t,o,n,r,a,i){var s=e+(t&n|o&~n)+r+i;return(s<<a|s>>>32-a)+t}function p(e,t,o,n,r,a,i){var s=e+(t^o^n)+r+i;return(s<<a|s>>>32-a)+t}function d(e,t,o,n,r,a,i){var s=e+(o^(t|~n))+r+i;return(s<<a|s>>>32-a)+t}o.MD5=a._createHelper(c),o.HmacMD5=a._createHmacHelper(c)}(Math),e.MD5},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],44:[function(e,t,o){var n;n=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,n){var r=this._iv;if(r){var a=r.slice(0);this._iv=void 0}else a=this._prevBlock;n.encryptBlock(a,0);for(var i=0;i<o;i++)e[t+i]^=a[i]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=e.slice(t,t+r);o.call(this,e,t,r,n),this._prevBlock=a}}),t}(),e.mode.CFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],45:[function(e,t,o){var n;n=function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function o(e){if(255==(e>>24&255)){var t=e>>16&255,o=e>>8&255,n=255&e;255===t?(t=0,255===o?(o=0,255===n?n=0:++n):++o):++t,e=0,e+=t<<16,e+=o<<8,e+=n}else e+=1<<24;return e}function n(e){return 0===(e[0]=o(e[0]))&&(e[1]=o(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0),n(i);var s=i.slice(0);o.encryptBlock(s,0);for(var c=0;c<r;c++)e[t+c]^=s[c]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],46:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.CTR=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var i=a.slice(0);o.encryptBlock(i,0),a[n-1]=a[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=i[s]}}),t.Decryptor=o,t),e.mode.CTR},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],47:[function(e,t,o){var n;n=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],48:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.OFB=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),o.encryptBlock(a,0);for(var i=0;i<n;i++)e[t+i]^=a[i]}}),t.Decryptor=o,t),e.mode.OFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],49:[function(e,t,o){var n;n=function(e){return e.pad.AnsiX923={pad:function(e,t){var o=e.sigBytes,n=4*t,r=n-o%n,a=o+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],50:[function(e,t,o){var n;n=function(e){return e.pad.Iso10126={pad:function(t,o){var n=4*o,r=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],51:[function(e,t,o){var n;n=function(e){return e.pad.Iso97971={pad:function(t,o){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,o)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],52:[function(e,t,o){var n;n=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],53:[function(e,t,o){var n;n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){for(var t=e.words,o=e.sigBytes-1;!(t[o>>>2]>>>24-o%4*8&255);)o--;e.sigBytes=o+1}},e.pad.ZeroPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35}],54:[function(e,t,o){var n;n=function(e){var t,o,n,r,a,i,s,c;return n=(o=(t=e).lib).Base,r=o.WordArray,i=(a=t.algo).SHA1,s=a.HMAC,c=a.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=s.create(o.hasher,e),a=r.create(),i=r.create([1]),c=a.words,l=i.words,u=o.keySize,p=o.iterations;c.length<u;){var d=n.update(t).finalize(i);n.reset();for(var f=d.words,h=f.length,g=d,m=1;m<p;m++){g=n.finalize(g),n.reset();for(var y=g.words,_=0;_<h;_++)f[_]^=y[_]}a.concat(d),l[0]++}return a.sigBytes=4*u,a}}),t.PBKDF2=function(e,t,o){return c.create(o).compute(e,t)},e.PBKDF2},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":35,"./hmac":40,"./sha1":59}],55:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],a=[],i=[],s=n.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=o[r+4&7];if(t){var a=t.words,i=a[0],s=a[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(n[0]^=l,n[1]^=p,n[2]^=u,n[3]^=d,n[4]^=l,n[5]^=p,n[6]^=u,n[7]^=d,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var o=this._X;c.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,o=0;o<8;o++)a[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);i[o]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.RabbitLegacy=o._createHelper(s)}(),e.RabbitLegacy},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35,"./enc-base64":36,"./evpkdf":38,"./md5":43}],56:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],a=[],i=[],s=n.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var a=t.words,i=a[0],s=a[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(r[0]^=l,r[1]^=p,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=p,r[6]^=u,r[7]^=d,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var o=this._X;c.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,o=0;o<8;o++)a[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);i[o]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}t.Rabbit=o._createHelper(s)}(),e.Rabbit},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35,"./enc-base64":36,"./evpkdf":38,"./md5":43}],57:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=n.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,o=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var a=0;r<256;r++){var i=r%o,s=t[i>>>2]>>>24-i%4*8&255;a=(a+n[r]+s)%256;var c=n[r];n[r]=n[a],n[a]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,o=this._j,n=0,r=0;r<4;r++){o=(o+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[o],e[o]=a,n|=e[(e[t]+e[o])%256]<<24-8*r}return this._i=t,this._j=o,n}t.RC4=o._createHelper(r);var i=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=o._createHelper(i)}(),e.RC4},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35,"./enc-base64":36,"./evpkdf":38,"./md5":43}],58:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.Hasher,a=t.algo,i=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=n.create([0,1518500249,1859775393,2400959708,2840853838]),p=n.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a,d,v,S,b,N,P,I,C,w,O,T=this._hash.words,E=u.words,M=p.words,D=i.words,R=s.words,B=c.words,A=l.words;for(N=a=T[0],P=d=T[1],I=v=T[2],C=S=T[3],w=b=T[4],o=0;o<80;o+=1)O=a+e[t+D[o]]|0,O+=o<16?f(d,v,S)+E[0]:o<32?h(d,v,S)+E[1]:o<48?g(d,v,S)+E[2]:o<64?m(d,v,S)+E[3]:y(d,v,S)+E[4],O=(O=_(O|=0,B[o]))+b|0,a=b,b=S,S=_(v,10),v=d,d=O,O=N+e[t+R[o]]|0,O+=o<16?y(P,I,C)+M[0]:o<32?m(P,I,C)+M[1]:o<48?g(P,I,C)+M[2]:o<64?h(P,I,C)+M[3]:f(P,I,C)+M[4],O=(O=_(O|=0,A[o]))+w|0,N=w,w=C,C=_(I,10),I=P,P=O;O=T[1]+v+C|0,T[1]=T[2]+S+w|0,T[2]=T[3]+b+N|0,T[3]=T[4]+a+P|0,T[4]=T[0]+d+I|0,T[0]=O},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,i=0;i<5;i++){var s=a[i];a[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,o){return e^t^o}function h(e,t,o){return e&t|~e&o}function g(e,t,o){return(e|~t)^o}function m(e,t,o){return e&o|t&~o}function y(e,t,o){return e^(t|~o)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(d),t.HmacRIPEMD160=r._createHmacHelper(d)}(Math),e.RIPEMD160},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],59:[function(e,t,o){var n;n=function(e){var t,o,n,r,a,i,s;return o=(t=e).lib,n=o.WordArray,r=o.Hasher,a=t.algo,i=[],s=a.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],a=o[2],s=o[3],c=o[4],l=0;l<80;l++){if(l<16)i[l]=0|e[t+l];else{var u=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=u<<1|u>>>31}var p=(n<<5|n>>>27)+c+i[l];p+=l<20?1518500249+(r&a|~r&s):l<40?1859775393+(r^a^s):l<60?(r&a|r&s|a&s)-1894007588:(r^a^s)-899497514,c=s,s=a,a=r<<30|r>>>2,r=n,n=p}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+a|0,o[3]=o[3]+s|0,o[4]=o[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(n+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(s),t.HmacSHA1=r._createHmacHelper(s),e.SHA1},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],60:[function(e,t,o){var n;n=function(e){var t,o,n,r,a;return o=(t=e).lib.WordArray,n=t.algo,r=n.SHA256,a=n.SHA224=r.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(a),t.HmacSHA224=r._createHmacHelper(a),e.SHA224},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],n):n(this.CryptoJS)},{"./core":35,"./sha256":61}],61:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,a=n.Hasher,i=o.algo,s=[],c=[];(function(){function e(e){for(var o=t.sqrt(e),n=2;n<=o;n++)if(!(e%n))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)e(n)&&(r<8&&(s[r]=o(t.pow(n,.5))),c[r]=o(t.pow(n,1/3)),r++),n++})();var l=[],u=i.SHA256=a.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],a=o[2],i=o[3],s=o[4],u=o[5],p=o[6],d=o[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var h=l[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=l[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[f]=g+l[f-7]+y+l[f-16]}var _=n&r^n&a^r&a,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&p)+c[f]+l[f];d=p,p=u,u=s,s=i+S|0,i=a,a=r,r=n,n=S+(v+_)|0}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+a|0,o[3]=o[3]+i|0,o[4]=o[4]+s|0,o[5]=o[5]+u|0,o[6]=o[6]+p|0,o[7]=o[7]+d|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return o[r>>>5]|=128<<24-r%32,o[14+(r+64>>>9<<4)]=t.floor(n/4294967296),o[15+(r+64>>>9<<4)]=n,e.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});o.SHA256=a._createHelper(u),o.HmacSHA256=a._createHmacHelper(u)}(Math),e.SHA256},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],62:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,a=n.Hasher,i=o.x64.Word,s=o.algo,c=[],l=[],u=[];(function(){for(var e=1,t=0,o=0;o<24;o++){c[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var s=0,p=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?p^=1<<f:s^=1<<f-32}128&r?r=r<<1^113:r<<=1}u[a]=i.create(s,p)}})();var p=[];(function(){for(var e=0;e<25;e++)p[e]=i.create()})();var d=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,r=0;r<n;r++){var a=e[t+2*r],i=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(T=o[r]).high^=i,T.low^=a}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,h=0,g=0;g<5;g++)f^=(T=o[d+5*g]).high,h^=T.low;var m=p[d];m.high=f,m.low=h}for(d=0;d<5;d++){var y=p[(d+4)%5],_=p[(d+1)%5],v=_.high,S=_.low;for(f=y.high^(v<<1|S>>>31),h=y.low^(S<<1|v>>>31),g=0;g<5;g++)(T=o[d+5*g]).high^=f,T.low^=h}for(var b=1;b<25;b++){var N=(T=o[b]).high,P=T.low,I=c[b];I<32?(f=N<<I|P>>>32-I,h=P<<I|N>>>32-I):(f=P<<I-32|N>>>64-I,h=N<<I-32|P>>>64-I);var C=p[l[b]];C.high=f,C.low=h}var w=p[0],O=o[0];for(w.high=O.high,w.low=O.low,d=0;d<5;d++)for(g=0;g<5;g++){var T=o[b=d+5*g],E=p[b],M=p[(d+1)%5+5*g],D=p[(d+2)%5+5*g];T.high=E.high^~M.high&D.high,T.low=E.low^~M.low&D.low}T=o[0];var R=u[s];T.high^=R.high,T.low^=R.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var i=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var p=i[u],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=a._createHelper(d),o.HmacSHA3=a._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":35,"./x64-core":66}],63:[function(e,t,o){var n;n=function(e){var t,o,n,r,a,i,s;return o=(t=e).x64,n=o.Word,r=o.WordArray,a=t.algo,i=a.SHA512,s=a.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=i._createHelper(s),t.HmacSHA384=i._createHmacHelper(s),e.SHA384},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],n):n(this.CryptoJS)},{"./core":35,"./sha512":64,"./x64-core":66}],64:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.Hasher,n=t.x64,r=n.Word,a=n.WordArray,i=t.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=s()})();var u=i.SHA512=o.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],a=o[2],i=o[3],s=o[4],u=o[5],p=o[6],d=o[7],f=n.high,h=n.low,g=r.high,m=r.low,y=a.high,_=a.low,v=i.high,S=i.low,b=s.high,N=s.low,P=u.high,I=u.low,C=p.high,w=p.low,O=d.high,T=d.low,E=f,M=h,D=g,R=m,B=y,A=_,k=v,L=S,G=b,F=N,j=P,U=I,x=C,H=w,V=O,z=T,W=0;W<80;W++){var K=l[W];if(W<16)var Y=K.high=0|e[t+2*W],q=K.low=0|e[t+2*W+1];else{var J=l[W-15],X=J.high,Q=J.low,Z=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,$=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),ee=l[W-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,re=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ae=l[W-7],ie=ae.high,se=ae.low,ce=l[W-16],le=ce.high,ue=ce.low;Y=(Y=(Y=Z+ie+((q=$+se)>>>0<$>>>0?1:0))+ne+((q+=re)>>>0<re>>>0?1:0))+le+((q+=ue)>>>0<ue>>>0?1:0),K.high=Y,K.low=q}var pe,de=G&j^~G&x,fe=F&U^~F&H,he=E&D^E&B^D&B,ge=M&R^M&A^R&A,me=(E>>>28|M<<4)^(E<<30|M>>>2)^(E<<25|M>>>7),ye=(M>>>28|E<<4)^(M<<30|E>>>2)^(M<<25|E>>>7),_e=(G>>>14|F<<18)^(G>>>18|F<<14)^(G<<23|F>>>9),ve=(F>>>14|G<<18)^(F>>>18|G<<14)^(F<<23|G>>>9),Se=c[W],be=Se.high,Ne=Se.low,Pe=V+_e+((pe=z+ve)>>>0<z>>>0?1:0),Ie=ye+ge;V=x,z=H,x=j,H=U,j=G,U=F,G=k+(Pe=(Pe=(Pe=Pe+de+((pe+=fe)>>>0<fe>>>0?1:0))+be+((pe+=Ne)>>>0<Ne>>>0?1:0))+Y+((pe+=q)>>>0<q>>>0?1:0))+((F=L+pe|0)>>>0<L>>>0?1:0)|0,k=B,L=A,B=D,A=R,D=E,R=M,E=Pe+(me+he+(Ie>>>0<ye>>>0?1:0))+((M=pe+Ie|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+M,n.high=f+E+(h>>>0<M>>>0?1:0),m=r.low=m+R,r.high=g+D+(m>>>0<R>>>0?1:0),_=a.low=_+A,a.high=y+B+(_>>>0<A>>>0?1:0),S=i.low=S+L,i.high=v+k+(S>>>0<L>>>0?1:0),N=s.low=N+F,s.high=b+G+(N>>>0<F>>>0?1:0),I=u.low=I+U,u.high=P+j+(I>>>0<U>>>0?1:0),w=p.low=w+H,p.high=C+x+(w>>>0<H>>>0?1:0),T=d.low=T+z,d.high=O+V+(T>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":35,"./x64-core":66}],65:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.BlockCipher,a=t.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=i[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){var l=r[a]=[],u=c[a];for(o=0;o<24;o++)l[o/6|0]|=t[(s[o]-1+u)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(s[o+24]-1+u)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(o=0;o<16;o++)p[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=o[n],a=this._lBlock,i=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((i^r[c])&u[c])>>>0];this._lBlock=i,this._rBlock=a^s}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function f(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=r._createHelper(p);var h=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(n.create(e.slice(0,2))),this._des2=p.createEncryptor(n.create(e.slice(2,4))),this._des3=p.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(h)}(),e.TripleDES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":34,"./core":35,"./enc-base64":36,"./evpkdf":38,"./md5":43}],66:[function(e,t,o){var n;n=function(e){var t,o,n,r,a;return o=(t=e).lib,n=o.Base,r=o.WordArray,(a=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,o=[],n=0;n<t;n++){var a=e[n];o.push(a.high),o.push(a.low)}return r.create(o,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),o=t.length,r=0;r<o;r++)t[r]=t[r].clone();return e}}),e},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":35}],67:[function(e,t){"use strict";var o={single_source_shortest_paths:function(e,t,n){var r={},a={};a[t]=0;var i,s,c,l,u,p,d,f=o.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(c in s=(i=f.pop()).value,l=i.cost,u=e[s]||{})u.hasOwnProperty(c)&&(p=l+u[c],d=a[c],(void 0===a[c]||d>p)&&(a[c]=p,f.push(c,p),r[c]=s));if(void 0!==n&&void 0===a[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var o=[],n=t;n;)o.push(n),e[n],n=e[n];return o.reverse(),o},find_path:function(e,t,n){var r=o.single_source_shortest_paths(e,t,n);return o.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t,n=o.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var o={value:e,cost:t};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};void 0!==t&&(t.exports=o)},{}],68:[function(e,t){"use strict";t.exports=function(e){for(var t=[],o=e.length,n=0;n<o;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&o>n+1){var a=e.charCodeAt(n+1);a>=56320&&a<=57343&&(r=1024*(r-55296)+a-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},{}],69:[function(e,t){"use strict";var o=e("./lib/js-yaml.js");t.exports=o},{"./lib/js-yaml.js":70}],70:[function(e,t){"use strict";var o=e("./js-yaml/loader"),n=e("./js-yaml/dumper");function r(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=o.load,t.exports.loadAll=o.loadAll,t.exports.safeLoad=o.safeLoad,t.exports.safeLoadAll=o.safeLoadAll,t.exports.dump=n.dump,t.exports.safeDump=n.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=r("scan"),t.exports.parse=r("parse"),t.exports.compose=r("compose"),t.exports.addConstructor=r("addConstructor")},{"./js-yaml/dumper":72,"./js-yaml/exception":73,"./js-yaml/loader":74,"./js-yaml/schema":76,"./js-yaml/schema/core":77,"./js-yaml/schema/default_full":78,"./js-yaml/schema/default_safe":79,"./js-yaml/schema/failsafe":80,"./js-yaml/schema/json":81,"./js-yaml/type":82}],71:[function(e,t){"use strict";function o(e){return null==e}t.exports.isNothing=o,t.exports.isObject=function(e){return"object"==typeof e&&null!==e},t.exports.toArray=function(e){return Array.isArray(e)?e:o(e)?[]:[e]},t.exports.repeat=function(e,t){var o,n="";for(o=0;o<t;o+=1)n+=e;return n},t.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},t.exports.extend=function(e,t){var o,n,r,a;if(t)for(o=0,n=(a=Object.keys(t)).length;o<n;o+=1)e[r=a[o]]=t[r];return e}},{}],72:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./schema/default_full"),a=e("./schema/default_safe"),i=Object.prototype.toString,s=Object.prototype.hasOwnProperty,c=9,l=10,u=13,p=32,d=33,f=34,h=35,g=37,m=38,y=39,_=42,v=44,S=45,b=58,N=61,P=62,I=63,C=64,w=91,O=93,T=96,E=123,M=124,D=125,R={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},B=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function A(e,t){var o,n,r,a,i,c,l;if(null===t)return{};for(o={},r=0,a=(n=Object.keys(t)).length;r<a;r+=1)i=n[r],c=String(t[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(l=e.compiledTypeMap.fallback[i])&&s.call(l.styleAliases,c)&&(c=l.styleAliases[c]),o[i]=c;return o}function k(e){var t,r,a;if(t=e.toString(16).toUpperCase(),e<=255)r="x",a=2;else if(e<=65535)r="u",a=4;else{if(!(e<=4294967295))throw new n("code point within a string may not be greater than 0xFFFFFFFF");r="U",a=8}return"\\"+r+o.repeat("0",a-t.length)+t}function L(e){this.schema=e.schema||r,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=o.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=A(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function G(e,t){for(var n,r=o.repeat(" ",t),a=0,i=-1,s="",c=e.length;a<c;)-1===(i=e.indexOf("\n",a))?(n=e.slice(a),a=c):(n=e.slice(a,i+1),a=i+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function F(e,t){return"\n"+o.repeat(" ",e.indent*t)}function j(e,t){var o,n;for(o=0,n=e.implicitTypes.length;o<n;o+=1)if(e.implicitTypes[o].resolve(t))return!0;return!1}function U(e){return e===p||e===c}function x(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function H(e){return x(e)&&!U(e)&&65279!==e&&e!==u&&e!==l}function V(e,t){return x(e)&&65279!==e&&e!==v&&e!==w&&e!==O&&e!==E&&e!==D&&e!==b&&(e!==h||t&&H(t))}function z(e){return/^\n* /.test(e)}var W=1,K=2,Y=3,q=4,J=5;function X(e,t,o,n,r){var a,i,s,c,u=!1,p=!1,R=-1!==n,B=-1,A=x(c=e.charCodeAt(0))&&65279!==c&&!U(c)&&c!==S&&c!==I&&c!==b&&c!==v&&c!==w&&c!==O&&c!==E&&c!==D&&c!==h&&c!==m&&c!==_&&c!==d&&c!==M&&c!==N&&c!==P&&c!==y&&c!==f&&c!==g&&c!==C&&c!==T&&!U(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(!x(i=e.charCodeAt(a)))return J;s=a>0?e.charCodeAt(a-1):null,A=A&&V(i,s)}else{for(a=0;a<e.length;a++){if((i=e.charCodeAt(a))===l)u=!0,R&&(p=p||a-B-1>n&&" "!==e[B+1],B=a);else if(!x(i))return J;s=a>0?e.charCodeAt(a-1):null,A=A&&V(i,s)}p=p||R&&a-B-1>n&&" "!==e[B+1]}return u||p?o>9&&z(e)?J:p?q:Y:A&&!r(e)?W:K}function Q(e,t,o,r){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==B.indexOf(t))return"'"+t+"'";var a=e.indent*Math.max(1,o),i=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),s=r||e.flowLevel>-1&&o>=e.flowLevel;switch(X(t,s,e.indent,i,function(t){return j(e,t)})){case W:return t;case K:return"'"+t.replace(/'/g,"''")+"'";case Y:return"|"+Z(t,e.indent)+$(G(t,a));case q:return">"+Z(t,e.indent)+$(G(ee(t,i),a));case J:return'"'+oe(t)+'"';default:throw new n("impossible error: invalid scalar style")}}()}function Z(e,t){var o=z(e)?String(t):"",n="\n"===e[e.length-1];return o+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function $(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function ee(e,t){for(var o,n,r,a=/(\n+)([^\n]*)/g,i=(o=-1!==(o=e.indexOf("\n"))?o:e.length,a.lastIndex=o,te(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];r=a.exec(e);){var c=r[1],l=r[2];n=" "===l[0],i+=c+(s||n||""===l?"":"\n")+te(l,t),s=n}return i}function te(e,t){if(""===e||" "===e[0])return e;for(var o,n,r=/ [^ ]/g,a=0,i=0,s=0,c="";o=r.exec(e);)(s=o.index)-a>t&&(n=i>a?i:s,c+="\n"+e.slice(a,n),a=n+1),i=s;return c+="\n",e.length-a>t&&i>a?c+=e.slice(a,i)+"\n"+e.slice(i+1):c+=e.slice(a),c.slice(1)}function oe(e){for(var t,o,n,r="",a=0;a<e.length;a++)(t=e.charCodeAt(a))>=55296&&t<=56319&&(o=e.charCodeAt(a+1))>=56320&&o<=57343?(r+=k(1024*(t-55296)+o-56320+65536),a++):r+=!(n=R[t])&&x(t)?e[a]:n||k(t);return r}function ne(e,t,o){var n,r,a="",i=e.tag;for(n=0,r=o.length;n<r;n+=1)ce(e,t,o[n],!1,!1)&&(0!==n&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=i,e.dump="["+a+"]"}function re(e,t,o,n){var r,a,i="",s=e.tag;for(r=0,a=o.length;r<a;r+=1)ce(e,t+1,o[r],!0,!0)&&(n&&0===r||(i+=F(e,t)),e.dump&&l===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function ae(e,t,o){var n,r,a,i,s,c="",l=e.tag,u=Object.keys(o);for(n=0,r=u.length;n<r;n+=1)s="",0!==n&&(s+=", "),e.condenseFlow&&(s+='"'),i=o[a=u[n]],ce(e,t,a,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ce(e,t,i,!1,!1)&&(c+=s+=e.dump));e.tag=l,e.dump="{"+c+"}"}function ie(e,t,o,r){var a,i,s,c,u,p,d="",f=e.tag,h=Object.keys(o);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new n("sortKeys must be a boolean or a function");for(a=0,i=h.length;a<i;a+=1)p="",r&&0===a||(p+=F(e,t)),c=o[s=h[a]],ce(e,t+1,s,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&l===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=F(e,t)),ce(e,t+1,c,!0,u)&&(e.dump&&l===e.dump.charCodeAt(0)?p+=":":p+=": ",d+=p+=e.dump));e.tag=f,e.dump=d||"{}"}function se(e,t,o){var r,a,c,l,u,p;for(c=0,l=(a=o?e.explicitTypes:e.implicitTypes).length;c<l;c+=1)if(((u=a[c]).instanceOf||u.predicate)&&(!u.instanceOf||"object"==typeof t&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(e.tag=o?u.tag:"?",u.represent){if(p=e.styleMap[u.tag]||u.defaultStyle,"[object Function]"===i.call(u.represent))r=u.represent(t,p);else{if(!s.call(u.represent,p))throw new n("!<"+u.tag+'> tag resolver accepts not "'+p+'" style');r=u.represent[p](t,p)}e.dump=r}return!0}return!1}function ce(e,t,o,r,a,s){e.tag=null,e.dump=o,se(e,o,!1)||se(e,o,!0);var c=i.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var l,u,p="[object Object]"===c||"[object Array]"===c;if(p&&(u=-1!==(l=e.duplicates.indexOf(o))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(a=!1),u&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(p&&u&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),"[object Object]"===c)r&&0!==Object.keys(e.dump).length?(ie(e,t,e.dump,a),u&&(e.dump="&ref_"+l+e.dump)):(ae(e,t,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump));else if("[object Array]"===c){var d=e.noArrayIndent&&t>0?t-1:t;r&&0!==e.dump.length?(re(e,d,e.dump,a),u&&(e.dump="&ref_"+l+e.dump)):(ne(e,d,e.dump),u&&(e.dump="&ref_"+l+" "+e.dump))}else{if("[object String]"!==c){if(e.skipInvalid)return!1;throw new n("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&Q(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function le(e,t){var o,n,r=[],a=[];for(ue(e,r,a),o=0,n=a.length;o<n;o+=1)t.duplicates.push(r[a[o]]);t.usedDuplicates=new Array(n)}function ue(e,t,o){var n,r,a;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===o.indexOf(r)&&o.push(r);else if(t.push(e),Array.isArray(e))for(r=0,a=e.length;r<a;r+=1)ue(e[r],t,o);else for(r=0,a=(n=Object.keys(e)).length;r<a;r+=1)ue(e[n[r]],t,o)}function pe(e,t){var o=new L(t=t||{});return o.noRefs||le(e,o),ce(o,0,e,!0,!0)?o.dump+"\n":""}t.exports.dump=pe,t.exports.safeDump=function(e,t){return pe(e,o.extend({schema:a},t))}},{"./common":71,"./exception":73,"./schema/default_full":78,"./schema/default_safe":79}],73:[function(e,t){"use strict";function o(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=o},{}],74:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./mark"),a=e("./schema/default_safe"),i=e("./schema/default_full"),s=Object.prototype.hasOwnProperty,c=1,l=2,u=3,p=4,d=1,f=2,h=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[\x85\u2028\u2029]/,y=/[,\[\]\{\}]/,_=/^(?:!|!!|![a-z\-]+!)$/i,v=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function S(e){return Object.prototype.toString.call(e)}function b(e){return 10===e||13===e}function N(e){return 9===e||32===e}function P(e){return 9===e||32===e||10===e||13===e}function I(e){return 44===e||91===e||93===e||123===e||125===e}function C(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function w(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function O(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var T=new Array(256),E=new Array(256),M=0;M<256;M++)T[M]=w(M)?1:0,E[M]=w(M);function D(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||i,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function R(e,t){return new n(t,new r(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function B(e,t){throw R(e,t)}function A(e,t){e.onWarning&&e.onWarning.call(null,R(e,t))}var k={YAML:function(e,t,o){var n,r,a;null!==e.version&&B(e,"duplication of %YAML directive"),1!==o.length&&B(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(o[0]))&&B(e,"ill-formed argument of the YAML directive"),r=parseInt(n[1],10),a=parseInt(n[2],10),1!==r&&B(e,"unacceptable YAML version of the document"),e.version=o[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&A(e,"unsupported YAML version of the document")},TAG:function(e,t,o){var n,r;2!==o.length&&B(e,"TAG directive accepts exactly two arguments"),n=o[0],r=o[1],_.test(n)||B(e,"ill-formed tag handle (first argument) of the TAG directive"),s.call(e.tagMap,n)&&B(e,'there is a previously declared suffix for "'+n+'" tag handle'),v.test(r)||B(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=r}};function L(e,t,o,n){var r,a,i,s;if(t<o){if(s=e.input.slice(t,o),n)for(r=0,a=s.length;r<a;r+=1)9===(i=s.charCodeAt(r))||32<=i&&i<=1114111||B(e,"expected valid JSON character");else g.test(s)&&B(e,"the stream contains non-printable characters");e.result+=s}}function G(e,t,n,r){var a,i,c,l;for(o.isObject(n)||B(e,"cannot merge mappings; the provided source object is unacceptable"),c=0,l=(a=Object.keys(n)).length;c<l;c+=1)i=a[c],s.call(t,i)||(t[i]=n[i],r[i]=!0)}function F(e,t,o,n,r,a,i,c){var l,u;if(Array.isArray(r))for(l=0,u=(r=Array.prototype.slice.call(r)).length;l<u;l+=1)Array.isArray(r[l])&&B(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===S(r[l])&&(r[l]="[object Object]");if("object"==typeof r&&"[object Object]"===S(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(a))for(l=0,u=a.length;l<u;l+=1)G(e,t,a[l],o);else G(e,t,a,o);else e.json||s.call(o,r)||!s.call(t,r)||(e.line=i||e.line,e.position=c||e.position,B(e,"duplicated mapping key")),t[r]=a,delete o[r];return t}function j(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):B(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function U(e,t,o){for(var n=0,r=e.input.charCodeAt(e.position);0!==r;){for(;N(r);)r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!b(r))break;for(j(e),r=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==o&&0!==n&&e.lineIndent<o&&A(e,"deficient indentation"),n}function x(e){var t,o=e.position;return!(45!==(t=e.input.charCodeAt(o))&&46!==t||t!==e.input.charCodeAt(o+1)||t!==e.input.charCodeAt(o+2)||(o+=3,0!==(t=e.input.charCodeAt(o))&&!P(t)))}function H(e,t){1===t?e.result+=" ":t>1&&(e.result+=o.repeat("\n",t-1))}function V(e,t,o){var n,r,a,i,s,c,l,u,p=e.kind,d=e.result;if(P(u=e.input.charCodeAt(e.position))||I(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(P(n=e.input.charCodeAt(e.position+1))||o&&I(n)))return!1;for(e.kind="scalar",e.result="",r=a=e.position,i=!1;0!==u;){if(58===u){if(P(n=e.input.charCodeAt(e.position+1))||o&&I(n))break}else if(35===u){if(P(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&x(e)||o&&I(u))break;if(b(u)){if(s=e.line,c=e.lineStart,l=e.lineIndent,U(e,!1,-1),e.lineIndent>=t){i=!0,u=e.input.charCodeAt(e.position);continue}e.position=a,e.line=s,e.lineStart=c,e.lineIndent=l;break}}i&&(L(e,r,a,!1),H(e,e.line-s),r=a=e.position,i=!1),N(u)||(a=e.position+1),u=e.input.charCodeAt(++e.position)}return L(e,r,a,!1),!!e.result||(e.kind=p,e.result=d,!1)}function z(e,t){var o,n,r;if(39!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(o=e.input.charCodeAt(e.position));)if(39===o){if(L(e,n,e.position,!0),39!==(o=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,r=e.position}else b(o)?(L(e,n,r,!0),H(e,U(e,!1,t)),n=r=e.position):e.position===e.lineStart&&x(e)?B(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);B(e,"unexpected end of the stream within a single quoted scalar")}function W(e,t){var o,n,r,a,i,s,c;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,o=n=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return L(e,o,e.position,!0),e.position++,!0;if(92===s){if(L(e,o,e.position,!0),b(s=e.input.charCodeAt(++e.position)))U(e,!1,t);else if(s<256&&T[s])e.result+=E[s],e.position++;else if((i=120===(c=s)?2:117===c?4:85===c?8:0)>0){for(r=i,a=0;r>0;r--)(i=C(s=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+i:B(e,"expected hexadecimal character");e.result+=O(a),e.position++}else B(e,"unknown escape sequence");o=n=e.position}else b(s)?(L(e,o,n,!0),H(e,U(e,!1,t)),o=n=e.position):e.position===e.lineStart&&x(e)?B(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}B(e,"unexpected end of the stream within a double quoted scalar")}function K(e,t){var o,n,r,a,i,s,l,u,p,d,f=!0,h=e.tag,g=e.anchor,m={};if(91===(d=e.input.charCodeAt(e.position)))r=93,s=!1,n=[];else{if(123!==d)return!1;r=125,s=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),d=e.input.charCodeAt(++e.position);0!==d;){if(U(e,!0,t),(d=e.input.charCodeAt(e.position))===r)return e.position++,e.tag=h,e.anchor=g,e.kind=s?"mapping":"sequence",e.result=n,!0;f||B(e,"missed comma between flow collection entries"),p=null,a=i=!1,63===d&&P(e.input.charCodeAt(e.position+1))&&(a=i=!0,e.position++,U(e,!0,t)),o=e.line,$(e,t,c,!1,!0),u=e.tag,l=e.result,U(e,!0,t),d=e.input.charCodeAt(e.position),!i&&e.line!==o||58!==d||(a=!0,d=e.input.charCodeAt(++e.position),U(e,!0,t),$(e,t,c,!1,!0),p=e.result),s?F(e,n,m,u,l,p):a?n.push(F(e,null,m,u,l,p)):n.push(l),U(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(f=!0,d=e.input.charCodeAt(++e.position)):f=!1}B(e,"unexpected end of the stream within a flow collection")}function Y(e,t){var n,r,a,i,s,c=d,l=!1,u=!1,p=t,g=0,m=!1;if(124===(i=e.input.charCodeAt(e.position)))r=!1;else{if(62!==i)return!1;r=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)d===c?c=43===i?h:f:B(e,"repeat of a chomping mode identifier");else{if(!((a=48<=(s=i)&&s<=57?s-48:-1)>=0))break;0===a?B(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?B(e,"repeat of an indentation width identifier"):(p=t+a-1,u=!0)}if(N(i)){do{i=e.input.charCodeAt(++e.position)}while(N(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!b(i)&&0!==i)}for(;0!==i;){for(j(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!u||e.lineIndent<p)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!u&&e.lineIndent>p&&(p=e.lineIndent),b(i))g++;else{if(e.lineIndent<p){c===h?e.result+=o.repeat("\n",l?1+g:g):c===d&&l&&(e.result+="\n");break}for(r?N(i)?(m=!0,e.result+=o.repeat("\n",l?1+g:g)):m?(m=!1,e.result+=o.repeat("\n",g+1)):0===g?l&&(e.result+=" "):e.result+=o.repeat("\n",g):e.result+=o.repeat("\n",l?1+g:g),l=!0,u=!0,g=0,n=e.position;!b(i)&&0!==i;)i=e.input.charCodeAt(++e.position);L(e,n,e.position,!1)}}return!0}function q(e,t){var o,n,r=e.tag,a=e.anchor,i=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),n=e.input.charCodeAt(e.position);0!==n&&45===n&&P(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,U(e,!0,-1)&&e.lineIndent<=t)i.push(null),n=e.input.charCodeAt(e.position);else if(o=e.line,$(e,t,u,!1,!0),i.push(e.result),U(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&0!==n)B(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=r,e.anchor=a,e.kind="sequence",e.result=i,!0)}function J(e,t,o){var n,r,a,i,s,c=e.tag,u=e.anchor,d={},f={},h=null,g=null,m=null,y=!1,_=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),s=e.input.charCodeAt(e.position);0!==s;){if(n=e.input.charCodeAt(e.position+1),a=e.line,i=e.position,63!==s&&58!==s||!P(n)){if(!$(e,o,l,!1,!0))break;if(e.line===a){for(s=e.input.charCodeAt(e.position);N(s);)s=e.input.charCodeAt(++e.position);if(58===s)P(s=e.input.charCodeAt(++e.position))||B(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(F(e,d,f,h,g,null),h=g=m=null),_=!0,y=!1,r=!1,h=e.tag,g=e.result;else{if(!_)return e.tag=c,e.anchor=u,!0;B(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_)return e.tag=c,e.anchor=u,!0;B(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(y&&(F(e,d,f,h,g,null),h=g=m=null),_=!0,y=!0,r=!0):y?(y=!1,r=!0):B(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=n;if((e.line===a||e.lineIndent>t)&&($(e,t,p,!0,r)&&(y?g=e.result:m=e.result),y||(F(e,d,f,h,g,m,a,i),h=g=m=null),U(e,!0,-1),s=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==s)B(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&F(e,d,f,h,g,null),_&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=d),_}function X(e){var t,o,n,r,a=!1,i=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&B(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(a=!0,r=e.input.charCodeAt(++e.position)):33===r?(i=!0,o="!!",r=e.input.charCodeAt(++e.position)):o="!",t=e.position,a){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(n=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):B(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!P(r);)33===r&&(i?B(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),_.test(o)||B(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),y.test(n)&&B(e,"tag suffix cannot contain flow indicator characters")}return n&&!v.test(n)&&B(e,"tag name cannot contain such characters: "+n),a?e.tag=n:s.call(e.tagMap,o)?e.tag=e.tagMap[o]+n:"!"===o?e.tag="!"+n:"!!"===o?e.tag="tag:yaml.org,2002:"+n:B(e,'undeclared tag handle "'+o+'"'),!0}function Q(e){var t,o;if(38!==(o=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&B(e,"duplication of an anchor property"),o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!P(o)&&!I(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&B(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Z(e){var t,o,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!P(n)&&!I(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&B(e,"name of an alias node must contain at least one character"),o=e.input.slice(t,e.position),s.call(e.anchorMap,o)||B(e,'unidentified alias "'+o+'"'),e.result=e.anchorMap[o],U(e,!0,-1),!0}function $(e,t,o,n,r){var a,i,d,f,h,g,m,y,_=1,v=!1,S=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=i=d=p===o||u===o,n&&U(e,!0,-1)&&(v=!0,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)),1===_)for(;X(e)||Q(e);)U(e,!0,-1)?(v=!0,d=a,e.lineIndent>t?_=1:e.lineIndent===t?_=0:e.lineIndent<t&&(_=-1)):d=!1;if(d&&(d=v||r),1!==_&&p!==o||(m=c===o||l===o?t:t+1,y=e.position-e.lineStart,1===_?d&&(q(e,y)||J(e,y,m))||K(e,m)?S=!0:(i&&Y(e,m)||z(e,m)||W(e,m)?S=!0:Z(e)?(S=!0,null===e.tag&&null===e.anchor||B(e,"alias node should not have any properties")):V(e,m,c===o)&&(S=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===_&&(S=d&&q(e,y))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&B(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if((g=e.implicitTypes[f]).resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else s.call(e.typeMap[e.kind||"fallback"],e.tag)?(g=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&g.kind!==e.kind&&B(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result)?(e.result=g.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):B(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):B(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||S}function ee(e){var t,o,n,r,a=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(r=e.input.charCodeAt(e.position))&&(U(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(i=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!P(r);)r=e.input.charCodeAt(++e.position);for(n=[],(o=e.input.slice(t,e.position)).length<1&&B(e,"directive name must not be less than one character in length");0!==r;){for(;N(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!b(r));break}if(b(r))break;for(t=e.position;0!==r&&!P(r);)r=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==r&&j(e),s.call(k,o)?k[o](e,o,n):A(e,'unknown document directive "'+o+'"')}U(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,U(e,!0,-1)):i&&B(e,"directives end mark is expected"),$(e,e.lineIndent-1,p,!1,!0),U(e,!0,-1),e.checkLineBreaks&&m.test(e.input.slice(a,e.position))&&A(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&x(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,U(e,!0,-1)):e.position<e.length-1&&B(e,"end of the stream or a document separator is expected")}function te(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var o=new D(e,t),n=e.indexOf("\0");for(-1!==n&&(o.position=n,B(o,"null byte is not allowed in input")),o.input+="\0";32===o.input.charCodeAt(o.position);)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)ee(o);return o.documents}function oe(e,t,o){null!==t&&"object"==typeof t&&void 0===o&&(o=t,t=null);var n=te(e,o);if("function"!=typeof t)return n;for(var r=0,a=n.length;r<a;r+=1)t(n[r])}function ne(e,t){var o=te(e,t);if(0!==o.length){if(1===o.length)return o[0];throw new n("expected a single document in the stream, but found more")}}t.exports.loadAll=oe,t.exports.load=ne,t.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),oe(e,t,o.extend({schema:a},n))},t.exports.safeLoad=function(e,t){return ne(e,o.extend({schema:a},t))}},{"./common":71,"./exception":73,"./mark":75,"./schema/default_full":78,"./schema/default_safe":79}],75:[function(e,t){"use strict";var o=e("./common");function n(e,t,o,n,r){this.name=e,this.buffer=t,this.position=o,this.line=n,this.column=r}n.prototype.getSnippet=function(e,t){var n,r,a,i,s;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(a="",i=this.position;i<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(i));)if((i+=1)-this.position>t/2-1){a=" ... ",i-=5;break}return s=this.buffer.slice(r,i),o.repeat(" ",e)+n+s+a+"\n"+o.repeat(" ",e+this.position-r+n.length)+"^"},n.prototype.toString=function(e){var t,o="";return this.name&&(o+='in "'+this.name+'" '),o+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(o+=":\n"+t),o},t.exports=n},{"./common":71}],76:[function(e,t){"use strict";var o=e("./common"),n=e("./exception"),r=e("./type");function a(e,t,o){var n=[];return e.include.forEach(function(e){o=a(e,t,o)}),e[t].forEach(function(e){o.forEach(function(t,o){t.tag===e.tag&&t.kind===e.kind&&n.push(o)}),o.push(e)}),o.filter(function(e,t){return-1===n.indexOf(t)})}function i(){var e,t,o={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){o[e.kind][e.tag]=o.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return o}function s(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new n("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=a(this,"implicit",[]),this.compiledExplicit=a(this,"explicit",[]),this.compiledTypeMap=i(this.compiledImplicit,this.compiledExplicit)}s.DEFAULT=null,s.create=function(){var e,t;switch(arguments.length){case 1:e=s.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new n("Wrong number of arguments for Schema.create function")}if(e=o.toArray(e),t=o.toArray(t),!e.every(function(e){return e instanceof s}))throw new n("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof r}))throw new n("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new s({include:e,explicit:t})},t.exports=s},{"./common":71,"./exception":73,"./type":82}],77:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./json")]})},{"../schema":76,"./json":81}],78:[function(e,t){"use strict";var o=e("../schema");t.exports=o.DEFAULT=new o({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":76,"../type/js/function":87,"../type/js/regexp":88,"../type/js/undefined":89,"./default_safe":79}],79:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":76,"../type/binary":83,"../type/merge":91,"../type/omap":93,"../type/pairs":94,"../type/set":96,"../type/timestamp":98,"./core":77}],80:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":76,"../type/map":90,"../type/seq":95,"../type/str":97}],81:[function(e,t){"use strict";var o=e("../schema");t.exports=new o({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":76,"../type/bool":84,"../type/float":85,"../type/int":86,"../type/null":92,"./failsafe":80}],82:[function(e,t){"use strict";var o=e("./exception"),n=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],r=["scalar","sequence","mapping"];t.exports=function(e,t){var a,i;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===n.indexOf(t))throw new o('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(a=t.styleAliases||null,i={},null!==a&&Object.keys(a).forEach(function(e){a[e].forEach(function(t){i[String(t)]=e})}),i),-1===r.indexOf(this.kind))throw new o('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},{"./exception":73}],83:[function(e,t){"use strict";var o;try{o=e("buffer").Buffer}catch(a){}var n=e("../type"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";t.exports=new n("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,o,n=0,a=e.length,i=r;for(o=0;o<a;o++)if(!((t=i.indexOf(e.charAt(o)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,n,a=e.replace(/[\r\n=]/g,""),i=a.length,s=r,c=0,l=[];for(t=0;t<i;t++)t%4==0&&t&&(l.push(c>>16&255),l.push(c>>8&255),l.push(255&c)),c=c<<6|s.indexOf(a.charAt(t));return 0==(n=i%4*6)?(l.push(c>>16&255),l.push(c>>8&255),l.push(255&c)):18===n?(l.push(c>>10&255),l.push(c>>2&255)):12===n&&l.push(c>>4&255),o?o.from?o.from(l):new o(l):l},predicate:function(e){return o&&o.isBuffer(e)},represent:function(e){var t,o,n="",a=0,i=e.length,s=r;for(t=0;t<i;t++)t%3==0&&t&&(n+=s[a>>18&63],n+=s[a>>12&63],n+=s[a>>6&63],n+=s[63&a]),a=(a<<8)+e[t];return 0==(o=i%3)?(n+=s[a>>18&63],n+=s[a>>12&63],n+=s[a>>6&63],n+=s[63&a]):2===o?(n+=s[a>>10&63],n+=s[a>>4&63],n+=s[a<<2&63],n+=s[64]):1===o&&(n+=s[a>>2&63],n+=s[a<<4&63],n+=s[64],n+=s[64]),n}})},{"../type":82}],84:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":82}],85:[function(e,t){"use strict";var o=e("../common"),n=e("../type"),r=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),a=/^[-+]?[0-9]+e/;t.exports=new n("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!r.test(e)||"_"===e[e.length-1])},construct:function(e){var t,o,n,r;return o="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,r=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===o?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){r.unshift(parseFloat(e,10))}),t=0,n=1,r.forEach(function(e){t+=e*n,n*=60}),o*t):o*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||o.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(o.isNegativeZero(e))return"-0.0";return n=e.toString(10),a.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},{"../common":71,"../type":82}],86:[function(e,t){"use strict";var o=e("../common"),n=e("../type");function r(e){return 48<=e&&e<=55}function a(e){return 48<=e&&e<=57}t.exports=new n("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,o,n=e.length,i=0,s=!1;if(!n)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===n)return!0;if("b"===(t=e[++i])){for(i++;i<n;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!(48<=(o=e.charCodeAt(i))&&o<=57||65<=o&&o<=70||97<=o&&o<=102))return!1;s=!0}return s&&"_"!==t}for(;i<n;i++)if("_"!==(t=e[i])){if(!r(e.charCodeAt(i)))return!1;s=!0}return s&&"_"!==t}if("_"===t)return!1;for(;i<n;i++)if("_"!==(t=e[i])){if(":"===t)break;if(!a(e.charCodeAt(i)))return!1;s=!0}return!(!s||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(i)))},construct:function(e){var t,o,n=e,r=1,a=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?r*parseInt(n.slice(2),2):"x"===n[1]?r*parseInt(n,16):r*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach(function(e){a.unshift(parseInt(e,10))}),n=0,o=1,a.forEach(function(e){n+=e*o,o*=60}),r*n):r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!o.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":71,"../type":82}],87:[function(e,t){"use strict";var o;try{o=e("esprima")}catch(r){"undefined"!=typeof window&&(o=window.esprima)}var n=e("../../type");t.exports=new n("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=o.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(r){return!1}},construct:function(e){var t,n="("+e+")",r=o.parse(n,{range:!0}),a=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){a.push(e.name)}),t=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(a,n.slice(t[0]+1,t[1]-1)):new Function(a,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},{"../../type":82}],88:[function(e,t){"use strict";var o=e("../../type");t.exports=new o("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,o=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(o&&(n=o[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,o=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(o&&(n=o[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},{"../../type":82}],89:[function(e,t){"use strict";var o=e("../../type");t.exports=new o("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},{"../../type":82}],90:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},{"../type":82}],91:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},{"../type":82}],92:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":82}],93:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,o,a,i,s,c=[],l=e;for(t=0,o=l.length;t<o;t+=1){if(a=l[t],s=!1,"[object Object]"!==r.call(a))return!1;for(i in a)if(n.call(a,i)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==c.indexOf(i))return!1;c.push(i)}return!0},construct:function(e){return null!==e?e:[]}})},{"../type":82}],94:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.toString;t.exports=new o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,o,r,a,i,s=e;for(i=new Array(s.length),t=0,o=s.length;t<o;t+=1){if(r=s[t],"[object Object]"!==n.call(r))return!1;if(1!==(a=Object.keys(r)).length)return!1;i[t]=[a[0],r[a[0]]]}return!0},construct:function(e){if(null===e)return[];var t,o,n,r,a,i=e;for(a=new Array(i.length),t=0,o=i.length;t<o;t+=1)n=i[t],r=Object.keys(n),a[t]=[r[0],n[r[0]]];return a}})},{"../type":82}],95:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},{"../type":82}],96:[function(e,t){"use strict";var o=e("../type"),n=Object.prototype.hasOwnProperty;t.exports=new o("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,o=e;for(t in o)if(n.call(o,t)&&null!==o[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},{"../type":82}],97:[function(e,t){"use strict";var o=e("../type");t.exports=new o("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},{"../type":82}],98:[function(e,t){"use strict";var o=e("../type"),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");t.exports=new o("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==n.exec(e)||null!==r.exec(e))},construct:function(e){var t,o,a,i,s,c,l,u,p=0,d=null;if(null===(t=n.exec(e))&&(t=r.exec(e)),null===t)throw new Error("Date resolve error");if(o=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(o,a,i));if(s=+t[4],c=+t[5],l=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),u=new Date(Date.UTC(o,a,i,s,c,l,p)),d&&u.setTime(u.getTime()-d),u},instanceOf:Date,represent:function(e){return e.toISOString()}})},{"../type":82}],99:[function(e,t,o){var n,r;n="undefined"!=typeof self?self:this,r=function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,o){return new e(new Uint8ClampedArray(t*o),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o?1:0},e.prototype.setRegion=function(e,t,o,n,r){for(var a=t;a<t+n;a++)for(var i=e;i<e+o;i++)this.set(i,a,!!r)},e}();t.BitMatrix=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(2);t.addOrSubtractGF=function(e,t){return e^t};var r=function(){function e(e,t,o){this.primitive=e,this.size=t,this.generatorBase=o,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var r=1,a=0;a<this.size;a++)this.expTable[a]=r,(r*=2)>=this.size&&(r=(r^this.primitive)&this.size-1);for(a=0;a<this.size-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var o=new Uint8ClampedArray(e+1);return o[0]=t,new n.default(this,o)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var o=t.length;if(o>1&&0===t[0]){for(var n=1;n<o&&0===t[n];)n++;if(n===o)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(o-n);for(var r=0;r<this.coefficients.length;r++)this.coefficients[r]=t[n+r]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var o;if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,a=t.coefficients;r.length>a.length&&(r=(o=[a,r])[0],a=o[1]);for(var i=new Uint8ClampedArray(a.length),s=a.length-r.length,c=0;c<s;c++)i[c]=a[c];for(c=s;c<a.length;c++)i[c]=n.addOrSubtractGF(r[c-s],a[c]);return new e(this.field,i)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var o=this.coefficients.length,n=new Uint8ClampedArray(o),r=0;r<o;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var o=this.coefficients,r=o.length,a=t.coefficients,i=a.length,s=new Uint8ClampedArray(r+i-1),c=0;c<r;c++)for(var l=o[c],u=0;u<i;u++)s[c+u]=n.addOrSubtractGF(s[c+u],this.field.multiply(l,a[u]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,o){if(t<0)throw new Error("Invalid degree less than 0");if(0===o)return this.field.zero;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n+t),a=0;a<n;a++)r[a]=this.field.multiply(this.coefficients[a],o);return new e(this.field,r)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var o=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=n.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var r=1;r<o;r++)t=n.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[r]);return t},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),r=o(5),a=o(11),i=o(12);function s(e){var t=i.locate(e);if(!t)return null;for(var o=0,n=t;o<n.length;o++){var s=n[o],c=a.extract(e,s),l=r.decode(c.matrix);if(l)return{binaryData:l.bytes,data:l.text,chunks:l.chunks,version:l.version,location:{topRightCorner:c.mappingFunction(s.dimension,0),topLeftCorner:c.mappingFunction(0,0),bottomRightCorner:c.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:c.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function l(e,t,o,r){void 0===r&&(r={});var a=c;Object.keys(a||{}).forEach(function(e){a[e]=r[e]||a[e]});var i="attemptBoth"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,l="onlyInvert"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,u=n.binarize(e,t,o,i),p=u.binarized,d=u.inverted,f=s(l?d:p);return f||"attemptBoth"!==a.inversionAttempts&&"invertFirst"!==a.inversionAttempts||(f=s(l?p:d)),f}l.default=l,t.default=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o){return e<t?t:e>o?o:e}var a=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o},e}();t.binarize=function(e,t,o,i){if(e.length!==t*o*4)throw new Error("Malformed data passed to binarizer.");for(var s=new a(t,o),c=0;c<t;c++)for(var l=0;l<o;l++){var u=e[4*(l*t+c)+0],p=e[4*(l*t+c)+1],d=e[4*(l*t+c)+2];s.set(c,l,.2126*u+.7152*p+.0722*d)}for(var f=Math.ceil(t/8),h=Math.ceil(o/8),g=new a(f,h),m=0;m<h;m++)for(var y=0;y<f;y++){var _=0,v=1/0,S=0;for(l=0;l<8;l++)for(c=0;c<8;c++){var b=s.get(8*y+c,8*m+l);_+=b,v=Math.min(v,b),S=Math.max(S,b)}var N=_/Math.pow(8,2);if(S-v<=24&&(N=v/2,m>0&&y>0)){var P=(g.get(y,m-1)+2*g.get(y-1,m)+g.get(y-1,m-1))/4;v<P&&(N=P)}g.set(y,m,N)}var I=n.BitMatrix.createEmpty(t,o),C=null;for(i&&(C=n.BitMatrix.createEmpty(t,o)),m=0;m<h;m++)for(y=0;y<f;y++){for(var w=r(y,2,f-3),O=r(m,2,h-3),T=(_=0,-2);T<=2;T++)for(var E=-2;E<=2;E++)_+=g.get(w+T,O+E);var M=_/25;for(T=0;T<8;T++)for(E=0;E<8;E++){c=8*y+T,l=8*m+E;var D=s.get(c,l);I.set(c,l,D<=M),i&&C.set(c,l,!(D<=M))}}return i?{binarized:I,inverted:C}:{binarized:I}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(6),a=o(9),i=o(10);function s(e,t){for(var o=e^t,n=0;o;)n++,o&=o-1;return n}function c(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function p(e){var t=17+4*e.versionNumber,o=n.BitMatrix.createEmpty(t,t);o.setRegion(0,0,9,9,!0),o.setRegion(t-8,0,8,9,!0),o.setRegion(0,t-8,9,8,!0);for(var r=0,a=e.alignmentPatternCenters;r<a.length;r++)for(var i=a[r],s=0,c=e.alignmentPatternCenters;s<c.length;s++){var l=c[s];6===i&&6===l||6===i&&l===t-7||i===t-7&&6===l||o.setRegion(i-2,l-2,5,5,!0)}return o.setRegion(6,9,1,t-17,!0),o.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(o.setRegion(t-11,0,3,6,!0),o.setRegion(0,t-11,6,3,!0)),o}function d(e,t,o){for(var n=u[o.dataMask],r=e.height,a=p(t),i=[],s=0,l=0,d=!0,f=r-1;f>0;f-=2){6===f&&f--;for(var h=0;h<r;h++)for(var g=d?r-1-h:h,m=0;m<2;m++){var y=f-m;if(!a.get(y,g)){l++;var _=e.get(y,g);n({y:g,x:y})&&(_=!_),s=c(_,s),8===l&&(i.push(s),l=0,s=0)}}d=!d}return i}function f(e){var t=e.height,o=Math.floor((t-17)/4);if(o<=6)return i.VERSIONS[o-1];for(var n=0,r=5;r>=0;r--)for(var a=t-9;a>=t-11;a--)n=c(e.get(a,r),n);var l=0;for(a=5;a>=0;a--)for(r=t-9;r>=t-11;r--)l=c(e.get(a,r),l);for(var u,p=1/0,d=0,f=i.VERSIONS;d<f.length;d++){var h=f[d];if(h.infoBits===n||h.infoBits===l)return h;var g=s(n,h.infoBits);g<p&&(u=h,p=g),(g=s(l,h.infoBits))<p&&(u=h,p=g)}return p<=3?u:void 0}function h(e){for(var t=0,o=0;o<=8;o++)6!==o&&(t=c(e.get(o,8),t));for(var n=7;n>=0;n--)6!==n&&(t=c(e.get(8,n),t));var r=e.height,a=0;for(n=r-1;n>=r-7;n--)a=c(e.get(8,n),a);for(o=r-8;o<r;o++)a=c(e.get(o,8),a);for(var i=1/0,u=null,p=0,d=l;p<d.length;p++){var f=d[p],h=f.bits,g=f.formatInfo;if(h===t||h===a)return g;var m=s(t,h);m<i&&(u=g,i=m),t!==a&&(m=s(a,h))<i&&(u=g,i=m)}return i<=3?u:null}function g(e,t,o){var n=t.errorCorrectionLevels[o],r=[],a=0;if(n.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)r.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),a+=e.dataCodewordsPerBlock+n.ecCodewordsPerBlock}),e.length<a)return null;e=e.slice(0,a);for(var i=n.ecBlocks[0].dataCodewordsPerBlock,s=0;s<i;s++)for(var c=0,l=r;c<l.length;c++)l[c].codewords.push(e.shift());if(n.ecBlocks.length>1){var u=n.ecBlocks[0].numBlocks,p=n.ecBlocks[1].numBlocks;for(s=0;s<p;s++)r[u+s].codewords.push(e.shift())}for(;e.length>0;)for(var d=0,f=r;d<f.length;d++)f[d].codewords.push(e.shift());return r}function m(e){var t=f(e);if(!t)return null;var o=h(e);if(!o)return null;var n=g(d(e,t,o),t,o.errorCorrectionLevel);if(!n)return null;for(var i=n.reduce(function(e,t){return e+t.numDataCodewords},0),s=new Uint8ClampedArray(i),c=0,l=0,u=n;l<u.length;l++){var p=u[l],m=a.decode(p.codewords,p.codewords.length-p.numDataCodewords);if(!m)return null;for(var y=0;y<p.numDataCodewords;y++)s[c++]=m[y]}try{return r.decode(s,t.versionNumber)}catch(_){return null}}t.decode=function(e){if(null==e)return null;var t=m(e);if(t)return t;for(var o=0;o<e.width;o++)for(var n=o+1;n<e.height;n++)e.get(o,n)!==e.get(n,o)&&(e.set(o,n,!e.get(o,n)),e.set(n,o,!e.get(n,o)));return m(e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,a=o(7),i=o(8);function s(e,t){for(var o=[],n="",r=[10,12,14][t],a=e.readBits(r);a>=3;){if((l=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var i=Math.floor(l/100),s=Math.floor(l/10)%10,c=l%10;o.push(48+i,48+s,48+c),n+=i.toString()+s.toString()+c.toString(),a-=3}if(2===a){if((l=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");i=Math.floor(l/10),s=l%10,o.push(48+i,48+s),n+=i.toString()+s.toString()}else if(1===a){var l;if((l=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");o.push(48+l),n+=l.toString()}return{bytes:o,text:n}}(function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"})(n=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(r||(r={}));var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(e,t){for(var o=[],n="",r=[9,11,13][t],a=e.readBits(r);a>=2;){var i=e.readBits(11),s=Math.floor(i/45),l=i%45;o.push(c[s].charCodeAt(0),c[l].charCodeAt(0)),n+=c[s]+c[l],a-=2}return 1===a&&(s=e.readBits(6),o.push(c[s].charCodeAt(0)),n+=c[s]),{bytes:o,text:n}}function u(e,t){for(var o=[],n="",r=[8,16,16][t],a=e.readBits(r),i=0;i<a;i++){var s=e.readBits(8);o.push(s)}try{n+=decodeURIComponent(o.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(c){}return{bytes:o,text:n}}function p(e,t){for(var o=[],n="",r=[8,10,12][t],a=e.readBits(r),s=0;s<a;s++){var c=e.readBits(13),l=Math.floor(c/192)<<8|c%192;l+=l<7936?33088:49472,o.push(l>>8,255&l),n+=String.fromCharCode(i.shiftJISTable[l])}return{bytes:o,text:n}}t.decode=function(e,t){for(var o,i,c,d,f=new a.BitStream(e),h=t<=9?0:t<=26?1:2,g={text:"",bytes:[],chunks:[],version:t};f.available()>=4;){var m=f.readBits(4);if(m===r.Terminator)return g;if(m===r.ECI)0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(7)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(14)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(21)}):g.chunks.push({type:n.ECI,assignmentNumber:-1});else if(m===r.Numeric){var y=s(f,h);g.text+=y.text,(o=g.bytes).push.apply(o,y.bytes),g.chunks.push({type:n.Numeric,text:y.text})}else if(m===r.Alphanumeric){var _=l(f,h);g.text+=_.text,(i=g.bytes).push.apply(i,_.bytes),g.chunks.push({type:n.Alphanumeric,text:_.text})}else if(m===r.Byte){var v=u(f,h);g.text+=v.text,(c=g.bytes).push.apply(c,v.bytes),g.chunks.push({type:n.Byte,bytes:v.bytes,text:v.text})}else if(m===r.Kanji){var S=p(f,h);g.text+=S.text,(d=g.bytes).push.apply(d,S.bytes),g.chunks.push({type:n.Kanji,bytes:S.bytes,text:S.text})}}if(0===f.available()||0===f.readBits(f.available()))return g}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var o=8-this.bitOffset,n=e<o?e:o,r=255>>8-n<<(a=o-n);t=(this.bytes[this.byteOffset]&r)>>a,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var a;e>0&&(r=255>>(a=8-e)<<a,t=t<<e|(this.bytes[this.byteOffset]&r)>>a,this.bitOffset+=e)}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=o(2);function a(e,t,o,n){var r;t.degree()<o.degree()&&(t=(r=[o,t])[0],o=r[1]);for(var a=t,i=o,s=e.zero,c=e.one;i.degree()>=n/2;){var l=a,u=s;if(s=c,(a=i).isZero())return null;i=l;for(var p=e.zero,d=a.getCoefficient(a.degree()),f=e.inverse(d);i.degree()>=a.degree()&&!i.isZero();){var h=i.degree()-a.degree(),g=e.multiply(i.getCoefficient(i.degree()),f);p=p.addOrSubtract(e.buildMonomial(h,g)),i=i.addOrSubtract(a.multiplyByMonomial(h,g))}if(c=p.multiplyPoly(s).addOrSubtract(u),i.degree()>=a.degree())return null}var m=c.getCoefficient(0);if(0===m)return null;var y=e.inverse(m);return[c.multiply(y),i.multiply(y)]}function i(e,t){var o=t.degree();if(1===o)return[t.getCoefficient(1)];for(var n=new Array(o),r=0,a=1;a<e.size&&r<o;a++)0===t.evaluateAt(a)&&(n[r]=e.inverse(a),r++);return r!==o?null:n}function s(e,t,o){for(var r=o.length,a=new Array(r),i=0;i<r;i++){for(var s=e.inverse(o[i]),c=1,l=0;l<r;l++)i!==l&&(c=e.multiply(c,n.addOrSubtractGF(1,e.multiply(o[l],s))));a[i]=e.multiply(t.evaluateAt(s),e.inverse(c)),0!==e.generatorBase&&(a[i]=e.multiply(a[i],s))}return a}t.decode=function(e,t){var o=new Uint8ClampedArray(e.length);o.set(e);for(var c=new n.default(285,256,0),l=new r.default(c,o),u=new Uint8ClampedArray(t),p=!1,d=0;d<t;d++){var f=l.evaluateAt(c.exp(d+c.generatorBase));u[u.length-1-d]=f,0!==f&&(p=!0)}if(!p)return o;var h=new r.default(c,u),g=a(c,c.buildMonomial(t,1),h,t);if(null===g)return null;var m=i(c,g[0]);if(null==m)return null;for(var y=s(c,g[1],m),_=0;_<m.length;_++){var v=o.length-1-c.log(m[_]);if(v<0)return null;o[v]=n.addOrSubtractGF(o[v],y[_])}return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o,n){var r=e.x-t.x+o.x-n.x,a=e.y-t.y+o.y-n.y;if(0===r&&0===a)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:o.x-t.x,a22:o.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-o.x,s=n.x-o.x,c=t.y-o.y,l=n.y-o.y,u=i*l-s*c,p=(r*l-s*a)/u,d=(i*a-r*c)/u;return{a11:t.x-e.x+p*t.x,a12:t.y-e.y+p*t.y,a13:p,a21:n.x-e.x+d*n.x,a22:n.y-e.y+d*n.y,a23:d,a31:e.x,a32:e.y,a33:1}}function a(e,t,o,n){var a=r(e,t,o,n);return{a11:a.a22*a.a33-a.a23*a.a32,a12:a.a13*a.a32-a.a12*a.a33,a13:a.a12*a.a23-a.a13*a.a22,a21:a.a23*a.a31-a.a21*a.a33,a22:a.a11*a.a33-a.a13*a.a31,a23:a.a13*a.a21-a.a11*a.a23,a31:a.a21*a.a32-a.a22*a.a31,a32:a.a12*a.a31-a.a11*a.a32,a33:a.a11*a.a22-a.a12*a.a21}}t.extract=function(e,t){for(var o,i,s=(i=a({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),{a11:(o=r(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft)).a11*i.a11+o.a21*i.a12+o.a31*i.a13,a12:o.a12*i.a11+o.a22*i.a12+o.a32*i.a13,a13:o.a13*i.a11+o.a23*i.a12+o.a33*i.a13,a21:o.a11*i.a21+o.a21*i.a22+o.a31*i.a23,a22:o.a12*i.a21+o.a22*i.a22+o.a32*i.a23,a23:o.a13*i.a21+o.a23*i.a22+o.a33*i.a23,a31:o.a11*i.a31+o.a21*i.a32+o.a31*i.a33,a32:o.a12*i.a31+o.a22*i.a32+o.a32*i.a33,a33:o.a13*i.a31+o.a23*i.a32+o.a33*i.a33}),c=n.BitMatrix.createEmpty(t.dimension,t.dimension),l=function(e,t){var o=s.a13*e+s.a23*t+s.a33;return{x:(s.a11*e+s.a21*t+s.a31)/o,y:(s.a12*e+s.a22*t+s.a32)/o}},u=0;u<t.dimension;u++)for(var p=0;p<t.dimension;p++){var d=l(p+.5,u+.5);c.set(p,u,e.get(Math.floor(d.x),Math.floor(d.y)))}return{matrix:c,mappingFunction:l}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function n(e){return e.reduce(function(e,t){return e+t})}function r(e,t,n){var r,a,i,s,c,l,u,p=o(e,t),d=o(t,n),f=o(e,n);return d>=p&&d>=f?(c=(r=[t,e,n])[0],l=r[1],u=r[2]):f>=d&&f>=p?(c=(a=[e,t,n])[0],l=a[1],u=a[2]):(c=(i=[e,n,t])[0],l=i[1],u=i[2]),(u.x-l.x)*(c.y-l.y)-(u.y-l.y)*(c.x-l.x)<0&&(c=(s=[u,c])[0],u=s[1]),{bottomLeft:c,topLeft:l,topRight:u}}function a(e,t,r,a){var i=(n(s(e,r,a,5))/7+n(s(e,t,a,5))/7+n(s(r,e,a,5))/7+n(s(t,e,a,5))/7)/4;if(i<1)throw new Error("Invalid module size");var c=Math.round(o(e,t)/i),l=Math.round(o(e,r)/i),u=Math.floor((c+l)/2)+7;switch(u%4){case 0:u++;break;case 2:u--}return{dimension:u,moduleSize:i}}function i(e,t,n,r){var a,i,s,c,l=[{x:Math.floor(e.x),y:Math.floor(e.y)}],u=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);u?(a=Math.floor(e.y),i=Math.floor(e.x),s=Math.floor(t.y),c=Math.floor(t.x)):(a=Math.floor(e.x),i=Math.floor(e.y),s=Math.floor(t.x),c=Math.floor(t.y));for(var p=Math.abs(s-a),d=Math.abs(c-i),f=Math.floor(-p/2),h=a<s?1:-1,g=i<c?1:-1,m=!0,y=a,_=i;y!==s+h;y+=h){var v=u?_:y,S=u?y:_;if(n.get(v,S)!==m&&(m=!m,l.push({x:v,y:S}),l.length===r+1))break;if((f+=d)>0){if(_===c)break;_+=g,f-=p}}for(var b=[],N=0;N<r;N++)l[N]&&l[N+1]?b.push(o(l[N],l[N+1])):b.push(0);return b}function s(e,t,o,n){var r,a=t.y-e.y,s=t.x-e.x,c=i(e,t,o,Math.ceil(n/2)),l=i(e,{x:e.x-s,y:e.y-a},o,Math.ceil(n/2)),u=c.shift()+l.shift()-1;return(r=l.concat(u)).concat.apply(r,c)}function c(e,t){var o=n(e)/n(t),r=0;return t.forEach(function(t,n){r+=Math.pow(e[n]-t*o,2)}),{averageSize:o,error:r}}function l(e,t,o){try{var n=s(e,{x:-1,y:e.y},o,t.length),r=s(e,{x:e.x,y:-1},o,t.length),a=s(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},o,t.length),i=s(e,{x:Math.min(o.width,e.x+e.y)+1,y:Math.min(o.height,e.y+e.x)+1},o,t.length),l=c(n,t),u=c(r,t),p=c(a,t),d=c(i,t),f=Math.sqrt(l.error*l.error+u.error*u.error+p.error*p.error+d.error*d.error),h=(l.averageSize+u.averageSize+p.averageSize+d.averageSize)/4;return f+(Math.pow(l.averageSize-h,2)+Math.pow(u.averageSize-h,2)+Math.pow(p.averageSize-h,2)+Math.pow(d.averageSize-h,2))/h}catch(g){return 1/0}}function u(e,t){for(var o=Math.round(t.x);e.get(o,Math.round(t.y));)o--;for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n++;for(var r=(o+n)/2,a=Math.round(t.y);e.get(Math.round(r),a);)a--;for(var i=Math.round(t.y);e.get(Math.round(r),i);)i++;return{x:r,y:(a+i)/2}}function p(e,t,r,i,s){var c,u,p;try{u=(c=a(i,r,s,e)).dimension,p=c.moduleSize}catch(_){return null}var d=r.x-i.x+s.x,f=r.y-i.y+s.y,h=(o(i,s)+o(i,r))/2/p,g=1-3/h,m={x:i.x+g*(d-i.x),y:i.y+g*(f-i.y)},y=t.map(function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,a=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(r),Math.floor(a)))return n([t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1]),{x:r,y:a,score:l({x:Math.floor(r),y:Math.floor(a)},[1,1,1],e)+o({x:r,y:a},m)}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:h>=15&&y.length?y[0]:m,dimension:u}}t.locate=function(e){for(var t=[],o=[],a=[],i=[],s=function(r){for(var s=0,c=!1,l=[0,0,0,0,0],u=function(t){var a=e.get(t,r);if(a===c)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,c=a;var u=n(l)/7,p=Math.abs(l[0]-u)<u&&Math.abs(l[1]-u)<u&&Math.abs(l[2]-3*u)<3*u&&Math.abs(l[3]-u)<u&&Math.abs(l[4]-u)<u&&!a,d=n(l.slice(-3))/3,f=Math.abs(l[2]-d)<d&&Math.abs(l[3]-d)<d&&Math.abs(l[4]-d)<d&&a;if(p){var h=t-l[3]-l[4],g=h-l[2],m={startX:g,endX:h,y:r};(y=o.filter(function(e){return g>=e.bottom.startX&&g<=e.bottom.endX||h>=e.bottom.startX&&g<=e.bottom.endX||g<=e.bottom.startX&&h>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?y[0].bottom=m:o.push({top:m,bottom:m})}if(f){var y,_=t-l[4],v=_-l[3];m={startX:v,y:r,endX:_},(y=i.filter(function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||_>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&_>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?y[0].bottom=m:i.push({top:m,bottom:m})}}},p=-1;p<=e.width;p++)u(p);t.push.apply(t,o.filter(function(e){return e.bottom.y!==r&&e.bottom.y-e.top.y>=2})),o=o.filter(function(e){return e.bottom.y===r}),a.push.apply(a,i.filter(function(e){return e.bottom.y!==r})),i=i.filter(function(e){return e.bottom.y===r})},c=0;c<=e.height;c++)s(c);t.push.apply(t,o.filter(function(e){return e.bottom.y-e.top.y>=2})),a.push.apply(a,i);var d=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var o=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(o),Math.round(r))){var a=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],i=n(a)/a.length;return{score:l({x:Math.round(o),y:Math.round(r)},[1,1,3,1,1],e),x:o,y:r,size:i}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,o){if(t>4)return null;var n=o.filter(function(e,o){return t!==o}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(n.length<2)return null;var r=e.score+n[0].score+n[1].score;return{points:[e].concat(n.slice(0,2)),score:r}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===d.length)return null;var f=r(d[0].points[0],d[0].points[1],d[0].points[2]),h=f.topRight,g=f.topLeft,m=f.bottomLeft,y=p(e,a,h,g,m),_=[];y&&_.push({alignmentPattern:{x:y.alignmentPattern.x,y:y.alignmentPattern.y},bottomLeft:{x:m.x,y:m.y},dimension:y.dimension,topLeft:{x:g.x,y:g.y},topRight:{x:h.x,y:h.y}});var v=u(e,h),S=u(e,g),b=u(e,m),N=p(e,a,v,S,b);return N&&_.push({alignmentPattern:{x:N.alignmentPattern.x,y:N.alignmentPattern.y},bottomLeft:{x:b.x,y:b.y},topLeft:{x:S.x,y:S.y},topRight:{x:v.x,y:v.y},dimension:N.dimension}),0===_.length?null:_}}]).default},"object"==typeof o&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof o?o.jsQR=r():n.jsQR=r()},{}],100:[function(e,t){t.exports=n;var o=null;try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(w){}function n(e,t,o){this.low=0|e,this.high=0|t,this.unsigned=!!o}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function s(e,t){var o,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(o=l(e,(0|e)<0?-1:0,!0),r&&(i[e]=o),o):(r=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(o=l(e,e<0?-1:0,!1),r&&(a[e]=o),o)}function c(e,t){if(isNaN(e))return t?_:y;if(t){if(e<0)return _;if(e>=h)return P}else{if(e<=-g)return I;if(e+1>=g)return N}return e<0?c(-e,t).neg():l(e%f|0,e/f|0,t)}function l(e,t,o){return new n(e,t,o)}n.fromInt=s,n.fromNumber=c,n.fromBits=l;var u=Math.pow;function p(e,t,o){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(o=t,t=!1):t=!!t,(o=o||10)<2||36<o)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return p(e.substring(1),t,o).neg();for(var r=c(u(o,8)),a=y,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+s),o);if(s<8){var d=c(u(o,s));a=a.mul(d).add(c(l))}else a=(a=a.mul(r)).add(c(l))}return a.unsigned=t,a}function d(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?p(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=d;var f=4294967296,h=f*f,g=h/2,m=s(1<<24),y=s(0);n.ZERO=y;var _=s(0,!0);n.UZERO=_;var v=s(1);n.ONE=v;var S=s(1,!0);n.UONE=S;var b=s(-1);n.NEG_ONE=b;var N=l(-1,2147483647,!1);n.MAX_VALUE=N;var P=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=P;var I=l(0,-2147483648,!1);n.MIN_VALUE=I;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var t=c(e),o=this.div(t),n=o.mul(t).sub(this);return o.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=c(u(e,6),this.unsigned),a=this,i="";;){var s=a.div(r),l=(a.sub(s.mul(r)).toInt()>>>0).toString(e);if((a=s).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),o=e.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(v)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,o=65535&this.high,n=this.low>>>16,a=65535&this.low,i=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,p=0,f=0,h=0;return f+=(h+=a+(65535&e.low))>>>16,p+=(f+=n+c)>>>16,u+=(p+=o+s)>>>16,u+=t+i,l((f&=65535)<<16|(h&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return y;if(r(e)||(e=d(e)),o)return l(o.mul(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(I))return e.isOdd()?I:y;if(e.eq(I))return this.isOdd()?I:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,s=e.high>>>16,u=65535&e.high,p=e.low>>>16,f=65535&e.low,h=0,g=0,_=0,v=0;return _+=(v+=i*f)>>>16,g+=(_+=a*f)>>>16,_&=65535,g+=(_+=i*p)>>>16,h+=(g+=n*f)>>>16,g&=65535,h+=(g+=a*p)>>>16,g&=65535,h+=(g+=i*u)>>>16,h+=t*f+n*p+a*u+i*s,l((_&=65535)<<16|(v&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,n,a;if(o)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?o.div_u:o.div_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return S;a=_}else{if(this.eq(I))return e.eq(v)||e.eq(b)?I:e.eq(I)?v:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?v:b:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));if(e.eq(I))return this.unsigned?_:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),s=i<=48?1:u(2,i-48),p=c(t),f=p.mul(e);f.isNegative()||f.gt(n);)f=(p=c(t-=s,this.unsigned)).mul(e);p.isZero()&&(p=v),a=a.add(p),n=n.sub(f)}return a},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),o?l((this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return l(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,o){return o?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},{}],101:[function(e,t){"use strict";t.exports=e("./src/index-minimal")},{"./src/index-minimal":102}],102:[function(e,t,o){"use strict";var n=o;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=r,r()},{"./reader":103,"./reader_buffer":104,"./roots":105,"./rpc":106,"./util/minimal":109,"./writer":110,"./writer_buffer":111}],103:[function(e,t){"use strict";t.exports=s;var o,n=e("./util/minimal"),r=n.LongBits,a=n.utf8;function i(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},u=function(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function p(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw i(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw i(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw i(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}s.create=u(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return c}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return d(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|d(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,o=this.pos+e;if(o>this.len)throw i(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,o):t===o?new this.buf.constructor(0):this._slice.call(this.buf,t,o)},s.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw i(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw i(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){o=e,s.create=u(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{"./util/minimal":109}],104:[function(e,t){"use strict";t.exports=r;var o=e("./reader");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(e){o.call(this,e)}r._configure=function(){n.Buffer&&(r.prototype._slice=n.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure()},{"./reader":103,"./util/minimal":109}],105:[function(e,t){"use strict";t.exports={}},{}],106:[function(e,t,o){"use strict";o.Service=e("./rpc/service")},{"./rpc/service":107}],107:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,r,a,i){if(!a)throw TypeError("request must be specified");var s=this;if(!i)return o.asPromise(e,s,t,n,r,a);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(e,o){if(e)return s.emit("error",e,t),i(e);if(null!==o){if(!(o instanceof r))try{o=r[s.responseDelimited?"decodeDelimited":"decode"](o)}catch(e){return s.emit("error",e,t),i(e)}return s.emit("data",o,t),i(null,o)}s.end(!0)})}catch(c){return s.emit("error",c,t),void setTimeout(function(){i(c)},0)}else setTimeout(function(){i(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":109}],108:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var o=e>>>0,a=(e-o)/4294967296>>>0;return t&&(a=~a>>>0,o=~o>>>0,++o>4294967295&&(o=0,++a>4294967295&&(a=0))),new n(o,a)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):r},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,o=~this.hi>>>0;return t||(o=o+1>>>0),-(t+4294967296*o)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var i=String.prototype.charCodeAt;n.fromHash=function(e){return e===a?r:new n((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:o<128?9:10}},{"../util/minimal":109}],109:[function(e,t,o){(function(t){"use strict";var n=o;function r(e,t,o){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&o||(e[n[r]]=t[n[r]]);return e}function a(e){function t(e,o){if(!(this instanceof t))return new t(e,o);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&r(this,o)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e("@protobufjs/aspromise"),n.base64=e("@protobufjs/base64"),n.EventEmitter=e("@protobufjs/eventemitter"),n.float=e("@protobufjs/float"),n.inquire=e("@protobufjs/inquire"),n.utf8=e("@protobufjs/utf8"),n.pool=e("@protobufjs/pool"),n.LongBits=e("./longbits"),n.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),n.global=n.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var o=e[t];return!(null==o||!e.hasOwnProperty(t))&&("object"!=typeof o||(Array.isArray(o)?o.length:Object.keys(o).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var o=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(o.lo,o.hi,t):o.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=a,n.ProtocolError=a("ProtocolError"),n.oneOfGetter=function(e){for(var t={},o=0;o<e.length;++o)t[e[o]]=1;return function(){for(var e=Object.keys(this),o=e.length-1;o>-1;--o)if(1===t[e[o]]&&void 0!==this[e[o]]&&null!==this[e[o]])return e[o]}},n.oneOfSetter=function(e){return function(t){for(var o=0;o<e.length;++o)e[o]!==t&&delete this[e[o]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,o){return new e(t,o)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./longbits":108,"@protobufjs/aspromise":5,"@protobufjs/base64":6,"@protobufjs/eventemitter":7,"@protobufjs/float":8,"@protobufjs/inquire":9,"@protobufjs/pool":10,"@protobufjs/utf8":11}],110:[function(e,t){"use strict";t.exports=u;var o,n=e("./util/minimal"),r=n.LongBits,a=n.base64,i=n.utf8;function s(e,t,o){this.fn=e,this.len=t,this.next=void 0,this.val=o}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}var p=function(){return n.Buffer?function(){return(u.create=function(){return new o})()}:function(){return new u}};function d(e,t,o){t[o]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,o){for(;e.hi;)t[o++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[o++]=127&e.lo|128,e.lo=e.lo>>>7;t[o++]=e.lo}function g(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}u.create=p(),u.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype._push=function(e,t,o){return this.tail=this.tail.next=new s(e,t,o),this.len+=t,this},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,o){for(;e>127;)t[o++]=127&e|128,e>>>=7;t[o]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(h,10,r.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=r.from(e);return this._push(h,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(h,t.length(),t)},u.prototype.bool=function(e){return this._push(d,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=r.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,o){t.set(e,o)}:function(e,t,o){for(var n=0;n<e.length;++n)t[o+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(n.isString(e)){var o=u.alloc(t=a.length(e));a.decode(e,o,0),e=o}return this.uint32(t)._push(m,t,e)},u.prototype.string=function(e){var t=i.length(e);return t?this.uint32(t)._push(i.write,t,e):this._push(d,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=e.next,this.tail=t,this.len+=o),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),o=0;e;)e.fn(e.val,t,o),o+=e.len,e=e.next;return t},u._configure=function(e){o=e,u.create=p(),o._configure()}},{"./util/minimal":109}],111:[function(e,t){"use strict";t.exports=r;var o=e("./writer");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(){o.call(this)}function a(e,t,o){e.length<40?n.utf8.write(e,t,o):t.utf8Write?t.utf8Write(e,o):t.write(e,o)}r._configure=function(){r.alloc=n._Buffer_allocUnsafe,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,o){t.set(e,o)}:function(e,t,o){if(e.copy)e.copy(t,o,0,e.length);else for(var n=0;n<e.length;)t[o++]=e[n++]}},r.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},r._configure()},{"./util/minimal":109,"./writer":110}],112:[function(e,t,o){const n=e("./can-promise"),r=e("./core/qrcode"),a=e("./renderer/canvas"),i=e("./renderer/svg-tag.js");function s(e,t,o,a,i){const s=[].slice.call(arguments,1),c=s.length,l="function"==typeof s[c-1];if(!l&&!n())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(o=t,t=a=void 0):2!==c||t.getContext||(a=o,o=t,t=void 0),new Promise(function(n,i){try{const c=r.create(o,a);n(e(c,t,a))}catch(s){i(s)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(i=o,o=t,t=a=void 0):3===c&&(t.getContext&&void 0===i?(i=a,a=void 0):(i=a,a=o,o=t,t=void 0));try{const n=r.create(o,a);i(null,e(n,t,a))}catch(u){i(u)}}o.create=r.create,o.toCanvas=s.bind(null,a.render),o.toDataURL=s.bind(null,a.renderToDataURL),o.toString=s.bind(null,function(e,t,o){return i.render(e,o)})},{"./can-promise":113,"./core/qrcode":129,"./renderer/canvas":136,"./renderer/svg-tag.js":137}],113:[function(e,t){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},{}],114:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,o=n(e),r=145===o?26:2*Math.ceil((o-13)/(2*t-2)),a=[o-7];for(let n=1;n<t-1;n++)a[n]=a[n-1]-r;return a.push(6),a.reverse()},o.getPositions=function(e){const t=[],n=o.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let e=0;e<r;e++)0===o&&0===e||0===o&&e===r-1||o===r-1&&0===e||t.push([n[o],n[e]]);return t}},{"./utils":133}],115:[function(e,t){const o=e("./mode"),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(e){this.mode=o.ALPHANUMERIC,this.data=e}r.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=45*n.indexOf(this.data[t]);o+=n.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},t.exports=r},{"./mode":126}],116:[function(e,t){function o(){this.buffer=[],this.length=0}o.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=o},{}],117:[function(e,t){function o(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}o.prototype.set=function(e,t,o,n){const r=e*this.size+t;this.data[r]=o,n&&(this.reservedBit[r]=!0)},o.prototype.get=function(e,t){return this.data[e*this.size+t]},o.prototype.xor=function(e,t,o){this.data[e*this.size+t]^=o},o.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=o},{}],118:[function(e,t){const o=e("encode-utf8"),n=e("./mode");function r(e){this.mode=n.BYTE,this.data=new Uint8Array(o(e))}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,o=this.data.length;t<o;t++)e.put(this.data[t],8)},t.exports=r},{"./mode":126,"encode-utf8":68}],119:[function(e,t,o){const n=e("./error-correction-level"),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];o.getBlocksCount=function(e,t){switch(t){case n.L:return r[4*(e-1)+0];case n.M:return r[4*(e-1)+1];case n.Q:return r[4*(e-1)+2];case n.H:return r[4*(e-1)+3];default:return}},o.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return a[4*(e-1)+0];case n.M:return a[4*(e-1)+1];case n.Q:return a[4*(e-1)+2];case n.H:return a[4*(e-1)+3];default:return}}},{"./error-correction-level":120}],120:[function(e,t,o){function n(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+e)}}o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2},o.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},o.from=function(e,t){if(o.isValid(e))return e;try{return n(e)}catch(r){return t}}},{}],121:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},{"./utils":133}],122:[function(e,t,o){const n=e("./utils"),r=n.getBCHDigit(1335);o.getEncodedBits=function(e,t){const o=e.bit<<3|t;let a=o<<10;for(;n.getBCHDigit(a)-r>=0;)a^=1335<<n.getBCHDigit(a)-r;return 21522^(o<<10|a)}},{"./utils":133}],123:[function(e,t,o){const n=new Uint8Array(512),r=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]})(),o.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},o.exp=function(e){return n[e]},o.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},{}],124:[function(e,t){const o=e("./mode"),n=e("./utils");function r(e){this.mode=o.KANJI,this.data=e}r.getBitsLength=function(e){return 13*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let o=n.toSJIS(this.data[t]);if(o>=33088&&o<=40956)o-=33088;else{if(!(o>=57408&&o<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");o-=49472}o=192*(o>>>8&255)+(255&o),e.put(o,13)}},t.exports=r},{"./mode":126,"./utils":133}],125:[function(e,t,o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,t,n){switch(e){case o.Patterns.PATTERN000:return(t+n)%2==0;case o.Patterns.PATTERN001:return t%2==0;case o.Patterns.PATTERN010:return n%3==0;case o.Patterns.PATTERN011:return(t+n)%3==0;case o.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case o.Patterns.PATTERN101:return t*n%2+t*n%3==0;case o.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case o.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}o.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},o.from=function(e){return o.isValid(e)?parseInt(e,10):void 0},o.getPenaltyN1=function(e){const t=e.size;let o=0,n=0,r=0,a=null,i=null;for(let s=0;s<t;s++){n=r=0,a=i=null;for(let c=0;c<t;c++){let t=e.get(s,c);t===a?n++:(n>=5&&(o+=n-5+3),a=t,n=1),(t=e.get(c,s))===i?r++:(r>=5&&(o+=r-5+3),i=t,r=1)}n>=5&&(o+=n-5+3),r>=5&&(o+=r-5+3)}return o},o.getPenaltyN2=function(e){const t=e.size;let o=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){const t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);4!==t&&0!==t||o++}return 3*o},o.getPenaltyN3=function(e){const t=e.size;let o=0,n=0,r=0;for(let a=0;a<t;a++){n=r=0;for(let i=0;i<t;i++)n=n<<1&2047|e.get(a,i),i>=10&&(1488===n||93===n)&&o++,r=r<<1&2047|e.get(i,a),i>=10&&(1488===r||93===r)&&o++}return 40*o},o.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let n=0;n<o;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/o/5)-10)},o.applyMask=function(e,t){const o=t.size;for(let r=0;r<o;r++)for(let a=0;a<o;a++)t.isReserved(a,r)||t.xor(a,r,n(e,a,r))},o.getBestMask=function(e,t){const n=Object.keys(o.Patterns).length;let r=0,a=1/0;for(let i=0;i<n;i++){t(i),o.applyMask(i,e);const n=o.getPenaltyN1(e)+o.getPenaltyN2(e)+o.getPenaltyN3(e)+o.getPenaltyN4(e);o.applyMask(i,e),n<a&&(a=n,r=i)}return r}},{}],126:[function(e,t,o){const n=e("./version-check"),r=e("./regex");function a(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+e)}}o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},o.getBestModeForData=function(e){return r.testNumeric(e)?o.NUMERIC:r.testAlphanumeric(e)?o.ALPHANUMERIC:r.testKanji(e)?o.KANJI:o.BYTE},o.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},o.isValid=function(e){return e&&e.bit&&e.ccBits},o.from=function(e,t){if(o.isValid(e))return e;try{return a(e)}catch(n){return t}}},{"./regex":131,"./version-check":134}],127:[function(e,t){const o=e("./mode");function n(e){this.mode=o.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,o,n;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),n=parseInt(o,10),e.put(n,10);const r=this.data.length-t;r>0&&(o=this.data.substr(t),n=parseInt(o,10),e.put(n,3*r+1))},t.exports=n},{"./mode":126}],128:[function(e,t,o){const n=e("./galois-field");o.mul=function(e,t){const o=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<t.length;a++)o[r+a]^=n.mul(e[r],t[a]);return o},o.mod=function(e,t){let o=new Uint8Array(e);for(;o.length-t.length>=0;){const e=o[0];for(let a=0;a<t.length;a++)o[a]^=n.mul(t[a],e);let r=0;for(;r<o.length&&0===o[r];)r++;o=o.slice(r)}return o},o.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=o.mul(t,new Uint8Array([1,n.exp(r)]));return t}},{"./galois-field":123}],129:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-level"),a=e("./bit-buffer"),i=e("./bit-matrix"),s=e("./alignment-pattern"),c=e("./finder-pattern"),l=e("./mask-pattern"),u=e("./error-correction-code"),p=e("./reed-solomon-encoder"),d=e("./version"),f=e("./format-info"),h=e("./mode"),g=e("./segments");function m(e,t){const o=e.size,n=c.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],a=n[r][1];for(let n=-1;n<=7;n++)if(!(t+n<=-1||o<=t+n))for(let r=-1;r<=7;r++)a+r<=-1||o<=a+r||(n>=0&&n<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===n||6===n)||n>=2&&n<=4&&r>=2&&r<=4?e.set(t+n,a+r,!0,!0):e.set(t+n,a+r,!1,!0))}}function y(e){const t=e.size;for(let o=8;o<t-8;o++){const t=o%2==0;e.set(o,6,t,!0),e.set(6,o,t,!0)}}function _(e,t){const o=s.getPositions(t);for(let n=0;n<o.length;n++){const t=o[n][0],r=o[n][1];for(let o=-2;o<=2;o++)for(let n=-2;n<=2;n++)-2===o||2===o||-2===n||2===n||0===o&&0===n?e.set(t+o,r+n,!0,!0):e.set(t+o,r+n,!1,!0)}}function v(e,t){const o=e.size,n=d.getEncodedBits(t);let r,a,i;for(let s=0;s<18;s++)r=Math.floor(s/3),a=s%3+o-8-3,i=1==(n>>s&1),e.set(r,a,i,!0),e.set(a,r,i,!0)}function S(e,t,o){const n=e.size,r=f.getEncodedBits(t,o);let a,i;for(a=0;a<15;a++)i=1==(r>>a&1),a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(n-15+a,8,i,!0),a<8?e.set(8,n-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(n-8,8,1,!0)}function b(e,t){const o=e.size;let n=-1,r=o-1,a=7,i=0;for(let s=o-1;s>0;s-=2)for(6===s&&s--;;){for(let o=0;o<2;o++)if(!e.isReserved(r,s-o)){let n=!1;i<t.length&&(n=1==(t[i]>>>a&1)),e.set(r,s-o,n),-1==--a&&(i++,a=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}}function N(e,t,o){const r=new a;o.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(r)});const i=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(i-r.getLengthInBits())/8;for(let n=0;n<s;n++)r.put(n%2?17:236,8);return P(r,e,t)}function P(e,t,o){const r=n.getSymbolTotalCodewords(t),a=r-u.getTotalCodewordsCount(t,o),i=u.getBlocksCount(t,o),s=i-r%i,c=Math.floor(r/i),l=Math.floor(a/i),d=l+1,f=c-l,h=new p(f);let g=0;const m=new Array(i),y=new Array(i);let _=0;const v=new Uint8Array(e.buffer);for(let n=0;n<i;n++){const e=n<s?l:d;m[n]=v.slice(g,g+e),y[n]=h.encode(m[n]),g+=e,_=Math.max(_,e)}const S=new Uint8Array(r);let b,N,P=0;for(b=0;b<_;b++)for(N=0;N<i;N++)b<m[N].length&&(S[P++]=m[N][b]);for(b=0;b<f;b++)for(N=0;N<i;N++)S[P++]=y[N][b];return S}function I(e,t,o,r){let a;if(Array.isArray(e))a=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=g.rawSplit(e);n=d.getBestVersionForData(t,o)}a=g.fromString(e,n||40)}}const s=d.getBestVersionForData(a,o);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else t=s;const c=N(t,o,a),u=n.getSymbolSize(t),p=new i(u);return m(p,t),y(p),_(p,t),S(p,o,0),t>=7&&v(p,t),b(p,c),isNaN(r)&&(r=l.getBestMask(p,S.bind(null,p,o))),l.applyMask(r,p),S(p,o,r),{modules:p,version:t,errorCorrectionLevel:o,maskPattern:r,segments:a}}o.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let o,a,i=r.M;return void 0!==t&&(i=r.from(t.errorCorrectionLevel,r.M),o=d.from(t.version),a=l.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),I(e,o,i,a)}},{"./alignment-pattern":114,"./bit-buffer":116,"./bit-matrix":117,"./error-correction-code":119,"./error-correction-level":120,"./finder-pattern":121,"./format-info":122,"./mask-pattern":125,"./mode":126,"./reed-solomon-encoder":130,"./segments":132,"./utils":133,"./version":135}],130:[function(e,t){const o=e("./polynomial");function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=o.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},t.exports=n},{"./polynomial":128}],131:[function(e,t,o){let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";o.KANJI=new RegExp(n,"g"),o.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),o.BYTE=new RegExp(r,"g"),o.NUMERIC=new RegExp("[0-9]+","g"),o.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+n+"$"),i=new RegExp("^[0-9]+$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");o.testKanji=function(e){return a.test(e)},o.testNumeric=function(e){return i.test(e)},o.testAlphanumeric=function(e){return s.test(e)}},{}],132:[function(e,t,o){const n=e("./mode"),r=e("./numeric-data"),a=e("./alphanumeric-data"),i=e("./byte-data"),s=e("./kanji-data"),c=e("./regex"),l=e("./utils"),u=e("dijkstrajs");function p(e){return unescape(encodeURIComponent(e)).length}function d(e,t,o){const n=[];let r;for(;null!==(r=e.exec(o));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function f(e){const t=d(c.NUMERIC,n.NUMERIC,e),o=d(c.ALPHANUMERIC,n.ALPHANUMERIC,e);let r,a;return l.isKanjiModeEnabled()?(r=d(c.BYTE,n.BYTE,e),a=d(c.KANJI,n.KANJI,e)):(r=d(c.BYTE_KANJI,n.BYTE,e),a=[]),t.concat(o,r,a).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function h(e,t){switch(t){case n.NUMERIC:return r.getBitsLength(e);case n.ALPHANUMERIC:return a.getBitsLength(e);case n.KANJI:return s.getBitsLength(e);case n.BYTE:return i.getBitsLength(e)}}function g(e){return e.reduce(function(e,t){const o=e.length-1>=0?e[e.length-1]:null;return o&&o.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function m(e){const t=[];for(let o=0;o<e.length;o++){const r=e[o];switch(r.mode){case n.NUMERIC:t.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:t.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:t.push([r,{data:r.data,mode:n.BYTE,length:p(r.data)}]);break;case n.BYTE:t.push([{data:r.data,mode:n.BYTE,length:p(r.data)}])}}return t}function y(e,t){const o={},r={start:{}};let a=["start"];for(let i=0;i<e.length;i++){const s=e[i],c=[];for(let e=0;e<s.length;e++){const l=s[e],u=""+i+e;c.push(u),o[u]={node:l,lastCount:0},r[u]={};for(let e=0;e<a.length;e++){const i=a[e];o[i]&&o[i].node.mode===l.mode?(r[i][u]=h(o[i].lastCount+l.length,l.mode)-h(o[i].lastCount,l.mode),o[i].lastCount+=l.length):(o[i]&&(o[i].lastCount=l.length),r[i][u]=h(l.length,l.mode)+4+n.getCharCountIndicator(l.mode,t))}}a=c}for(let n=0;n<a.length;n++)r[a[n]].end=0;return{map:r,table:o}}function _(e,t){let o;const c=n.getBestModeForData(e);if((o=n.from(t,c))!==n.BYTE&&o.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(o)+".\n Suggested mode is: "+n.toString(c));switch(o!==n.KANJI||l.isKanjiModeEnabled()||(o=n.BYTE),o){case n.NUMERIC:return new r(e);case n.ALPHANUMERIC:return new a(e);case n.KANJI:return new s(e);case n.BYTE:return new i(e)}}o.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(_(t,null)):t.data&&e.push(_(t.data,t.mode)),e},[])},o.fromString=function(e,t){const n=y(m(f(e,l.isKanjiModeEnabled())),t),r=u.find_path(n.map,"start","end"),a=[];for(let o=1;o<r.length-1;o++)a.push(n.table[r[o]].node);return o.fromArray(g(a))},o.rawSplit=function(e){return o.fromArray(f(e,l.isKanjiModeEnabled()))}},{"./alphanumeric-data":115,"./byte-data":118,"./kanji-data":124,"./mode":126,"./numeric-data":127,"./regex":131,"./utils":133,dijkstrajs:67}],133:[function(e,t,o){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];o.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},o.getSymbolTotalCodewords=function(e){return r[e]},o.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},o.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},o.isKanjiModeEnabled=function(){return void 0!==n},o.toSJIS=function(e){return n(e)}},{}],134:[function(e,t,o){o.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},{}],135:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-code"),a=e("./error-correction-level"),i=e("./mode"),s=e("./version-check"),c=n.getBCHDigit(7973);function l(e,t,n){for(let r=1;r<=40;r++)if(t<=o.getCapacity(r,n,e))return r}function u(e,t){return i.getCharCountIndicator(e,t)+4}function p(e,t){let o=0;return e.forEach(function(e){const n=u(e.mode,t);o+=n+e.getBitsLength()}),o}function d(e,t){for(let n=1;n<=40;n++)if(p(e,n)<=o.getCapacity(n,t,i.MIXED))return n}o.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},o.getCapacity=function(e,t,o){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===o&&(o=i.BYTE);const a=8*(n.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(o===i.MIXED)return a;const c=a-u(o,e);switch(o){case i.NUMERIC:return Math.floor(c/10*3);case i.ALPHANUMERIC:return Math.floor(c/11*2);case i.KANJI:return Math.floor(c/13);case i.BYTE:default:return Math.floor(c/8)}},o.getBestVersionForData=function(e,t){let o;const n=a.from(t,a.M);if(Array.isArray(e)){if(e.length>1)return d(e,n);if(0===e.length)return 1;o=e[0]}else o=e;return l(o.mode,o.getLength(),n)},o.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-c>=0;)t^=7973<<n.getBCHDigit(t)-c;return e<<12|t}},{"./error-correction-code":119,"./error-correction-level":120,"./mode":126,"./utils":133,"./version-check":134}],136:[function(e,t,o){const n=e("./utils");function r(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function a(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}o.render=function(e,t,o){let i=o,s=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(s=a()),i=n.getOptions(i);const c=n.getImageWidth(e.modules.size,i),l=s.getContext("2d"),u=l.createImageData(c,c);return n.qrToImageData(u.data,e,i),r(l,s,c),l.putImageData(u,0,0),s},o.renderToDataURL=function(e,t,n){let r=n;void 0!==r||t&&t.getContext||(r=t,t=void 0),r||(r={});const a=o.render(e,t,r),i=r.type||"image/png",s=r.rendererOpts||{};return a.toDataURL(i,s.quality)}},{"./utils":138}],137:[function(e,t,o){const n=e("./utils");function r(e,t){const o=e.a/255,n=t+'="'+e.hex+'"';return o<1?n+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':n}function a(e,t,o){let n=e+t;return void 0!==o&&(n+=" "+o),n}function i(e,t,o){let n="",r=0,i=!1,s=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%t),u=Math.floor(c/t);l||i||(i=!0),e[c]?(s++,c>0&&l>0&&e[c-1]||(n+=i?a("M",l+o,.5+u+o):a("m",r,0),r=0,i=!1),l+1<t&&e[c+1]||(n+=a("h",s),s=0)):r++}return n}o.render=function(e,t,o){const a=n.getOptions(t),s=e.modules.size,c=e.modules.data,l=s+2*a.margin,u=a.color.light.a?"<path "+r(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",p="<path "+r(a.color.dark,"stroke")+' d="'+i(c,s,a.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+p+"</svg>\n";return"function"==typeof o&&o(null,f),f}},{"./utils":138}],138:[function(e,t,o){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const o=parseInt(t.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:255&o,hex:"#"+t.slice(0,6).join("")}}o.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:o,scale:o?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},o.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},o.getImageWidth=function(e,t){const n=o.getScale(e,t);return Math.floor((e+2*t.margin)*n)},o.qrToImageData=function(e,t,n){const r=t.modules.size,a=t.modules.data,i=o.getScale(r,n),s=Math.floor((r+2*n.margin)*i),c=n.margin*i,l=[n.color.light,n.color.dark];for(let o=0;o<s;o++)for(let t=0;t<s;t++){let u=4*(o*s+t),p=n.color.light;o>=c&&t>=c&&o<s-c&&t<s-c&&(p=l[a[Math.floor((o-c)/i)*r+Math.floor((t-c)/i)]?1:0]),e[u++]=p.r,e[u++]=p.g,e[u++]=p.b,e[u]=p.a}}},{}],139:[function(e,t,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.SimpleCrypto=void 0;var r=e("crypto-js"),a=function(){function e(e){if(void 0===e)throw new Error("SimpleCrypto object MUST BE initialised with a SECRET KEY.");this._dataBuffer="",this._encoder=r.enc.Utf8,this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this._keySize=256,this._iterations=100}return e.sanitiseData=function(e){if(null==e)throw new Error("There is no data provided. Process halted.");var t="object"==typeof e?JSON.stringify(e):"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString():null;if(null===t)throw new Error("Invalid data type. Only object, string, number and boolean data types are allowed.");return t},e.transform=function(e){if("true"===e.toLowerCase()||"false"===e.toLowerCase())return"true"===e.toLowerCase();try{return JSON.parse(e)}catch(t){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)&&!isNaN(parseFloat(e))?parseFloat(e):e}},Object.defineProperty(e,"encoders",{get:function(){return n({Default:r.enc.Utf8},r.enc)},enumerable:!1,configurable:!0}),e.generateRandom=function(e,t){void 0===e&&(e=128),void 0===t&&(t=!1);var o=r.lib.WordArray.random(e/8);return t?o:o.toString()},e.generateRandomString=function(t){return void 0===t&&(t=128),e.generateRandom(t,!1)},e.generateRandomWordArray=function(t){return void 0===t&&(t=128),e.generateRandom(t,!0)},e.prototype._decrypt=function(){if(this._dataBuffer.length<=64)throw new Error("Invalid cipher text. Decryption halted.");var t=r.enc.Hex.parse(this._dataBuffer.substr(0,32)),o=r.enc.Hex.parse(this._dataBuffer.substr(32,32)),n=this._dataBuffer.substring(64,this._dataBuffer.length-64),a=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),i=this._dataBuffer.substring(this._dataBuffer.length-64),s=this._dataBuffer.substring(0,this._dataBuffer.length-64);if(i!=(0,r.HmacSHA256)(s,a).toString())throw new Error("Invalid encrypted text received. Decryption halted.");var c=r.AES.decrypt(n,a,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC});return e.transform(c.toString(e.encoders.Default))},e.prototype._encrypt=function(){var t=e.generateRandom(128,!0),o=e.generateRandom(128,!0),n=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),a=r.AES.encrypt(this._dataBuffer,n,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC}),i=t.toString()+o.toString()+a.toString();return i+(0,r.HmacSHA256)(i,n).toString()},e.prototype.decrypt=function(e,t,o){var n=this,r=function(e){"boolean"!=typeof e&&n.setEncoder(e)};try{return void 0!==e&&this.update(e),void 0!==t&&r(t),void 0!==o&&r(o),this._decrypt()}catch(a){throw a}},e.prototype.encrypt=function(e){try{return void 0!==e&&this.update(e),this._encrypt()}catch(t){throw t}},e.prototype.decryptObject=function(e){return this.update(e).decrypt()},e.prototype.encryptObject=function(e){return this.update(e).encrypt()},e.prototype.append=function(t){try{return this._dataBuffer=this._dataBuffer+e.sanitiseData(t),this}catch(o){throw o}},e.prototype.update=function(t){try{return this._dataBuffer=e.sanitiseData(t),this}catch(o){throw o}},e.prototype.setEncoder=function(e){return this._encoder=e,this},e.prototype.setSecret=function(e){return this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this},e}();o.SimpleCrypto=a,o.default=a},{"crypto-js":41}],140:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(o,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(o,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(o,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(o,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(o,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return p.default}});var n=d(e("./v1.js")),r=d(e("./v3.js")),a=d(e("./v4.js")),i=d(e("./v5.js")),s=d(e("./nil.js")),c=d(e("./version.js")),l=d(e("./validate.js")),u=d(e("./stringify.js")),p=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":142,"./parse.js":143,"./stringify.js":147,"./v1.js":148,"./v3.js":149,"./v4.js":151,"./v5.js":152,"./validate.js":153,"./version.js":154}],141:[function(e,t,o){"use strict";function n(e){const t=[],o=32*e.length;for(let n=0;n<o;n+=8){const o=e[n>>5]>>>n%32&255,r=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(r)}return t}function r(e){return 15+(e+64>>>9<<4)}function a(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let o=1732584193,n=-271733879,a=-1732584194,i=271733878;for(let r=0;r<e.length;r+=16){const t=o,c=n,f=a,h=i;o=l(o,n,a,i,e[r],7,-680876936),i=l(i,o,n,a,e[r+1],12,-389564586),a=l(a,i,o,n,e[r+2],17,606105819),n=l(n,a,i,o,e[r+3],22,-1044525330),o=l(o,n,a,i,e[r+4],7,-176418897),i=l(i,o,n,a,e[r+5],12,1200080426),a=l(a,i,o,n,e[r+6],17,-1473231341),n=l(n,a,i,o,e[r+7],22,-45705983),o=l(o,n,a,i,e[r+8],7,1770035416),i=l(i,o,n,a,e[r+9],12,-1958414417),a=l(a,i,o,n,e[r+10],17,-42063),n=l(n,a,i,o,e[r+11],22,-1990404162),o=l(o,n,a,i,e[r+12],7,1804603682),i=l(i,o,n,a,e[r+13],12,-40341101),a=l(a,i,o,n,e[r+14],17,-1502002290),o=u(o,n=l(n,a,i,o,e[r+15],22,1236535329),a,i,e[r+1],5,-165796510),i=u(i,o,n,a,e[r+6],9,-1069501632),a=u(a,i,o,n,e[r+11],14,643717713),n=u(n,a,i,o,e[r],20,-373897302),o=u(o,n,a,i,e[r+5],5,-701558691),i=u(i,o,n,a,e[r+10],9,38016083),a=u(a,i,o,n,e[r+15],14,-660478335),n=u(n,a,i,o,e[r+4],20,-405537848),o=u(o,n,a,i,e[r+9],5,568446438),i=u(i,o,n,a,e[r+14],9,-1019803690),a=u(a,i,o,n,e[r+3],14,-187363961),n=u(n,a,i,o,e[r+8],20,1163531501),o=u(o,n,a,i,e[r+13],5,-1444681467),i=u(i,o,n,a,e[r+2],9,-51403784),a=u(a,i,o,n,e[r+7],14,1735328473),o=p(o,n=u(n,a,i,o,e[r+12],20,-1926607734),a,i,e[r+5],4,-378558),i=p(i,o,n,a,e[r+8],11,-2022574463),a=p(a,i,o,n,e[r+11],16,1839030562),n=p(n,a,i,o,e[r+14],23,-35309556),o=p(o,n,a,i,e[r+1],4,-1530992060),i=p(i,o,n,a,e[r+4],11,1272893353),a=p(a,i,o,n,e[r+7],16,-155497632),n=p(n,a,i,o,e[r+10],23,-1094730640),o=p(o,n,a,i,e[r+13],4,681279174),i=p(i,o,n,a,e[r],11,-358537222),a=p(a,i,o,n,e[r+3],16,-722521979),n=p(n,a,i,o,e[r+6],23,76029189),o=p(o,n,a,i,e[r+9],4,-640364487),i=p(i,o,n,a,e[r+12],11,-421815835),a=p(a,i,o,n,e[r+15],16,530742520),o=d(o,n=p(n,a,i,o,e[r+2],23,-995338651),a,i,e[r],6,-198630844),i=d(i,o,n,a,e[r+7],10,1126891415),a=d(a,i,o,n,e[r+14],15,-1416354905),n=d(n,a,i,o,e[r+5],21,-57434055),o=d(o,n,a,i,e[r+12],6,1700485571),i=d(i,o,n,a,e[r+3],10,-1894986606),a=d(a,i,o,n,e[r+10],15,-1051523),n=d(n,a,i,o,e[r+1],21,-2054922799),o=d(o,n,a,i,e[r+8],6,1873313359),i=d(i,o,n,a,e[r+15],10,-30611744),a=d(a,i,o,n,e[r+6],15,-1560198380),n=d(n,a,i,o,e[r+13],21,1309151649),o=d(o,n,a,i,e[r+4],6,-145523070),i=d(i,o,n,a,e[r+11],10,-1120210379),a=d(a,i,o,n,e[r+2],15,718787259),n=d(n,a,i,o,e[r+9],21,-343485551),o=s(o,t),n=s(n,c),a=s(a,f),i=s(i,h)}return[o,n,a,i]}function i(e){if(0===e.length)return[];const t=8*e.length,o=new Uint32Array(r(t));for(let n=0;n<t;n+=8)o[n>>5]|=(255&e[n/8])<<n%32;return o}function s(e,t){const o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function c(e,t,o,n,r,a){return s((i=s(s(t,e),s(n,a)))<<(c=r)|i>>>32-c,o);var i,c}function l(e,t,o,n,r,a,i){return c(t&o|~t&n,e,t,r,a,i)}function u(e,t,o,n,r,a,i){return c(t&n|o&~n,e,t,r,a,i)}function p(e,t,o,n,r,a,i){return c(t^o^n,e,t,r,a,i)}function d(e,t,o,n,r,a,i){return c(o^(t|~n),e,t,r,a,i)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let o=0;o<t.length;++o)e[o]=t.charCodeAt(o)}return n(a(i(e),8*e.length))}},{}],142:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default="00000000-0000-0000-0000-000000000000"},{}],143:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const o=new Uint8Array(16);return o[0]=(t=parseInt(e.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=255&t,o[4]=(t=parseInt(e.slice(9,13),16))>>>8,o[5]=255&t,o[6]=(t=parseInt(e.slice(14,18),16))>>>8,o[7]=255&t,o[8]=(t=parseInt(e.slice(19,23),16))>>>8,o[9]=255&t,o[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=255&t,o}},{"./validate.js":153}],144:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],145:[function(e,t,o){"use strict";let n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},{}],146:[function(e,t,o){"use strict";function n(e,t,o,n){switch(e){case 0:return t&o^~t&n;case 1:return t^o^n;case 2:return t&o^t&n^o&n;case 3:return t^o^n}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let o=0;o<t.length;++o)e.push(t.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,i=Math.ceil(a/16),s=new Array(i);for(let n=0;n<i;++n){const t=new Uint32Array(16);for(let o=0;o<16;++o)t[o]=e[64*n+4*o]<<24|e[64*n+4*o+1]<<16|e[64*n+4*o+2]<<8|e[64*n+4*o+3];s[n]=t}s[i-1][14]=8*(e.length-1)/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<i;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[c][t];for(let t=16;t<80;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let a=o[0],i=o[1],l=o[2],u=o[3],p=o[4];for(let o=0;o<80;++o){const s=Math.floor(o/20),c=r(a,5)+n(s,i,l,u)+p+t[s]+e[o]>>>0;p=u,u=l,l=r(i,30)>>>0,i=a,a=c}o[0]=o[0]+a>>>0,o[1]=o[1]+i>>>0,o[2]=o[2]+l>>>0,o[3]=o[3]+u>>>0,o[4]=o[4]+p>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},{}],147:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const a=[];for(let i=0;i<256;++i)a.push((i+256).toString(16).substr(1));o.default=function(e,t=0){const o=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!(0,r.default)(o))throw TypeError("Stringified UUID is invalid");return o}},{"./validate.js":153}],148:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(e("./rng.js")),r=a(e("./stringify.js"));function a(e){return e&&e.__esModule?e:{default:e}}let i,s,c=0,l=0;o.default=function(e,t,o){let a=t&&o||0;const u=t||new Array(16);let p=(e=e||{}).node||i,d=void 0!==e.clockseq?e.clockseq:s;if(null==p||null==d){const t=e.random||(e.rng||n.default)();null==p&&(p=i=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=s=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:l+1;const g=f-c+(h-l)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=h,s=d;const m=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;u[a++]=m>>>24&255,u[a++]=m>>>16&255,u[a++]=m>>>8&255,u[a++]=255&m;const y=f/4294967296*1e4&268435455;u[a++]=y>>>8&255,u[a++]=255&y,u[a++]=y>>>24&15|16,u[a++]=y>>>16&255,u[a++]=d>>>8|128,u[a++]=255&d;for(let n=0;n<6;++n)u[a+n]=p[n];return t||(0,r.default)(u)}},{"./rng.js":145,"./stringify.js":147}],149:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(e("./v35.js")),r=a(e("./md5.js"));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,n.default)("v3",48,r.default);o.default=i},{"./md5.js":141,"./v35.js":150}],150:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,o){function a(e,a,s,c){if("string"==typeof e&&(e=i(e)),"string"==typeof a&&(a=(0,r.default)(a)),16!==a.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(a),l.set(e,a.length),(l=o(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){c=c||0;for(let e=0;e<16;++e)s[c+e]=l[e];return s}return(0,n.default)(l)}try{a.name=e}catch(l){}return a.DNS=s,a.URL=c,a},o.URL=o.DNS=void 0;var n=a(e("./stringify.js")),r=a(e("./parse.js"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){e=unescape(encodeURIComponent(e));const t=[];for(let o=0;o<e.length;++o)t.push(e.charCodeAt(o));return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";o.DNS=s;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";o.URL=c},{"./parse.js":143,"./stringify.js":147}],151:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(e("./rng.js")),r=a(e("./stringify.js"));function a(e){return e&&e.__esModule?e:{default:e}}o.default=function(e,t,o){const a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=a[e];return t}return(0,r.default)(a)}},{"./rng.js":145,"./stringify.js":147}],152:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(e("./v35.js")),r=a(e("./sha1.js"));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,n.default)("v5",80,r.default);o.default=i},{"./sha1.js":146,"./v35.js":150}],153:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./regex.js"))&&n.__esModule?n:{default:n};o.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":144}],154:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":153}],155:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jsonSchema=o.fromString=o.empty=o.isUuid=o.regex=o.uuid=void 0;const n=e("util"),r=e("uuid"),a={v4:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,v5:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-5[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u};o.regex=a;const i={v4:{type:"string",pattern:a.v4.toString().slice(1,-2)},v5:{type:"string",pattern:a.v5.toString().slice(1,-2)}};o.jsonSchema=i;const s=n.deprecate(()=>r.v4(),"uuidv4() is deprecated. Use v4() from the uuid module instead.");o.uuid=s;const c=n.deprecate(e=>r.validate(e)&&(4===r.version(e)||5===r.version(e)),"isUuid() is deprecated. Use validate() from the uuid module instead.");o.isUuid=c;const l=n.deprecate(()=>r.NIL,"empty() is deprecated. Use NIL from the uuid module instead.");o.empty=l;const u=n.deprecate((e,t="bb5d0ffa-9a4c-4d7c-8fc2-0a7d2220ba45")=>r.v5(e,t),"fromString() is deprecated. Use v5() from the uuid module instead.");o.fromString=u},{util:4,uuid:140}],156:[function(e,t){(function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=m);var e=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var n=new o,r=Object.freeze({});if(n.set(r,1),1===n.get(r))return void(t.exports=WeakMap);e=!0}}Object.prototype.hasOwnProperty;var a=Object.getOwnPropertyNames,i=Object.defineProperty,s=Object.isExtensible,c="weakmap:",l=c+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),p=new Uint8Array(u);crypto.getRandomValues(p),l=c+"rand:"+Array.prototype.map.call(p,function(e){return(e%36).toString(36)}).join("")+"___"}if(i(Object,"getOwnPropertyNames",{value:function(e){return a(e).filter(y)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(e){return d(e).filter(y)}})}(function(){var e=Object.freeze;i(Object,"freeze",{value:function(t){return _(t),e(t)}});var t=Object.seal;i(Object,"seal",{value:function(e){return _(e),t(e)}});var o=Object.preventExtensions;i(Object,"preventExtensions",{value:function(e){return _(e),o(e)}})})();var f=!1,h=0,g=function(){this instanceof g||S();var e=[],t=[],o=h++;return Object.create(g.prototype,{get___:{value:v(function(n,r){var a,i=_(n);return i?o in i?i[o]:r:(a=e.indexOf(n))>=0?t[a]:r})},has___:{value:v(function(t){var n=_(t);return n?o in n:e.indexOf(t)>=0})},set___:{value:v(function(n,r){var a,i=_(n);return i?i[o]=r:(a=e.indexOf(n))>=0?t[a]=r:(a=e.length,t[a]=r,e[a]=n),this})},delete___:{value:v(function(n){var r,a,i=_(n);return i?o in i&&delete i[o]:!((r=e.indexOf(n))<0||(a=e.length-1,e[r]=void 0,t[r]=t[a],e[r]=e[a],e.length=a,t.length=a,0))})}})};g.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function n(){this instanceof g||S();var t,n=new o,r=void 0,a=!1;return t=e?function(e,t){return n.set(e,t),n.has(e)||(r||(r=new g),r.set(e,t)),this}:function(e,t){if(a)try{n.set(e,t)}catch(o){r||(r=new g),r.set___(e,t)}else n.set(e,t);return this},Object.create(g.prototype,{get___:{value:v(function(e,t){return r?n.has(e)?n.get(e):r.get___(e,t):n.get(e,t)})},has___:{value:v(function(e){return n.has(e)||!!r&&r.has___(e)})},set___:{value:v(t)},delete___:{value:v(function(e){var t=!!n.delete(e);return r&&r.delete___(e)||t})},permitHostObjects___:{value:v(function(e){if(e!==m)throw new Error("bogus call to permitHostObjects___");a=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=g.prototype,t.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=g)}function m(e){e.permitHostObjects___&&e.permitHostObjects___(m)}function y(e){return!(e.substr(0,c.length)==c&&"___"===e.substr(e.length-3))}function _(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[l];if(t&&t.key===e)return t;if(s(e)){t={key:e};try{return i(e,l,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(o){return}}}function v(e){return e.prototype=null,Object.freeze(e)}function S(){f||"undefined"==typeof console||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},{}],DailyBoosterUI:[function(e,t,o){"use strict";cc._RF.push(t,"1b9782GSzhI6ojTGidOEITB","DailyBoosterUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../Services/Ads/Ads"),p=e("../../../Services/Inventory/Inventory"),d=e("../../Dialogs/Script/MessageDialog/MessageDialog"),f=e("../../Dialogs/Script/NgcDialogManager"),h=e("../../OfflineMode/OfflineMode"),g=e("./NgcBoosterItem"),m=e("./NgcBoosterScroll"),y=e("./NgcLuckyBoosterManager"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollingArea=null,t.boosterScroll=null,t.spinButton=null,t.boosterLabel=null,t.inGameLabel=null,t.useBoosterItem=null,t.messageDialog=null,t.messageTargetNode=null,t._posX=0,t._useBoosterItemPos=null,t._isPlayingAnimation=!1,t}return r(t,e),t.prototype.onLoad=function(){y.NgcLuckyBoosterManager.getInstance().init(this),this.createMessageTargetNode(),this.initUseBoosterItem(),this.node.opacity=0,this._posX=this.node.width/2},t.prototype.start=function(){if(this.spinButton.node.parent.children[1]){if(c.NgcBuildConfig.offlineMode||u.NgcAds.inst.isFakeAdsPlatform()){var e=p.NgcInventory.inst.objectTypeTable[y.NO_ADS_SPIN_CURRENCY].picture;console.log(p.NgcInventory.inst.objectTypeTable);var t=this.spinButton.node.children[0],o=t.getComponentInChildren(cc.Sprite),n=t.getComponentInChildren(cc.Label);cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t,o.node.scale=.3)}),n.node.active=!0,u.NgcAds.inst.isFakeAdsPlatform()&&(n.string=""+y.NO_ADS_SPIN_CURRENCY_NUMBER),c.NgcBuildConfig.offlineMode&&(n.string=h.OfflineMode.Config.DailyBoosterPrice.toString())}}else console.error("NGC: Please merge new LuckyBooster.")},t.prototype.update=function(e){this.boosterScroll.update(e)},t.prototype.createMessageTargetNode=function(){this.messageTargetNode=new cc.Node,cc.find("Canvas").addChild(this.messageTargetNode)},t.prototype.initUseBoosterItem=function(){this.useBoosterItem.node.opacity=0,this._useBoosterItemPos=this.useBoosterItem.node.position},t.prototype.onSpinButtonClick=function(){this._isPlayingAnimation||y.NgcLuckyBoosterManager.getInstance().onSpinButtonClick()},t.prototype.enableInGameText=function(e){this.spinButton.node.active=!e,this.boosterLabel.active=!e,this.inGameLabel.active=e},t.prototype.moveBoosterToCharacter=function(e,t){var o=this;this._isPlayingAnimation=!0,this.useBoosterItem.ImageSprite=e,this.useBoosterItem.node.opacity=255,this.useBoosterItem.node.x=this._useBoosterItemPos.x,this.useBoosterItem.node.y=this._useBoosterItemPos.y;var n=l.NgcMain.inst.getWorldPosOfMainCharacter(),r=this.useBoosterItem.node.convertToWorldSpaceAR(cc.v2(0,0)),a=cc.v2(n.x-r.x,n.y-r.y);cc.tween(this.useBoosterItem.node).to(.6,{x:this.useBoosterItem.node.x+a.x,y:this.useBoosterItem.node.y+a.y},{easing:"quartInOut"}).call(function(){o.useBoosterItem.node.opacity=0,t&&t(),o._isPlayingAnimation=!1}).start()},t.prototype.showLuckyBoosterMessage=function(e){return i(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),[4,f.NgcDialogManager.createDialog(d.NgcMessageDialog.dialogType,d.NgcMessageDialog.urlPrefab,d.NgcMessageDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(d.NgcMessageDialog)).init(e,!0),this.messageDialog=o.node,o.show(null,this.messageTargetNode,null,null),[2]}})})},t.prototype.hide=function(){var e=this;this.spinButton.interactable=!1,this._isPlayingAnimation=!0;var t=this._posX-this.node.width;this.node.x=this._posX,cc.tween(this.node).parallel(cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicInOut"}),cc.tween().delay(.15).to(.15,{x:t},{easing:"cubicIn"})).call(function(){e.node.opacity=0,e._isPlayingAnimation=!1}).start()},t.prototype.show=function(){var e=this;this._isPlayingAnimation=!0;var t=this._posX;this.node.opacity=255,this.node.x=this._posX-this.node.width,cc.tween(this.node).parallel(cc.tween().to(.15,{x:t},{easing:"cubicOut"}),cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicOut"})).call(function(){e._isPlayingAnimation=!1,e.spinButton.interactable=!0}).start()},a([S(cc.Node)],t.prototype,"scrollingArea",void 0),a([S(m.NgcBoosterScroll)],t.prototype,"boosterScroll",void 0),a([S(cc.Button)],t.prototype,"spinButton",void 0),a([S(cc.Node)],t.prototype,"boosterLabel",void 0),a([S(cc.Node)],t.prototype,"inGameLabel",void 0),a([S(g.default)],t.prototype,"useBoosterItem",void 0),a([v],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../OfflineMode/OfflineMode":"OfflineMode","./NgcBoosterItem":"NgcBoosterItem","./NgcBoosterScroll":"NgcBoosterScroll","./NgcLuckyBoosterManager":"NgcLuckyBoosterManager"}],DailyRewardManager:[function(e,t,o){"use strict";cc._RF.push(t,"02890RvpgFHr71sZ83Cp+P0","DailyRewardManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyRewardManager=void 0;var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../GameFramework/Scripts/NgcShopManager"),p=e("../../../GameFramework/Scripts/NgcUserInfo"),d=e("../../../SDK/Nano/NanoSrv"),f=e("../../../Services/DailyReward/DailyReward"),h=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),g=e("../../LuckyBooster/Script/NgcLuckyBoosterManager"),m=e("../../NavBar/Script/NavBarManager"),y=e("../../OfflineMode/OfflineMode"),_=e("./DailyRewardUI"),v=cc._decorator,S=v.ccclass,b=v.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dailyRewardUIPrefab=null,t.dailyRewardUI=null,t.isDailyRewardAlreadyShow=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){o.inst.initDailyReward()},t.prototype.initDailyReward=function(){o.inst.dailyRewardUI=cc.instantiate(this.dailyRewardUIPrefab),o.inst.dailyRewardUI.parent=this.node,o.inst.getDailyRewardUIComponent().firstInit(),o.inst.dailyRewardUI.active=!1},t.prototype.getDailyRewardUINode=function(){return o.inst.dailyRewardUI},t.prototype.getDailyRewardUIComponent=function(){return o.inst.dailyRewardUI.getComponent(_.NgcDailyRewardUI)},t.prototype.isDailyRewardActive=function(){return o.inst.getDailyRewardUINode().active},t.prototype.updateInventory=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,l.NgcMain.inst.updateUserInfo()];case 1:return e.sent(),[2]}})})},t.prototype.checkReward=function(){return i(this,void 0,void 0,function(){var e,t,n,r=this;return s(this,function(a){switch(a.label){case 0:return e=o.inst.getDailyRewardUIComponent(),t=!0,d.default.inst._getTotalSessions()<=1&&(t=p.default.totalRoundCount>=parseInt(f.NgcDailyReward.inst.parameters.firstSessionRunsBeforeDisplay)),c.NgcBuildConfig.offlineMode&&(t=y.OfflineMode.GetTotalRoundCount()>y.OfflineMode.Config.RoundBeforeFirstDailyReward),(t=t&&l.NgcMain.inst.appState!==l.AppState.Game)?[4,f.NgcDailyReward.inst.peekCurState()]:[2];case 1:return(n=a.sent()).canClaim||1==parseInt(n.curStep)?e.initUI(f.NgcDailyReward.inst.rewardSchedule,n).then(function(){m.NgcNavBarManager.inst.showAllNavBar(!1),o.inst.getDailyRewardUINode().getComponent(_.NgcDailyRewardUI).show()}).finally(function(){r.dailyRewardLoadFinish()}):this.dailyRewardLoadFinish(),[2]}})})},t.prototype.dailyRewardLoadFinish=function(){},t.prototype.showClaimRewardAnimation=function(e){h.default.inst.showRewardAnimation(e,function(){u.NgcShopManager.getInstance().updateBoughtItem(e.itemID),g.NgcLuckyBoosterManager.getInstance().applyBooster(),g.NgcLuckyBoosterManager.getInstance().checkBoosterUI()},!0)},t.inst=null,a([b(cc.Prefab)],t.prototype,"dailyRewardUIPrefab",void 0),o=a([S],t)}(cc.Component);o.NgcDailyRewardManager=N,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/DailyReward/DailyReward":"DailyReward","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../../NavBar/Script/NavBarManager":"NavBarManager","../../OfflineMode/OfflineMode":"OfflineMode","./DailyRewardUI":"DailyRewardUI"}],DailyRewardUI:[function(e,t,o){"use strict";cc._RF.push(t,"40df3B3TgROXpui1ApnlzGq","DailyRewardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyRewardUI=void 0;var c,l=e("../../../../Scripts/Player/PlayerSkinMgr"),u=e("../../../../Scripts/SoundManager"),p=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=e("../../../GameFramework/Scripts/BuildConfig"),f=e("../../../GameFramework/Scripts/CONSTANTS"),h=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),g=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),m=e("../../../GameFramework/Scripts/NgcShopManager"),y=e("../../../GameFramework/Scripts/NgcUserInfo"),_=e("../../../SDK/Nano/NanoSrv"),v=e("../../../Services/Ads/Ads"),S=e("../../../Services/DailyReward/DailyReward"),b=e("../../../Services/Inventory/Inventory"),N=e("../../../Services/Platform/Platform"),P=e("../../../Services/Telemetry/Telemetry"),I=e("../../Dialogs/Script/DialogBase"),C=e("../../Dialogs/Script/MessageDialog/MessageDialog"),w=e("../../Dialogs/Script/NgcDialogManager"),O=e("../../NavBar/Script/NavBarManager"),T=e("./BigDay"),E=e("./DailyRewardManager"),M=e("./Day"),D=cc._decorator,R=D.ccclass,B=D.property;(function(e){e[e.today=0]="today",e[e.tomorrow=1]="tomorrow",e[e.other=2]="other",e[e.claimed=3]="claimed"})(c||(c={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.smallDays=null,t.bigRewards=null,t.day=null,t.iconVideo=null,t.subClaimNowLabel=null,t.claimButtonLabel=null,t.mainLayout=null,t.videoAdsBtn=null,t.flashLightAnim=null,t.DAILYREWARD_TEXTURE_PATH="Texture/DailyReward/",t.SMALL_DAY_COUNT=6,t.SKIN_SCALE=1.5,t.SKIN_TOP_ALIGN=43,t.curStateResult=null,t.rewardSchedule_=null,t.rewardIsCurrency=!0,t.todayRewardInfo=null,t._isAlreadyClaimed=!1,t._isAlreadyClicked=!1,t}return r(t,e),t.prototype.show=function(){this._isAlreadyClaimed=!1,this._isAlreadyClicked=!1,e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,function(){},!1)},t.prototype.firstInit=function(){for(var e=0;e<this.SMALL_DAY_COUNT;e++)cc.instantiate(this.day).parent=this.smallDays},t.prototype.initUI=function(e,t){return i(this,void 0,void 0,function(){var o,n,r,a,i,l,u,d,f,g,m=this;return s(this,function(s){switch(s.label){case 0:this.rewardSchedule_=e,this.curStateResult=t,console.log("@@@@@@@@@@@@@@@@@@@ initUI this.curStateResult ",this.curStateResult),o=this.smallDays,n=parseInt(t.curStep),r=n%7,a=Math.floor(n/7),0===r&&a>0&&(a-=1),i=0,s.label=1;case 1:return i<o.childrenCount?(void 0,l=0==r?c.claimed:i==r-1?c.today:i==r?c.tomorrow:i<r-1?c.claimed:c.other,u=e[i+1+7*a+""],(d=o.children[i].getComponent(M.NgcDay)).dayLabel.subText=" "+(i+1),d.dayLabel.setLocalizedText("DLR_DAY"),d.timeRemaining.node.active=!1,[4,this.updateDayStatus(d,l,u)]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return f=6==r?c.tomorrow:0==r?c.today:c.other,g=this.bigRewards.getComponent(T.NgcBigDay),[4,this.updateBigDayStatus(g,f,e[7*a+7])];case 5:return s.sent(),this.subClaimNowLabel.node.active=!0,this.subClaimNowLabel.node.opacity=0,this.subClaimNowLabel.node.getComponent(cc.Button).interactable=!1,this.flashLightAnim.active=this.iconVideo.active=p.default.inst&&p.default.inst.isAdsPoincutAvailable(p.NgcPointcuts.videoDaily,v.AdsType.VideoReward)&&this.rewardIsCurrency,v.NgcAds.inst&&v.NgcAds.inst.isFakeAdsPlatform()&&(this.flashLightAnim.active=!1,this.iconVideo.active=!1),this.iconVideo.active?(this.claimButtonLabel.getComponent(h.NgcLabelLocalized).subText=" x2",this.claimButtonLabel.getComponent(h.NgcLabelLocalized).setLocalizedText("DLR_CLAIM"),setTimeout(function(){cc.tween(m.subClaimNowLabel.node).to(1,{opacity:255}).call(function(){m.subClaimNowLabel.node.getComponent(cc.Button).interactable=!0}).start()},2e3)):(this.claimButtonLabel.getComponent(h.NgcLabelLocalized).subText="",this.claimButtonLabel.getComponent(h.NgcLabelLocalized).setLocalizedText("DLR_CLAIM"),this.subClaimNowLabel.node.active=!1),[2]}})})},t.prototype.updateDayStatus=function(e,t,o){var n=this;return e.today.active=t===c.today,e.tomorrow.active=t===c.tomorrow,e.other.active=t===c.other||t===c.claimed,e.item.active=t!==c.claimed,e.claimed.active=t===c.claimed,new Promise(function(r){var a=n.getRewardInFunctionString(o.reward);if(null===a)return n.todayRewardInfo=null,console.log("[DailyRewardUI] `updateDayStatus` - Reward not FOUND"),void r();if(b.NgcInventory.inst.objectTypeTable[a.itemID]){switch(t===c.today&&(n.todayRewardInfo=a,n.rewardIsCurrency=b.NgcInventory.inst.objectTypeTable[a.itemID].type==f.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),e.itemCount.string=a.count,b.NgcInventory.inst.objectTypeTable[a.itemID].type){case f.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE:e.itemCount.getComponent(h.NgcLabelLocalized).setLocalizedText(l.default.getSkinLocalizedName(a.itemID)),e.itemIcon.node.scale=n.SKIN_SCALE,e.itemIcon.node.getComponent(cc.Widget).top=n.SKIN_TOP_ALIGN}var i=b.NgcInventory.inst.objectTypeTable[a.itemID].picture;cc.loader.loadRes(i,cc.SpriteFrame,function(t,o){t?r():(r(),e.itemIcon.spriteFrame=o)})}else console.log("[DailyRewardUI] `updateDayStatus` rewardInfo.itemID = "+a.itemID+" not found")})},t.prototype.updateBigDayStatus=function(e,t,o){var n=this;return e.today.active=t===c.today,e.tomorrow.active=t===c.tomorrow,e.other.active=t===c.other,e.dayLabel.subText=" 7",e.dayLabel.setLocalizedText("DLR_DAY"),e.timeRemaining.node.active=!1,e.items.active=!0,e.specialReward.active=!1,new Promise(function(r){try{e.items.children[1].active=!1,e.items.children[2].active=!1;var a=e.itemIcon,i=e.multiNum,s=n.getRewardInFunctionString(o.reward);if(null===s)return console.log("[DailyRewardUI] `updateDayStatus` - Reward not FOUND"),void r();b.NgcInventory.inst.objectTypeTable[s.itemID].type==f.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE?i.string=g.NgcLocalizedManager.t(l.default.getSkinLocalizedName(s.itemID)).text:i.string="x"+s.count,t===c.today&&(n.rewardIsCurrency=b.NgcInventory.inst.objectTypeTable[s.itemID].type==f.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY);var u=b.NgcInventory.inst.objectTypeTable[s.itemID].picture;cc.loader.loadRes(u,cc.SpriteFrame,function(e,t){e?r():(a.spriteFrame=t,r())})}catch(p){return console.log(p.message),void r()}})},t.prototype.onButtonClaimClick=function(e,t){return i(this,void 0,void 0,function(){var o,n,r,a,i,c=this;return s(this,function(s){switch(s.label){case 0:return this._isAlreadyClicked?[2]:this._isAlreadyClaimed?[2]:window.isAdsBlocked?[4,w.NgcDialogManager.showAdsReminderMsg(this.claimButtonLabel.node)]:[3,2];case 1:return s.sent(),[2];case 2:return this._isAlreadyClicked=!0,"ads"==t&&this.iconVideo.active&&v.NgcAds.inst?v.NgcAds.inst.waitingNewVideo?(o=d.NgcBuildConfig.services.Ads.timeWaitNewVideo-(Date.now()-v.NgcAds.inst.timeStartWaitNewVideo)/1e3,o=Math.round(o),[4,w.NgcDialogManager.createDialog(C.NgcMessageDialog.dialogType,C.NgcMessageDialog.urlPrefab,C.NgcMessageDialog.bundleName)]):[3,4]:[3,5];case 3:return n=s.sent(),(r=n.getComponent(C.NgcMessageDialog)).init(null),g.NgcLocalizedManager.setTextKey(r.labelLocalized,"ADS_COOLDOWN",[o.toString()],["xx"]),r.show(null,e.target,null,null),this._isAlreadyClicked=!1,[2];case 4:return y.default.updateAdsInfo(),a=null,i=null,this.todayRewardInfo&&(a=this.todayRewardInfo.itemID,i=parseInt(this.todayRewardInfo.count)),p.default.inst.show(p.NgcPointcuts.videoDaily,v.AdsType.VideoReward,a,i,null,function(e){e&&c.claimReward(!0),c._isAlreadyClicked=!1}),[3,6];case 5:this.claimReward(!1),s.label=6;case 6:return[2]}})})},t.prototype.claimReward=function(e){return void 0===e&&(e=!1),i(this,void 0,void 0,function(){var t,o,n,r;return s(this,function(a){switch(a.label){case 0:return this._isAlreadyClaimed=!0,t=this,O.NgcNavBarManager.inst.showAllNavBar(!0),this.rewardIsCurrency&&u.SoundManager.inst.playSoundWithClip(u.SoundManager.inst.CollectCoinClip,.7),[4,S.NgcDailyReward.inst.checkIn(e)];case 1:return(o=a.sent()).hasOwnProperty("data")&&(o=o.data),console.log("Daily checkin result: "+JSON.stringify(o)),[4,b.NgcInventory.inst.forceFetchInventory()];case 2:return a.sent(),[4,E.NgcDailyRewardManager.inst.updateInventory()];case 3:return a.sent(),n={itemID:o&&o[0]?o[0].details.itemID:void 0,count:parseInt(o&&o[0]?o[0].details.count:void 0)},r={multiplierOffer:1,itemRewardID:n.itemID,itemRewardValue:n.count,stepID:t.curStateResult.curStep,ViewedAd:e},t.hide(),P.NgcTelemetry.inst.LogEvent_DailyLoginReward(r),P.NgcTelemetry.inst.LogEvent_OnboardingDailyloginCollected(r),E.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow||(E.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow=!0,t.uploadDailyRewardIsAlreadyFirstShow()),l.default.listHeroes.includes(n.itemID)&&(m.NgcShopManager.getInstance().updateBoughtItem(n.itemID),m.NgcShopManager.getInstance().updateShop()),E.NgcDailyRewardManager.inst.showClaimRewardAnimation(n),N.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_DLRCLAIM:{viewedAd:e}}),"*"),[2]}})})},t.prototype.getRewardInFunctionString=function(e){if(e.match(/get-item\((.+)\)/i)){var t=RegExp.$1.split(",").map(function(e){return e.trim()});return{itemID:t[0],count:t[1]}}return null},t.prototype.uploadDailyRewardIsAlreadyFirstShow=function(){_.default.inst.servicePost("/playerdata",JSON.stringify({_isAlreadyFirstShow:!0}),function(e){e||console.log("update _isAlreadyFirstShow success")})},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:}},a([B(cc.Node)],t.prototype,"smallDays",void 0),a([B(cc.Node)],t.prototype,"bigRewards",void 0),a([B(cc.Prefab)],t.prototype,"day",void 0),a([B(cc.Node)],t.prototype,"iconVideo",void 0),a([B(cc.Label)],t.prototype,"subClaimNowLabel",void 0),a([B(cc.Label)],t.prototype,"claimButtonLabel",void 0),a([B(cc.Node)],t.prototype,"mainLayout",void 0),a([B(cc.Node)],t.prototype,"videoAdsBtn",void 0),a([B(cc.Node)],t.prototype,"flashLightAnim",void 0),a([R],t)}(I.NgcDialogBase);o.NgcDailyRewardUI=A,cc._RF.pop()},{"../../../../Scripts/Player/PlayerSkinMgr":"PlayerSkinMgr","../../../../Scripts/SoundManager":"SoundManager","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/DailyReward/DailyReward":"DailyReward","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./BigDay":"BigDay","./DailyRewardManager":"DailyRewardManager","./Day":"Day"}],DailyReward_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"016adf++vJBuKvxk7V5gHL1","DailyReward_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Core/Utils"),l=e("../../GameFramework/Scripts/BuildConfig"),u=e("../../SDK/Nano/NanoSrv"),p=e("./DailyReward"),d=e("../../../NanoGameCore/SDK/SDK"),f=e("../../Services/Inventory/Inventory"),h=e("../Platform/Platform"),g=e("../../GameFramework/Scripts/NgcUserInfo"),m=e("../../CrossFeatures/OfflineMode/OfflineMode"),y=cc._decorator,_=y.ccclass,v=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getName=function(){return"NgcDailyReward_impl_NanoSrv"},t.prototype.onLogin=function(e){var t=this,o=function(t){var o=t[0],n=t[1];return e(o?null:"Error parsing daily rewards table",o?n:null)};if(l.NgcBuildConfig.offlineMode)c.LoadAsset("offline:text/daily-reward").then(function(e){return o(t.initRewardScheduleFromCSV(e.text))});else{var n=u.default.inst.getCurGameInfo().dailyRewardTableByCohort[u.default.inst._getCohort()];c.Utils.getHttp(n,null,function(e,n){o(t.initRewardScheduleFromCSV(n))})}},t.prototype.do_cmd_GetItem=function(e,t,o){if(2==e.length){var n=e[0],r=parseInt(e[1]),a=1;t&&t.hasOwnProperty("multiplier")&&(a=parseFloat(t.multiplier));var i=r*a,s=null;if(t&&t.hasOwnProperty("itemSubsitution")&&(s=t.itemSubsitution),s){var c=s(n,r);n=c.itemID,r=c.quantity}t.simulated?o(null,{action:"get-item",details:{itemID:n,count:i}}):f.NgcInventory.inst.addItem(n,i,function(e,t){e?o(e,null):o(null,{action:"get-item",details:t})})}else o("get-item requires 2 args",null)},t.prototype.processCommandSingle=function(e,t,o){var n=c.Utils.parseFunctionCallString(e);if(null!=n){var r=n[0];n.shift();var a={};switch(t.hasOwnProperty(r)&&(a=t[r]),t.simulated&&(a.simulated=!0),r){case"get-item":this.do_cmd_GetItem(n,a,function(e,t){o(e,t)})}}else o("Failed to process string "+e,null)},t.prototype.processCommandListTopAndRecurse=function(e,t,o,n){var r=this,a=e[0];e.shift(),this.processCommandSingle(a,o,function(a,i){a?n(a,null):(t.push(i),e.length>0?r.processCommandListTopAndRecurse(e,t,o,n):n(null,t))})},t.prototype.processCommandSetString=function(e,t,o){var n=e.split("&");n.forEach(function(e,t,o){o[t]=e.trim()}),this.processCommandListTopAndRecurse(n,[],t,o)},t.prototype.getAdsMultiplier=function(){var e=g.default.offlineDailyReward;return e?e.curAdsRewardFactor:this.parameters.adsRewardFactorBase},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype.getCurStep=function(){var e=g.default.offlineDailyReward;return e?e.curStep:this.firstStepID},t.prototype.getElapsedTimeInCurCycleSec=function(){var e=g.default.offlineDailyReward;return e?(d.NgcSDK.getCurTime()-e.curStepStartDate)/1e3:0},t.prototype.getFreeTimeOnResetFailMS=function(){return 36e5*this.parameters.freeHoursOnResetFail},t.prototype._peekCurState=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r,a,i;return s(this,function(s){switch(s.label){case 0:return this.rewardSchedule,l.NgcBuildConfig.offlineMode?[3,2]:(e="/dailyRewards/peekCurState",l.NgcBuildConfig.enabledDebugMode&&(e=c.Utils.addQuery(e,"devTimeOffsetMin="+u.default.inst.devTimeOffsetMinutes.toString())),[4,u.default.inst.serviceGetAsync(e,null)]);case 1:return t=s.sent(),[2,JSON.parse(t).data];case 2:return o=m.OfflineMode.GetDailyRewardState(),n=o.curStep,r=d.NgcSDK.getCurTime()-o.curStepStartDate,a={},m.__DEV_DAILY_REWARD__&&(r=864e5+1),r>1728e5?(console.log("offline over 2 day"),i=this.rewardSchedule[n],a={canClaim:!0,curStep:i.ifFailGotoStep,timeUntilClaim:864e5-this.getFreeTimeOnResetFailMS()/1e3},m.OfflineMode.SetDailyRewardState({curStep:i.ifFailGotoStep,curStepStartDate:d.NgcSDK.getCurTime()})):r>864e5?(console.log("offline daily reward"),a={canClaim:!0,curStep:n,timeUntilClaim:-(1728e5-r)}):(console.log("offline nothing to claim"),a={canClaim:!1,curStep:n,timeUntilClaim:864e5-r}),[2,a]}})})},t.prototype.failCycle=function(){var e=this.getCurStep(),t={curStep:this.rewardSchedule[e].ifFailGotoStep,curStepStartDate:d.NgcSDK.getCurTime()-this.getFreeTimeOnResetFailMS(),curAdsRewardFactor:this.getAdsMultiplier()};return g.default.offlineDailyReward=t,t},t.prototype.doItemSubstitution=function(e,t){var o={itemID:e,quantity:t},n=f.NgcInventory.inst.objectTypeTable[e];if(!n)return console.warn("Item ID "+e+"not found"),o;if("equippable"!=n.type)return o;if(!this.parameters.defaultRewardIfAlreadyOwned)return o;var r=c.Utils.parseFunctionCallString(this.parameters.defaultRewardIfAlreadyOwned);return r&&"get-item"==r[0]?o={itemID:r[1],quantity:parseInt(r[2])}:(console.warn("Error parsing replacement reward"),o)},t.prototype._checkin=function(e){return i(this,void 0,Promise,function(){var t,o,n,r,a,i,p,f,h,g;return s(this,function(s){switch(s.label){case 0:return l.NgcBuildConfig.offlineMode?[3,2]:(t="/dailyRewards/checkin",e&&(t+="?adView=true"),l.NgcBuildConfig.enabledDebugMode&&(t=c.Utils.addQuery(t,"devTimeOffsetMin="+u.default.inst.devTimeOffsetMinutes.toString())),[4,u.default.inst.servicePostAsync(t,"{}")]);case 1:return o=s.sent(),[2,JSON.parse(o)];case 2:return[4,m.OfflineMode.GetDailyRewardState()];case 3:for(n=s.sent(),r=this.rewardSchedule[n.curStep],m.OfflineMode.SetDailyRewardState({curStep:r.ifPassGotoStep,curStepStartDate:d.NgcSDK.getCurTime()}),a=r.reward.split("&"),i=function(){var e=h.substr(0,h.indexOf("(")),t=h.replace(e,"").replace("(","").replace(")","").split(","),o=t[0],n=t[1],r=o.trim(),a=n.trim();return m.OfflineMode.UpdateItem(r,parseFloat(a)),{value:new Promise(function(e){e([{details:{itemID:r,count:a}}])})}},p=0,f=a;p<f.length;p++)if(h=f[p],"object"==typeof(g=i()))return[2,g.value];return[2,[]]}})})},t.prototype._preInit=function(){return new Promise(function(e){e("DailyReward_impl_Nano pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("DailyReward_impl_Nano initialized")})},t.prototype._getRewardForStep=function(e,t,o){if(h.NgcPlatform.isOfflineMode){var n=this.rewardSchedule[e],r={simulated:!0};t&&(r["get-item"]={multiplier:this.getAdsMultiplier(),itemSubsitution:this.doItemSubstitution}),this.processCommandSetString(n.reward,r,function(e,t){e?o(e,null):o(null,t)})}else{var a="/dailyRewards/getRewardForStep";a+="?adView="+t,a+="&stepID="+e,l.NgcBuildConfig.enabledDebugMode&&(a=c.Utils.addQuery(a,"devTimeOffsetMin="+u.default.inst.devTimeOffsetMinutes.toString())),u.default.inst.serviceGet(a,null,function(e,t){e?o(e,null):o(null,JSON.parse(t).data)})}},a([_],t)}(p.NgcDailyReward));o.default=v,cc._RF.pop()},{"../../../NanoGameCore/SDK/SDK":"SDK","../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Inventory/Inventory":"Inventory","../Platform/Platform":"Platform","./DailyReward":"DailyReward"}],DailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"de9e8hM8ilNlYTjUNL3lUkS","DailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyReward=void 0;var c=e("../../Core/nCSV"),l=e("../Service"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardSchedule={},t.parameters={},t.firstStepID=null,t}return r(t,e),t.prototype.peekCurState=function(){return i(this,void 0,void 0,function(){return s(this,function(){return[2,this._peekCurState()]})})},t.prototype.checkIn=function(e){return i(this,void 0,Promise,function(){return s(this,function(){return[2,this._checkin(e)]})})},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getRewardForStep=function(e,t,o){this._getRewardForStep(e,t,function(e,t){o(e,t)})},t.prototype.getFirstStep=function(){return this.rewardSchedule[this.firstStepID]},t.prototype.getTotalSteps=function(){return Object.keys(this.rewardSchedule).length},t.prototype.getNextStep=function(e){var t=this.rewardSchedule[e];return this.rewardSchedule[t.ifPassGotoStep]},t.prototype.initRewardScheduleFromTableAndParams=function(e,t){if(!e)return!1;var o=this;return this.rewardSchedule={},e.forEach(function(e){var t=e.stepID;o.firstStepID||(o.firstStepID=t),o.rewardSchedule.hasOwnProperty(t)?console.warn("Duplicate step ID: "+t):o.rewardSchedule[t]=e}),this.parameters=t,!0},t.prototype.initRewardScheduleFromCSV=function(e){var t=c.nCSV.parseTable(e),o=c.nCSV.parseParameters(e);return[this.initRewardScheduleFromTableAndParams(t,o),t]},t.srvInstances=[],t.inst=null,a([p],t)}(l.NgcService));o.NgcDailyReward=d,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],Day:[function(e,t,o){"use strict";cc._RF.push(t,"c00a4u6jDVC/IBhYpNkB3lk","Day");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDay=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.item=null,t.claimed=null,t.itemIcon=null,t.itemCount=null,t.dayLabel=null,t.timeRemaining=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),a([l(cc.Node)],t.prototype,"today",void 0),a([l(cc.Node)],t.prototype,"tomorrow",void 0),a([l(cc.Node)],t.prototype,"other",void 0),a([l(cc.Node)],t.prototype,"item",void 0),a([l(cc.Node)],t.prototype,"claimed",void 0),a([l(cc.Sprite)],t.prototype,"itemIcon",void 0),a([l(cc.Label)],t.prototype,"itemCount",void 0),a([l(i.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),a([l(cc.Label)],t.prototype,"timeRemaining",void 0),a([c],t)}(cc.Component);o.NgcDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],DebugLog:[function(e,t,o){"use strict";cc._RF.push(t,"2e117PJg2VLXY28jta9/1aT","DebugLog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.displayLines=10,t.textLines=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one debug log!!"):o.inst=this},t.prototype.addLine=function(e){this.textLines.length>=this.displayLines&&this.textLines.splice(0,1),this.textLines.push(e);var t="",o=0;this.textLines.forEach(function(e){o>0&&(t+="\n"),t+=e,o++}),this.label.string=t},t.log=function(e){o.inst&&o.inst.addLine(e)},t.prototype.start=function(){},t.prototype.update=function(){},t.inst=null,a([c(cc.Label)],t.prototype,"label",void 0),a([c],t.prototype,"displayLines",void 0),o=a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],DebugUtils:[function(e,t,o){"use strict";cc._RF.push(t,"1397f/t059NIYUFQvxib44K","DebugUtils");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Main"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugMarkerPointPrefab=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.warn("Too many DebugUtils singletons in scene"):o.inst=this},t.prototype.start=function(){},t.prototype.addDebugMarkerPoint=function(e,t,o){void 0===o&&(o="");var n=cc.instantiate(this.debugMarkerPointPrefab);n.color=t,n.parent=i.Main.inst.mainCanvas.node,n.getComponentInChildren(cc.Label).string=o,n.setPosition(n.parent.convertToNodeSpaceAR(e))},t.inst=null,a([l(cc.Prefab)],t.prototype,"debugMarkerPointPrefab",void 0),o=a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Main":"Main"}],Delegate:[function(e,t,o){"use strict";cc._RF.push(t,"e7155A5sQxDgpKkwBPBLPEu","Delegate"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._fa=[]}return e.prototype.add=function(e){this._fa.indexOf(e)<0&&this._fa.push(e)},e.prototype.del=function(e){var t=this._fa.indexOf(e,0);t>-1&&this._fa.splice(t,1)},e.prototype.call=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var n=this._fa.length-1;n>=0;n--)(e=this._fa)[n].apply(e,t)},e}();o.default=n,cc._RF.pop()},{}],DeliveryRewardAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"d293aIeI4lDFIYQoOeRTuRG","DeliveryRewardAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../DailyReward/Script/RewardClaimAnimation"),s=e("../../EndGameFlow/Reward/RewardUI"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardAnimation=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(o.inst=this,s.NgcEndGameRewardDialog.deliveryRewardInst=this)},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.showRewardAnimation=function(e,t,o,n){void 0===t&&(t=function(){}),void 0===o&&(o=!1),void 0===n&&(n=null);var r=cc.instantiate(this.rewardAnimation),a=r.getComponent(i.NgcRewardClaimAnimation);r.parent=this.node,a.setCustomText(n),a.showClaimRewardAnimation(e,function(){t&&t(),r.parent=null,r.destroy()},o)},t.inst=null,a([u(cc.Prefab)],t.prototype,"rewardAnimation",void 0),o=a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../DailyReward/Script/RewardClaimAnimation":"RewardClaimAnimation","../../EndGameFlow/Reward/RewardUI":"RewardUI"}],DialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"05130mDBq5OJq4t7OUUVtKh","DialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogBase=o.DIALOG_OPEN_TYPE=void 0;var i,s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),l=e("../../../GameFramework/Scripts/NgcScreenManager"),u=e("../../../Services/Ads/Ads"),p=cc._decorator,d=p.ccclass,f=p.property,h=p.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP"})(i=o.DIALOG_OPEN_TYPE||(o.DIALOG_OPEN_TYPE={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogUsingNode=null,t.bgUsingNode=null,t._dialogNodePosition=null,t._outBottomNodePosition=null,t._dWidget=null,t.isHandleKeyDown=!0,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.dialogNode=null,t.dialogOpenType=i.BOUNCE_CENTER,t.dimBackground=null,t.currentScale=1,t._hasResized=!1,t.defaultDialogContentWidth=0,t.needScaledBGNodes=[],t.isShowingBanner=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t,"hasDialogShowing",{get:function(){return o.dialogStacks.length>0},enumerable:!1,configurable:!0}),t.prototype.checkShowBanner=function(e){var t,o;c.default.inst&&c.default.inst.isAdsPoincutAvailable(e,u.AdsType.Banner)?(null===(t=c.default.inst)||void 0===t||t.showBanner(e),this.resizeWidget(!1)):null===(o=c.default.inst)||void 0===o||o.hide()},t.prototype.resizeWidget=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=.75),void 0===o&&(o=!1);var n=this.node.getComponent(cc.Widget),r=l.default.inst.TopBannerWidget.node.height;if(0!==r&&n)if(n.top=r,n.updateAlignment(),e){this.node.scale*=t;var a=this.node.getChildByName("Blank");if(this.bgUsingNode=this.dimBackground||a,this.bgUsingNode&&o){var i=this.bgUsingNode.getComponent(cc.Widget);i&&(i.updateAlignment(),i.enabled=!1,this.bgUsingNode.scale*=1+t)}}else this.node.getComponentsInChildren(cc.Widget).forEach(function(e){return e.enabled&&e.updateAlignment()}),this.isShowingBanner=!0,a=this.node.getChildByName("Blank"),this.bgUsingNode=this.dimBackground||a,this.needScaledBGNodes.concat([this.bgUsingNode]).forEach(function(e){var t=e.getComponent(cc.Widget);if(t){var o=l.default.inst.getTopBarHeight();t.top=-o,t.updateAlignment()}})},t.prototype.show=function(e){var t=this,o=cc.find("Canvas"),n=e||o,r=this.node.getChildByName("Blank");this.bgUsingNode=this.dimBackground||r;var a=this.bgUsingNode.getComponent(cc.Widget);a.target=o,a&&(a.left=a.right=a.top=a.bottom=0,a.updateAlignment());var i=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||i,this.node.active=!0,this.node.parent=n,this.node.setPosition(cc.v2(0,0)),this._dialogNodePosition=cc.v2(this.dialogUsingNode.position);var c=this.dialogUsingNode.scale,l=this.node.parent.getContentSize(),u=80;this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(u=this._dWidget.left);var p=this.defaultDialogContentWidth||this.dialogUsingNode.getContentSize().width;if(s.Utils.log(this.node.name,p+u,u,l),p+u>l.width&&!this._hasResized){var d=l.width/(p+u);this.dialogUsingNode.scale*=d,c=this.dialogUsingNode.scale,this._hasResized=!0}cc.view.setResizeCallback(function(){t.rescale()}),this.showPopup(this.dialogUsingNode,c),cc.sys.isNative&&this.isHandleKeyDown&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},t.prototype.handleBackKey=function(){console.log("[dialogbase] handleBackKey");var e=o.dialogStacks.length;e>0&&o.dialogStacks[e-1]==this&&this.hide()},t.prototype.hide=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!0),this.isHandleKeyDown&&cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var r=function(){n.node.active=!1,t?(cc.view.setResizeCallback(null),n.node.destroy()):n.dialogUsingNode.scale=n.dialogUsingNode.scale/.9,e&&e(),cc.js.array.remove(o.dialogStacks,n)};if(this.dialogUsingNode&&this.dialogUsingNode.active){switch(this.dialogOpenType){case i.BOUNCE_CENTER:var a=.9*this.dialogUsingNode.scale;cc.tween(this.dialogUsingNode).to(.125,{scale:a}).call(r).start();break;case i.SLIDE_UP:cc.tween(this.dialogUsingNode).to(.25,{position:this._outBottomNodePosition,opacity:255},{easing:"circIn"}).call(r).start()}cc.tween(this.bgUsingNode).to(.25,{opacity:0}).start()}else r()},t.prototype.showPopup=function(e,t){void 0===t&&(t=null);var n=t||1;switch(this.dialogOpenType){case i.BOUNCE_CENTER:e.scale=.9*n,e.opacity=0,this.bgUsingNode.opacity=0,cc.tween(e).to(.25,{scale:n,opacity:255},{easing:"backOut"}).start(),cc.tween(this.bgUsingNode).to(.25,{opacity:150}).start();break;case i.SLIDE_UP:var r=s.Utils.getWorldPos(e),a=-(r.y+e.height/2),c=this._dialogNodePosition.y+a;if(this._outBottomNodePosition=cc.v2(this._dialogNodePosition.x,c),e.setPosition(this._outBottomNodePosition),this._dWidget&&this._dWidget.enabled&&(this._dWidget.enabled=!1,this._dWidget.isAlignBottom)){var l=this._dWidget.bottom+e.scale*e.parent.scale*e.height/2,u=cc.v2(r.x,l);s.Utils.setWorldPos(e,u),this._dialogNodePosition=e.getPosition()}e.setPosition(this._outBottomNodePosition),cc.tween(e).to(.25,{position:this._dialogNodePosition},{easing:"circOut"}).start()}o.dialogStacks.push(this)},t.prototype.rescale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e}catch(t){}},t.urlPrefab="",t.bundleName="",t.dialogType="",t.dialogStacks=[],a([f(cc.Node)],t.prototype,"dialogNode",void 0),a([f({type:cc.Enum(i)})],t.prototype,"dialogOpenType",void 0),a([f(cc.Node)],t.prototype,"dimBackground",void 0),a([f()],t.prototype,"defaultDialogContentWidth",void 0),a([f([cc.Node])],t.prototype,"needScaledBGNodes",void 0),o=a([d,h("NGC/Dialog/DialogBase")],t)}(cc.Component);o.NgcDialogBase=g,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../Services/Ads/Ads":"Ads"}],DialogOnSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"8ba85P4OrtI3rJJUmsu9Rnt","DialogOnSceneBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogOnSceneBase=o.DIALOG_OPEN_TYPE=void 0;var i,s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP"})(i=o.DIALOG_OPEN_TYPE||(o.DIALOG_OPEN_TYPE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogUsingNode=null,t.bgUsingNode=null,t._dialogNodePosition=null,t._outBottomNodePosition=null,t._dWidget=null,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.dialogNode=null,t.dialogOpenType=i.BOUNCE_CENTER,t.dimBackground=null,t.currentScale=1,t._hasResized=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||e},t.prototype.start=function(){this.show()},t.prototype.show=function(e){var t=cc.find("Canvas"),o=e||t,n=this.dialogUsingNode.scale,r=o.getContentSize();console.log("current parentSize ",r),console.log("current this.dialogUsingNode size ",this.dialogUsingNode.getContentSize());var a=80;if(this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(a=this._dWidget.left),this.dialogUsingNode.getContentSize().width+a>r.width&&!this._hasResized){var i=r.width/(this.dialogUsingNode.getContentSize().width+a);this.dialogUsingNode.scale*=i,n=this.dialogUsingNode.scale,this._hasResized=!0}console.log("after scaleFinal ",n)},t.prototype.rescale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e}catch(t){}},t.urlPrefab="",t.bundleName="",t.dialogType="",t.dialogStacks=[],a([l(cc.Node)],t.prototype,"dialogNode",void 0),a([l({type:cc.Enum(i)})],t.prototype,"dialogOpenType",void 0),a([l(cc.Node)],t.prototype,"dimBackground",void 0),a([c,u("NGC/Dialog/DialogOnScene")],t)}(cc.Component);o.NgcDialogOnSceneBase=p,cc._RF.pop()},{}],DigitCountUp:[function(e,t,o){"use strict";cc._RF.push(t,"ed528sK4rdMU6+heZIJuZT0","DigitCountUp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.isDistance=!1,t.isDecimalSeparator=!1,t.fromNum=0,t.toNum=0,t.totaltime=0,t.counter=0,t.isCountDone=!1,t.callbackFunc=null,t.onCompleteFunc=null,t}return r(t,e),t.prototype.reset=function(){this.label.string="",this.isCountDone=!0},t.prototype.countFrom=function(e,t,o,n){e!=t&&(o<=0?console.error("invalid time"):(this.fromNum=e,this.toNum=t,this.totaltime=o,this.counter=0,this.callbackFunc=n,this.isCountDone=!1))},t.prototype.start=function(){},t.prototype.onComplete=function(e){this.onCompleteFunc=e,this.isCountDone&&(this.onCompleteFunc(),this.onCompleteFunc=null)},t.prototype.update=function(e){if(!this.isCountDone){this.counter+=e;var t=this.counter/this.totaltime;t>1&&(t=1,this.onCompleteFunc&&(this.onCompleteFunc(),this.onCompleteFunc=null),this.isCountDone=!0),this.callbackFunc&&this.callbackFunc(t);var o=this.toNum-this.fromNum,n=this.fromNum+o*t;this.label.string=n.toFixed(0),this.isDecimalSeparator&&this.label.string.length>3&&(this.label.string=this.label.string.slice(0,this.label.string.length-3)+"."+this.label.string.slice(this.label.string.length-3)),this.isDistance&&(this.label.string+="m")}},a([l(i.NgcLabelLocalized)],t.prototype,"label",void 0),a([l],t.prototype,"isDistance",void 0),a([l],t.prototype,"isDecimalSeparator",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],DragToControl:[function(e,t,o){"use strict";cc._RF.push(t,"12319rXzAFMAJ1Np88Wlall","DragToControl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ANGLE_MOVING_SPEED=4,t.radius=20,t.finger=null,t.text=null,t._circleCenterLeft=null,t._circleCenterRight=null,t._curCenter=null,t}return r(t,e),t.prototype.start=function(){this._circleCenterLeft=cc.v2(-this.radius,this.finger.y),this._circleCenterRight=cc.v2(this.radius,this.finger.y),this._curCenter=this._circleCenterRight,this._curAngle=0},t.prototype.update=function(){this._curCenter===this._circleCenterRight?(this._curAngle+=this.ANGLE_MOVING_SPEED,180===this._curAngle&&(this._curCenter=this._circleCenterLeft,this._curAngle=0)):(this._curAngle-=this.ANGLE_MOVING_SPEED,0===this._curAngle&&(this._curCenter=this._circleCenterRight,this._curAngle=180)),this._curAngle>360&&(this._curAngle=0),this._curAngle<0&&(this._curAngle=360);var e=this.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(this._curAngle))).mul(this.radius),t=cc.v2(this._curCenter.x,this._curCenter.y).add(e);this.finger.setPosition(t.add(cc.v2(this.finger.width/2-10,-this.finger.height/2)))},t.prototype.polarToCartesian=function(e){var t=[e.x,e.y],o=t[0],n=t[1];return cc.v2(o*Math.cos(n),o*Math.sin(n))},a([c],t.prototype,"radius",void 0),a([c(cc.Node)],t.prototype,"finger",void 0),a([c(cc.Label)],t.prototype,"text",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EmojiAnimationHandler:[function(e,t,o){"use strict";cc._RF.push(t,"e7d344kA+tB8JwbGg2Ci3hz","EmojiAnimationHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnimationFinishedCallback=null,t}return r(t,e),t.prototype.setAnimationFinishedCallback=function(e){this.onAnimationFinishedCallback=e},t.prototype.onEmojiAnimationFinished=function(){this.onAnimationFinishedCallback&&this.onAnimationFinishedCallback()},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],EmojiScrollItem:[function(e,t,o){"use strict";cc._RF.push(t,"38c3agMYBlAaLSPP3IlcCjg","EmojiScrollItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmojiScrollItem=void 0;var i=e("../../../GameFramework/Scripts/CountryFlagsManager"),s=e("../../../GameFramework/Scripts/NgcSceneManager"),c=e("../../../GameFramework/Scripts/NgcUserInfo"),l=e("./Emoji"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.flag=null,t.displayName=null,t.displayFlag=null,t.emojiSkeleton=null,t.bubbleNode=null,t.emotesMgr=null,t.emoji=null,t.emojiComp=null,t}return r(t,e),t.prototype.setEmoji=function(e){this.emojiComp=e,this.emojiComp.node.parent=this.bubbleNode,this.emojiSkeleton=e.node.getComponent(sp.Skeleton)},t.prototype.setEmojiPrefab=function(e){this.emoji=e,this.emojiComp=e.getComponent(l.NgcEmoji),this.emoji.parent=this.bubbleNode,this.emoji.scale=.5,this.emoji.x=0,this.emoji.y=0,this.emojiSkeleton=e.getComponent(sp.Skeleton)},t.prototype.reset=function(e){var t=s.NgcSceneManager.inst.findPlayerByNetID(e.playerNetID),o=s.NgcSceneManager.inst.findPlayerByNetID(e.displayNetID);this.playerName.string=t.getName()||c.default.localUserName,this.flag.spriteFrame=t.getCountryFlag()||i.NgcCountryFlagsManager.inst.getFlagSpriteFrame(i.NgcCountryFlagsManager.localCountry),null!=o?(this.displayName.string=o.getName(),this.displayFlag.spriteFrame=o.getCountryFlag(),this.displayName.node.active=!0,this.displayFlag.node.active=!0):(this.displayName.string="",this.displayName.node.active=!1,this.displayFlag.node.active=!1),console.log(this.playerName.string+"=>"+this.displayName.string),cc.tween(this.node).to(.2,{opacity:255}).start(),this.collapseWhenAnimationCompleted()},t.prototype.collapseWhenAnimationCompleted=function(){var e=this;this.emojiComp.onFinishedAnimation(function(){cc.tween(e.node).to(.2,{opacity:0}).call(function(){e.emotesMgr.emojiPoolArray[e.emojiComp.prefabID].put(e.emoji),e.emoji.parent=null,e.emoji=null,e.emotesMgr.putScrollItemToPool(e),e.emotesMgr.checkAndShowPanelScrollView()}).start()}.bind(this))},a([d(cc.Label)],t.prototype,"playerName",void 0),a([d(cc.Sprite)],t.prototype,"flag",void 0),a([d(cc.Label)],t.prototype,"displayName",void 0),a([d(cc.Sprite)],t.prototype,"displayFlag",void 0),a([d(sp.Skeleton)],t.prototype,"emojiSkeleton",void 0),a([d(cc.Node)],t.prototype,"bubbleNode",void 0),a([p],t)}(cc.Component);o.NgcEmojiScrollItem=f,cc._RF.pop()},{"../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","./Emoji":"Emoji"}],Emoji:[function(e,t,o){"use strict";cc._RF.push(t,"f4616YXl2JJOoYAOfEabkus","Emoji");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmoji=void 0;var i=e("./EmojiAnimationHandler"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiID="",t.emotesMgr=null,t.skeleton=null,t.bubbleNode=null,t.emojiNode=null,t.animationHandler=null,t.isComplete=!1,t}return r(t,e),t.prototype.onLoad=function(){this.skeleton=this.node.getComponent(sp.Skeleton)},t.prototype.update=function(){if(this.bubbleNode){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());0===this.bubbleNode.anchorX&&(e.x-=this.bubbleNode.width/2),this.bubbleNode.setPosition(this.bubbleNode.parent.convertToNodeSpaceAR(e)),this.emojiNode.setPosition(0,0),this.emojiNode.parent=this.bubbleNode.getChildByName("emoji")}},t.prototype.destroyWhenAnimationComplete=function(){var e=this;this.isComplete=!1,this.onFinishedAnimation(function(){e.isComplete||(e.isComplete=!0,e.emotesMgr.putEmojiToPool(e.prefabID,e),cc.tween(e.bubbleNode).to(.1,{scale:.1}).call(function(){e.emotesMgr.putBubbleToPool(e.bubbleNode),e.bubbleNode=null}).start())}.bind(this)),setTimeout(function(){e.destroyAnimation()},3e3)},t.prototype.destroyAnimation=function(){this.isComplete||(this.isComplete=!0,this.emotesMgr.putEmojiToPool(this.prefabID,this),this.bubbleNode&&(this.bubbleNode.scale=.1,this.emotesMgr.putBubbleToPool(this.bubbleNode),this.bubbleNode=null))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.onFinishedAnimation=function(e){this.animationHandler.setAnimationFinishedCallback(e)},a([l(cc.String)],t.prototype,"emojiID",void 0),a([l(i.default)],t.prototype,"animationHandler",void 0),a([c],t)}(cc.Component);o.NgcEmoji=u,cc._RF.pop()},{"./EmojiAnimationHandler":"EmojiAnimationHandler"}],EmotesManager:[function(e,t,o){"use strict";cc._RF.push(t,"f4132+IwSRFx7V7TiX1kHkA","EmotesManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesManager=void 0;var i=e("../../../../globals"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/Network/NgcNetClient"),l=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),u=e("../../../GameFramework/Scripts/NgcGame"),p=e("../../../Services/Platform/Platform"),d=e("../../../Services/Telemetry/Telemetry"),f=e("../../EndGameFlow/Spectator/Script/SpectatorManager"),h=e("./Emoji"),g=e("./EmojiScrollItem"),m=e("../../../GameFramework/Scripts/NgcMain"),y=cc._decorator,_=y.ccclass,v=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiPrefabs=[],t.bubblePrefab=null,t.scrollItemPrefab=null,t.parentForEmojis=null,t.parentForBubble=null,t.scaleRatioInGame=.6,t.emojiPoolArray=[],t.bubblePool=null,t.scrollItemPool=null,t.followPlayerEmojis=[],t.deadPanelEmojis=[],t.scrollItemEmojis=[],t.currentEmotesUIInst=null,t.EMOJI_BROADCAST_MESSAGE_TYPE="send_emoji",t.POOL_INIT_SIZE_EACH_EMOJI=5,t.POOL_INIT_SIZE_BUBBLE=20,t.POOL_INIT_SIZE_SCROLL_ITEM=5,t.MAX_EMOJI_SHOW_FOR_DEAD_PLAYERS=5,t.broadcastNetID="",t._allowScrollView=!0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.error("There are more than 1 EmotesManager!!!"),o.inst=this;for(var e=0;e<this.emojiPrefabs.length;e++){for(var t=new cc.NodePool,n=0;n<this.POOL_INIT_SIZE_EACH_EMOJI;n++){var r=cc.instantiate(this.emojiPrefabs[e]);t.put(r)}this.emojiPoolArray.push(t)}for(this.bubblePool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_BUBBLE;e++){var a=cc.instantiate(this.bubblePrefab);this.bubblePool.put(a)}for(this.scrollItemPool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_SCROLL_ITEM;e++){var i=cc.instantiate(this.scrollItemPrefab);this.scrollItemPool.put(i)}},t.prototype.onDisable=function(){var e=this;this.followPlayerEmojis.forEach(function(t){e.putBubbleToPool(t.bubbleNode),t.bubbleNode=null,e.putEmojiToPool(t.prefabID,t)}),this.scrollItemEmojis.forEach(function(t){e.emojiPoolArray[t.emojiComp.prefabID].put(t.emoji),t.emoji.parent=null,t.emoji=null,e.putScrollItemToPool(t)}),this.followPlayerEmojis=[],this.scrollItemEmojis=[],o.inst.allowScrollView(!0)},t.prototype.start=function(){p.NgcPlatform.isOfflineMode()||(s.NgcBuildConfig.useNgcServer?l.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadCastmessageEmoji_Refactor.bind(this)):c.NgcNetClient.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageEmoji)),this.visibleScrollView(!1)},t.prototype.setBroadcastNetID=function(e){this.broadcastNetID=e},t.prototype.handleBroadcastMessageEmoji=function(e){console.log("@@HandleBroadcastMessageEmoji: "),console.log(e);var t=e.payload;t.playerNetID!==c.NgcNetClient.inst.localPlayerNetID&&(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.handleBroadCastmessageEmoji_Refactor=function(e){cc.log("@@HandleBroadcastMessageEmoji: "),cc.log(e);var t=JSON.parse(e.payload);l.NgcNetClientRefactor.inst.isClientID(e.fromID)||(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.update=function(){var e=this;this.followPlayerEmojis.forEach(function(t){var o=e._getPlayerEmojiPosByID(t.playerNetID);t.setWorldPosition(o)})},t.prototype.init=function(e){this._getPlayerEmojiPosByID=e.getPlayerEmojiPosByID,this._isPlayerDeadByID=e.checkPlayerIsDeadByID,this.setParentForEmojisAndBubble(e.parentForEmojis,e.parentForBubble),this.checkAndShowPanelScrollView()},t.prototype.sendEmoji=function(e,t){var o;o=p.NgcPlatform.isOfflineMode()?i.default.Game.inst.localPlayerNetID:s.NgcBuildConfig.useNgcServer?m.NgcMain.inst.appState===m.AppState.PartyScreen?l.NgcNetClientRefactor.inst.clientID:l.NgcNetClientRefactor.inst.getCombinedNetID():c.NgcNetClient.inst.localPlayerNetID,this.currentEmotesUIInst.mainButtonClicked();var n={emojiID:t,playerNetID:o,currentDisplayNetID:(p.NgcPlatform.isOfflineMode()?this._isPlayerDeadByID(i.default.Game.inst.localPlayerNetID):s.NgcBuildConfig.useNgcServer?this._isPlayerDeadByID(l.NgcNetClientRefactor.inst.getCombinedNetID()):this._isPlayerDeadByID(c.NgcNetClient.inst.localPlayerNetID))&&this._allowScrollView&&null!=f.NgcSpectatorManager.inst?f.NgcSpectatorManager.inst.currDisplayNetID:"",time:(new Date).getTime(),prefabID:e},r=u.NgcGame.inst?u.NgcGame.inst.curGameNetID:"";""!=this.broadcastNetID&&(r=this.broadcastNetID),p.NgcPlatform.isOfflineMode()||(s.NgcBuildConfig.useNgcServer?l.NgcNetClientRefactor.inst.sendNgcBroadcast(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,o):c.NgcNetClient.inst.broadcastMessage(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,r),d.NgcTelemetry.inst.LogEvent_SendEmoji(t)),this.addEmoji(n)},t.prototype.addEmoji=function(e){if(console.log("@@AddEmoji: "),console.log(e),!1===this._isPlayerDeadByID(e.playerNetID)||!this._allowScrollView){var t=this.getBubbleFromPool(),o=(n=this.getEmojiFromPool(e.prefabID)).getComponent(h.NgcEmoji);t.parent=this.parentForBubble,t.scale=.1,t.anchorX=0,cc.tween(t).to(.1,{scale:1}).start(),n.parent=this.parentForEmojis,n.scale=.1,cc.tween(n).to(.1,{scale:this.scaleRatioInGame}).start(),o.destroyWhenAnimationComplete(),o.prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=t,o.emojiNode=n,this.followPlayerEmojis.push(o)}if(this._allowScrollView){var n;this.visibleScrollView(!0),(n=this.getEmojiFromPool(e.prefabID)).scale=.5,(o=n.getComponent(h.NgcEmoji)).prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=null;var r=this.getScrollItemFromPool(),a=r.getComponent(g.NgcEmojiScrollItem);a.setEmojiPrefab(n);var i={playerNetID:e.playerNetID,displayNetID:e.currentDisplayNetID};a.emotesMgr=this,a.reset(i),this.scrollItemEmojis.push(a);var s=this.currentEmotesUIInst.scrollView;r.parent=s.content,s.scrollToBottom()}},t.prototype.allowScrollView=function(e){this._allowScrollView=e},t.prototype.visibleScrollView=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.scrollView&&(this.currentEmotesUIInst.scrollView.node.active=e)},t.prototype.checkAndShowPanelScrollView=function(){this.canShowVisualScollView()?this.visibleScrollView(!0):this.visibleScrollView(!1)},t.prototype.canShowVisualScollView=function(){return this.scrollItemEmojis.length>0},t.prototype.extendEmotesUI=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.setExtendEmotes(e)},t.prototype.getEmojiFromPool=function(e){return this.emojiPoolArray[e].size()>0?this.emojiPoolArray[e].get():cc.instantiate(this.emojiPrefabs[e])},t.prototype.putEmojiToPool=function(e,t){this.followPlayerEmojis.forEach(function(e,o,n){e===t&&n.splice(o,1)}),this.emojiPoolArray[e].put(t.node)},t.prototype.getBubbleFromPool=function(){return this.bubblePool.size()>0?this.bubblePool.get():cc.instantiate(this.bubblePrefab)},t.prototype.putBubbleToPool=function(e){this.bubblePool.put(e)},t.prototype.getScrollItemFromPool=function(){return this.scrollItemPool.size()>0?this.scrollItemPool.get():cc.instantiate(this.scrollItemPrefab)},t.prototype.putScrollItemToPool=function(e){this.scrollItemEmojis.forEach(function(t,o,n){t===e&&n.splice(o,1)}),this.scrollItemPool.put(e.node)},t.prototype.checkIfEmojiIsShowingByNetID=function(){return!1},t.prototype.checkIfScrollEmojiIsShowingByNetID=function(){return!1},t.prototype.setParentForEmojisAndBubble=function(e,t){this.parentForEmojis=e,this.parentForBubble=t},t.inst=null,a([v({type:[cc.Prefab]})],t.prototype,"emojiPrefabs",void 0),a([v(cc.Prefab)],t.prototype,"bubblePrefab",void 0),a([v(cc.Prefab)],t.prototype,"scrollItemPrefab",void 0),a([v(cc.Node)],t.prototype,"parentForEmojis",void 0),a([v(cc.Node)],t.prototype,"parentForBubble",void 0),a([v],t.prototype,"scaleRatioInGame",void 0),o=a([_],t)}(cc.Component);o.NgcEmotesManager=S,cc._RF.pop()},{"../../../../globals":"globals","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","./Emoji":"Emoji","./EmojiScrollItem":"EmojiScrollItem"}],EmotesUI:[function(e,t,o){"use strict";cc._RF.push(t,"97b30cIjQdArqrpZr+YtZMk","EmotesUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesUI=void 0;var i=e("./Emoji"),s=e("./EmotesManager"),c=e("./nodeAnimInfo"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainButton=null,t.emojisBoard=null,t.background=null,t.backgroundGrey=null,t.scrollView=null,t.scrollContainer=null,t.parentOfEmoji=null,t.sizeOfEmoji=64,t.numberOfLines=1,t.nodeAnim=[],t.closeEventNode=null,t._listOfEmoji=[],t.canPickEmoji=!0,t.DEFAULT_SCALE=.6,t.DOWN_SCALE=.4,t.currentScale=1,t._isShowUp=!0,t}return r(t,e),t.prototype.onLoad=function(){this.numberOfEmojis=s.NgcEmotesManager.inst.emojiPrefabs.length;for(var e=0;e<this.numberOfEmojis;e++){var t=cc.instantiate(s.NgcEmotesManager.inst.emojiPrefabs[e]),o=t.getChildByName("bg");null!=o&&(o.active=!0,t.scale=this.DEFAULT_SCALE),t.parent=this.background,t.active=!0,this._listOfEmoji.push(t)}this.background.active=!0,this.backgroundGrey.active=!1,this.canPickEmoji=!0,this.showHideGreyBG();var n=cc.find("Canvas");this.closeEventNode||(this.closeEventNode=this.node.getChildByName("EmotesEventButtonClose")),this.closeEventNode&&(this.closeEventNode.getComponent(cc.Widget).target=n,this.closeEventNode.getComponent(cc.Widget).updateAlignment(),this.closeEventNode.on("touchend",this.onTapDown,this),this.enableTouchOutSide(!0))},t.prototype.onTapDown=function(){s.NgcEmotesManager.inst.extendEmotesUI(!1)},t.prototype.onEnable=function(){s.NgcEmotesManager.inst.currentEmotesUIInst=this},t.prototype.start=function(){var e,t=this;e=this.numberOfEmojis%this.numberOfLines==0?this.numberOfEmojis/this.numberOfLines:Math.floor(this.numberOfEmojis/this.numberOfLines)+1;for(var o=(this.background.width*this.background.scaleX-this.sizeOfEmoji*e)/2+this.sizeOfEmoji/2,n=(this.background.height*this.background.scaleY-this.sizeOfEmoji*this.numberOfLines)/2+this.sizeOfEmoji/2,r=0;r<this.numberOfLines;r++)for(var a=0;a<e;a++)if(!(r*e+a>this.numberOfEmojis)){var i=cc.v2(o+this.sizeOfEmoji*a,n+this.sizeOfEmoji*r);this._listOfEmoji[r*e+a].setPosition(i.x,i.y)}this.mainButton.node.on(cc.Node.EventType.TOUCH_END,this.mainButtonClicked,this),this._listOfEmoji.forEach(function(e,o){e.children[0].on(cc.Node.EventType.TOUCH_END,function(){t.pickEmoji(o)},t)}),this.reScale(),cc.view.setResizeCallback(function(){t.reScale()})},t.prototype.reScale=function(){},Object.defineProperty(t.prototype,"isShowUp",{get:function(){return this._isShowUp},enumerable:!1,configurable:!0}),t.prototype.mainButtonClicked=function(){var e=this;this.nodeAnim.forEach(function(t){t&&t.animShow(!e._isShowUp)}),this._isShowUp=!this._isShowUp,this.enableTouchOutSide(this._isShowUp),this.showHideGreyBG(),cc.tween(this.mainButton.node).to(.1,{scale:.7}).to(.1,{scale:1}).start()},t.prototype.enableTouchOutSide=function(){this.closeEventNode&&(this.closeEventNode.active=this._isShowUp)},t.prototype.addNodeAnim=function(e){this.nodeAnim.push(e)},t.prototype.setExtendEmotes=function(e){!this._isShowUp!=!e&&this.mainButtonClicked()},t.prototype.pickEmoji=function(e){var t=this;if(this.canPickEmoji){this.canPickEmoji=!1,this.showHideGreyBG(),setTimeout(function(){t.canPickEmoji=!0,t.showHideGreyBG()},3e3);var o=this._listOfEmoji[e].getComponent(i.NgcEmoji).emojiID;s.NgcEmotesManager.inst.sendEmoji(e,o),null!=this._listOfEmoji[e].getChildByName("bg")?cc.tween(this._listOfEmoji[e]).to(.05,{scale:this.DOWN_SCALE}).to(.05,{scale:this.DEFAULT_SCALE}).start():cc.tween(this._listOfEmoji[e]).to(.05,{scale:.7}).to(.05,{scale:1}).start()}},t.prototype.showHideGreyBG=function(){this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},t.prototype.enableEmojisBoard=function(e){this.canPickEmoji=e,this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},a([p(cc.Button)],t.prototype,"mainButton",void 0),a([p(cc.Node)],t.prototype,"emojisBoard",void 0),a([p(cc.Node)],t.prototype,"background",void 0),a([p(cc.Node)],t.prototype,"backgroundGrey",void 0),a([p(cc.ScrollView)],t.prototype,"scrollView",void 0),a([p(cc.Node)],t.prototype,"scrollContainer",void 0),a([p(cc.Node)],t.prototype,"parentOfEmoji",void 0),a([p],t.prototype,"sizeOfEmoji",void 0),a([p],t.prototype,"numberOfLines",void 0),a([p([c.NgcNodeAnimInfo])],t.prototype,"nodeAnim",void 0),a([p(cc.Node)],t.prototype,"closeEventNode",void 0),a([u],t)}(cc.Component);o.NgcEmotesUI=d,cc._RF.pop()},{"./Emoji":"Emoji","./EmotesManager":"EmotesManager","./nodeAnimInfo":"nodeAnimInfo"}],Event:[function(e,t,o){"use strict";cc._RF.push(t,"9689dTp4eZL/qTekW6cQQL9","Event"),Object.defineProperty(o,"__esModule",{value:!0}),o.emit=void 0,o.emit=function(e,t){e.forEach(function(e){e&&e(t)})},cc._RF.pop()},{}],Explosion:[function(e,t,o){"use strict";cc._RF.push(t,"2ee41BY4ANCprfsSeEPYkUo","Explosion");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_EXPLOSION_STATE=void 0;var i,s=e("../Game"),c=e("../Maps/MapManager"),l=e("./GameObjectBase"),u=e("./GameObjMgr");(function(e){e[e.Init=0]="Init",e[e.Explosioning=1]="Explosioning"})(i=o.E_EXPLOSION_STATE||(o.E_EXPLOSION_STATE={}));var p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosionSprite=null,t.explosionAnim=null,t.explosionMaterials=[],t.state=i.Init,t.playerOwner=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.init=function(e,t,o,n,r){var a=this;this.objectType=t,this.posInMap=n,this.playerOwner=e,this.explosionMaterials[o.type]?this.explosionSprite.setMaterial(0,this.explosionMaterials[o.type]):cc.error("explosionMaterials of BombType undefine"),s.default.inst.explosions.push(this),this.explosionAnim.on("finished",this.animationFinished,this),this.explosionAnim.play();var i=0;return r.forEach(function(e){e.isDead()||e.posInMap.x!=a.posInMap.x||e.posInMap.y!=a.posInMap.y||(e.collisionWithExplosion(a),e.isLocalHuman()||i++)}),c.default.inst.getMapBoardComponentsByPosInMap(n).forEach(function(e){l.default.isTypePower(e.objectType)&&e.collideWithExplosion(o.posInMap)}),c.default.inst.addObjectToMapBoardComponents(this),i},t.prototype.animationFinished=function(){this.explosionAnim.off("finished",this.animationFinished,this),cc.js.array.remove(s.default.inst.explosions,this),s.default.inst.removeDangerousTile(this.posInMap.x,this.posInMap.y),this.release()},t.prototype.reset=function(){},t.prototype.release=function(){var e;c.default.inst.removeComponentInMapBoard(this),(null===(e=this.renderComponent)||void 0===e?void 0:e.node.getNumberOfRunningActions())>0&&cc.Tween.stopAllByTarget(this.renderComponent.node),this.renderComponent.node.color=cc.Color.WHITE,u.GameObjMgr.inst.putExplosion(this)},t.instantiate=function(){var e=u.GameObjMgr.inst.getExplosion();e||(e=cc.instantiate(u.GameObjMgr.inst.explosionPrefab));var t=e.getComponent(l.default);return t&&(t.renderComponent.enabled||(t.renderComponent.enabled=!0)),e},a([f(cc.Sprite)],t.prototype,"explosionSprite",void 0),a([f(cc.Animation)],t.prototype,"explosionAnim",void 0),a([f({type:[cc.Material],tooltip:"0 = RED; 1 == BLUE"})],t.prototype,"explosionMaterials",void 0),a([d],t)}(l.default);o.default=h,cc._RF.pop()},{"../Game":"Game","../Maps/MapManager":"MapManager","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],FPS:[function(e,t,o){"use strict";cc._RF.push(t,"50da89m2ElKwZ+enWQ29yY1","FPS"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),r=function(){function e(){this._startCountFPSTimer=0,this._isFPSCounterStart=!1,this._frameCounter=0,this._totalFrame=0,this._totalTime=0,this._min=60,this._max=0,this._current=0,this._average=0,this.reset()}return Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"average",{get:function(){return this._average},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._min=60,this._max=0,this._average=0,this._current=0,this._totalFrame=0,this._totalTime=0,this._frameCounter=0,this._startCountFPSTimer=0,this._isFPSCounterStart=!1},e.prototype.update=function(){this._isFPSCounterStart&&(this._frameCounter++,Date.now()-this._startCountFPSTimer>=1e3&&(this._startCountFPSTimer=Date.now(),this._frameCounter>60&&(this._frameCounter=60),this._current=this._frameCounter,this._min=Math.min(this._min,this._frameCounter),this._max=Math.max(this._max,this._frameCounter),this._totalFrame+=this._frameCounter,this._totalTime++,this._average=this._totalFrame/this._totalTime,n.default.inst&&(n.default.inst.setTrackingParams({currentFPS:this._frameCounter,averageFPS:Math.round(this._average)}),n.default.inst.onMeansureFPS(this._average)),this._frameCounter=0)),this._isFPSCounterStart||(this._isFPSCounterStart=!0,this._startCountFPSTimer=Date.now())},e}();o.default=r,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages"}],FacebookSrv:[function(e,t,o){"use strict";cc._RF.push(t,"e03bbVO0NtOWYW5R8nk8HG5","FacebookSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../GameFramework/Scripts/NgcMain"),c=e("../../GameFramework/Scripts/NgcUserInfo"),l=e("../Nano/NanoSrv"),u=e("../SDK"),p=e("../../Services/Platform/Platform"),d=cc._decorator,f=(d.ccclass,d.property,function(e){function t(){var o=e.call(this)||this;if(o.isInitialized=!1,o.statusResponse=null,o.lastName="",o.firstName="",o.pictureUrl="",o.facebookId="",o.friendsData=[],o.dataConflict=null,o.isConflict=!1,o.isLoginPopUpOpen=!1,t.inst){if(p.NgcPlatform.isOfflineMode())return o;cc.error("There are multiple places constructing FacebookSrv!!!")}return t.inst=o,o}return r(t,e),t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return""},t.prototype.getName=function(){return"FacebookSrv"},t.prototype._preInit=function(){var e=this;return new Promise(function(t){e.preInitialized=!0,t("FacebookSrv pre-initialized")})},t.prototype._init=function(e){return new Promise(function(o){var n={appId:e.SDK.FacebookSrv.appID,version:"v12.0",status:!0,cookie:!0,xfbml:!0,autoLogAppEvents:!1};p.NgcPlatform.isOfflineMode()||FB.init(n),t.inst.isInitialized=!0,o("FacebookSrv initialized")})},t.prototype.checkLoginStatus=function(){return new Promise(function(e,o){FB.getLoginStatus(function(n){if(!n)return t.inst.statusResponse=null,void o();t.inst.statusResponse=n,e(null)},!0)})},t.prototype.isConnected=function(){return!!t.inst.statusResponse&&"connected"===t.inst.statusResponse.status},t.prototype._login=function(){return new Promise(function(e,o){if(c.default.socialId&&c.default.facebookAccessToken)t.inst.fetchInfoWithAccessToken(c.default.socialId,c.default.facebookAccessToken).then(function(){t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(c.default.socialId=t.inst.getFacebookId(),c.default.avatarUrl=t.inst.getProfilePictureUrl(),t.inst.sendFriendListToServer(t.inst.getFriendsData()),c.default.localUserName=s.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))},function(){e("err")})},function(){e("err")});else{var n=new Promise(function(e,o){t.inst.isLoginPopUpOpen=!0,FB.login(function(n){console.log(n),t.inst.statusResponse=n,"connected"===n.status?(c.default.facebookAccessToken=t.inst.statusResponse.authResponse.accessToken,e(n.status)):n.status?o(n.status):o(n)},{auth_type:"reauthorize",scope:"user_friends"})});n.then(function(){t.inst.fetchInfo().then(function(){t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(c.default.socialId=t.inst.getFacebookId(),c.default.avatarUrl=t.inst.getProfilePictureUrl(),t.inst.sendFriendListToServer(t.inst.getFriendsData()),c.default.localUserName=s.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})})}),n.catch(function(e){return o(e)}),n.finally(function(){t.inst.isLoginPopUpOpen=!1})}})},t.prototype.reLogin=function(){FB.login(function(e){t.inst.statusResponse=e,c.default.facebookAccessToken=t.inst.statusResponse.authResponse.accessToken},{auth_type:"reauthorize",scope:"user_friends"})},t.prototype.fetchInfoWithAccessToken=function(e,o){return a(this,void 0,void 0,function(){var n;return i(this,function(){return n="/"+e+"/",(o=o||c.default.facebookAccessToken)?[2,new Promise(function(e,r){FB.api(n,"get",{fields:"first_name,last_name,picture.height(200).width(200){url},friends",access_token:o},function(o){if(o.error)console.log("[getFacebookInfo] - response ERROR - "+o.error);else try{return t.inst.firstName=o.first_name,t.inst.lastName=o.last_name,o.hasOwnProperty("picture")&&(t.inst.pictureUrl=o.picture.data.url),o.hasOwnProperty("friends")&&(t.inst.friendsData=o.friends.data),t.inst.facebookId=o.id,void e(null)}catch(n){console.log("Parse response error: "+n),r()}r()})})]:(console.log("FB AccessToken Null to get"),[2,new Promise(function(e){e(null)})])})})},t.prototype.fetchInfo=function(){return new Promise(function(e,o){FB.api("/me/","get",{fields:"first_name,last_name,picture.height(200).width(200){url},friends"},function(n){if(n.error)console.log("[getFacebookInfo] - response ERROR - "+n.error);else try{t.inst.firstName=n.first_name,t.inst.lastName=n.last_name,n.hasOwnProperty("picture")&&(t.inst.pictureUrl=n.picture.data.url),n.hasOwnProperty("friends")&&(t.inst.friendsData=n.friends.data),t.inst.facebookId=n.id,e(null)}catch(r){console.log("Parse response error: "+r),o()}o()})})},t.prototype.getFirstName=function(){return t.inst.firstName},t.prototype.getLastName=function(){return t.inst.lastName},t.prototype.getProfilePictureUrl=function(){return t.inst.pictureUrl},t.prototype.getFriendsData=function(){return t.inst.friendsData},t.prototype.getFacebookId=function(){return t.inst.facebookId},t.prototype.share=function(e){FB.ui({method:"share",href:e},function(e){console.log(e)})},t.prototype.sendInfoToServer=function(){var e=this,o={name:t.inst.getFormatName(),socialId:t.inst.facebookId,avatar:t.inst.pictureUrl,platform:"facebook"},n=!1;return new Promise(function(r,a){l.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(o),function(o,i){if(o)a(o);else{console.log(i),console.log("update info success");var s=JSON.parse(i).data;s&&s.conflict_info&&(n=!0,t.inst.dataConflict=s.conflict_info),e.isConflict=n,r(n)}})})},t.prototype.forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){var o,n,r;return i(this,function(a){switch(a.label){case 0:return o=e?"local":"server",n=t.inst.getFormatName(),r={name:n,socialId:t.inst.facebookId,avatar:t.inst.pictureUrl,platform:"facebook",resolve:o},[4,new Promise(function(o){l.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(r),function(n,r){if(n)o(n);else{if(console.log(r),!e){var a=JSON.parse(r).data;if(a&&a.hasOwnProperty("id")&&(t.inst.dataConflict.id=a.id),a&&a.hasOwnProperty("secretKey")){var i=a.secretKey;c.default.secretKey=i}}console.log("force update info success"),o(null)}})})];case 1:return a.sent(),[2]}})})},t.prototype.sendFriendListToServer=function(e){void 0===e&&(e=this.getFriendsData());var t={_friends:e};l.default.inst.servicePost("/playerdata",JSON.stringify(t),function(e){e||console.log("update friend list success")})},t.prototype.getDataConflict=function(){return t.inst.dataConflict},t.prototype.getFullName=function(){return t.inst.firstName+" "+t.inst.lastName},t.prototype.getFormatName=function(){return c.default.correctNameFormat(t.inst.getFullName())},t.prototype.sendNameToServer=function(){var e={name:t.inst.getFormatName()};l.default.inst.servicePost("/profile",JSON.stringify(e),function(e){e||console.log("update facebook name success")})},t.prototype.sendAvatarToServer=function(){var e={avatar:t.inst.getProfilePictureUrl()};l.default.inst.servicePost("/profile",JSON.stringify(e),function(e){e||console.log("update facebook avatar success")})},t.prototype._logout=function(){return new Promise(function(e){FB.getLoginStatus(function(){FB.logout(function(o){t.inst.statusResponse=o,e(o)})})})},t.inst=null,t}(u.NgcSDK));o.default=f,cc._RF.pop()},{"../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../Nano/NanoSrv":"NanoSrv","../SDK":"SDK"}],FakeNames:[function(e,t,o){"use strict";cc._RF.push(t,"815fen3LpdOSYfphX7Rvb1S","FakeNames");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fakeNamesList=null,t.nameTable={},t.defaultFlatlist=[],t._tempFlatlist=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.fakeNamesList&&this.parseInputFile(),this.initFlatList())},t.prototype.allocRandomPerson=function(){0===this._tempFlatlist.length&&(this._tempFlatlist=i(this.defaultFlatlist));var e=this._tempFlatlist.length,t=s.NgcNetUtils.RandomRange(0,e-1,!0),o=this._tempFlatlist[t];return this._tempFlatlist.splice(t,1),o},t.prototype.initFlatList=function(){var e=this;this.defaultFlatlist=[],Object.keys(this.nameTable).forEach(function(t){var o=e.nameTable[t],n=o.maleNames,r=o.femaleNames;n.forEach(function(o){var n={countryCode:t,name:o,sex:"M"};e.defaultFlatlist.push(n)}),r.forEach(function(o){var n={countryCode:t,name:o,sex:"F"};e.defaultFlatlist.push(n)})}),console.log("Generated flat list of fake names")},t.prototype.addNames=function(e,t,o){var n=null;n=this.nameTable.hasOwnProperty(e)?this.nameTable[e]:{code:e,maleNames:[],femaleNames:[]},t?n.maleNames=n.maleNames.concat(o):n.femaleNames=n.femaleNames.concat(o),this.nameTable[e]=n},t.prototype.parseInputFile=function(){var e=this.fakeNamesList.text.split("\r\n"),t=this;try{e.forEach(function(e){var o=e.split(","),n=o[0];if(null!=n&&0!=n.length){var r=o[1].toLowerCase(),a="Male"==o[2],i=o.splice(3),s=[];i.forEach(function(e){e.length>0&&s.push(e)}),0!=s.length&&t.addNames(r,a,s)}})}catch(o){return console.error("Error reading names file. Format error?"),!1}return!0},t.prototype.start=function(){},t.inst=null,a([u(cc.TextAsset)],t.prototype,"fakeNamesList",void 0),o=a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils"}],FakeRandomNumberGenerator:[function(e,t,o){"use strict";cc._RF.push(t,"b0198ol4LJLc4QFxuojod3r","FakeRandomNumberGenerator"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.seed=12345678,this.setSeed(e)}return e.prototype.randomUnit=function(e,t){return this.seed=16807*this.seed%2147483647,0===arguments.length?this.seed/2147483647:1===arguments.length?this.seed/2147483647*e:this.seed/2147483647*(t-e)+e},e.prototype.setSeed=function(e){this.seed=function(e){for(var t=0,o=e.length,n=0;n<o;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}(e),this.seed=this.seed%2147483647,this.seed<=0&&(this.seed+=2147483646)},e.prototype.randomOfArray=function(e){return e[Math.floor(this.randomUnit()*e.length)]},e.prototype.randromIntRange=function(e,t){return Math.floor(this.randomUnit()*(t-e+1)+e)},e.prototype.shuffleArr=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(this.randomUnit()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}return e},e}();o.default=n,cc._RF.pop()},{}],FloorPlate:[function(e,t,o){"use strict";cc._RF.push(t,"24c5bAQkAlIBqcGO1/kNl2v","FloorPlate");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/MapManager"),s=e("./GameObjectBase"),c=e("./GameObjMgr"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.instantiate=function(e){var t=c.GameObjMgr.inst.getFloorPlate();t||(t=cc.instantiate(c.GameObjMgr.inst.floorPlatePrefab));var o=t.getComponent(s.default);return o&&e?(o.posInMap=e,o.objectType=s.GameObjectType.Floor,i.default.inst.addObjectToMapBoardComponents(o)):cc.log("FloorPlate instantiae without posInMap"),t},t.prototype.release=function(){this.node.getNumberOfRunningActions()>0&&cc.Tween.stopAllByTarget(this.node),this.node.color=cc.Color.WHITE,this.node.opacity=0,i.default.inst.removeComponentInMapBoard(this),c.GameObjMgr.inst.putFloorPlate(this)},a([u],t)}(s.default));o.default=p,cc._RF.pop()},{"../Maps/MapManager":"MapManager","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],Floor:[function(e,t,o){"use strict";cc._RF.push(t,"0feefF2l4BLr7pF4ObARNQC","Floor");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/ThemeManager"),s=e("./GameObjectBase"),c=e("./GameObjMgr"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t}var o;return r(t,e),o=t,t.instantiate=function(){return c.GameObjMgr.inst.getFloor().getComponent(o)},t.prototype.init=function(e,t,o,n,r){this.sprite.spriteFrame=i.default.inst.getFloorSF(),this.node.parent=e,this.node.width=n,this.node.height=r,this.node.setPosition(t,o)},t.prototype.release=function(){c.GameObjMgr.inst.putFloor(this)},a([p(cc.Sprite)],t.prototype,"sprite",void 0),o=a([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../Maps/ThemeManager":"ThemeManager","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],FontsManager:[function(e,t,o){"use strict";cc._RF.push(t,"bd06bTHDMtCkppeaZY3pjQ2","FontsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcFontsManager=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quartc=null,t.defaultFont=null,t.UbisoftSansRegular=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.inst=null,a([c(cc.Font)],t.prototype,"quartc",void 0),a([c(cc.Font)],t.prototype,"defaultFont",void 0),a([c(cc.Font)],t.prototype,"UbisoftSansRegular",void 0),o=a([s],t)}(cc.Component);o.NgcFontsManager=l,cc._RF.pop()},{}],FullScreenButton:[function(e,t,o){"use strict";cc._RF.push(t,"f31c5GvBp5OU52rH6Q1Tg5T","FullScreenButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../NanoGameCore/Core/Utils"),s=e("../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),c=e("../../NanoGameCore/Services/Platform/Platform"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icons=[],t.iconSprite=null,t}var o;return r(t,e),o=t,t.prototype.start=function(){o.inst=this,cc.sys.isMobile?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):c.NgcPlatform&&c.NgcPlatform.inst&&c.NgcPlatform.inst.getName()==i.Utils.enumToString(c.PlatformID,c.PlatformID.Poki)?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):this.node.active=!0},t.prototype.onClick=function(){var e;cc.sys.isMobile||c.NgcPlatform&&c.NgcPlatform.inst&&c.NgcPlatform.inst.getName()==i.Utils.enumToString(c.PlatformID,c.PlatformID.Poki)||(cc.screen.fullScreen()?this.exitFullScreen():this.requestFullScreen(),(null===(e=s.NgcEmotesManager.inst)||void 0===e?void 0:e.currentEmotesUIInst)&&s.NgcEmotesManager.inst.currentEmotesUIInst.onTapDown(null))},t.prototype.exitFullScreen=function(){cc.screen.exitFullScreen(),this.iconSprite.spriteFrame=this.icons[0]},t.prototype.requestFullScreen=function(){cc.screen.requestFullScreen(),this.iconSprite.spriteFrame=this.icons[1]},t.inst=null,a([p(cc.SpriteFrame)],t.prototype,"icons",void 0),a([p(cc.Sprite)],t.prototype,"iconSprite",void 0),o=a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../NanoGameCore/Services/Platform/Platform":"Platform"}],GIF:[function(e,t,o){"use strict";cc._RF.push(t,"c63d8V3c2NPzYNB3sN3b21c","GIF");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GIFCache=o.GIF=o.FileHead=o.FileType=void 0;var a,i=e("./LZW");(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PNG=1]="PNG",e[e.JPG=2]="JPG",e[e.GIF=3]="GIF",e[e.WEBP=4]="WEBP"})(a=o.FileType||(o.FileType={}));var s=function(){function e(){}return e.IMAGE_PNG="89504e47",e.IMAGE_JPG="ffd8ff",e.IMAGE_GIF="474946",e.RIFF="52494646",e.WEBP_RIFF=e.RIFF,e.WEBP_WEBP="57454250",e}();o.FileHead=s;var c=function(){function e(){this._offset=0,this._info={header:"",frames:[],comment:""},this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null,this.id="GIF",this.async=!0}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this.clear(),this._buffer=e,this._view=new Uint8Array(e)},enumerable:!1,configurable:!0}),e.prototype.handle=function(e,t){this.buffer=e,this.getHeader(),this.getScrDesc(),this.getTexture(),0==this._spriteFrames.length?t(new Error("gif\u52a0\u8f7d\u5931\u8d25,\u5e27\u957f\u5ea6\u4e3a0")):t(null,{delays:this._delays,spriteFrames:this._spriteFrames,length:this._info.frames.length})},e.detectFormat=function(e){return-1!=e.indexOf(s.IMAGE_GIF)?a.GIF:-1!=e.indexOf(s.IMAGE_PNG)?a.PNG:-1!=e.indexOf(s.IMAGE_JPG)?a.JPG:-1!=e.indexOf(s.WEBP_RIFF)&&-1!=e.indexOf(s.WEBP_WEBP)?a.WEBP:a.UNKNOWN},e.bytes2HexString=function(e){for(var t="",o=0;o<e.length;o++){var n,r=e[o];1==(n=r<0?(255+r+1).toString(16):r.toString(16)).length&&(n="0"+n),t+=n}return t},e.prototype.getTexture=function(){for(var e=0,t=0,o=this._info.frames;t<o.length;t++){var n=o[t];this.decodeFrame2Texture(n,e++)}},e.prototype.getSpriteFrame=function(e){return this._spriteFrames[e]?this._spriteFrames[e]:this.decodeFrame2Texture(this._info.frames[e],e)},e.prototype.decodeFrame=function(e){var t=this,o=this._context.getImageData(e.img.x,e.img.y,e.img.w,e.img.h);return e.img.m?this._tab=e.img.colorTab:this._tab=this._info.colorTab,i.default.decode(e.img.srcBuf,e.img.codeSize).forEach(function(n,r){o.data[4*r]=t._tab[3*n],o.data[4*r+1]=t._tab[3*n+1],o.data[4*r+2]=t._tab[3*n+2],o.data[4*r+3]=255,e.ctrl.t&&n==e.ctrl.tranIndex&&(o.data[4*r+3]=0)}),o},e.prototype.mergeFrames=function(e,t){var o=t;if(e)for(var n=0;n<o.data.length;n+=4)0==o.data[n+3]&&(o.data[n]=this._lastData.data[n],o.data[n+1]=this._lastData.data[n+1],o.data[n+2]=this._lastData.data[n+2],o.data[n+3]=this._lastData.data[n+3]);return o},e.prototype.dataUrl2SpriteFrame=function(e){var t=new cc.Texture2D,o=new cc.SpriteFrame,n=new Image;return n.src=e,t.initWithElement(n),o.setTexture(t),o},e.prototype.date2SpriteFrame=function(e,t,o){var n=new cc.RenderTexture,r=new cc.SpriteFrame;return n.initWithData(e.data,cc.Texture2D.PixelFormat.RGBA8888,t,o),r.setTexture(n),r},e.prototype.putImageDataJSB=function(e,t,o,n){var r=this,a=function(){for(var n=0;n<e.height;n++)for(var a=0;a<e.width;a++){var i=4*n*e.width+4*a,s=4*(n+o)*r._lastData.width+4*(a+t);0!=e.data[i+3]&&(r._lastData.data[s]=e.data[i],r._lastData.data[s+1]=e.data[i+1],r._lastData.data[s+2]=e.data[i+2],r._lastData.data[s+3]=e.data[i+3])}},i=function(){for(var n=0;n<r._lastData.height;n++)for(var a=0;a<r._lastData.width;a++){var i=4*n*r._lastData.width+4*a,s=4*(n-o)*e.width+4*(a-t),c=!1;(a<t||a>t+e.width)&&(c=!0),(n<o||n>o+e.height)&&(c=!0),c?(r._lastData.data[i+0]=0,r._lastData.data[i+1]=0,r._lastData.data[i+2]=0,r._lastData.data[i+3]=0):(r._lastData.data[i+0]=e.data[s+0],r._lastData.data[i+1]=e.data[s+1],r._lastData.data[i+2]=e.data[s+2],r._lastData.data[i+3]=e.data[s+3])}};4==e.data[0]&&0==e.data[1]&&0==e.data[2]&&0==e.data[3]||(1==n.ctrl.disp||0==n.ctrl.disp?a():2==n.ctrl.disp?i():function(){for(var t=0,o=0;o<e.height;o+=2){for(var n=0,r=0;r<e.width;r++){var a=4*o*e.width+4*r;0==e.data[a+3]&&n++}if(n/e.width>.1&&t++,t/(e.height/2)>.6)return!0}return!1}()?i():a())},e.prototype.putImageDataWeb=function(e,t){var o;if(1==t.ctrl.disp||0==t.ctrl.disp){this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h);var n=this._context.getImageData(0,0,this._canvas.width,this._canvas.height),r=this._lastData;o=this.mergeFrames(r,n)}else this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h),o=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);return this._context.putImageData(o,0,0),this._lastData=o,this._canvas.toDataURL()},e.prototype.decodeFrame2Texture=function(e,t){this._context||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=e.img.w,this._canvas.height=e.img.h);var o=this.decodeFrame(e);this._delays[t]=e.ctrl.delay;var n=this.putImageDataWeb(o,e);return this._spriteFrames[t]=this.dataUrl2SpriteFrame(n),this._spriteFrames[t]},e.prototype.read=function(e){return this._view.slice(this._offset,this._offset+=e)},e.prototype.getHeader=function(){var e=this;this._info.header="",this.read(6).forEach(function(t){e._info.header+=String.fromCharCode(t)})},e.prototype.getScrDesc=function(){var e=this.read(7);this._info.w=e[0]+(e[1]<<8),this._info.h=e[2]+(e[3]<<8),this._info.m=1&e[4]>>7,this._info.cr=7&e[4]>>4,this._info.s=1&e[4]>>3,this._info.pixel=7&e[4],this._info.bgColor=e[5],this._info.radio=e[6],this._info.m&&(this._info.colorTab=this.read(3*(2<<this._info.pixel))),this.decode()},e.prototype.decode=function(){var e=[],t=this.read(1);switch(t[0]){case 33:this.extension();break;case 44:for(t=this.read(9),this._frame.img={x:t[0]+(t[1]<<8),y:t[2]+(t[3]<<8),w:t[4]+(t[5]<<8),h:t[6]+(t[7]<<8),colorTab:0},this._frame.img.m=1&t[8]>>7,this._frame.img.i=1&t[8]>>6,this._frame.img.s=1&t[8]>>5,this._frame.img.r=3&t[8]>>3,this._frame.img.pixel=7&t[8],this._frame.img.m&&(this._frame.img.colorTab=this.read(3*(2<<this._frame.img.pixel))),this._frame.img.codeSize=this.read(1)[0],e=[];;){if(!(t=this.read(1))[0]){this._frame.img.srcBuf=e,this.decode();break}this.read(t[0]).forEach(function(t){e.push(t)})}}},e.prototype.extension=function(){var e=this,t=this.read(1);switch(t[0]){case 255:if(11!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");for(this._info.appVersion="",this.read(11).forEach(function(t){e._info.appVersion+=String.fromCharCode(t)});;){if(!(t=this.read(1))[0]){this.decode();break}this.read(t[0])}break;case 249:if(4!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");if(t=this.read(4),this._frame={},this._frame.ctrl={disp:7&t[0]>>2,i:1&t[0]>>1,t:1&t[0],delay:t[1]+(t[2]<<8),tranIndex:t[3]},this._info.frames.push(this._frame),0!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");this.decode();break;case 254:(t=this.read(1))[0]&&(this.read(t[0]).forEach(function(t){e._info.comment+=String.fromCharCode(t)}),0==this.read(1)[0]&&this.decode())}},e.prototype.clear=function(){this._tab=null,this._view=null,this._frame=null,this._offset=0,this._info={header:"",frames:[],comment:""},this._lastData=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null},e}();o.GIF=c;var l=function(){function e(){this.gifFrameMap={}}return e.getInstance=function(){var t=this;return e.instance||(e.instance=new e,cc.macro.ALLOW_IMAGE_BITMAP=!0,cc.assetManager.downloader.register(".gif",cc.assetManager.downloader._downloaders[".binary"]),cc.assetManager.parser.register(".gif",function(e,o,a){return n(t,void 0,void 0,function(){var t,o;return r(this,function(n){switch(n.label){case 0:return t=new c,console.log(">>> file:",e),o=e,e.arrayBuffer?[4,e.arrayBuffer()]:[3,2];case 1:o=n.sent(),n.label=2;case 2:return t.handle(o,a),[2]}})})})),e.instance},e.prototype.preloadGif=function(e){try{e.words&&e.words.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})}),e.classes&&e.classes.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})})}catch(t){cc.log(t)}},e.prototype.addItemFrame=function(e,t){if(1==this.has(e)){var o=this.get(e);o.referenceCount++,o.frameData=t}else{var n={referenceCount:0,type:a.GIF,frame:{}};this.gifFrameMap[e]=n}},e.prototype.addItemType=function(e,t){if(this.has(e))this.get(e).type=t;else{var o={referenceCount:0,type:t,frame:null};this.gifFrameMap[e]=o}},e.prototype.add=function(e,t){this.has(e)||(this.gifFrameMap[e]=t)},e.prototype.get=function(e){return this.gifFrameMap[e]},e.prototype.has=function(e){return null!=this.gifFrameMap[e]},e.prototype.hasFrame=function(e){var t=this.get(e);return null!=t&&null!=t.frameData},e.prototype.relase=function(e){this.has(e)&&(this.gifFrameMap[e]=void 0,cc.loader.release(e))},e.prototype.releaseAll=function(){for(var e in this.gifFrameMap)cc.loader.release(e);this.gifFrameMap={}},e.instance=null,e}();o.GIFCache=l,cc._RF.pop()},{"./LZW":"LZW"}],GameCameraTarget:[function(e,t,o){"use strict";cc._RF.push(t,"2e367HiYedHS5rSHZdqhVdy","GameCameraTarget");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],GameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"54769d261lCJIeXWWLdYygn","GameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./GameCameraTarget"),s=e("./Maps/MapManager"),c=e("../NanoGameCore/Core/Utils"),l=e("./Game"),u=e("./Intro/IntroCamera"),p=e("./Player/PlayerController"),d=e("../NanoGameCore/GameFramework/Scripts/NgcGameCamera"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCanvas=null,t.cameraOb=null,t.screenHeight=0,t.screenWidth=0,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t.target=null,t.homePos=cc.v2(0,0),t.defaultTarget=null,t.zoomRatio=1,t.smoothFollow=!0,t.maxPos=null,t.minPos=null,t.posInMapBottomLeft=cc.v2(0,0),t.posInMapTopRight=cc.v2(0,0),t.curCheckX_1=0,t.curCheckX_2=0,t.curCheckY_1=0,t.curCheckY_2=0,t.isStartingUpdateOffScreenObj=!1,t.curShakeTween=cc.tween(),t._defaultZoomRatio=1,t}var o;return r(t,e),o=t,t.prototype.IsNodeOffscreenLeft=function(e){return e.getBoundingBoxToWorld().xMax<this.leftOfScreenInWorldUnits},t.prototype.IsNodeOffscreenRight=function(e){return e.getBoundingBoxToWorld().xMin>this.rightOfScreenInWorldUnits},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0);return this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.IsNodeVisible=function(e){var t=this.getScreenRect(e);return!(t.max.x<0||t.min.x>this.screenWidth)},t.prototype.reset=function(){this.target=null,this.setTarget(this.defaultTarget,this._defaultZoomRatio,!1),this.setWorldPosition(this.homePos),this.isStartingUpdateOffScreenObj=!1},t.prototype.recalc=function(){var e;this.screenHeight=this.gameCanvas.height,this.screenWidth=this.gameCanvas.width;var t=cc.v2(this.screenWidth,this.screenHeight),o=cc.v2(0,0),n=this.cameraOb.getScreenToWorldPoint(t);this.topOfScreenInWorldUnits=n.y,this.rightOfScreenInWorldUnits=n.x;var r=this.cameraOb.getScreenToWorldPoint(o);this.bottomOfScreenInWorldUnits=r.y,this.leftOfScreenInWorldUnits=r.x,(null===(e=s.default.inst)||void 0===e?void 0:e.mapInfo)&&(this.posInMapTopRight=s.default.inst.getPosInMap(cc.v2(n.x,n.y)),this.posInMapBottomLeft=s.default.inst.getPosInMap(cc.v2(r.x,r.y)))},t.prototype.start=function(){console.log("Camera start"),this.cameraOb=this.node.getComponent(cc.Camera),this.recalc(),o.inst=this,this.homePos=this.getWorldPosition(),this._defaultZoomRatio=cc.sys.isMobile?o.ZOOM_RATIO_MOBILE:o.ZOOM_RATIO_PC},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.fixPositionInWorld=function(e,t){if(void 0===t&&(t=null),this.minPos&&this.maxPos){var o=cc.v2(this.gameCanvas.width/2,this.gameCanvas.height/2).div(null!=t?t:this.cameraOb.zoomRatio),n=this.minPos.add(o),r=this.maxPos.sub(o);e.x>r.x&&(e.x=r.x),e.x<n.x&&(e.x=n.x),e.y>r.y&&(e.y=r.y),e.y<n.y&&(e.y=n.y)}},t.prototype.trackTarget=function(){if(this.target){var e=this.target.getWorldPosition(),t=this.getWorldPosition(),o=this.zoomRatio;this.smoothFollow?(t.x=cc.misc.lerp(t.x,e.x,.13),t.y=cc.misc.lerp(t.y,e.y,.13),o=cc.misc.lerp(this.cameraOb.zoomRatio,this.zoomRatio,.05)):(t.x=e.x,t.y=e.y),this.fixPositionInWorld(t),this.setWorldPosition(t),this.cameraOb.zoomRatio=o}},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!0),this.target=e,this.target=e,l.default.inst.gameState!==l.GameState.GameOver&&l.default.inst.gameState!==l.GameState.Spectating||(t=this._defaultZoomRatio),this.zoomRatio=t,this.cameraOb.zoomRatio=t,this.smoothFollow=o},t.prototype.update=function(){switch(l.default.inst.gameState){case l.GameState.AddingPlayers:break;case l.GameState.Playing:case l.GameState.Spectating:this.target&&this.trackTarget();break;case l.GameState.GameOver:}this.recalc(),this.isStartingUpdateOffScreenObj&&this.updateOffScreenObjects()},t.prototype.centerOnMap=function(){this.setWorldPosition(s.default.inst.centerPosInWorld)},t.prototype.playIntroAnim=function(){this.node.getComponent(u.default).enabled=!0},t.prototype.onIntroEnds=function(){this.node.getComponent(u.default).enabled=!1,p.PlayerController.localPlayer.getAnimation().win()},t.prototype.updateIntroAnim=function(){},t.prototype.setTargetToDefault=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0),this.setTarget(this.defaultTarget,e,!0)},t.prototype.updateMinAndMaxPosition=function(e,t){this.minPos=e,this.maxPos=t},t.prototype.firstOffScreenObjects=function(){this.isStartingUpdateOffScreenObj=!0,this.curCheckX_1=Math.max(this.posInMapBottomLeft.x-o.BOAR_EXPAND_OFFSET,0),this.curCheckX_2=Math.min(this.posInMapTopRight.x+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numColumn),this.curCheckY_1=Math.max(this.posInMapBottomLeft.y-o.BOAR_EXPAND_OFFSET,0),this.curCheckY_2=Math.min(this.posInMapTopRight.y+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numRow);for(var e=0;e<s.default.inst.mapInfo.numColumn;e++)for(var t=function(t){var o=s.default.inst.getMapBoardComponentsByPosInMap(cc.v2(e,t)),r=!1;e>=n.curCheckX_1&&e<=n.curCheckX_2&&t>=n.curCheckY_1&&t<=n.curCheckY_2&&(r=!0),null==o||o.forEach(function(e){return r?e.onInScreen():e.onOutScreen()})},n=this,r=0;r<s.default.inst.mapInfo.numRow;r++)t(r)},t.prototype.updateOffScreenObjects=function(){var e=Math.max(this.posInMapBottomLeft.x-o.BOAR_EXPAND_OFFSET,0),t=Math.min(this.posInMapTopRight.x+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numColumn-1),n=Math.max(this.posInMapBottomLeft.y-o.BOAR_EXPAND_OFFSET,0),r=Math.min(this.posInMapTopRight.y+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numRow-1);if(this.curCheckX_1!==e){var a=this.curCheckX_1-e,i=Math.max(this.curCheckX_1,e),c=Math.min(this.curCheckX_1,e),l=a>=0;this.setDisplayOffScreenObjects(c,i,this.curCheckY_1,this.curCheckY_2,l),this.curCheckX_1=e}if(this.curCheckX_2!==t&&(a=this.curCheckX_2-t,i=Math.max(this.curCheckX_2,t),c=Math.min(this.curCheckX_2,t),l=a<=0,this.setDisplayOffScreenObjects(c,i,this.curCheckY_1,this.curCheckY_2,l),this.curCheckX_2=t),this.curCheckY_1!==n){a=this.curCheckY_1-n;var u=Math.max(this.curCheckY_1,n),p=Math.min(this.curCheckY_1,n);l=a>=0,this.setDisplayOffScreenObjects(this.curCheckX_1,this.curCheckX_2,p,u,l),this.curCheckY_1=n}this.curCheckY_2!==r&&(a=this.curCheckY_2-r,u=Math.max(this.curCheckY_2,r),p=Math.min(this.curCheckY_2,r),l=a<=0,this.setDisplayOffScreenObjects(this.curCheckX_1,this.curCheckX_2,p,u,l),this.curCheckY_2=r)},t.prototype.setDisplayOffScreenObjects=function(e,t,o,n,r){for(var a=e;a<=t;a++)for(var i=o;i<=n;i++){var c=s.default.inst.getMapBoardComponentsByPosInMap(cc.v2(a,i));null==c||c.forEach(function(e){return r?e.onInScreen():e.onOutScreen()})}},t.prototype.isInBoardScreen=function(e){var t=Math.max(this.posInMapBottomLeft.x-o.BOAR_EXPAND_OFFSET,0),n=Math.min(this.posInMapTopRight.x+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numColumn),r=Math.max(this.posInMapBottomLeft.y-o.BOAR_EXPAND_OFFSET,0),a=Math.min(this.posInMapTopRight.y+o.BOAR_EXPAND_OFFSET,s.default.inst.mapInfo.numRow);return e.x>=t&&e.x<=n&&e.y>=r&&e.y<=a},t.prototype.shakeCamera=function(e){this.curShakeTween.stop();var t=0;if(e<=o.NEAR_BOMB_DIST)t=o.BIG_SHAKE_INTENSITY;else if(e<=o.MEDIUM_BOMB_DIST)t=o.MEDIUM_SHAKE_INTENSITY;else{if(!(e<=o.FAR_BOMB_DIST))return;t=o.SMALL_SHAKE_INTENSITY}var n=Math.round(o.SHAKE_DURATION/.01);this.curShakeTween=cc.tween(this.node);for(var r=0;r<n;r++){var a=c.Utils.randomArr([.1,-.1])*t*this.screenWidth,i=c.Utils.randomArr([.1,-.1])*t*this.screenHeight,s=cc.tween().to(.01,{position:this.node.getPosition().add(cc.v2(a,i))});this.curShakeTween.then(s)}this.curShakeTween.start()},t.inst=null,t.BOAR_EXPAND_OFFSET=2,t.ZOOM_RATIO_PC=.95,t.ZOOM_RATIO_MOBILE=.58,t.SMALL_SHAKE_INTENSITY=.005,t.MEDIUM_SHAKE_INTENSITY=.02,t.BIG_SHAKE_INTENSITY=.05,t.FAR_BOMB_DIST=7,t.MEDIUM_BOMB_DIST=5,t.NEAR_BOMB_DIST=3,t.SHAKE_DURATION=.2,a([g(cc.Node)],t.prototype,"gameCanvas",void 0),a([g(i.default)],t.prototype,"defaultTarget",void 0),o=a([h],t)}(d.default);o.default=m,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/GameFramework/Scripts/NgcGameCamera":"NgcGameCamera","./Game":"Game","./GameCameraTarget":"GameCameraTarget","./Intro/IntroCamera":"IntroCamera","./Maps/MapManager":"MapManager","./Player/PlayerController":"PlayerController"}],GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"eaff6hcXBFLjJ4LRb56sGgu","GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameFramework/Scripts/NgcMain"),s=e("../SDK"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=e.call(this)||this;return t.sdk=null,t._isLoggedIn=!1,t.adsAvaiable=!1,o.inst&&cc.error("There are multiple places constructing PokiMgr!!!"),o.inst=t,t}var o;return r(t,e),o=t,t.prototype._preInit=function(){var e=this;return new Promise(function(t){var o,n,r,a,s;e._isLoggedIn=!1,window.GD_OPTIONS={gameId:"06c28a7a8e704371af3601d53e31359d",loader:{enabled:!1},onEvent:function(e){switch(e.name){case"SDK_READY":t("OK");break;case"SDK_GAME_START":window.showGDInterstitial&&"warning"===e.status&&window.onGDAdsError&&window.onGDAdsError(e.message),window.showGDVideoReward&&"warning"===e.status&&window.onGDAdsError&&window.onGDAdsError(e.message),i.NgcMain.inst.resumeGameLogic();break;case"SDK_GAME_PAUSE":i.NgcMain.inst.pauseGameLogic();break;case"SDK_GDPR_TRACKING":case"SDK_GDPR_TARGETING":break;case"COMPLETE":case"ALL_ADS_COMPLETED":case"SKIPPED":console.log("ADS COMPLETED"),window.onGDAdsComplete&&window.onGDAdsComplete(e.message);break;case"AD_ERROR":console.log("ADS ERROR",e),window.onGDAdsError&&window.onGDAdsError(e.message)}}},n="script",r="gamedistribution-jssdk",s=(o=document).getElementsByTagName(n)[0],o.getElementById(r)||((a=o.createElement(n)).id=r,a.src="patch/js/gd-sdk.js?html5.api.gamedistribution.com/main.min.js",s.parentNode.insertBefore(a,s))})},t.prototype._init=function(){var e=this;return new Promise(function(t){e.initialized=!0,t("NgcGameDistributionSrv initialized")})},t.prototype._login=function(){return new Promise(function(e){e()})},t.prototype.getName=function(){return"GameDistributionSrv"},t.prototype.getUserID=function(){return""},t.prototype.isLoggedIn=function(){return this._isLoggedIn=!0},t.prototype._logout=function(){return new Promise(function(e){e()})},t.inst=null,o=a([l],t)}(s.NgcSDK));o.default=u,cc._RF.pop()},{"../../GameFramework/Scripts/NgcMain":"NgcMain","../SDK":"SDK"}],GameModeDataBase:[function(e,t,o){"use strict";cc._RF.push(t,"ac95aE5bQZJSadWljYUF+FH","GameModeDataBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../NanoGameCore/Core/nCSV"),s=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),c=e("./TypeDefs"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.loadFile=function(){cc.resources.load(o.GAME_MODE_DATA_PATH,cc.TextAsset,function(e,t){e&&cc.error("Read  game mode data failed. Err = "+e.message),o._initGameModeDataFromCSV(t.text)&&(o._isInitialized=!0)})},t._initGameModeDataFromCSV=function(e){var t=this;return i.nCSV.parseTable(e).forEach(function(e){var o=e.gameMode.toString();e.gameMode=c.GameMode[o],e.matchDuration=s.convertToNum(e.matchDuration),e.extraDuration=s.convertToNum(e.extraDuration),e.numPlayer=s.convertToNum(e.numPlayer),e.playerDistanceX=s.convertToNum(e.playerDistanceX),e.playerDistanceY=s.convertToNum(e.playerDistanceY),e.maxPlayerX=s.convertToNum(e.maxPlayerX),e.hasHardBlock=s.convertToBoolean(e.hasHardBlock),e.softBlockDensity=s.convertToNum(e.softBlockDensity),e.itemDensity=s.convertToNum(e.itemDensity),e.startingHP=s.convertToNum(e.startingHP),e.startingSpeed=s.convertToNum(e.startingSpeed),e.startingFire=s.convertToNum(e.startingFire),e.startingBomb=s.convertToNum(e.startingBomb),t._gameModeDataMap.set(e.gameMode,e)}),!0},t.getGameModeData=function(e){return this._gameModeDataMap.get(e)},Object.defineProperty(t,"isInitialized",{get:function(){return this._isInitialized},enumerable:!1,configurable:!0}),t.GAME_MODE_DATA_PATH="Text/GameMode",t._isInitialized=!1,t._gameModeDataMap=new Map,o=a([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../NanoGameCore/Core/nCSV":"nCSV","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","./TypeDefs":"TypeDefs"}],GameModeInfoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e9f2emWR11L75n49Nq6Q8i8","GameModeInfoDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameModeInfoDialog=void 0;var c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),p=e("../../Dialogs/Script/DialogBase"),d=e("./GameModeManager"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.basicInfo=null,t.extendedInfo=null,t.counterLabel=null,t.modeScrollView=null,t.modeTemplate=null,t}return r(t,e),t.prototype.initLockedInfoDialog=function(e){return i(this,void 0,void 0,function(){var t,o,n,r,a,i,u,p,f;return s(this,function(){return t=null,e.modes.forEach(function(o){o.modeId===e.activeModeId&&(t=o)}),o=this.basicInfo.getChildByName("Contents"),n=o.getChildByName("Icon"),r=o.getChildByName("Label"),a=o.getChildByName("ProgressBar"),i=d.NgcGameModeManager.inst.getProgressBarInfo(),u=i.currentValue,p=i.maxValue,cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(n.getComponent(cc.Sprite).spriteFrame=t)}),a.getComponentInChildren(cc.ProgressBar).progress=u/p,a.getComponentInChildren(c.NgcLabelLocalized).string=u+"/"+p,f=(f=(f=l.NgcLocalizedManager.t("GMD_UNLOCK_CONDITION").text).replace("X",p.toString())).replace("<crown>"," <img src='icon_ubisoft_token'/> "),r.getComponent(cc.RichText).string=f,[2]})})},t.prototype.init=function(e){return i(this,void 0,void 0,function(){var t,o,n,r,a,i=this;return s(this,function(){return t=null,o=[],e.modes.forEach(function(n){n.modeId===e.activeModeId?t=n:o.push(n)}),t?(n=this.basicInfo.getChildByName("Image"),r=cc.find("Labels/Name",this.basicInfo),a=cc.find("Labels/Description",this.basicInfo),l.NgcLocalizedManager.setTextKey(r.getComponent(c.NgcLabelLocalized),t.modeNameTextKey),l.NgcLocalizedManager.setTextKey(a.getComponent(c.NgcLabelLocalized),t.modeDescTextKey),cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(n.getComponent(cc.Sprite).spriteFrame=t)}),e.rotateEnabled&&e.modes.length>1&&(this.counterLabel.startCount(e.timeToNextMode),this.counterLabel.setTimerExpiredCallback(function(){i.hide()}),o.forEach(function(e){var t=cc.instantiate(i.modeTemplate);t.active=!0,t.parent=i.modeScrollView.content,l.NgcLocalizedManager.setTextKey(t.getComponentInChildren(c.NgcLabelLocalized),e.modeNameTextKey),t.x=280,cc.loader.loadRes(e.picturePath,cc.SpriteFrame,function(e,o){e||(t.getChildByName("Image").getComponent(cc.Sprite).spriteFrame=o)})}),this.modeScrollView.scrollToTop(0)),[2]):(console.error("Can't find the active mode!!"),[2])})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){d.NgcGameModeManager.inst.isShowingDialog=!1,e.prototype.hide.call(this)},t.urlPrefab="GameModeInfoExtendedDialog",t.bundleName="02_dialog",t.dialogType="GameModeInfoExtendedDialog",a([g(cc.Node)],t.prototype,"basicInfo",void 0),a([g(cc.Node)],t.prototype,"extendedInfo",void 0),a([g(u.NgcTimerLabelLocalized)],t.prototype,"counterLabel",void 0),a([g(cc.ScrollView)],t.prototype,"modeScrollView",void 0),a([g(cc.Node)],t.prototype,"modeTemplate",void 0),a([h],t)}(p.NgcDialogBase);o.NgcGameModeInfoDialog=m,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./GameModeManager":"GameModeManager"}],GameModeManager:[function(e,t,o){"use strict";cc._RF.push(t,"d79feTiWNhCN6IvjF+bj6F+","GameModeManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameModeManager=void 0;var c=e("../../../../Scripts/Screens/StartScreen/StartMain"),l=e("../../../GameFramework/Scripts/BuildConfig"),u=e("../../../SDK/Nano/NanoSrv"),p=e("../../../Services/Inventory/Inventory"),d=e("../../Dialogs/Script/NgcDialogManager"),f=e("./GameModeInfoDialog"),h=e("./ModeButton"),g=cc._decorator,m=g.ccclass,y=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playButton=null,t.modeButton=null,t.modeInfoJson=null,t.selectedModeId=null,t.isShowingDialog=!1,t._isPlayAnimation=!1,t._isUnlocked=!1,t.localGameModeData=null,t._oldPoint=0,t._pointToUnlock=0,t._isReady=!1,t.readyForInit=!1,t.gameModePoint=null,t._gameModeInfo=null,t._playButtonClickCallback=null,t._modeButtonClickCallback=null,t._lockIcon=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.modeButton.active=!1,this.localGameModeData=this.modeInfoJson.json,this._oldPoint=0,this._pointToUnlock=this.localGameModeData.pointsToUnlockGameMode,this.readyForInit=!0)},t.prototype.start=function(){this.hideContents()},t.prototype.hideContents=function(){this.modeButton.getComponent(h.NgcModeButton).lockedContents.opacity=0,this.modeButton.getComponent(h.NgcModeButton).unlockedContents.opacity=0,this.modeButton.getChildByName("Icon_Lock").active=!1,this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!1,this.modeButton.getComponent(h.NgcModeButton).infoButton.active=!1},t.prototype.getProgressBarInfo=function(){return{currentValue:this._oldPoint,maxValue:this._pointToUnlock}},t.prototype.updateNumberNode=function(e,t,o){var n=this,r={point:e},a=this.modeButton.getComponent(h.NgcModeButton),i=a.crownIcon.scale;t!==e&&0!==o?cc.tween(r).to(o,{point:t},{progress:function(e,t,o,r){var s=e+(t-e)*r,c=a.numberProgressScale,l=a.crownIconProgressScale;return a.leftNumberLabel.node.color=a.numberProgressColor,a.leftNumberLabel.node.scale=1+c+Math.cos(Date.now()/60)*c,a.crownIcon.scale=i+l+Math.cos(Date.now()/60)*l,a.updateProgressNumber(Math.floor(s),n._pointToUnlock),s}}).delay(.15).call(function(){a.leftNumberLabel.node.color=cc.color(255,255,255),cc.tween(a.leftNumberLabel.node).to(.25,{scale:1}).start(),cc.tween(a.crownIcon).to(.25,{scale:i}).start(),a.updateProgressNumber(t,n._pointToUnlock)}).start():a.updateProgressNumber(t,this._pointToUnlock)},t.prototype.checkForGameModeUnlocking=function(){var e=this;this.modeButton.active&&(this.gameModePoint?this.updateProgressBar(1):this.getGameModePoint(function(){e.updateProgressBar(1)}))},t.prototype.addGameModePoint=function(e){o.inst.getGameModePoint(function(t){o.inst.uploadGameModePoint(t+e,function(){o.inst.checkForGameModeUnlocking()})})},t.prototype.getGameModePoint=function(e){var t=this;void 0===e&&(e=null),u.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t.gameModePoint=Number(JSON.parse(n).data._gameModePoint)||0,e&&e(t.gameModePoint))})},t.prototype.uploadGameModePoint=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null);var n={_gameModePoint:e||this.gameModePoint||0};u.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e||(o.gameModePoint=n._gameModePoint,t&&t(r))})},t.prototype.updateProgressBar=function(e,t){var o=this;if(void 0===t&&(t=!1),!this._isUnlocked){var n=this.modeButton.getComponent(h.NgcModeButton),r=this.gameModePoint;if(n.updateProgressNumber(this._oldPoint,this._pointToUnlock),r!=this._oldPoint||t)if(r>=this._pointToUnlock)r=this._pointToUnlock,this.updateNumberNode(this._oldPoint,r,e),e>0&&this.playUnlockAnimation(e),this._oldPoint=this._pointToUnlock,p.NgcInventory.inst.addItem("game_mode_unlock",1,function(){o._isUnlocked=!0});else{var a=r/this._pointToUnlock,i=e,s=n.progressBar.getChildByName("BarFill");e>0?(this.updateNumberNode(this._oldPoint,r,e),cc.tween(s.getComponent(cc.ProgressBar)).to(i,{progress:a}).start()):(n.updateProgressNumber(0,this._pointToUnlock),s.getComponent(cc.ProgressBar).progress=0),this._oldPoint=r}}},t.prototype.initGameMode=function(){var e=this;this.getCurrentGameModeInfo(),this.checkForGameModeAvailability(),this.checkForGameModeUnlockStatus(function(){e.getGameModePoint(function(){e.startUpAnimation()})}),this.readyForInit=!1},t.prototype.startUpAnimation=function(){if(this.modeButton.getComponent(h.NgcModeButton).stopLoadingAnimation(),this.modeButton.getComponent(h.NgcModeButton).infoButton.active=!0,this.isGameModeUnlocked()){var e=this.modeButton.getComponent(h.NgcModeButton).progressBar,t=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,o=this.modeButton.getChildByName("Icon_Lock");cc.tween(t).to(.25,{opacity:255},{easing:"cubicOut"}).start(),e.parent.active=!1,o.active=!1,this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!1}else this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!0,cc.tween(this.modeButton.getComponent(h.NgcModeButton).lockedContents).to(.25,{opacity:255},{easing:"cubicOut"}).start(),this.modeButton.getChildByName("Icon_Lock").active=!0,this.updateProgressBar(1,!0);this.updateGameModeContents()},t.prototype.isInitialized=function(){return!!this._gameModeInfo},t.prototype.gameModeData=function(){return this._gameModeInfo},t.prototype.setPlayButtonClickCallback=function(e){this._playButtonClickCallback=e},t.prototype.onClickPlayButton=function(){return i(this,void 0,void 0,function(){return s(this,function(){return this.selectedModeId=null,this._playButtonClickCallback&&this._playButtonClickCallback(),[2]})})},t.prototype.setModeButtonClickCallback=function(e){this._modeButtonClickCallback=e},t.prototype.onClickGameModeButton=function(){return i(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(r){switch(r.label){case 0:return this.uploadGameModePoint(),this._isPlayAnimation?[2]:this.isInitialized()?this.isShowingDialog?[2]:this.modeButton.getComponent(h.NgcModeButton).isLoading()?[2]:(e=null,[4,this.getCurrentGameModeInfo()]):[2];case 1:return t=r.sent(),this.isGameModeUnlocked()?(e=t.activeModeId,[3,5]):[3,2];case 2:return this.isShowingDialog=!0,[4,d.NgcDialogManager.createDialog("GameModeLockedInfoDialog","GameModeLockedInfoDialog",f.NgcGameModeInfoDialog.bundleName)];case 3:return o=r.sent(),[4,(n=o.getComponent(f.NgcGameModeInfoDialog)).initLockedInfoDialog(t)];case 4:return r.sent(),n.show(),[2];case 5:return this._modeButtonClickCallback&&(this.selectedModeId=e,this._modeButtonClickCallback(e)),cc.log("Game Mode button click!",e),[2]}})})},t.prototype.onClickInfoButton=function(){return i(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(r){switch(r.label){case 0:return this._isPlayAnimation?[2]:this.isShowingDialog?[2]:(this.isShowingDialog=!0,[4,this.getCurrentGameModeInfo()]);case 1:return e=r.sent(),t=this.getDialogType(e),[4,d.NgcDialogManager.createDialog(t,t,f.NgcGameModeInfoDialog.bundleName)];case 2:return o=r.sent(),[4,(n=o.getComponent(f.NgcGameModeInfoDialog)).init(e)];case 3:return r.sent(),n.show(),[2]}})})},t.prototype.refresh=function(){this._isUnlocked=!1,this.setStatus(this._isUnlocked),this.hideContents(),this.readyForInit=!0},t.prototype.setStatus=function(e){var t=this.modeButton.getComponent(h.NgcModeButton).background,o=this.modeButton.getComponent(h.NgcModeButton).infoButton,n=this.modeButton.getComponent(h.NgcModeButton).progressBar,r=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,a=this.modeButton.getChildByName("Icon_Lock"),i=this.modeButton.getChildByName("light_vfx"),s=this.modeButton.getChildByName("Contents"),c=this.modeButton.getComponent(h.NgcModeButton).highlight,l=this.modeButton.getComponent(h.NgcModeButton).crownIcon;e?(a.opacity=0,t.opacity=0,l.opacity=0,l.active=!1,n.parent.active=!1,c.active=!1,i.active=!1,r.opacity=255,s.opacity=255,t.opacity=255,o.opacity=255):(a.scale=1,a.opacity=255,t.opacity=255,l.opacity=255,l.active=!0,n.parent.active=!0,c.opacity=0,c.scale=1,i.opacity=0,i.scale=1,r.opacity=0,s.opacity=255,t.opacity=255,o.opacity=255)},t.prototype.lockIconNode=function(){return this.modeButton.getChildByName("Icon_Lock")},t.prototype.playUnlockAnimation=function(e,t){var o=this;this._isPlayAnimation=!0;var n=e,r=this.modeButton.getComponent(h.NgcModeButton).background,a=this.modeButton.getComponent(h.NgcModeButton).infoButton,i=this.modeButton.getComponent(h.NgcModeButton).progressBar,s=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,c=(this.modeButton.getComponent(h.NgcModeButton).timerLabel,i.getChildByName("BarFill")),l=this.modeButton.getChildByName("Icon_Lock"),u=this.modeButton.getChildByName("light_vfx"),p=this.modeButton.getChildByName("Contents"),d=this.modeButton.getComponent(h.NgcModeButton).highlight,f=this.modeButton.getComponent(h.NgcModeButton).crownIcon;cc.tween(c.getComponent(cc.ProgressBar)).to(n,{progress:1}).call(function(){l.scale=1.25,o._lockIcon=l,o._lockIcon.originalX=l.x,o._lockIcon.originalY=l.y,u.opacity=0,u.active=!0,l.opacity=255,d.active=!0,d.opacity=0,cc.tween(a).delay(1).to(.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(d).delay(1).to(.1,{opacity:255,scale:1.35}).delay(.05).to(.5,{opacity:0}).start(),cc.tween(u).delay(1).to(.1,{opacity:255,scale:2.75}).to(.5,{scale:2}).start(),cc.tween(l).to(1,{scale:.5}).to(.1,{scale:3.25}).call(function(){r.opacity=0,p.opacity=0,f.opacity=0,l.x=o._lockIcon.originalX,l.y=o._lockIcon.originalY,o._lockIcon=null,cc.tween(u).to(1.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(l).to(1.25,{opacity:0,scale:3.5},{easing:"expoInOut"}).start()}).delay(.75).call(function(){d.active=!1,u.active=!1,o.modeButton.setScale(1.25),o.modeButton.opacity=0,i.parent.active=!1,s.opacity=255,p.opacity=255,r.opacity=255,a.opacity=255,cc.tween(o.modeButton).to(.4,{scale:.75},{easing:"expoInOut"}).to(.9,{scale:1},{easing:"backOut"}).start(),cc.tween(o.modeButton).to(1,{opacity:255}).call(function(){o._isPlayAnimation=!1,t&&t()}).start()}).start()}).start()},t.prototype.isReady=function(){var e=this;return p.NgcInventory.inst&&c.default.inst&&p.NgcInventory.inst.getItemCount("game_mode_unlock",function(t,o){!t&&o&&(e._isUnlocked=o.count>0),e._isReady=!0}),this._isReady},t.prototype.update=function(){if(this.readyForInit&&this.hasGameMode()&&this.initGameMode(),this._lockIcon){var e=.5/this._lockIcon.scale*6;this._lockIcon.x=this._lockIcon.originalX-Math.random()*e/2+Math.random()*e,this._lockIcon.y=this._lockIcon.originalY-Math.random()*e/2+Math.random()*e}},t.prototype.updateGameModeContents=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return[4,this.getCurrentGameModeInfo()];case 1:return e=n.sent(),t=e.modes.filter(function(t){return t.modeId==e.activeModeId})[0],o=e.modeList.length>1&&e.rotateEnabled?e.timeToNextMode:-1,this.modeButton.getComponent(h.NgcModeButton).refreshContents(t.modeNameTextKey,o,this.onTimerEnd.bind(this)),[2]}})})},t.prototype.onTimerEnd=function(){this.updateGameModeContents()},t.prototype.checkForGameModeAvailability=function(){this.hasGameMode()&&(this.modeButton.active=!0,this.modeButton.getComponent(h.NgcModeButton).playLoadingAnimation())},t.prototype.hasGameMode=function(){if(l.NgcBuildConfig.offlineMode)return!1;var e=u.default.inst&&u.default.inst.getCurGameInfo()&&u.default.inst.getCurGameInfo().gameParams||{};return this._gameModeInfo=e&&e.gameModesDistribution||!1,this.gameModeData()&&this.gameModeData().gameModeOn},t.prototype.isGameModeUnlocked=function(){return this._isUnlocked},t.prototype.unlock=function(){this._isUnlocked=!0},t.prototype.checkForGameModeUnlockStatus=function(e){var t=this;p.NgcInventory.inst.getItemCount("game_mode_unlock",function(o,n){!o&&n&&(t._isUnlocked=n.count>0,e&&e())})},t.prototype.getDialogType=function(e){return this.gameModeData(),e.modeList.length>1&&e.rotateEnabled?"GameModeInfoExtendedDialog":"GameModeInfoDialog"},t.prototype.getCurrentGameModeInfo=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r,a,i,c,l,u,p;return s(this,function(){return e=this.gameModeData(),t=new Date(e.gameModeRotationStartTime),o=e.gameModeRotationOn,n=Date.now()-t.getTime(),r=36e5*e.gameModeRotationTime,a=Math.floor(n/r),i=t.getTime()+a*r,c=i+r-Date.now(),l=Math.floor(a%e.gameModeList.length),u=e.gameModeList[l],cc.log(t.getTime(),Date.now(),e.gameModeRotationTime,a),o||(u=e.gameModeList[0]),p=this.localGameModeData.modes.filter(function(t){return e.gameModeList.indexOf(t.modeId)>=0}),[2,{activeModeId:u,timeToNextMode:c,modes:p,rotateEnabled:o,modeList:e.gameModeList}]})})},t.inst=null,a([y(cc.Node)],t.prototype,"playButton",void 0),a([y(cc.Node)],t.prototype,"modeButton",void 0),a([y(cc.JsonAsset)],t.prototype,"modeInfoJson",void 0),o=a([m],t)}(cc.Component);o.NgcGameModeManager=_,cc._RF.pop()},{"../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./GameModeInfoDialog":"GameModeInfoDialog","./ModeButton":"ModeButton"}],GameObjMgr:[function(e,t,o){"use strict";cc._RF.push(t,"4107b8z2s1NYoH/ONCT5iwW","GameObjMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GameObjMgr=void 0;var i=e("../../NanoGameCore/Services/Platform/Platform"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floorPrefab=null,t.blockPrefab=null,t.blockTopPrefab=null,t.explosionPrefab=null,t.blockExplosionPrefab=null,t.bombPrefab=null,t.floorPlatePrefab=null,t.powerUpItemPrefab=null,t.shrinkingSmokePrefab=null,t.localPlayerPrefab=null,t.botPrefab=null,t.remotePlayerPrefab=null,t._floorPool=new cc.NodePool,t._blockPool=new cc.NodePool,t._blockTopPool=new cc.NodePool,t._explosionPool=new cc.NodePool,t._blockExplosionPool=new cc.NodePool,t._bombPool=new cc.NodePool,t._floorPlatePool=new cc.NodePool,t._powerUpItemPool=new cc.NodePool,t._shrinkingSmokePool=new cc.NodePool,t._localPlayerPool=new cc.NodePool,t._botPool=new cc.NodePool,t._remotePlayerPool=new cc.NodePool,t}var o;return r(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"explosionPool",{get:function(){return this._explosionPool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blockExplosionPool",{get:function(){return this._blockExplosionPool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floorPlatePool",{get:function(){return this._floorPlatePool},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shringkingSmokePool",{get:function(){return this._shrinkingSmokePool},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;o._inst=this,this.scheduleOnce(function(){e.initPools()})},t.prototype.initPools=function(){this._floorPool.put(cc.instantiate(this.floorPrefab)),cc.log("Finish initializing pools")},t.prototype.initPlayerPools=function(){var e=this;new Promise(function(){e._localPlayerPool.put(cc.instantiate(e.localPlayerPrefab));for(var t=i.NgcPlatform.isOfflineMode()?99:50;e._botPool.size()<t;)e._botPool.put(cc.instantiate(e.botPrefab))})},t.prototype._get=function(e,t){return e.size()>0?e.get():(cc.warn("instantiate name: "+t.name),cc.instantiate(t))},t.prototype._put=function(e,t){e.put(t)},t.prototype.getFloor=function(){return this._get(this._floorPool,this.floorPrefab)},t.prototype.putFloor=function(e){this._put(this._floorPool,e.node)},t.prototype.getBlock=function(){return this._get(this._blockPool,this.blockPrefab)},t.prototype.putBlock=function(e){this._put(this._blockPool,e.node)},t.prototype.getBlockTop=function(){return this._get(this._blockTopPool,this.blockTopPrefab)},t.prototype.putBlockTop=function(e){this._put(this._blockTopPool,e.node)},t.prototype.getExplosion=function(){return this._get(this._explosionPool,this.explosionPrefab)},t.prototype.putExplosion=function(e){this._put(this._explosionPool,e.node)},t.prototype.getBlockExplosion=function(){return this._get(this._blockExplosionPool,this.blockExplosionPrefab)},t.prototype.putBlockExplosion=function(e){this._put(this._blockExplosionPool,e.node)},t.prototype.getBomb=function(){return this._get(this._bombPool,this.bombPrefab)},t.prototype.putBomb=function(e){this._put(this._bombPool,e.node)},t.prototype.getFloorPlate=function(){return this._get(this._floorPlatePool,this.floorPlatePrefab)},t.prototype.putFloorPlate=function(e){this._put(this._floorPlatePool,e.node)},t.prototype.getPowerUpItem=function(){return this._get(this._powerUpItemPool,this.powerUpItemPrefab)},t.prototype.putPowerUpItem=function(e){this._put(this._powerUpItemPool,e.node)},t.prototype.getShrinkingSmoke=function(){return this._get(this._shrinkingSmokePool,this.shrinkingSmokePrefab)},t.prototype.putShrinkingSmoke=function(e){this._put(this._shrinkingSmokePool,e.node)},t.prototype.getLocalPlayer=function(){return this._get(this._localPlayerPool,this.localPlayerPrefab)},t.prototype.putLocalPlayer=function(e){this._put(this._localPlayerPool,e.node)},t.prototype.getBot=function(){return this._get(this._botPool,this.botPrefab)},t.prototype.putBot=function(e){this._put(this._botPool,e.node)},t.prototype.getRemotePlayer=function(){return this._get(this._remotePlayerPool,this.remotePlayerPrefab)},t.prototype.putRemotePlayer=function(e){this._put(this._remotePlayerPool,e.node)},a([l(cc.Prefab)],t.prototype,"floorPrefab",void 0),a([l(cc.Prefab)],t.prototype,"blockPrefab",void 0),a([l(cc.Prefab)],t.prototype,"blockTopPrefab",void 0),a([l(cc.Prefab)],t.prototype,"explosionPrefab",void 0),a([l(cc.Prefab)],t.prototype,"blockExplosionPrefab",void 0),a([l(cc.Prefab)],t.prototype,"bombPrefab",void 0),a([l(cc.Prefab)],t.prototype,"floorPlatePrefab",void 0),a([l(cc.Prefab)],t.prototype,"powerUpItemPrefab",void 0),a([l(cc.Prefab)],t.prototype,"shrinkingSmokePrefab",void 0),a([l(cc.Prefab)],t.prototype,"localPlayerPrefab",void 0),a([l(cc.Prefab)],t.prototype,"botPrefab",void 0),a([l(cc.Prefab)],t.prototype,"remotePlayerPrefab",void 0),o=a([c],t)}(cc.Component);o.GameObjMgr=u,cc._RF.pop()},{"../../NanoGameCore/Services/Platform/Platform":"Platform"}],GameObjectBase:[function(e,t,o){"use strict";cc._RF.push(t,"fb642+ExKhHI5N8tb+gYTVX","GameObjectBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.OBJ_TYPE_MASK=o.GameObjectType=void 0;var i,s=e("../GameCamera"),c=e("../Network/messages/rpb"),l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.Unknown=0]="Unknown",e[e.Empty=c.MapObjectType.EMPTY]="Empty",e[e.Floor=c.MapObjectType.FLOOR]="Floor",e[e.Block_Border=c.MapObjectType.BORDER]="Block_Border",e[e.Block_Hard=c.MapObjectType.HARD_BLOCK]="Block_Hard",e[e.Player=c.MapObjectType.PLAYER]="Player",e[e.Bomb=c.MapObjectType.BOMB]="Bomb",e[e.Explosion=c.MapObjectType.EXPLOSION]="Explosion",e[e.PU_Bomb_Range=c.MapObjectType.PU_BOMB_RANGE]="PU_Bomb_Range",e[e.PU_Bomb_Number=c.MapObjectType.PU_BOMB_NUMBER]="PU_Bomb_Number",e[e.PU_Mov_Speed=c.MapObjectType.PU_MOVE_SPEED]="PU_Mov_Speed",e[e.PU_Heart=c.MapObjectType.PU_HEART]="PU_Heart",e[e.PU_Bomb_Pierce=c.MapObjectType.PU_BOMB_PIERCE]="PU_Bomb_Pierce",e[e.PU_Bomb_Pass=c.MapObjectType.PU_BOMB_PASS]="PU_Bomb_Pass",e[e.PU_Bomb_Danger=c.MapObjectType.PU_BOMB_DANGER]="PU_Bomb_Danger",e[e.PU_Bomb_Power=c.MapObjectType.PU_BOMB_POWER]="PU_Bomb_Power",e[e.PD_Bomb_Range=c.MapObjectType.PD_BOMB_RANGE]="PD_Bomb_Range",e[e.PD_Bomb_Number=c.MapObjectType.PD_BOMB_NUMBER]="PD_Bomb_Number",e[e.PD_Mov_Speed=c.MapObjectType.PD_MOVE_SPEED]="PD_Mov_Speed",e[e.NEG_Slow=c.MapObjectType.NEG_SLOW]="NEG_Slow",e[e.Block_Soft=c.MapObjectType.SOFT_BLOCK]="Block_Soft",e[e.AI_Dangerous=c.MapObjectType.AI_DANGEROUS]="AI_Dangerous"})(i=o.GameObjectType||(o.GameObjectType={})),o.OBJ_TYPE_MASK={AI:128,SOFT_BLOCK:64};var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectType=i.Empty,t.ownTween=null,t._posInMap=cc.v2(0,0),t.renderComponent=null,t.myGroupID=0,t}return r(t,e),Object.defineProperty(t.prototype,"posInMap",{get:function(){return cc.v2(this._posInMap.x,this._posInMap.y)},set:function(e){this._posInMap.x=e.x,this._posInMap.y=e.y},enumerable:!1,configurable:!0}),t.prototype.onInScreen=function(){this.renderComponent.enabled=!0},t.prototype.onOutScreen=function(){this.renderComponent.enabled=!1},t.prototype.GetTypeAsString=function(){return i[this.objectType]},t.isTypeBlock=function(e){switch(e){case i.Block_Soft:case i.Block_Hard:case i.Block_Border:return!0}return!1},t.isNavigable=function(e){if(this.isTypePower(e))return!0;switch(e){case i.Empty:case i.Player:return!0}return!1},t.isTypePowerUp=function(e){var t=this.getPureType(e);return 20<t&&t<=40},t.isTypePowerDown=function(e){var t=this.getPureType(e);return 40<t&&t<=60},t.isTypePower=function(e){var t=this.getPureType(e);return 20<t&&t<=60},t.getPureType=function(e){var t=e&~o.OBJ_TYPE_MASK.AI;return(t&o.OBJ_TYPE_MASK.SOFT_BLOCK)==i.Block_Soft?i.Block_Soft:t},t.willBeExploded=function(e){return(e&o.OBJ_TYPE_MASK.AI)==i.AI_Dangerous},t.willBeShrinked=function(e){return(e&o.OBJ_TYPE_MASK.AI)==i.AI_Dangerous},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0),r=s.default.inst.cameraOb;return r.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),r.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.IsNodeVisible=function(e){var t=this.getScreenRect(e);return!(t.max.x<-this.node.getBoundingBox().width||t.min.x>s.default.inst.screenWidth+this.node.getBoundingBox().width)},t.prototype.release=function(){cc.log("GameObjectBase call release, it should call at child class")},t.prototype.update=function(){},a([p({type:cc.Enum(i)})],t.prototype,"objectType",void 0),a([p(cc.RenderComponent)],t.prototype,"renderComponent",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../GameCamera":"GameCamera","../Network/messages/rpb":"rpb"}],GameReward:[function(e,t,o){"use strict";cc._RF.push(t,"2c7a4OZMlNKE5CFkvad8eVz","GameReward"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Utils/ConstConfig"),r=function(){function e(t){this._coin={itemID:n.ConstConfig.INVENTORY.ITEM_ID.COIN,count:0},this._crown={itemID:n.ConstConfig.INVENTORY.ITEM_ID.CROWN,count:0};var o=e.RANK_WEIGHT*(100-t.playerRank),r=e.COINS_PER_KILL*t.playerKill,a=Math.round(t.playerRank/e.GRACE_THRESHOLD*e.GRACE_FACTOR);this._coin.count=o+r+a;var i=e.CROWN_RANGES.find(function(e){return e.minRank<=t.playerRank&&t.playerRank<=e.maxRank});i&&(this._crown.count=i.pointGain)}return Object.defineProperty(e.prototype,"coin",{get:function(){return this._coin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"crown",{get:function(){return this._crown},enumerable:!1,configurable:!0}),e.RANK_WEIGHT=1,e.COINS_PER_KILL=20,e.GRACE_FACTOR=15,e.GRACE_THRESHOLD=50,e.CROWN_RANGES=[{minRank:1,maxRank:1,pointGain:8},{minRank:2,maxRank:20,pointGain:5},{minRank:21,maxRank:40,pointGain:3},{minRank:41,maxRank:60,pointGain:2},{minRank:61,maxRank:80,pointGain:1},{minRank:81,maxRank:100,pointGain:0}],e}();o.default=r,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig"}],GameScreenDebugUI:[function(e,t,o){"use strict";cc._RF.push(t,"9ca6eRxX6VOtajD3Oo+u51h","GameScreenDebugUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Game"),s=e("../GameCamera"),c=e("../Player/PlayerController"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoomRatioValue_label=null,t.botNormal=null,t.botSmart=null,t.botCollector=null,t.botDumb=null,t.playerRemote=null,t.playersAlive=null,t.playerDie=null,t.playerDead=null,t.numberOfPlayerDie=0,t.numberOfPlayerDead=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.updateZoomRatioDebugDisplay()},t.prototype.onEnable=function(){this.numberOfPlayerDie=0,this.numberOfPlayerDead=0},t.prototype.updateZoomRatioDebugDisplay=function(){var e;this.zoomRatioValue_label.string=null===(e=s.default.inst)||void 0===e?void 0:e.zoomRatio.toFixed(2).toString()},t.prototype.update=function(){},t.prototype.updateNumberOfBotInfo=function(){var e=0,t=0,o=0,n=0,r=0,a=0;i.default.inst.players.forEach(function(i){if(i.isLocallyControlledBot())switch(i.curBotBrainClass){case c.E_BRAIN_CLASS_TYPE.Normal:e++;break;case c.E_BRAIN_CLASS_TYPE.Smart:t++;break;case c.E_BRAIN_CLASS_TYPE.Collector:o++;break;case c.E_BRAIN_CLASS_TYPE.Dumb:n++}else i.isRemote()&&r++;i.isAlive()&&a++}),this.botNormal.string="botNormal: "+e,this.botSmart.string="botSmart: "+t,this.botCollector.string="botCollector: "+o,this.botDumb.string="botDumb: "+n,this.playerRemote.string="playerRemote: "+r,this.playersAlive.string="Players Alive: "+a},t.prototype.UpdateNumberOfPlayerDie=function(){this.numberOfPlayerDie++,this.playerDie.string="Player Die: "+this.numberOfPlayerDie},t.prototype.UpdateNumberOfPlayerDead=function(){this.numberOfPlayerDead++,this.playerDead.string="Player Dead: "+this.numberOfPlayerDead},t.inst=null,a([p(cc.Label)],t.prototype,"zoomRatioValue_label",void 0),a([p(cc.Label)],t.prototype,"botNormal",void 0),a([p(cc.Label)],t.prototype,"botSmart",void 0),a([p(cc.Label)],t.prototype,"botCollector",void 0),a([p(cc.Label)],t.prototype,"botDumb",void 0),a([p(cc.Label)],t.prototype,"playerRemote",void 0),a([p(cc.Label)],t.prototype,"playersAlive",void 0),a([p(cc.Label)],t.prototype,"playerDie",void 0),a([p(cc.Label)],t.prototype,"playerDead",void 0),o=a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Game":"Game","../GameCamera":"GameCamera","../Player/PlayerController":"PlayerController"}],GameScreen:[function(e,t,o){"use strict";cc._RF.push(t,"a0b41Puxh5LroqAGgRgcZ81","GameScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),c=e("../../Game"),l=e("../../Main"),u=e("../../ScreenManager"),p=e("../../SoundManager"),d=e("../../Tracking/TrackingManager"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fixedUINode=null,t.gameDebugUI_node=null,t.beginQueued=!1,t}return r(t,e),t.prototype.onLoad=function(){this.node.active=!1,this.gameDebugUI_node.active=i.NgcBuildConfig.enabledDebugMode},t.prototype.onActivate=function(){e.prototype.onActivate.call(this),this.beginQueued=!0,l.Main.inst.mainCamera.node.active=!1,p.SoundManager.inst.playGameMusic(),u.default.inst.gameFixUiCamera.node.active=!0,u.default.inst.hideTabBar(),d.default.inst.isFPSCounterStart=!1},t.prototype.onDeactivate=function(){e.prototype.onDeactivate.call(this),l.Main.inst.mainCamera.node.active=!0,u.default.inst.gameFixUiCamera.node.active=!1,u.default.inst.showTabBar(),d.default.inst.isFPSCounterStart=!0},t.prototype.start=function(){},t.prototype.update=function(){this.beginQueued&&(c.default.inst.begin(),this.beginQueued=!1)},a([g(cc.Node)],t.prototype,"fixedUINode",void 0),a([g(cc.Node)],t.prototype,"gameDebugUI_node",void 0),a([h],t)}(s.default);o.default=m,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../Game":"Game","../../Main":"Main","../../ScreenManager":"ScreenManager","../../SoundManager":"SoundManager","../../Tracking/TrackingManager":"TrackingManager"}],GameShop_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"0938fDlQktOQI+3FxBKsa6w","GameShop_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Core/Utils"),s=e("../../CrossFeatures/OfflineMode/OfflineMode"),c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/NgcItemInfoManager"),u=e("../../SDK/Nano/NanoSrv"),p=e("../Ads/Ads"),d=e("../Inventory/Inventory"),f=e("./GameShop"),h=cc._decorator,g=h.ccclass,m=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){var t=this;if(c.NgcBuildConfig.offlineMode)i.LoadAsset("offline:text/shop-table").then(function(o){t.initShopTableFromCSV(o.text),e(null,t.shopTable)});else{for(var o=0,n=u.default.inst.getCurGameInfo().itemShop;o<n.length;o++){var r=n[o];this.shopTable[r.bundleID]=r}e(null,this.shopTable)}},t.prototype._preInit=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv initialized")})},t.prototype._buyBundle=function(e,t){if(c.NgcBuildConfig.offlineMode){var o=l.NgcItemInfoManager.getInstance().ItemInfoList.find(function(t){return t.bundleID==e});s.OfflineMode.UpdateItem(o.price.currency,-o.price.value);for(var n=0,r=this._getItems(o.bundleID);n<r.length;n++){var a=r[n];s.OfflineMode.UpdateItem(a.itemID,a.count)}t(null,{})}else if(p.NgcAds.inst.isFakeAdsPlatform()){var i=this.getPrices(e)[0];d.NgcInventory.inst.getItemCount(i.currency,function(o,n){!o&&n&&n.count>=i.value?d.NgcInventory.inst.consumeItem(i.currency,i.value,function(){d.NgcInventory.inst.addItem(f.NgcGameShop.inst.getItems(e)[0].itemID,1,function(){return t(null,!0)})}):t(!1,null)})}else{var h="/shop/buy/"+e;u.default.inst.servicePost(h,null,function(e,o){e?t(e,null):t(null,o)})}},t.prototype._getPricesList=function(e){var t,o,n=[];return e.includes("&")?n=e.split("&").map(function(e){return t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),{currency:t,value:o}}):(t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),n.push({currency:t,value:o})),n},t.prototype._getPrices=function(e){var t=this.shopTable[e].price;return p.NgcAds.inst.isFakeAdsPlatform()&&(t=this.shopTable[e].alternative_coins_price||t),c.NgcBuildConfig.offlineMode&&(t=this.shopTable[e].alternative_coins_price.toString()),this._getPricesList(t)},t.prototype._getFullCost=function(e){var t=this.shopTable[e].fullCost;return this._getPricesList(t)},t.prototype._getItems=function(e){var t,o,n,r=this.shopTable[e].items,a=[];return"string"==typeof r&&(null==r?void 0:r.includes("get-item"))?(r.includes("&")?a=r.split("&").map(function(e){var t;if(e.match(/get-item\((.+)\)/i))return t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],{itemID:o,count:n}}):r.match(/get-item\((.+)\)/i)&&(t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],a.push({itemID:o,count:n})),a):null},a([g],t)}(f.NgcGameShop));o.default=m,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../SDK/Nano/NanoSrv":"NanoSrv","../Ads/Ads":"Ads","../Inventory/Inventory":"Inventory","./GameShop":"GameShop"}],GameShop:[function(e,t,o){"use strict";cc._RF.push(t,"269c8/MTrNMM6YWixi3/Z3P","GameShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameShop=o.ItemPrice=o.BundleDataList=o.BundleData=o.InventoryItemType=void 0;var i=e("../../Core/nCSV"),s=e("../Service"),c=cc._decorator,l=c.ccclass;c.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(o.InventoryItemType||(o.InventoryItemType={}));o.BundleData=function(){};o.BundleDataList=function(){};o.ItemPrice=function(){};var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopTable={},t}return r(t,e),t.prototype.getName=function(){return"NgcGameShop"},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.buyBundle=function(e,t){this._buyBundle(e,function(e,o){t(e,o)})},t.prototype.getPrices=function(e){return this._getPrices(e)},t.prototype.getFullCost=function(e){return this._getFullCost(e)},t.prototype.getItems=function(e){return this._getItems(e)},t.prototype.initShopTableFromCSV=function(e){var t=i.nCSV.parseTable(e);if(!t)return!1;var o=this;return this.shopTable={},t.forEach(function(e){var t=e.bundleID;o.shopTable.hasOwnProperty(t)?console.warn("Duplicate bundle ID: "+t):o.shopTable[t]=e}),!0},t.prototype.start=function(){},t.srvInstances=[],t.inst=null,a([l],t)}(s.NgcService);o.NgcGameShop=u,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],GameSpriteFrameMgr:[function(e,t,o){"use strict";cc._RF.push(t,"02626Rq4KRJ5ZZqlpStO24D","GameSpriteFrameMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./SpriteFrameHandler/AvatarSFHandler"),s=e("./SpriteFrameHandler/BombSFHandler"),c=e("./SpriteFrameHandler/BrandLogoSFHandler"),l=e("./SpriteFrameHandler/PowerUpSFHandler"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.powerUpSFHandler=null,t.bombSFHandler=null,t.brandLogoSFHandler=null,t.avatarSFHandler=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.inst=null,a([d(l.default)],t.prototype,"powerUpSFHandler",void 0),a([d(s.default)],t.prototype,"bombSFHandler",void 0),a([d(c.default)],t.prototype,"brandLogoSFHandler",void 0),a([d(i.default)],t.prototype,"avatarSFHandler",void 0),o=a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./SpriteFrameHandler/AvatarSFHandler":"AvatarSFHandler","./SpriteFrameHandler/BombSFHandler":"BombSFHandler","./SpriteFrameHandler/BrandLogoSFHandler":"BrandLogoSFHandler","./SpriteFrameHandler/PowerUpSFHandler":"PowerUpSFHandler"}],GameUIClock:[function(e,t,o){"use strict";cc._RF.push(t,"3e63cYbvlFFMJtYQeSBuhWZ","GameUIClock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../Game"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DEFAULT_CLOCK_TIME=0,t.clockTime=null,t._startTime=0,t._curTime=0,t._canRun=!1,t}return r(t,e),t.prototype.setStartTime=function(e){this._curTime=this._startTime=e},t.prototype.update=function(e){this._canRun&&!s.default.inst.isPaused()&&(this._curTime-=e,this._curTime>=0?this.setTimeToClockLabel(this._curTime):(this._curTime=0,this._canRun=!1))},t.prototype.active=function(){this._canRun=!0},t.prototype.deactive=function(){this._canRun=!1},t.prototype.canRun=function(){return this._canRun},t.prototype.setTimeToClockLabel=function(e){var t=""+Math.floor(e/60),o=""+Math.round(e%60);this.clockTime.string=t.padStart(2,"0")+":"+o.padStart(2,"0")},t.prototype.reset=function(){this._curTime=this._startTime=this.DEFAULT_CLOCK_TIME,this._canRun=!1,this.setTimeToClockLabel(this.DEFAULT_CLOCK_TIME)},t.prototype.playPumpingVfx=function(e){var t=this.node.getComponent(cc.Animation);t.stop();var o=t.play();o.repeatCount=Math.round(e/o.duration)},a([u(i.NgcLabelLocalized)],t.prototype,"clockTime",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../Game":"Game"}],GameUIMessage:[function(e,t,o){"use strict";cc._RF.push(t,"65fc1M4TSNHH6LjY+ik9wow","GameUIMessage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgShrinkComming=null,t.msgStartShrinking=null,t.msgFinalShowdownDuration=null,t._shrinkComingDuration=0,t._finalShowdowDuration=0,t}return r(t,e),t.prototype.setTimeShrinkComing=function(e){this._shrinkComingDuration=e},t.prototype.showMsgShrinkComing=function(e){s.NgcLocalizedManager.setTextKey(this.msgShrinkComming,"ASB_SHRINKING_COMING",[this._shrinkComingDuration]),this.msgShrinkComming.node.active=!0,this.msgStartShrinking.active=!1,this.msgFinalShowdownDuration.node.active=!1,this.show(e)},t.prototype.showMsgStartShrinking=function(e){this.msgShrinkComming.node.active=!1,this.msgStartShrinking.active=!0,this.msgFinalShowdownDuration.node.active=!1,this.show(e)},t.prototype.setFinalShowdownDuration=function(e){this._finalShowdowDuration=e},t.prototype.showMsgFinalShowdownDuration=function(e){this.msgFinalShowdownDuration.node.active=!0,s.NgcLocalizedManager.setTextKey(this.msgFinalShowdownDuration,"ASB_SHRINKING_COMING",[this._finalShowdowDuration]),this.msgShrinkComming.node.active=!1,this.msgStartShrinking.active=!1,this.show(e)},t.prototype.show=function(e){this.node.active=!0;var t=this.node.getComponent(cc.Animation);t.play(t.getClips()[0].name),this.scheduleOnce(this.hide,e)},t.prototype.hide=function(){var e=this.node.getComponent(cc.Animation);e.play(e.getClips()[1].name),e.once("finished",this.onHid,this)},t.prototype.onHid=function(){this.node.active=!1},a([u(i.NgcLabelLocalized)],t.prototype,"msgShrinkComming",void 0),a([u(cc.Node)],t.prototype,"msgStartShrinking",void 0),a([u(i.NgcLabelLocalized)],t.prototype,"msgFinalShowdownDuration",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],GameUI:[function(e,t,o){"use strict";cc._RF.push(t,"ff9f4lUA2pKxbjq0gooBX1H","GameUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../Intro/ProgressLookingPlayers"),c=e("./BombButton"),l=e("./GameUIClock"),u=e("./GameUIMessage"),p=e("./HeartBoard"),d=e("./KillAndLiveBoard"),f=e("./MapIntroduction"),h=e("./RightHUD"),g=e("../../SoundManager"),m=e("../../Utils/ConstConfig"),y=e("../../../NanoGameCore/Services/Platform/Platform"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.heartBoard=null,t.rightHUD=null,t.bombButton=null,t.gameClock=null,t.killAndLiveBoard=null,t.bombIcon=null,t.remainingBombsLabel=null,t.mapIntro=null,t.lookingForPlayerLabel=null,t.shrinkingMessage=null,t.prefabProgressLookingPlayers=null,t.darkCurtain=null,t.onLookingPlayersFinishedCB=function(){this.displayInGameUI()}.bind(t),t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,this.setEnableBombButton(!1),y.NgcPlatform.isOfflineMode()&&(this.lookingForPlayerLabel.node.opacity=0)},t.prototype.onEnable=function(){this.onRemainingBombChanged(0),this.hideInGameUI(),this.reset()},t.prototype.start=function(){},t.prototype.reset=function(){this.heartBoard.reset(),this.gameClock.reset(),this.killAndLiveBoard.reset(),this.darkCurtain.opacity=255,this.darkCurtain.active=!0},t.prototype.setStartValue=function(e,t,o,n){this.heartBoard.setHeart(e),this.gameClock.setStartTime(t),this.killAndLiveBoard.setLiveNum(o),this.killAndLiveBoard.setKillNum(n),this.gameClock.active()},t.prototype.hideInGameUI=function(){this.heartBoard.hide(),this.rightHUD.hide(),this.bombButton.hide()},t.prototype.fadeDarkCurtainOut=function(e){var t=cc.tween().to(e,{opacity:0});cc.tween(this.darkCurtain).then(t).call(function(){this.darkCurtain.active=!1}.bind(this)).start()},t.prototype.displayInGameUI=function(){this.heartBoard.fadeIn(1),this.rightHUD.fadeIn(1),this.bombButton.fadeIn(1)},t.prototype.playIntroAnim=function(e){e&&this.mapIntro.setOnMapIntroductionAnimFinish(e),this.fadeDarkCurtainOut(2),this.scheduleOnce(function(){this.play(),g.SoundManager.inst.playSound(g.SoundManager.inst.AudioClips.AsbIntroClip,m.ConstConfig.PARAMS.SOUND_MAX_VOLUME)}.bind(this.mapIntro.introAnim),1),this.scheduleOnce(this.startLookingPlayersProgress.bind(this),2)},t.prototype.startLookingPlayersProgress=function(){var e=cc.instantiate(this.prefabProgressLookingPlayers);this.node.addChild(e),e.getComponent(s.default).delegateOnLookingPlayersFinished.add(this.onLookingPlayersFinishedCB)},t.prototype.createLookingForPlayerAnim=function(){this.lookingForPlayerLabel.string.includes("...")?this.lookingForPlayerLabel.setLocalizedText("NGG_LOOKING_FOR_PLAYERS"):this.lookingForPlayerLabel.string+="."},t.prototype.showLookingForPlayer=function(){this.lookingForPlayerLabel.node.active=!0,this.schedule(this.createLookingForPlayerAnim,.5,cc.macro.REPEAT_FOREVER)},t.prototype.hideLookingForPlayer=function(){this.lookingForPlayerLabel.node.active=!1,this.unschedule(this.createLookingForPlayerAnim)},t.prototype.onRemainingBombChanged=function(e,t){void 0===t&&(t=!1),this.remainingBombsLabel.string=e.toString(),this.setEnableBombButton(e>0),t&&this.remainingBombsLabel.getComponent(cc.Animation).play()},t.prototype.setEnableBombButton=function(e){this.bombIcon.opacity=this.remainingBombsLabel.node.opacity=e?255:64},t.prototype.notifyToShrinkMap=function(e){this.gameClock.playPumpingVfx(e),this.shrinkingMessage.getComponent(u.default).setTimeShrinkComing(e),this.shrinkingMessage.getComponent(u.default).showMsgShrinkComing(3)},t.prototype.notifyStartShrinkingMap=function(){this.shrinkingMessage.getComponent(u.default).showMsgStartShrinking(3)},t.prototype.notifyFinalShowdownDuration=function(e){this.gameClock.playPumpingVfx(e),this.shrinkingMessage.getComponent(u.default).setFinalShowdownDuration(e),this.shrinkingMessage.getComponent(u.default).showMsgFinalShowdownDuration(3)},t.inst=null,t.BOMBNUMBER_SCALE_ON_COLLECTING_NEW_BOMB=1.6,a([S(p.default)],t.prototype,"heartBoard",void 0),a([S(h.default)],t.prototype,"rightHUD",void 0),a([S(c.default)],t.prototype,"bombButton",void 0),a([S(l.default)],t.prototype,"gameClock",void 0),a([S(d.default)],t.prototype,"killAndLiveBoard",void 0),a([S(cc.Node)],t.prototype,"bombIcon",void 0),a([S(cc.Label)],t.prototype,"remainingBombsLabel",void 0),a([S(f.default)],t.prototype,"mapIntro",void 0),a([S(i.NgcLabelLocalized)],t.prototype,"lookingForPlayerLabel",void 0),a([S(cc.Node)],t.prototype,"shrinkingMessage",void 0),a([S(cc.Prefab)],t.prototype,"prefabProgressLookingPlayers",void 0),a([S(cc.Node)],t.prototype,"darkCurtain",void 0),o=a([v],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../Intro/ProgressLookingPlayers":"ProgressLookingPlayers","../../SoundManager":"SoundManager","../../Utils/ConstConfig":"ConstConfig","./BombButton":"BombButton","./GameUIClock":"GameUIClock","./GameUIMessage":"GameUIMessage","./HeartBoard":"HeartBoard","./KillAndLiveBoard":"KillAndLiveBoard","./MapIntroduction":"MapIntroduction","./RightHUD":"RightHUD"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"28c57KjUVVOxLR8wZAllH2D","Game");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.MapPhase=o.GameState=void 0;var i,s,c=e("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),l=e("./Screens/PartyRoomScreen/PartyRoomManager"),u=e("../NanoGameCore/GameFramework/Scripts/NgcGame"),p=e("./GameCamera"),d=e("./Player/PlayerController"),f=e("./Player/PlayerParameters"),h=e("./Maps/MapManager"),g=e("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),m=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),y=e("./UI/GameUI/GameUI"),_=e("./Input"),v=e("../NanoGameCore/Core/Utils"),S=e("./Utils/ConstConfig"),b=e("../NanoGameCore/Services/Platform/Platform"),N=e("./UserInfo"),P=e("./Tutorial/Tutorial"),I=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),C=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),w=e("./Debug/GameScreenDebugUI"),O=e("./SoundManager"),T=e("../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),E=e("./Dialog/VideoRewardDialog/RewardDialog"),M=e("./Maps/ThemeManager"),D=e("./Tracking/TrackingManager"),R=e("../NanoGameCore/Services/Ads/Ads"),B=e("./Utils/FPS"),A=e("./Player/PlayerSkinMgr"),k=e("./TypeDefs"),L=e("../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),G=e("../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI"),F=e("./Dialog/VideoRewardDialog/ResultDialog"),j=e("./Reward/GameReward"),U=e("../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),x=e("../NanoGameCore/Core/Delegate"),H=e("./Main"),V=e("../NanoGameCore/Services/Telemetry/Telemetry"),z=e("./AsbBuildConfig"),W=e("./Utils/AsbLog"),K=e("./Network/ImprovedNetClient"),Y=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),q=e("./ScreenManager"),J=e("../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager"),X=e("../NanoGameCore/Services/Inventory/Inventory"),Q=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),Z=e("./Player/PlayerAnim"),$=e("./FakeNames"),ee=e("../globals"),te=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),oe=cc._decorator,ne=oe.ccclass,re=oe.property;(function(e){e[e.None=0]="None",e[e.AddingPlayers=1]="AddingPlayers",e[e.Playing=2]="Playing",e[e.Spectating=3]="Spectating",e[e.GameOver=4]="GameOver"})(i=o.GameState||(o.GameState={})),function(e){e[e.Normal=0]="Normal",e[e.Shrinking=1]="Shrinking",e[e.FinalShowdown=2]="FinalShowdown",e[e.FinalShrinking=3]="FinalShrinking"}(s=o.MapPhase||(o.MapPhase={}));var ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TIME_NOTIFY_BEFORE_SHRINKING=10,t.characterFlyawayText=null,t.playerParameters=null,t.totalPlayers=100,t.playersNode=null,t.parentForEmojis=null,t.parentForBubble=null,t.gameInput=null,t.crownNode=null,t.tutorialPrefab=null,t.spectatorParent=null,t.negativeTimingProgress=null,t.negativeSprite=null,t.crownTarget=null,t.gameState=i.None,t.timeInCurrentStateSec=0,t.gameClockSec=0,t.lastGameNetID="",t.gameParameters=null,t.runsThisSession=0,t.maxPosX=0,t.listFinishedPlayer=[],t.curentGameSpeedX=0,t.gameFrameRate=60,t.fps=new B.default,t.totalTime=0,t.timeStartGame=null,t.timePlayingGame=0,t.isNotifiedToShrinkMap=!1,t.isNotifiedStartShrinkMap=!1,t.isNotifiedFinalShowdownDuration=!1,t.bombs=[],t.explosions=[],t.powerUpItems=[],t.players=[],t.dangerousTiles=new Map,t.playersChangedState=[],t.startingTutorial=!1,t.tutorialHandler=null,t.curPlayerBestKill=null,t.botPickAGoalQueue=[],t._countingTotalTime=!1,t._curMapPhase=s.Normal,t.delegateOnAPlayerAdded=new x.default,t._gameResult=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"gameNetID",{get:function(){return this.curGameNetID},set:function(e){var t=(null==this.curGameNetID||""==this.curGameNetID)&&this.curGameNetID!=e;this.curGameNetID=e,t&&this.onReceiveGameNetID()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curMapPhase",{get:function(){return this._curMapPhase},set:function(e){if(this._curMapPhase!==e){if(this._curMapPhase=e,this._curMapPhase===s.Shrinking)return cc.log("%c Change to map shrinking phase","color: blue"),void this.onShrinkingPhase();if(this._curMapPhase===s.FinalShowdown)return cc.log("%c Change to Final Showdown map phase","color: blue"),void this.onFinalShowdownPhase();if(this._curMapPhase===s.FinalShrinking)return cc.log("%c Change to Final Shrinking phase","color: blue"),void this.onFinalShrinkingPhase()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localPlayerNetID",{get:function(){var e;return null===(e=d.PlayerController.localPlayer)||void 0===e?void 0:e.netID},enumerable:!1,configurable:!0}),t.prototype._onBeforeGameQueueStart=function(){},t.prototype._onBeforeGameRoundStart=function(){},t.prototype.setState=function(e){switch(this.gameState,e){case i.GameOver:break;case i.AddingPlayers:this.gameState!==e&&this.onChangeToAddingPlayerState();break;case i.Playing:this.gameState!==e&&this.onChangeToPlayingState();break;case i.Spectating:}this.gameState=e},t.prototype.getMinPlayers=function(){return this.gameParameters?this.gameParameters.gameMinPlayers:1},t.prototype.setGameParameters=function(e){this.gameParameters=e},t.prototype.isPlaying=function(){return this.gameState==i.Playing},t.prototype.begin=function(){this.setState(i.AddingPlayers),b.NgcPlatform.isOfflineMode()?(h.default.inst.initMap(),this.timeStartGame=Date.now()+3e5,this._offlineCreateBots()):(l.NgcPartyRoomManager.inst&&l.NgcPartyRoomManager.inst.isGameStartedFromRoom(),K.default.inst.joinGame());var e={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:this.checkPlayerIsDead.bind(this),parentForBubble:this.parentForBubble,parentForEmojis:this.parentForEmojis};c.NgcEmotesManager.inst.init(e),y.default.inst.showLookingForPlayer(),c.NgcEmotesManager.inst.extendEmotesUI(!0),c.NgcEmotesManager.inst.allowScrollView(!0)},t.prototype.reset=function(){for(this.setState(i.None),this.paused=!1,this.gameNetID=null,b.NgcPlatform.isOfflineMode()||K.default.inst.exitGame(),this.dangerousTiles.clear(),this.destroyAllPlayers(),this.timeInCurrentStateSec=0,this.timePlayingGame=0,this.timeStartGame=null,this.isNotifiedToShrinkMap=!1,this.isNotifiedStartShrinkMap=!1,this.isNotifiedFinalShowdownDuration=!1,this.curMapPhase=s.Normal,this.crownNode.active=!1,this.gameInput.reset(),h.default.inst.reset(),p.default.inst.reset(),y.default.inst.reset(),D.default.inst.fpsCounter.reset();this.powerUpItems.length>0;)this.powerUpItems.shift().release();for(;this.bombs.length>0;)this.bombs.shift().release();L.default.inst&&L.default.inst.reset(),_.default.inst.reset(),this.showGameUI(),this.totalTime=0,this.negativeTimingProgress.node.active=!1,this.botPickAGoalQueue=[]},t.prototype.onLoad=function(){null==o.inst?(o.inst=this,e.prototype.onLoad.call(this),G.NgcResultUI.urlPrefab=F.default.urlPrefab,G.NgcResultUI.bundleName=F.default.bundleName,G.NgcResultUI.dialogType=F.default.dialogType,z.AsbBuildConfig.UseAsbLog&&W.default.inst.setupHook(W.LogLevel.Info)):console.error("More than one Game inst created")},t.prototype.onEnable=function(){z.AsbBuildConfig.UseAsbLog&&W.default.inst.flush()},t.prototype.gameplayStart=function(){},t.prototype.updateStateFromServer=function(e){var t=this;e.gameID==this.gameNetID?e.playerState.length>0&&"Playing"==e.gameState&&e.playerState.forEach(function(e){var o=t.findPlayerByNetID(e.netID);o?o.isRemote()&&o.updateFromNetStateData(e):console.warn("Got data for a player I don't recognize")}):console.warn("Got irrelevant (preveious game?) session data")},t.prototype.getLocalGameClockSec=function(){return this.timeInCurrentStateSec},t.prototype.getServerGameClock=function(){return this.gameState!=i.AddingPlayers?Date.now()-K.default.inst.differenceTimeWithServer-this.timeStartGame:0},t.prototype.onReceiveMapData=function(e,t,o){b.NgcPlatform.isOfflineMode()||this.gameState==i.GameOver||h.default.inst.onReceiveMapData(e,t,o)},t.prototype.onMapShrinked=function(e){var t;null===(t=D.default.inst)||void 0===t||t.onMapShink(o.gameMode,this.getHumanPlayers().length,this.getNumPlayersAlive(),M.default.inst.curThemeType,e)},t.prototype.updateGameStartStatus=function(e){this.gameNetID=e.gameID,h.default.inst.isCreated||h.default.inst.initMap(),this.timeStartGame=e.gameParameters.timeGameStart;for(var t=[],n=this.getAllPlayersAsTableByID(),r=e.PlayerStartingDatas.length,a=0;a<r;a++){var i=e.PlayerStartingDatas[a];this.findPlayerByNetID(i.netID)?n[i.netID]&&delete n[i.netID]:t.push(i)}for(var s in n){var c=n[s];this.destroyPlayerByID(c.netID)}t.forEach(function(e){h.default.inst.addPlayer(e)&&o.inst.delegateOnAPlayerAdded.call(o.inst.players.length)})},t.prototype.onReceiveGameNetID=function(){var e,t=A.default.inst.getCurHero(),n=A.default.inst.getHeroUpgradeSlot(t).toString();null===(e=D.default.inst)||void 0===e||e.onGameQueueStart(this.gameNetID,o.gameMode,t,n),this._countingTotalTime=!0},t.prototype.onServerRequestGameMap=function(){h.default.inst.onRequestCreatedMap()},t.prototype.start=function(){var e=this;b.NgcPlatform.isOfflineMode()||(this.node.on("gameStartingStatus",function(t){e.updateGameStartStatus(t)},this),this.node.on("serverRequestGameMap",this.onServerRequestGameMap.bind(this))),this.crownNode.active=!1,L.default.inst&&L.default.inst.setReviveFunctions(this.canApplyRevive.bind(this),this.acceptReviveOffer.bind(this),this.refuseReviveOffer.bind(this)),T.NgcNetClient.inst.registerForBroadcastMessageType("player_disconnect",this.handleBoardcastMessagePlayerDisconnect.bind(this)),Y.default.inst.setForceGameDisconnect(function(){q.default.inst.goToStartScreen()})},t.prototype._offlineCreateBots=function(){if(b.NgcPlatform.isOfflineMode()){for(var e=0;e<99;e++){var t=$.default.inst.allocRandomPerson(),n={name:t.name+"|"+t.countryCode,skin:Z.default.chooseRandomBotSkin(),isBot:!0,netID:"bot"+e};h.default.inst.addPlayer(n),o.inst.delegateOnAPlayerAdded.call(o.inst.players.length)}var r=te.NgcCountryFlagsManager.localCountry;(null==r?void 0:r.length)<=0&&(r="fr");var a={name:Q.default.localUserName+"|"+r,skin:"",isBot:!1,netID:"human"};h.default.inst.addPlayer(a),o.inst.delegateOnAPlayerAdded.call(o.inst.players.length)}},t.prototype.update=function(e){if(this.fps.update(e),!this.isPaused()){switch(this.timeInCurrentStateSec+=e,this.gameState){case i.Playing:case i.Spectating:this.checkBombsWillExplosion(),this.checkPlayingTimeForNotifications();break;case i.GameOver:this.checkBombsWillExplosion();break;case i.AddingPlayers:h.default.inst.updateInitMap();var t=b.NgcPlatform.isOfflineMode()?Date.now():K.default.inst.getCurrentGameServerTime();this.timeStartGame&&this.timeStartGame<=t&&this.setState(i.Playing)}this.handleChangingGamePhase(),this.updateCrownPosition(),this._countingTotalTime&&(this.totalTime+=e)}},t.prototype.handleChangingGamePhase=function(){this.gameState!==i.Playing&&this.gameState!==i.Spectating||(this.curMapPhase===s.Normal&&this.timeInCurrentStateSec-this.timePlayingGame>=o.MATCH_DURATION&&(this.curMapPhase=s.Shrinking),this.curMapPhase===s.Shrinking&&this.timeInCurrentStateSec-this.timePlayingGame>=o.MATCH_DURATION+o.EXTRA_DURATION&&(this.curMapPhase=s.FinalShowdown),this.curMapPhase===s.FinalShowdown&&this.timeInCurrentStateSec-this.timePlayingGame>=o.MATCH_DURATION+o.EXTRA_DURATION+o.FINAL_SHOWDOWN_DURATION&&(this.curMapPhase=s.FinalShrinking))},t.prototype.handoverBot=function(e){var t=this.players.findIndex(function(t){return t.netID==e});if(t>-1){var o=this.players[t];if(o.isDead())return;cc.warn("Converting remote bot "+e+" to local bot...");var n=o.convertToLocalBot();this.players.splice(t,1),this.players.push(n)}else cc.error("Can't handover bot "+e+". It doesn't exist")},t.prototype.checkPlayingTimeForNotifications=function(){!this.isNotifiedToShrinkMap&&this.timeInCurrentStateSec-this.timePlayingGame>o.MATCH_DURATION-this.TIME_NOTIFY_BEFORE_SHRINKING&&(this.isNotifiedToShrinkMap=!0,y.default.inst.notifyToShrinkMap(this.TIME_NOTIFY_BEFORE_SHRINKING),O.SoundManager.inst.playSound(O.SoundManager.inst.AudioClips.MapTimerAlarmClip,S.ConstConfig.PARAMS.SOUND_MAX_VOLUME)),!this.isNotifiedStartShrinkMap&&this.timeInCurrentStateSec-this.timePlayingGame>o.MATCH_DURATION&&(this.isNotifiedStartShrinkMap=!0,y.default.inst.notifyStartShrinkingMap(),O.SoundManager.inst.playSound(O.SoundManager.inst.AudioClips.MapShrinkClip,S.ConstConfig.PARAMS.SOUND_MAX_SHRINKING_VOLUME)),!this.isNotifiedFinalShowdownDuration&&this.timeInCurrentStateSec-this.timePlayingGame>o.MATCH_DURATION+o.EXTRA_DURATION&&(this.isNotifiedFinalShowdownDuration=!0,y.default.inst.notifyFinalShowdownDuration(o.FINAL_SHOWDOWN_DURATION))},t.prototype.checkBombsWillExplosion=function(){var e=[],t=K.default.inst.getCurrentGameServerTime();this.bombs.forEach(function(o){t>=o.timeplanted+o.timeToExplosion&&e.push(o)}),e.forEach(function(e){e.isConfirmedByServer()?e.explosion():e.release()})},t.prototype.getPosEmojiForPlayerById=function(e){return this.getWPosPlayerById(e).addSelf(S.ConstConfig.PARAMS.POS_EMOJI)},t.prototype.getWPosPlayerById=function(e){var t=cc.v2(0,0);return this.players.forEach(function(o){o.netID==e&&(t=o.getWorldPosition())}),t},t.prototype.getPlayerFromNetID=function(e){var t=null;return this.players.forEach(function(o){o.netID==e&&(t=o)}),t},t.prototype.destroyPlayerByID=function(e){var t=this.findPlayerIndexByNetID(e);if(!(t<0)){var o=this.players[t];this.players.splice(t,1),o.node.destroy()}},t.prototype.findPlayerIndexByNetID=function(e){for(var t=this.players.length,o=0;o<t;o++)if(this.players[o].netID==e)return o;return-1},t.prototype.getAllPlayersAsTableByID=function(){var e={};return this.players.forEach(function(t){e[t.netID]=t}),e},t.prototype.getAllLocallyControlledPlayers=function(){var e=[];return this.players.forEach(function(t){(t.isLocallyControlledBot()||t.isLocalHuman())&&e.push(t)}),e},t.prototype.findPlayerByNetID=function(e){for(var t=this.players.length,o=0;o<t;o++){var n=this.players[o];if(n.netID==e)return n}return null},t.prototype.checkPlayerIsDead=function(e){var t=!1;return this.players.forEach(function(o){o.netID==e&&(t=o.isDead())}),t},t.prototype.addPlayerChangedState=function(){},t.prototype.getObjectStateData=function(){var e=this,t=K.default.inst.getCurrentGameServerTime();return this.playersChangedState=[],this.players.forEach(function(o){o.isRemote()||e.playersChangedState.push({netID:o.netID,posInMap:o.posInMap.x<<8|o.posInMap.y,position:o.node.getPosition(),curDirection:o.curDirection,curSpeed:o.data.curSpeed,timeChangeState:t,curState:o.curState,data:o.data.toUint8Array()})}),{playerData:this.playersChangedState}},t.prototype.clearObjectStateUpdated=function(){this.playersChangedState=[]},t.prototype.isTileDangerous=function(e){var t=e.x.toString()+","+e.y.toString();return this.dangerousTiles.has(t)},t.prototype.addDangerousTile=function(e,t,o){void 0===o&&(o=!1);var n=e.toString()+","+t.toString();this.dangerousTiles.set(n,o?1:0)},t.prototype.removeDangerousTile=function(e,t){var o=e.toString()+","+t.toString();if(this.dangerousTiles.has(o)){if(1==this.dangerousTiles.get(o))return;this.dangerousTiles.delete(o)}},t.prototype.getSpectatorParrent=function(){return this.spectatorParent},Object.defineProperty(t.prototype,"gameResult",{get:function(){return this._gameResult},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameReward",{get:function(){return this._gameReward},enumerable:!1,configurable:!0}),t.prototype.onGameHasResult=function(e,t){this._gameResult={isVictory:e,playerKill:t.curKill,playerRank:t.curRank},this._gameReward=new j.default(this._gameResult),Y.default.inst.onGameplayOver(),this.setState(this._gameResult.isVictory?i.GameOver:i.Spectating)},t.prototype._gameOver=function(){var e,t;this.gameState!==i.AddingPlayers&&(J.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),null===(e=D.default.inst)||void 0===e||e.onGameRoundOver(this.gameNetID,this.totalTime,o.gameMode,this.gameReward,M.default.inst.curThemeType,this.getNumPlayersAlive(),d.PlayerController.localPlayer.data,this.fps),H.Main.setAppContext(m.AppContext.Results),this.lastGameNetID=this.gameNetID,this.hideGameUI(),o.inst.startingTutorial&&o.inst.tutorialHandler.endTutorial(),this._countingTotalTime=!1,d.PlayerController.localPlayerInFTUE&&(d.PlayerController.localPlayerInFTUE=!1),null===(t=V.NgcTelemetry.inst)||void 0===t||t.LogEvent_EnterScreen(v.Utils.enumToString(m.AppContext,m.AppContext.EndOfActionPhase)))},t.prototype.showResult=function(){var e=this;g.NgcDialogManager.createDialog(G.NgcResultUI.dialogType,G.NgcResultUI.urlPrefab,G.NgcResultUI.bundleName).then(function(t){var o=t.getComponent(G.NgcResultUI);o.init(function(){var t;e.uploadBestScore(),d.PlayerController.localPlayer.isAlive()||null===(t=U.NgcSpectatorManager.inst)||void 0===t||t.startSpectator()}),o.show()})},t.prototype.onAfterVideoReviveCB=function(e){e||L.default.inst.notUsingAdToRevive()?this.showRewardDialog():this.goBackMainMenu()},t.prototype.showRewardDialog=function(){var e=this;g.NgcDialogManager.createDialog(E.default.dialogType,E.default.urlPrefab,E.default.bundleName).then(function(t){var o=t.getComponent(E.default);o&&(o.init(e.onRewarDialogClosed.bind(e)),o.show())})},t.prototype.onRewarDialogClosed=function(){var e;null===(e=D.default.inst)||void 0===e||e.onGameOverClicked(d.PlayerController.localPlayer.data,this.fps,this._gameReward.crown.count),this.goBackMainMenu()},t.prototype.goBackMainMenu=function(){this.reset(),H.Main.inst.setState(m.AppState.StartScreen),z.AsbBuildConfig.UseAsbLog&&W.default.inst.save()},t.prototype.onShrinkingPhase=function(){h.default.inst.startShrinking(o.EXTRA_DURATION),y.default.inst.gameClock.setStartTime(o.EXTRA_DURATION+o.FINAL_SHOWDOWN_DURATION),y.default.inst.gameClock.active()},t.prototype.onFinalShowdownPhase=function(){h.default.inst.stopShrinking(),y.default.inst.gameClock.setStartTime(o.FINAL_SHOWDOWN_DURATION),y.default.inst.gameClock.active()},t.prototype.onFinalShrinkingPhase=function(){h.default.inst.startFinalShrinking()},t.prototype.applyUserBooster=function(){var e=H.Main.inst.getLocalPlayer();switch(N.UserInfo.curBooster){case N.boosterType.bomb_up:e.data.curBombNum+=1;break;case N.boosterType.fire_up:e.data.rangeOfBomb+=1;break;case N.boosterType.speed_up:e.data.amountSpeedUpdate+=1}N.UserInfo.curBooster&&X.NgcInventory.inst.consumeItem(v.Utils.enumToString(N.boosterType,N.UserInfo.curBooster),1,function(){J.NgcLuckyBoosterManager.getInstance().consumeBooster()}),N.UserInfo.curBooster=N.boosterType.none},t.prototype.onChangeToPlayingState=function(){var e;if(this.onGamePlayStart(),N.UserInfo.alreadyFTUE){var t=A.default.inst.getCurHero(),n=A.default.inst.getHeroUpgradeSlot(t).toString();null===(e=D.default.inst)||void 0===e||e.onGameRoundStart(this.gameNetID,o.MATCH_DURATION+o.EXTRA_DURATION,o.gameMode,M.default.inst.curThemeType,this.getHumanPlayers().length,d.PlayerController.localPlayer.data,t,n)}var r=d.PlayerController.localPlayer.data.curHp,a=o.MATCH_DURATION+o.EXTRA_DURATION+o.FINAL_SHOWDOWN_DURATION,i=o.inst.getNumPlayersAlive();y.default.inst.setStartValue(r,a,i,0),y.default.inst.hideLookingForPlayer(),y.default.inst.onRemainingBombChanged(d.PlayerController.localPlayer.data.curRemainingBomb),this.timePlayingGame=this.timeInCurrentStateSec,c.NgcEmotesManager.inst.extendEmotesUI(!1),this.startingTutorial=d.PlayerController.localPlayerInFTUE,this.startingTutorial&&this.initTutorial(),d.PlayerController.localPlayer.getAnimation().idle(),C.NgcBuildConfig.enabledDebugMode&&w.default.inst.updateNumberOfBotInfo()},t.prototype.getNumPlayersAlive=function(){for(var e=0,t=0;t<this.players.length;t++)this.players[t].isAlive()&&e++;return e},t.prototype.getTotalNumPlayers=function(){return this.players.length},t.prototype.countHumanPlayers=function(){var e=0;return this.players.forEach(function(t){t.isHuman&&e++}),e},t.prototype.destroyAllPlayers=function(){this.players.forEach(function(e){return e.node.destroy()}),this.players=[]},t.prototype.onChangeToAddingPlayerState=function(){var e;null===(e=V.NgcTelemetry.inst)||void 0===e||e.LogEvent_EnterScreen(v.Utils.enumToString(m.AppContext,m.AppContext.Matchmaking))},t.prototype.isPaused=function(){return o.inst.paused},t.prototype.onSomePlayersHasKill=function(){var e=this.getPlayerBestKill();this.curPlayerBestKill=e,this.crownNode.active=!!e,this.crownNode.active&&(this.crownTarget=e.node)},t.prototype.getPlayerBestKill=function(){var e=0,t=null;return this.players.forEach(function(o){o.isLeader=!1,o.isAlive()&&(o.data.curKill>e?(e=o.data.curKill,t=o):o.data.curKill==e&&(t=null))}),t&&(t.isLeader=!0),t},t.prototype.updateCrownPosition=function(){if(this.crownNode.active){var e=v.Utils.getWorldPos(this.crownTarget);e.addSelf(o.CROWN_POS_OFFSET),v.Utils.setWorldPos(this.crownNode,e)}},t.prototype.getNumHumanPlayersAlive=function(){for(var e=0,t=0;t<this.players.length;t++){var o=this.players[t];o.isAlive()&&o.isHuman&&e++}return e},t.prototype.initTutorial=function(){if(!this.tutorialPrefab)return cc.error("tutorialPrefab not FOUND"),void(this.startingTutorial=!1);var e=cc.instantiate(this.tutorialPrefab);this.tutorialHandler=e.getComponent(P.default),this.tutorialHandler?(e.parent=y.default.inst.node,e.getComponent(cc.Widget).updateAlignment(),this.tutorialHandler.startTutorialTurn(P.E_TUTORIAL_TURN.FIRST_MOVE)):cc.error("tutorial component not FOUND")},t.prototype.onTutorialEnds=function(){o.inst.startingTutorial=!1},t.prototype.getHumanPlayers=function(){return this.players.filter(function(e){return e.isHuman})},t.prototype.onLocalPlayerRemainingBombChanged=function(e,t){_.default.inst.setEnableBombTouchArea(e>0),y.default.inst.onRemainingBombChanged(e,t)},t.prototype.canApplyRevive=function(){var e=d.PlayerController.localPlayer;if(!e)return console.error("[ReviveHandler] - canRevive: localPlayer not found"),!1;if(this.curMapPhase===s.Shrinking||this.curMapPhase===s.FinalShrinking){var t=e.posInMap,o=h.default.inst.rowEdgeIndex,n=h.default.inst.mapInfo.numRow-h.default.inst.rowEdgeIndex-1,r=h.default.inst.colEdgeIndex,a=h.default.inst.mapInfo.numColumn-h.default.inst.colEdgeIndex-1;if(Math.min(n-t.y,t.y-o,t.x-r,a-t.x)<=S.ConstConfig.PARAMS.REVIVE.MIN_DISTANCE_FROM_SHRINKING_LAYER)return!1}return!!(this.getNumPlayersAlive()>S.ConstConfig.PARAMS.REVIVE.MIN_REMAINING_PLAYERS)},t.prototype.acceptReviveOffer=function(){I.default.inst.hide(I.NgcPointcuts.bannerRevive,R.AdsType.Banner);var e=d.PlayerController.localPlayer;e?(e.setState(d.PlayerState.Revive),O.SoundManager.inst.playSound(O.SoundManager.inst.AudioClips.PlayerReviveClip,.7)):console.error("[ReviveHandler] - acceptOffer: localPlayer not found")},t.prototype.refuseReviveOffer=function(){I.default.inst.hide(I.NgcPointcuts.bannerRevive,R.AdsType.Banner);var e=d.PlayerController.localPlayer;e?e.playerRefuseRevive():console.error("[ReviveHandler] - refuseOffer: localPlayer not found")},t.prototype.handleBoardcastMessagePlayerDisconnect=function(e){this.players.forEach(function(t){t.isRemote()&&t.netID===e.fromID&&(t.isConnected=!1,t.setState(d.PlayerState.Idle))})},t.prototype.showReviveDialog=function(){L.default.inst.showReviveDialog()},t.prototype.showVideoReward=function(){var e;(null===(e=L.default.inst)||void 0===e?void 0:e.isOfferAccepted())?I.default.inst.showRewardVideo(I.NgcPointcuts.videoReviveDialog,null,null,null,this.onAfterVideoReviveCB.bind(this)):this.showRewardDialog(),Q.default.uploadTotalRoundCount(),b.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_FINISHGAMEPLAY:!0}),"*")},t.prototype.showGameUI=function(){y.default.inst.node.active=!0,_.default.inst.node.active=!0},t.prototype.hideGameUI=function(){y.default.inst.node.active=!1,_.default.inst.node.active=!1},t.prototype.uploadBestScore=function(){},t.prototype.lateUpdate=function(){var e=this.botPickAGoalQueue.shift();e&&e.isAlive()&&e.firePickAGoal()},t.MATCH_DURATION=120,t.EXTRA_DURATION=60,t.FINAL_SHOWDOWN_DURATION=15,t.FINAL_SHOWDOWN_TILES=5,t.WIN_ZOOM_RATION_PC=3,t.WIN_ZOOM_RATION_MOBILE=2,t.TINT_OPACITY=.7,t.inst=null,t.gameMode=k.GameMode.ClassicBattleRoyale,t.CROWN_POS_OFFSET=cc.v2(0,210),a([re(cc.Prefab)],t.prototype,"characterFlyawayText",void 0),a([re(f.default)],t.prototype,"playerParameters",void 0),a([re],t.prototype,"totalPlayers",void 0),a([re(cc.Node)],t.prototype,"playersNode",void 0),a([re(cc.Node)],t.prototype,"parentForEmojis",void 0),a([re(cc.Node)],t.prototype,"parentForBubble",void 0),a([re(_.default)],t.prototype,"gameInput",void 0),a([re(cc.Node)],t.prototype,"crownNode",void 0),a([re(cc.Prefab)],t.prototype,"tutorialPrefab",void 0),a([re(cc.Node)],t.prototype,"spectatorParent",void 0),a([re(cc.ProgressBar)],t.prototype,"negativeTimingProgress",void 0),a([re(cc.Sprite)],t.prototype,"negativeSprite",void 0),o=a([ne],t)}(u.NgcGame);o.default=ae,ee.default.Game=ae,cc._RF.pop()},{"../NanoGameCore/Core/Delegate":"Delegate","../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/Services/Ads/Ads":"Ads","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../globals":"globals","./AsbBuildConfig":"AsbBuildConfig","./Debug/GameScreenDebugUI":"GameScreenDebugUI","./Dialog/VideoRewardDialog/ResultDialog":"ResultDialog","./Dialog/VideoRewardDialog/RewardDialog":"RewardDialog","./FakeNames":"FakeNames","./GameCamera":"GameCamera","./Input":"Input","./Main":"Main","./Maps/MapManager":"MapManager","./Maps/ThemeManager":"ThemeManager","./Network/ImprovedNetClient":"ImprovedNetClient","./Player/PlayerAnim":"PlayerAnim","./Player/PlayerController":"PlayerController","./Player/PlayerParameters":"PlayerParameters","./Player/PlayerSkinMgr":"PlayerSkinMgr","./Reward/GameReward":"GameReward","./ScreenManager":"ScreenManager","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./SoundManager":"SoundManager","./Tracking/TrackingManager":"TrackingManager","./Tutorial/Tutorial":"Tutorial","./TypeDefs":"TypeDefs","./UI/GameUI/GameUI":"GameUI","./UserInfo":"UserInfo","./Utils/AsbLog":"AsbLog","./Utils/ConstConfig":"ConstConfig","./Utils/FPS":"FPS"}],HeartBoard:[function(e,t,o){"use strict";cc._RF.push(t,"5729c6Vx4lO+IOixd+1Ooh9","HeartBoard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameSpriteFrameMgr"),s=e("../../Player/PlayerSkinMgr"),c=e("./HeartItem"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.characterIconSprite=null,t.heartBackground=null,t.heartsContainerLayout=null,t.heartPrefab=null,t.heartWidth=0,t.backgroundBaseWidth=0,t._originPos=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this._originPos=this.node.position,this.heartBackground.width=this.backgroundBaseWidth.valueOf()+o.MAX_HEART_NUM*this.heartWidth.valueOf()+o.MAX_HEART_NUM*this.heartsContainerLayout.getComponent(cc.Layout).spacingX;for(var e=0;e<o.MAX_HEART_NUM;e++){var t=cc.instantiate(this.heartPrefab);this.heartsContainerLayout.addChild(t)}},t.prototype.onEnable=function(){this.characterIconSprite.spriteFrame=i.default.inst.avatarSFHandler.getAvatarSFFromHero(s.default.inst.getCurHero())},t.prototype.hide=function(){this.node.setPosition(this._originPos.x-this.heartBackground.width-50,this._originPos.y)},t.prototype.fadeIn=function(e){var t=cc.tween().to(e,{position:this._originPos});cc.tween(this.node).then(t).start()},t.prototype.setHeart=function(e){for(var t=0;t<o.MAX_HEART_NUM;t++)this.heartsContainerLayout.children[t].getComponent(c.default).setOn(t<e)},t.prototype.reset=function(){this.setHeart(o.DEFAULT_HEART_NUM)},t.MAX_HEART_NUM=2,t.DEFAULT_HEART_NUM=1,a([p(cc.Sprite)],t.prototype,"characterIconSprite",void 0),a([p(cc.Node)],t.prototype,"heartBackground",void 0),a([p(cc.Node)],t.prototype,"heartsContainerLayout",void 0),a([p(cc.Prefab)],t.prototype,"heartPrefab",void 0),a([p(cc.Integer)],t.prototype,"heartWidth",void 0),a([p(cc.Integer)],t.prototype,"backgroundBaseWidth",void 0),o=a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../GameSpriteFrameMgr":"GameSpriteFrameMgr","../../Player/PlayerSkinMgr":"PlayerSkinMgr","./HeartItem":"HeartItem"}],HeartItem:[function(e,t,o){"use strict";cc._RF.push(t,"5546fdqO79IGYh7Nol+yBsQ","HeartItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onNode=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.setOn=function(e){var t=this.onNode.active;this.onNode.active=e,e&&!t&&this.node.getComponent(cc.Animation).play()},a([c(cc.Node)],t.prototype,"onNode",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ImprovedNetClient:[function(e,t,o){"use strict";cc._RF.push(t,"35bd8940NxCXIzMbEq/2s8X","ImprovedNetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),l=e("./messages/ASBMessages"),u=e("./messages/ASBMessageDefines"),p=e("../Game"),d=e("../FakeNames"),f=e("../Player/PlayerAnim"),h=e("../GameObjects/PowerUpItem"),g=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),m=e("../Main"),y=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),_=e("../Player/PlayerSkinMgr"),v=e("../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface"),S=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),b=e("../../NanoGameCore/Services/Platform/Platform"),N=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),P=cc._decorator,I=P.ccclass,C=P.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.differenceTimeWithServer=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("More than one ImprovedNetClient!!"):(o.inst=this,o.GAME_UPDATE_TIME_MS=200,e.prototype.onLoad.call(this))},t.prototype.onOpen=function(){var e=this;this.setOnDisconnectedListener(function(t){return i(e,void 0,void 0,function(){return s(this,function(){switch(t){case v.DisconnectReason.Server:S.default.showNetworkDisconnect();break;case v.DisconnectReason.ForcedByClient:console.log("Force by client")}return[2]})})}),this.onMessage(l.MessageType.SERVER_ROOMINIT,this.onServerRoomInit.bind(this)),this.onMessage(l.MessageType.SERVER_ORDERCREATEBOT,this.onServerOrderCreateBot.bind(this)),this.onMessage(l.MessageType.SERVER_GAMESTARTINGSTATUS,this.onServerGameStartingStatus.bind(this)),this.onMessage(l.MessageType.SERVER_FULLGAMESTATE,this.onServerFullGameState.bind(this)),this.onMessage(l.MessageType.SERVER_UNIQUE_ITEM_CLAIMED,this.onServerUniqueItemClaimed.bind(this)),this.onMessage(l.MessageType.SERVER_DELIVERGAMEMAP,this.onServerDeliverGameMap.bind(this)),this.onMessage(l.MessageType.SERVER_MAPSHRINKED,this.onServerMapShrinked.bind(this)),this.onMessage(l.MessageType.SERVER_REQUESTGAMEMAP,this.onServerRequestMap.bind(this)),this.onMessage(l.MessageType.SERVER_HANDOVERBOT,this.onServerHandoverBot.bind(this))},t.prototype.onError=function(){return i(this,void 0,void 0,function(){return s(this,function(){return console.log("Disconnected from server"),this.connected=!1,p.default.inst&&!b.NgcPlatform.isOfflineMode()&&p.default.inst.pause(!0),[2]})})},t.prototype.onClose=function(){return i(this,void 0,void 0,function(){return s(this,function(){return console.log("Disconnected from server"),this.connected=!1,p.default.inst&&!b.NgcPlatform.isOfflineMode()&&p.default.inst.pause(!0),[2]})})},t.prototype.onServerInit=function(e){console.log("Connected to server {version: "+e.serverVersion+"}. My client id: "+e.clientID)},t.prototype._onPreExitGame=function(){console.log("====== EXIT GAME ======"),this.stopGameMode()},t.prototype.onServerRoomInit=function(e){var t=u.Server_RoomInit.decode(e);this.localPlayerID=t.playerID,this.schedule(this.sendLocalPlayerGameState.bind(this),c.NgcNetClientRefactor.GAME_UPDATE_TIME_MS/1e3)},t.prototype.onServerOrderCreateBot=function(e){var t=u.Server_OrderCreateBot.decode(e),o=d.default.inst.allocRandomPerson(),n=o.name+"|"+o.countryCode,r=f.default.chooseRandomBotSkin();this.websocket.send(l.Msg_Client_RequestCreateBot(t.botID,n,r))},t.prototype.onServerGameStartingStatus=function(e){var t=u.Server_GameStartingStatus.decode(e);p.default.inst.node.emit("gameStartingStatus",t),p.default.inst.setGameParameters(t.gameParameters),this.setServerTime(t.serverTime)},t.prototype.onServerUniqueItemClaimed=function(e){var t=u.Server_UniqueItemClaimed.decode(e);if(t.gameID==p.default.inst.curGameNetID){var o=h.default.findItemByID(t.uniqueItemID),n=p.default.inst.findPlayerByNetID(t.playerNetID);o&&n&&o.collect(n)}else console.warn("Got message from unknown gameID "+t.gameID)},t.prototype.onServerFullGameState=function(e){var t=u.Server_FullGameState.decode(e);p.default.inst.updateStateFromServer(t)},t.prototype.onServerDeliverGameMap=function(e){var t=u.Server_DeliverGameMap.decode(e),o=t.bombs;p.default.inst.onReceiveMapData(t.explodedPosList,Array.from(t.mapData),o)},t.prototype.onServerMapShrinked=function(e){var t=u.Server_MapShrinked.decode(e);p.default.inst.onMapShrinked(t.curRound)},t.prototype.onServerRequestMap=function(){p.default.inst.node.emit("serverRequestGameMap")},t.prototype.onServerHandoverBot=function(e){var t=u.Server_HandoverBot.decode(e);cc.log("handleMessage_ServerHandoverBot "+t.botNetID),p.default.inst.handoverBot(t.botNetID)},t.prototype.joinGame=function(){var e=g.default.localUserName;e&&""!=e||(e=m.Main.inst.createFakeName());var t=e+"|"+(null==y.NgcCountryFlagsManager.localCountry?"us":y.NgcCountryFlagsManager.localCountry),o=_.default.inst.getCurHero();this.sendJoinGameMessage("asb_gameroom",{buildVersion:N.NgcBuildConfig.buildVersionName,name:t,skin:o,gameMode:p.default.gameMode},{})},t.prototype.provideGameMap=function(e,t,o,n,r,a,i,s){this.websocket.send(l.Msg_Client_ProvideGameMap(e,new Uint8Array(t),o,n,r,a,i,s))},t.prototype.sendLocalPlayerGameState=function(){if(this.isConnected()){var e=l.Msg_Client_PlayerStateData(p.default.inst.getObjectStateData().playerData,p.default.inst.curGameNetID);this.websocket.send(e),p.default.inst.clearObjectStateUpdated()}},t.prototype.claimUniqueItem=function(e,t,o,n){this.isConnected()&&this.websocket.send(l.Msg_Client_ClaimUniqueItem(p.default.inst.curGameNetID,e,t,o,n))},t.prototype.requestPlantBomb=function(e,t,o,n,r,a,i){this.isConnected()&&this.websocket.send(l.Msg_Client_PlantBomb(p.default.inst.curGameNetID,a,e,t,o,n,r,i))},t.prototype.getCurrentGameServerTime=function(){return Math.round(Date.now()+this.serverDelta)},t.prototype.startGameMode=function(){this.schedule(this.sendLocalPlayerGameState.bind(this),c.NgcNetClientRefactor.GAME_UPDATE_TIME_MS/1e3)},t.prototype.stopGameMode=function(){this.unschedule(this.sendLocalPlayerGameState.bind(this))},t.inst=null,a([C(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),o=a([I],t)}(c.NgcNetClientRefactor);o.default=w,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface":"NetworkInterface","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Platform/Platform":"Platform","../FakeNames":"FakeNames","../Game":"Game","../GameObjects/PowerUpItem":"PowerUpItem","../Main":"Main","../Player/PlayerAnim":"PlayerAnim","../Player/PlayerSkinMgr":"PlayerSkinMgr","./messages/ASBMessageDefines":"ASBMessageDefines","./messages/ASBMessages":"ASBMessages"}],Input:[function(e,t,o){"use strict";cc._RF.push(t,"f439ad3YOpLSJoYwx4IimFD","Input");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),s=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),c=e("./Debug/GameScreenDebugUI"),l=e("./Game"),u=e("./GameCamera"),p=e("./Maps/MapManager"),d=e("./Player/PlayerController"),f=e("./Tutorial/Tutorial"),h=cc._decorator,g=h.ccclass,m=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchpad=null,t.finger=null,t.fixedPosUINode=null,t.touchBombArea=null,t._isHoding=!1,t._posTouchpad=null,t._isTouchPadNeedUpdate=!1,t._isPressUp=!1,t._isPressDown=!1,t._isPressLeft=!1,t._isPressRight=!1,t._timeHoldingBombButton=-1,t.MAX_STACK_INPUT=2,t.TOUCH_PAD_LERP_VALUE=.85,t.TIME_TOUCH_HOLD_TO_PLANT_BOMB=.3,t.DEAD_TOUCH_ZONE=10,t.DIAGONAL_DEADZONE=.25,t.startTouchLocation=null,t._isTouchBombInHolding=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=document.getElementById("GameCanvas");e&&(e.onmouseleave=this.onMouseLeaveGameCanvas.bind(this))},t.prototype.start=function(){o.inst=this,this.node.on(cc.Node.EventType.TOUCH_START,function(e){s.default.inst.onPlayerInput(),this.onTouchStart(e)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){s.default.inst.onPlayerInput(),this.onTouchMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){s.default.inst.onPlayerInput(),this.onTouchEnd(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){s.default.inst.onPlayerInput(),this.onTouchEnd(e)},this),this.setEnableBombTouchArea(!0),this.touchpad.active=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){if(l.default.inst.isPlaying()&&!d.PlayerController.localPlayer.isDead()&&!d.PlayerController.localPlayer.isReviving())switch(s.default.inst.onPlayerInput(),e.keyCode){case cc.macro.KEY.right:case cc.macro.KEY.d:this._isPressRight=!0,this.updateMoveDirection();break;case cc.macro.KEY.left:case cc.macro.KEY.a:this._isPressLeft=!0,this.updateMoveDirection();break;case cc.macro.KEY.up:case cc.macro.KEY.w:this._isPressUp=!0,this.updateMoveDirection();break;case cc.macro.KEY.down:case cc.macro.KEY.s:this._isPressDown=!0,this.updateMoveDirection();break;case cc.macro.KEY.space:d.PlayerController.localPlayer.plantBomb()}},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){if(l.default.inst.isPlaying()&&!d.PlayerController.localPlayer.isDead()&&!d.PlayerController.localPlayer.isReviving())switch(s.default.inst.onPlayerInput(),e.keyCode){case cc.macro.KEY.right:case cc.macro.KEY.d:this._isPressRight=!1,this.updateMoveDirection();break;case cc.macro.KEY.left:case cc.macro.KEY.a:this._isPressLeft=!1,this.updateMoveDirection();break;case cc.macro.KEY.up:case cc.macro.KEY.w:this._isPressUp=!1,this.updateMoveDirection();break;case cc.macro.KEY.down:case cc.macro.KEY.s:this._isPressDown=!1,this.updateMoveDirection();break;case cc.macro.KEY.space:}},this)},t.prototype.setEnableBombTouchArea=function(e){var t=this;e?(this.touchBombArea.on(cc.Node.EventType.TOUCH_START,this.onBombAreaTouchStart,this),this.touchBombArea.on(cc.Node.EventType.TOUCH_END,this.onBombAreaTouchEnd,this),this.touchBombArea.on(cc.Node.EventType.TOUCH_MOVE,this.onBombAreaTouchMove,this),this.touchBombArea.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._timeHoldingBombButton=-1,t._isTouchBombInHolding=!1},this)):(this.touchBombArea.off(cc.Node.EventType.TOUCH_START),this.touchBombArea.off(cc.Node.EventType.TOUCH_END),this.touchBombArea.off(cc.Node.EventType.TOUCH_MOVE),this.touchBombArea.off(cc.Node.EventType.TOUCH_CANCEL))},t.prototype.onTouchStart=function(e){if(l.default.inst.isPlaying()&&!d.PlayerController.localPlayer.isDead()&&!this._isHoding){this._isHoding=!0,this.startTouchLocation=e.getStartLocation(),this._posTouchpad=cc.v2(e.getLocationX(),e.getLocationY()),this.touchpad.active=!0;var t=this.fixedPosUINode.getPosition();this.touchpad.setPosition(cc.v2(this._posTouchpad.x-t.x,this._posTouchpad.y-t.y)),p.default.inst.ArrowIcon.y=0,p.default.inst.ArrowIcon.parent.angle=0,cc.tween(p.default.inst.ArrowIcon).to(.1,{opacity:255}).start()}},t.prototype.onTouchMove=function(e){var t;if(l.default.inst.isPlaying()&&!d.PlayerController.localPlayer.isDead()&&(this.startTouchLocation.x==e.getStartLocation().x||this.startTouchLocation.y==e.getStartLocation().y)&&this._isHoding){var o=cc.v2(e.getLocationX(),e.getLocationY()),n=cc.Vec2.distance(o,this._posTouchpad),r=cc.v2(o.x,o.y).sub(this._posTouchpad);this.finger.setPosition(r.normalizeSelf().mul(Math.min(n,this.touchpad.width/2))),p.default.inst.ArrowIcon.y=1.5*n,p.default.inst.ArrowIcon.parent.angle=-cc.misc.radiansToDegrees(this.finger.getPosition().signAngle(cc.v2(0,1))),n>this.DEAD_TOUCH_ZONE&&(Math.abs(r.x)>=2*Math.abs(r.y)?d.PlayerController.localPlayer.curDirection=r.x>0?d.E_MOVE_DIRECTION.Right:d.E_MOVE_DIRECTION.Left:Math.abs(r.y)>=2*Math.abs(r.x)?d.PlayerController.localPlayer.curDirection=r.y>0?d.E_MOVE_DIRECTION.Up:d.E_MOVE_DIRECTION.Down:r.x>0&&r.y>0?d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.UpRight:r.x<0&&r.y>0?d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.UpLeft:r.x>0&&r.y<0?d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.DownRight:r.x<0&&r.y<0&&(d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.DownLeft)),this.setTargetTouchPadPos(n,r),l.default.inst.startingTutorial&&(null===(t=l.default.inst.tutorialHandler)||void 0===t?void 0:t.getTutorialCurTurn())===f.E_TUTORIAL_TURN.FIRST_MOVE&&l.default.inst.tutorialHandler.startTutorialTurn(f.E_TUTORIAL_TURN.PLANT_BOMB)}},t.prototype.update=function(e){this._isHoding&&this._isTouchPadNeedUpdate&&(this.touchpad.setPosition(this.touchpad.position.lerp(cc.v3(this._targetTouchPadPos),this.TOUCH_PAD_LERP_VALUE)),this._posTouchpad=this.touchpad.getPosition().add(this.fixedPosUINode.getPosition())),this._timeHoldingBombButton>=0&&(this._timeHoldingBombButton+=e)},t.prototype.setTargetTouchPadPos=function(e,t){this._isTouchPadNeedUpdate=e>this.touchpad.width/2,this._isTouchPadNeedUpdate&&(this._targetTouchPadPos=this.touchpad.getPosition().add(t.mul(e-this.touchpad.width/2)))},t.prototype.onTouchEnd=function(e){i.NgcEmotesManager.inst&&i.NgcEmotesManager.inst.currentEmotesUIInst&&i.NgcEmotesManager.inst.currentEmotesUIInst.onTapDown(null),l.default.inst.isPlaying()&&!d.PlayerController.localPlayer.isDead()&&(this.startTouchLocation.x!=e.getStartLocation().x&&this.startTouchLocation.y!=e.getStartLocation().y||(this.startTouchLocation=null,this._isHoding=!1,this._isTouchPadNeedUpdate=!1,this.touchpad.active=!1,this.finger.setPosition(cc.v2(0,0)),d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Idle,cc.tween(p.default.inst.ArrowIcon).to(.1,{y:0}).to(.1,{opacity:0}).start()))},t.prototype.cycleView=function(){var e=l.default.inst.players.filter(function(e){return!e.isDead()}),t=e.indexOf(u.default.inst.target);++t>=e.length&&(t=0),u.default.inst.setTarget(e[t],1,!0)},t.prototype.zoomInOnClick=function(){var e;u.default.inst.zoomRatio+=.02,null===(e=c.default.inst)||void 0===e||e.updateZoomRatioDebugDisplay()},t.prototype.zoomOutOnClick=function(){var e;u.default.inst.zoomRatio-=.02,null===(e=c.default.inst)||void 0===e||e.updateZoomRatioDebugDisplay()},t.prototype.speedUpOnClick=function(){d.PlayerController.localPlayer.data.curSpeed+=25},t.prototype.speedDownOnClick=function(){d.PlayerController.localPlayer.data.curSpeed-=25},t.prototype.onBombAreaTouchStart=function(e){this._timeHoldingBombButton=0,this._isHoding&&(this._isTouchBombInHolding=!0,e.stopPropagation())},t.prototype.onBombAreaTouchEnd=function(e){i.NgcEmotesManager.inst&&i.NgcEmotesManager.inst.currentEmotesUIInst&&i.NgcEmotesManager.inst.currentEmotesUIInst.onTapDown(null),this._timeHoldingBombButton<=this.TIME_TOUCH_HOLD_TO_PLANT_BOMB&&(d.PlayerController.localPlayer.plantBomb(),this._isHoding&&this._isTouchBombInHolding&&e.stopPropagation()),this._timeHoldingBombButton=-1,this._isTouchBombInHolding=!1},t.prototype.onBombAreaTouchMove=function(e){this._isHoding&&1!==this._timeHoldingBombButton&&this._timeHoldingBombButton<=this.TIME_TOUCH_HOLD_TO_PLANT_BOMB&&e.stopPropagation()},t.prototype.updateMoveDirection=function(){var e,t=0,o=0;switch(t+=this._isPressRight?1:0,t+=this._isPressLeft?-1:0,o+=this._isPressUp?1:0,o+=this._isPressDown?-1:0,t){case-1:switch(o){case-1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.DownLeft;break;case 0:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Left;break;case 1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.UpLeft}break;case 0:switch(o){case-1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Down;break;case 0:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Idle;break;case 1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Up}break;case 1:switch(o){case-1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.DownRight;break;case 0:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Right;break;case 1:d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.UpRight}}l.default.inst.startingTutorial&&(null===(e=l.default.inst.tutorialHandler)||void 0===e?void 0:e.getTutorialCurTurn())===f.E_TUTORIAL_TURN.FIRST_MOVE&&l.default.inst.tutorialHandler.startTutorialTurn(f.E_TUTORIAL_TURN.PLANT_BOMB)},t.prototype.reset=function(){this.touchpad.active=!1,this._isHoding=!1,this._timeHoldingBombButton=-1,this._isPressUp=!1,this._isPressDown=!1,this._isPressLeft=!1,this._isPressRight=!1},t.prototype.onMouseLeaveGameCanvas=function(){d.PlayerController.localPlayer&&(d.PlayerController.localPlayer.curDirection=d.E_MOVE_DIRECTION.Idle),cc.tween(p.default.inst.ArrowIcon).to(.1,{y:0}).to(.1,{opacity:0}).start(),this.reset()},t.inst=null,a([m(cc.Node)],t.prototype,"touchpad",void 0),a([m(cc.Node)],t.prototype,"finger",void 0),a([m(cc.Node)],t.prototype,"fixedPosUINode",void 0),a([m(cc.Node)],t.prototype,"touchBombArea",void 0),o=a([g],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","./Debug/GameScreenDebugUI":"GameScreenDebugUI","./Game":"Game","./GameCamera":"GameCamera","./Maps/MapManager":"MapManager","./Player/PlayerController":"PlayerController","./Tutorial/Tutorial":"Tutorial"}],InteractionButtonAsset:[function(e,t,o){"use strict";cc._RF.push(t,"88cd9BbMlpPMpk6KR5mg947","InteractionButtonAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButtonAsset=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundDefault=null,t.backgroundDisable=null,t.backgroundAds=null,t}return r(t,e),a([c(cc.SpriteFrame)],t.prototype,"backgroundDefault",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundDisable",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundAds",void 0),a([s],t)}(cc.Component);o.NgcInteractionButtonAsset=l,cc._RF.pop()},{}],InteractionButton:[function(e,t,o){"use strict";cc._RF.push(t,"5a647qrmBlKJJ8sU2sq2U/h","InteractionButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButton=void 0;var i=e("../../../Core/ResizableComponent"),s=e("../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../GameFramework/Scripts/NgcShopManager"),l=e("./AssetComponent/InteractionButtonAsset"),u=e("./IteractionContent/InteractionContent"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.adsFlashAnimation=null,t.contentListNode=null,t._interactionButtonAsset=null,t._button=null,t._item=null,t._contentList=[],t._currentContent=null,t._showHideAnimQueue=[],t._isPlayingAnim=!1,t}return r(t,e),t.prototype.onLoad=function(){this._interactionButtonAsset=this.node.getComponent(l.NgcInteractionButtonAsset),this._button=this.node.getComponent(cc.Button),this.initContentList()},t.prototype.initContentList=function(){var e=this;this.contentListNode.children.forEach(function(t){t.active=!1,e._contentList.push(t.getComponent(u.NgcInteractionContent))}),this._contentList.sort(function(e,t){return e.getType()-t.getType()})},Object.defineProperty(t.prototype,"Visible",{set:function(e){this._showHideAnimQueue.push(e),this.checkAnimationQueue()},enumerable:!1,configurable:!0}),t.prototype.resize=function(){i.ResizableComponent.resizeNodeByHeight(this.node,.7*this.node.parent.height)},t.prototype.updateItemInfo=function(e){this._item=e||this._item,this._item&&(this.updateContent(this._item),this.determineBackground(this._item.itemStatusType),this._button.interactable=this._currentContent.Interactive,this.resize())},t.prototype.updateContent=function(e){this._currentContent&&(this._currentContent.node.active=!1);var t=this._contentList[e.itemStatusType];t.updateInfo(e),t.node.active=!0,this._currentContent=t},t.prototype.determineBackground=function(e){if(e===s.NgcItemStatusType.WatchAds)return this.background.spriteFrame=this._interactionButtonAsset.backgroundAds,void(this.EnableAdsFlash=!0);this.background.spriteFrame=this._currentContent.Interactive?this._interactionButtonAsset.backgroundDefault:this._interactionButtonAsset.backgroundDisable,this.EnableAdsFlash=!1},t.prototype.checkAnimationQueue=function(){!this._isPlayingAnim&&this._showHideAnimQueue.length>0&&(this._showHideAnimQueue.shift()?this.playShowAnimation():this.playHideAnimation())},t.prototype.playHideAnimation=function(){var e=this;this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:-t.height},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},t.prototype.playShowAnimation=function(){var e=this;this.node.parent.opacity=255,this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:0},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},Object.defineProperty(t.prototype,"EnableAdsFlash",{set:function(e){this.adsFlashAnimation.node.active=e,e?this.adsFlashAnimation.play():this.adsFlashAnimation.stop()},enumerable:!1,configurable:!0}),t.prototype.buyItem=function(){c.NgcShopManager.getInstance().buyItem(this._item)},t.prototype.watchAds=function(){c.NgcShopManager.getInstance().watchAds(this._item)},t.prototype.equipItem=function(){c.NgcShopManager.getInstance().equipItem(this._item.itemID)},t.prototype.onClicked=function(){switch(this._item.itemStatusType){case s.NgcItemStatusType.Currency:case s.NgcItemStatusType.Bundle:case s.NgcItemStatusType.Achievement:this.buyItem();break;case s.NgcItemStatusType.WatchAds:this.watchAds();break;case s.NgcItemStatusType.Unlock:this.equipItem()}},a([f(cc.Sprite)],t.prototype,"background",void 0),a([f(cc.Animation)],t.prototype,"adsFlashAnimation",void 0),a([f(cc.Node)],t.prototype,"contentListNode",void 0),a([d],t)}(cc.Component);o.NgcInteractionButton=h,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./AssetComponent/InteractionButtonAsset":"InteractionButtonAsset","./IteractionContent/InteractionContent":"InteractionContent"}],InteractionContentBundle:[function(e,t,o){"use strict";cc._RF.push(t,"8daa2HoYftJ7LckwISt4hRy","InteractionContentBundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentBundle=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.Bundle},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=this.isEnable(e);this.price.node.opacity=t?255:100,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,this._interactive=t},t.prototype.isEnable=function(e){return s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)>=e.price.value},a([p(cc.Label)],t.prototype,"price",void 0),a([p(cc.Node)],t.prototype,"coinIcon",void 0),a([p(cc.Node)],t.prototype,"startIcon",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentBundle=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"940d8MNrqhJAJt7ie8XK7Do","InteractionContentComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){this._interactive=!1},a([l],t)}(s.NgcInteractionContent));o.default=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"8b7191mfeBKZIiOtdD06dyX","InteractionContentEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentEquipped=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){this._interactive=!1},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"88d61oIeV5JqJ+Vp28OjOVT","InteractionContentPurchaseAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseAchievement=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../Services/Inventory/Inventory"),u=e("./InteractionContent"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=this;l.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,a=n.count<r?n.count:r;r==a?(s.NgcLocalizedManager.setTextKey(t.title,"ITS_BUTTON_CLAIM"),t._interactive=!0):(t.title.string=a+"/"+r+" m",t._interactive=!1)}})},a([f(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([d],t)}(u.NgcInteractionContent);o.NgcInteractionContentPurchaseAchievement=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"4c1bcNoO6dMgJqp5RzRfOJi","InteractionContentPurchaseComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseComingSoon=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){this._interactive=!1},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"20c70D2gnNFbZccOE/MA5nU","InteractionContentPurchaseCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCrownRoad=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){this._interactive=!1},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"40d67q9LGhKUJaG0YrrtSCL","InteractionContentPurchaseCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCurrency=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency);this.price.node.opacity=t<e.price.value?100:255,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,this._interactive=t>=e.price.value},a([p(cc.Label)],t.prototype,"price",void 0),a([p(cc.Node)],t.prototype,"coinIcon",void 0),a([p(cc.Node)],t.prototype,"startIcon",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"4a4f3UOmAdJNYYWxvuqlIdT","InteractionContentPurchaseDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseDailyReward=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){this._interactive=!1},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseIAP:[function(e,t,o){"use strict";cc._RF.push(t,"67c0a57SBFNbrHiRCWnHMlE","InteractionContentPurchaseIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseIAP=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},a([u(cc.Label)],t.prototype,"price",void 0),a([l],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"9a2d5aGXB1LIaDOm9BqzjWy","InteractionContentPurchaseLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseLoginSocial=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"e3130ZG9pRMJoiNaioLQuDy","InteractionContentPurchaseWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseWatchAds=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(){},a([u(cc.Label)],t.prototype,"steps",void 0),a([l],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseWatchAds=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"8b10eZATGNAkYSAk/lQLQol","InteractionContentUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentUnlock=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(){},a([l],t)}(s.NgcInteractionContent));o.NgcInteractionContentUnlock=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContent:[function(e,t,o){"use strict";cc._RF.push(t,"c3854EqAgBFBKH7l5drKr/0","InteractionContent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContent=void 0;var i=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interactive=!0,t}return r(t,e),Object.defineProperty(t.prototype,"Interactive",{get:function(){return this._interactive},enumerable:!1,configurable:!0}),a([i],t)}(cc.Component);o.NgcInteractionContent=s,cc._RF.pop()},{}],IntroCamera:[function(e,t,o){"use strict";cc._RF.push(t,"8d90d/jHwpDI69G61teVFfM","IntroCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=e("../Game"),c=e("../GameCamera"),l=cc._decorator,u=l.ccclass;l.property,function(e){e[e.None=0]="None",e[e.ZoomOut=1]="ZoomOut",e[e.Move=2]="Move",e[e.ZoomIn=3]="ZoomIn",e[e.End=4]="End"}(i||(i={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ZOOM_RATIO=.75,t.ZOOM_DURATION=2,t.MOVE_TO_TARGET_SPEED=500,t.movingPos=null,t}return r(t,e),t.prototype.onEnable=function(){c.default.inst.centerOnMap(),this.movingPos=c.default.inst.getWorldPosition(),this.zoomOut()},t.prototype.start=function(){},t.prototype.update=function(){s.default.inst.gameState==s.GameState.AddingPlayers&&c.default.inst.setWorldPosition(this.movingPos)},t.prototype.zoomOut=function(){this._originZoomRatio=c.default.inst.cameraOb.zoomRatio;var e=cc.tween().to(this.ZOOM_DURATION,{zoomRatio:c.default.inst.cameraOb.zoomRatio*this.ZOOM_RATIO},{easing:"sineInOut"});cc.tween(c.default.inst.cameraOb).then(e).start(),this.scheduleOnce(this.moveToTarget,this.ZOOM_DURATION/2)},t.prototype.moveToTarget=function(){var e=c.default.inst.target.getWorldPosition();c.default.inst.fixPositionInWorld(e,this._originZoomRatio);var t=2.5;t=Math.max(t,this.ZOOM_DURATION);var o=cc.tween().to(t,{movingPos:e},{easing:"sineInOut"});cc.tween(this).then(o).start();var n=Math.min(t-this.ZOOM_DURATION/2,t/2);this.scheduleOnce(function(){this.zoomIn(t-n)}.bind(this),n)},t.prototype.zoomIn=function(e){var t=Math.max(e,this.ZOOM_DURATION),o=cc.tween().to(t,{zoomRatio:this._originZoomRatio},{easing:"sineInOut"}),n=this;cc.tween(c.default.inst.cameraOb).then(o).call(function(){n.onIntroEnds()}).start()},t.prototype.onIntroEnds=function(){c.default.inst.onIntroEnds()},a([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Game":"Game","../GameCamera":"GameCamera"}],Inventory_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"218a6qNM39ElI46uvXonb7r","Inventory_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Core/Utils"),l=e("../../GameFramework/Scripts/BuildConfig"),u=e("../../SDK/Nano/NanoSrv"),p=e("./Inventory"),d=e("../Platform/Platform"),f=e("../../GameFramework/Scripts/NgcUserInfo"),h=e("../../CrossFeatures/OfflineMode/OfflineMode"),g=cc._decorator,m=g.ccclass,y=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ITEM_TABLE_PATH="Text/itemTable.csv",t.needToRefetch=!0,t}return r(t,e),t.prototype.onLogin=function(e){var t=this,o=this;if(l.NgcBuildConfig.offlineMode)c.LoadAsset("offline:text/item-table").then(function(o){t.initTypeTableFromCSV(o.text),t._fetchInventory(function(){e(null,"OK")})});else{var n=u.default.inst.getCurGameInfo().itemTableURL;c.Utils.getHttp(n,null,function(t,r){t?e("Failed to get inventory table from url "+n,null):o.initTypeTableFromCSV(r)?o._fetchInventory(function(t){t?e(t,null):e(null,"OK")}):e("Error parsing inventory table",null)})}},t.prototype._preInit=function(){return new Promise(function(e){e("Inventory_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Inventory_impl_Nanosrv initialized")})},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype._fetchInventory=function(e){var t=this;d.NgcPlatform.isOfflineMode()?(this.needToRefetch=!1,this.ownedItems=h.OfflineMode.GetInventory(),e(null,this.ownedItems)):u.default.inst.serviceGet("/player/getinventory",null,function(o,n){o?e(o,null):(t.ownedItems=JSON.parse(n).data,t.needToRefetch=!1,e(null,t.ownedItems))})},t.prototype.getItemCountFromLocalData=function(e){var t;return(null===(t=this.ownedItems)||void 0===t?void 0:t.hasOwnProperty(e))?this.ownedItems[e]:{itemID:e,count:0}},t.prototype._getItemCount=function(e,t){var o=this;this.needToRefetch?this._fetchInventory(function(n){n?t(n,null):t(null,o.getItemCountFromLocalData(e))}):t(null,this.getItemCountFromLocalData(e))},t.prototype._addItem=function(e,t,o){if(d.NgcPlatform.isOfflineMode())h.OfflineMode.UpdateItem(e,t),o(null,{itemID:e,count:t});else{var n={itemList:[{itemID:e,count:t}]},r=JSON.stringify(n),a=this;u.default.inst.servicePost("/player/addInventory",r,function(e,t){e?o(e,null):(a.ownedItems=JSON.parse(t).data,a.needToRefetch=!1,o(null,t))})}},t.prototype._localGetItemCount=function(e){return this.ownedItems.hasOwnProperty(e)?this.ownedItems[e].count:(console.warn("Item does not exist: "+e),0)},t.prototype._addItemList=function(e,t){if(d.NgcPlatform.isOfflineMode())r=this,e.forEach(function(e){r._addItem(e.itemID,e.count,function(e,o){e?t(e,null):(r.needToRefetch=!1,t(null,o))})});else{var o={itemList:e},n=JSON.stringify(o),r=this;u.default.inst.servicePost("/player/addInventory",n,function(e,o){e?t(e,null):(r.ownedItems=JSON.parse(o).data,r.needToRefetch=!1,t(null,o))})}},t.prototype._consumeItem=function(e,t,o){this._addItem(e,-t,o)},t.prototype._readInventoryFromStorage=function(e){if(!d.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");var t=f.default.offlineInventory;this.ownedItems=t||{},e(null,this.ownedItems)},t.prototype._writeInventoryToStorage=function(e){if(!d.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");f.default.offlineInventory=this.ownedItems,e(null,this.ownedItems)},t.prototype._forceFetchInventory=function(e){return i(this,void 0,void 0,function(){var t=this;return s(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){t._fetchInventory(function(t,n){o(),e&&e(t,n)})})];case 1:return o.sent(),[2]}})})},t.prototype.start=function(){},a([m],t)}(p.NgcInventory));o.default=y,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","./Inventory":"Inventory"}],Inventory:[function(e,t,o){"use strict";cc._RF.push(t,"928f5tFfVJDZ79Dg33dX3jT","Inventory");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInventory=o.InventoryCurrencyType=o.InventoryItemType=void 0;var c=e("../../Core/nCSV"),l=e("../Service"),u=cc._decorator,p=u.ccclass;u.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(o.InventoryItemType||(o.InventoryItemType={})),function(e){e[e.soft_currency=0]="soft_currency",e[e.ads_currency=1]="ads_currency",e[e.achievement_currency=2]="achievement_currency",e[e.like_social_currency=3]="like_social_currency",e[e.iap_currency=4]="iap_currency",e[e.daily_login_currency=5]="daily_login_currency",e[e.crown_road_currency=6]="crown_road_currency",e[e.coming_soon_currency=7]="coming_soon_currency",e[e.coming_soon=8]="coming_soon"}(o.InventoryCurrencyType||(o.InventoryCurrencyType={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectTypeTable={},t.ownedItems={},t}return r(t,e),t.prototype.getName=function(){return"NgcInventory"},t.prototype.isValidItemID=function(e){return this.objectTypeTable.hasOwnProperty(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getItemCount=function(e,t){this._getItemCount(e,t)},t.prototype.addItem=function(e,t,o){return this._addItem(e,t,function(e,t){o(e,t)})},t.prototype.addItemList=function(e,t){return this._addItemList(e,function(e,o){t(e,o)})},t.prototype.consumeItem=function(e,t,o){this._consumeItem(e,t,function(e,t){o(e,t)})},t.prototype.readInventoryFromStorage=function(e){this._readInventoryFromStorage(function(t,o){e(t,o)})},t.prototype.forceFetchInventory=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._forceFetchInventory(e)];case 1:return t.sent(),[2]}})})},t.prototype.writeInventoryToStorage=function(e){this._writeInventoryToStorage(function(t,o){e(t,o)})},t.prototype.initTypeTableFromCSV=function(e){var t=c.nCSV.parseTable(e);if(!t)return!1;var o=this;return this.objectTypeTable={},t.forEach(function(e){var t=e.itemID;o.objectTypeTable.hasOwnProperty(t)?console.warn("Duplicate object ID: "+t):o.objectTypeTable[t]=e}),!0},t.prototype.start=function(){},t.srvInstances=[],t.inst=null,a([p],t)}(l.NgcService);o.NgcInventory=d,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],ItemCategory:[function(e,t,o){"use strict";cc._RF.push(t,"37ec4Hh559EzYbrYbfTROs3","ItemCategory");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemCategory=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cateName=null,t}return r(t,e),t.prototype.updateNameByKey=function(e){this.cateName.setLocalizedText(e)},a([l(i.NgcLabelLocalized)],t.prototype,"cateName",void 0),a([c],t)}(cc.Component);o.ItemCategory=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],ItemContainer:[function(e,t,o){"use strict";cc._RF.push(t,"76051ZLlU1L36MNK1lN1mpc","ItemContainer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemContainer=void 0;var i,s=e("../../../Core/ResizableComponent"),c=e("../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../GameFramework/Scripts/NgcShopManager"),u=e("./InteractionButton"),p=e("./ItemCategory"),d=e("./ItemPool"),f=e("./ItemShop/Bundle"),h=e("./ItemShop/ItemShop"),g=e("./ItemShop/SingleItem"),m=e("./ItemTab"),y=cc._decorator,_=y.ccclass,v=y.property;(function(e){e[e.None=0]="None",e[e.GenerateUpcomingItemInfo=1]="GenerateUpcomingItemInfo",e[e.AddItem=2]="AddItem",e[e.RemoveOldItem=3]="RemoveOldItem",e[e.AddSpaceNode=4]="AddSpaceNode",e[e.End=5]="End"})(i||(i={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabContainerWidget=null,t.tabContent=null,t.container=null,t.scrollView=null,t.loadingOverlay=null,t.loadingIcon=null,t.content=null,t.interactionButtonContainer=null,t.interactionButtonPrefab=null,t.itemTabPrefab=null,t.singleItemPrefab=[],t.bundlePrefab=null,t.purchaseMethodPrefab=[],t.category=null,t.leftArrow=null,t.rightArrow=null,t.leftLimit=null,t.rightLimit=null,t._itemStructure=null,t._selectedTabNameKey="",t._tabList=[],t._selectedBundleIdInTab={},t._selectedItem=null,t._displayingItemShop=[],t._upcomingItemInfoOfNewTab=[],t._currentFindItemID=0,t._updateTabContentState=i.None,t._interactionButton=null,t._numberOfItemInRow=4,t._tabScrollView=null,t}return r(t,e),t.prototype.onLoad=function(){(new d.NgcItemPool).init(this.singleItemPrefab,this.bundlePrefab,this.purchaseMethodPrefab,this.category),this.tabContainerWidget.left=this.tabContainerWidget.right=0,cc.view.on("canvas-resize",this.resize.bind(this)),this.interactionButtonContainer.opacity=0,this.leftArrow.opacity=0,this.rightArrow.opacity=0,this.leftArrow.getComponent(cc.Button).interactable=!1,this.rightArrow.getComponent(cc.Button).interactable=!1,cc.sys.isMobile?(this.leftArrow.active=!1,this.rightArrow.active=!1):(this.leftLimit.active=!0,this.rightLimit.active=!0),this._tabScrollView=this.tabContainerWidget.getComponent(cc.ScrollView)},t.prototype.update=function(){switch(this._updateTabContentState){case i.None:break;case i.GenerateUpcomingItemInfo:this.setUpNewTabContent();break;case i.RemoveOldItem:this.removeItemOfOldTab();break;case i.AddItem:this.addItem();break;case i.AddSpaceNode:this.addSpaceNode();break;case i.End:this.endUpdateTab()}},t.prototype.init=function(e){this._itemStructure=e,this.initInteractionButton(),this.initTabScroll(),this.resize()},t.prototype.updateItemStructure=function(e){this._itemStructure=e,e.tabs.length<this._tabList.length?(this.initTabScroll(),this.resize()):this.updateItemInSelectedTab()},Object.defineProperty(t.prototype,"ContentWidth",{get:function(){return this.container.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ContentHeight",{get:function(){return this.container.height-this.interactionButtonContainer.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLoading",{set:function(e){this.loadingOverlay.active=e,this.scrollView.opacity=e?0:255,e?this.loadingIcon.play():this.loadingIcon.stop()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SelectedTab",{get:function(){return this._selectedTabNameKey},set:function(e){var t=this.getTabByNameKey(this._selectedTabNameKey);t&&(t.Selected=!1);var o=this.getTabByNameKey(e);o||(o=this._tabList[0],e=this._tabList[0].TabNameKey),o.Selected=!0,this._selectedTabNameKey=e,this.updateItemInSelectedTab(),this.scrollToTab(this._tabList.indexOf(o))},enumerable:!1,configurable:!0}),t.prototype.reselectCurrentTab=function(){this.SelectedTab=this._selectedTabNameKey},Object.defineProperty(t.prototype,"SelectedItem",{get:function(){return this._selectedItem},set:function(e){this._selectedItem&&(this._selectedItem.Selected=!1,this._interactionButton.Visible=!1),this._selectedItem=e,this._selectedItem&&(this._selectedItem.Selected=!0,this._interactionButton.updateItemInfo(e.ItemInfo),this._interactionButton.Visible=!0,this._selectedBundleIdInTab[this._selectedTabNameKey]=this.SelectedItem.ItemInfo.bundleID,e instanceof g.SingleItem&&l.NgcShopManager.getInstance().previewItem(e.ItemInfo.itemID))},enumerable:!1,configurable:!0}),t.prototype.getTabByNameKey=function(e){return this._tabList.find(function(t){return t.TabNameKey===e})},t.prototype.getTabInfoByNameKey=function(e){return this._itemStructure.tabs.find(function(t){return t.tabNameKey===e})},t.prototype.determineSelectedItemInNewTab=function(){for(var e=this._displayingItemShop[0],t=0;t<this._displayingItemShop.length;t++){var o=this._displayingItemShop[t];if(o.ItemInfo.itemStatusType===c.NgcItemStatusType.Equipped&&(e=o),o.ItemInfo.bundleID===this._selectedBundleIdInTab[this._selectedTabNameKey]){e=o;break}}return e},t.prototype.setNumberOfItemInRow=function(e){this._numberOfItemInRow=e,this.resize()},t.prototype.onTabClicked=function(e){this.SelectedTab=e},t.prototype.onItemClick=function(e){this.SelectedItem=e},t.prototype.onArrowButtonClick=function(e,t){var o=this._tabList.indexOf(this.getTabByNameKey(this.SelectedTab));switch(t){case"right":o=o===this._tabList.length-1?0:o+1,this.SelectedTab=this._tabList[o].TabNameKey;break;case"left":o=0===o?this._tabList.length-1:o-1,this.SelectedTab=this._tabList[o].TabNameKey}this.scrollToTab(o,.1)},t.prototype.canScrollTab=function(){return this._itemStructure.tabs.length>=4},t.prototype.scrollToTab=function(e,t){if(void 0===t&&(t=.25),e===this._tabList.length-1?this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.rightArrow).to(t,{opacity:0}).start()):0==this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.rightArrow).to(t,{opacity:255}).start()),0===e?this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.leftArrow).to(t,{opacity:0}).start()):0==this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.leftArrow).to(t,{opacity:255}).start()),this.canScrollTab()){var o=this._tabList[e].node;this._tabScrollView.scrollTo(cc.v2(o.x,o.y),t)}},t.prototype.refresh=function(){this.refeshDisplayingItems(),this.refreshTab()},t.prototype.refeshDisplayingItems=function(){this._displayingItemShop.forEach(function(e){e.updateInfo()}),this.resizeItemContainer(),this._interactionButton.updateItemInfo()},t.prototype.refreshTab=function(){for(var e=0;e<this._tabList.length;e++)this._tabList[e].HasBrandNewItem=this._itemStructure.tabs[e].hasBrandNewItem},t.prototype.initInteractionButton=function(){if(!this._interactionButton){var e=cc.instantiate(this.interactionButtonPrefab);this.interactionButtonContainer.addChild(e),this._interactionButton=e.getComponent(u.NgcInteractionButton)}},t.prototype.initTabScroll=function(){var e=this;this.tabContent.children.length>0&&(this._tabList=[],this.tabContent.children.forEach(function(e){return e.destroy()})),this._itemStructure.tabs.length<4&&(this.leftArrow.active=!1,this.rightArrow.active=!1),this._itemStructure.tabs.forEach(function(t,o){var n=cc.instantiate(e.itemTabPrefab);e.tabContent.addChild(n);var r=n.getComponent(m.NgcItemTab);r.init(t.tabNameKey,o,t.hasBrandNewItem,e),e._tabList.push(r)}),this.SelectedTab=this._selectedTabNameKey,this._interactionButton.Visible=!1},t.prototype.updateItemInSelectedTab=function(){this._updateTabContentState=i.GenerateUpcomingItemInfo},t.prototype.setUpNewTabContent=function(){var e=this;this.IsLoading=!0,this.SelectedItem=null;var t=this.getTabInfoByNameKey(this._selectedTabNameKey);this._upcomingItemInfoOfNewTab=[],t.categories.forEach(function(t){e._upcomingItemInfoOfNewTab.push(t),t.items.forEach(function(t){return e._upcomingItemInfoOfNewTab.push(t)})}),this._currentFindItemID=0,this._displayingItemShop=[],this._updateTabContentState=i.RemoveOldItem},t.prototype.removeItemOfOldTab=function(){this.content.children.forEach(function(e){return d.NgcItemPool.inst.putShopItem(e)});var e=this.content.children.pop();e&&e.destroy(),this.content.removeAllChildren(),this._updateTabContentState=i.AddItem},t.prototype.addItem=function(){if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof l.NgcItemCategoryInfo){var e=this._upcomingItemInfoOfNewTab[this._currentFindItemID];if(e.shouldDisplay){var t=d.NgcItemPool.inst.getShopItem(p.ItemCategory);this.pushUINode(t),t.getComponent(p.ItemCategory).updateNameByKey(e.cateNameKey)}}else if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof c.NgcItemInfo){var o=this._upcomingItemInfoOfNewTab[this._currentFindItemID],n=d.NgcItemPool.inst.getShopItem(o.isBundle?f.Bundle:g.SingleItem,o.displayType);this.pushUINode(n);var r=n.getComponent(h.ItemShop);r.Interactable=!0,r.updateInfo(o),r.setItemContainer(this),this._displayingItemShop.push(r)}this._currentFindItemID++,this._currentFindItemID==this._upcomingItemInfoOfNewTab.length&&(this._updateTabContentState=i.AddSpaceNode)},t.prototype.pushUINode=function(e){this.content.addChild(e),s.ResizableComponent.getResizableComponent(e)},t.prototype.addSpaceNode=function(){var e=new cc.Node;e.width=this.container.width,e.height=.15*this.container.height,this.pushUINode(e),this._updateTabContentState=i.End},t.prototype.endUpdateTab=function(){this.resizeItemContainer(),this.IsLoading=!1,this.SelectedItem=this.determineSelectedItemInNewTab(),this._updateTabContentState=i.None},t.prototype.resizeTabContainer=function(){if(0!=this.tabContent.children.length){var e=this.tabContent.getComponent(cc.Widget),t=this.tabContent.getComponent(cc.Layout),o=this._itemStructure.tabs.length;this.tabContent.children[0].width*o+t.spacingX*(o-1)<=this.ContentWidth-0?(e.isAlignHorizontalCenter=!0,e.isAlignLeft=!1,this.leftLimit.active=!1,this.rightLimit.active=!1):(e.isAlignHorizontalCenter=!1,e.isAlignLeft=!0,e.left=0,this.tabContainerWidget.getComponent(cc.ScrollView).scrollToLeft(.1)),this.leftLimit.x=this.tabContainerWidget.node.x-this.tabContainerWidget.node.width/2,this.rightLimit.x=this.tabContainerWidget.node.x+this.tabContainerWidget.node.width/2,e.updateAlignment()}},t.prototype.onTabSlide=function(){},t.prototype.lateUpdate=function(){this.checkForLimitVisibility()},t.prototype.checkForLimitVisibility=function(){var e=this._tabScrollView.getScrollOffset(),t=this._tabScrollView.getMaxScrollOffset();this.leftLimit.opacity=Math.round(e.x)<0?255:0,this.rightLimit.opacity=Math.round(-e.x)<t.x-0?255:0},t.prototype.resizeItemContainer=function(){var e=this.ContentWidth,t=this.content.getComponent(cc.Layout),o=e-t.paddingLeft-t.paddingRight,n=(e-t.paddingLeft-t.paddingRight-(this._numberOfItemInRow-1)*t.spacingX)/this._numberOfItemInRow;this.content.children.forEach(function(r){var a=r.getComponent(g.SingleItem),i=r.getComponent(f.Bundle);a?a.resizeBaseOnWidth(n):i?i.resize(e-t.paddingLeft-t.paddingRight):r.width=o})},t.prototype.resizeInteractionButton=function(){this._interactionButton&&this._interactionButton.resize()},t.prototype.resizeContent=function(){this.resizeTabContainer(),this.resizeItemContainer()},t.prototype.resize=function(){var e=this;setTimeout(function(){e.resizeContent()},50)},a([v(cc.Widget)],t.prototype,"tabContainerWidget",void 0),a([v(cc.Node)],t.prototype,"tabContent",void 0),a([v(cc.Node)],t.prototype,"container",void 0),a([v(cc.Node)],t.prototype,"scrollView",void 0),a([v(cc.Node)],t.prototype,"loadingOverlay",void 0),a([v(cc.Animation)],t.prototype,"loadingIcon",void 0),a([v(cc.Node)],t.prototype,"content",void 0),a([v(cc.Node)],t.prototype,"interactionButtonContainer",void 0),a([v(cc.Prefab)],t.prototype,"interactionButtonPrefab",void 0),a([v(cc.Prefab)],t.prototype,"itemTabPrefab",void 0),a([v(cc.Prefab)],t.prototype,"singleItemPrefab",void 0),a([v(cc.Prefab)],t.prototype,"bundlePrefab",void 0),a([v(cc.Prefab)],t.prototype,"purchaseMethodPrefab",void 0),a([v(cc.Prefab)],t.prototype,"category",void 0),a([v(cc.Node)],t.prototype,"leftArrow",void 0),a([v(cc.Node)],t.prototype,"rightArrow",void 0),a([v(cc.Node)],t.prototype,"leftLimit",void 0),a([v(cc.Node)],t.prototype,"rightLimit",void 0),a([_],t)}(cc.Component);o.ItemContainer=S,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionButton":"InteractionButton","./ItemCategory":"ItemCategory","./ItemPool":"ItemPool","./ItemShop/Bundle":"Bundle","./ItemShop/ItemShop":"ItemShop","./ItemShop/SingleItem":"SingleItem","./ItemTab":"ItemTab"}],ItemPool:[function(e,t,o){"use strict";cc._RF.push(t,"28257Mw7ClODIcf6yaiRs7z","ItemPool"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemPool=void 0;var n=e("./ItemCategory"),r=e("./ItemShop/Bundle"),a=e("./ItemShop/SingleItem"),i=e("./ItemStatus/ItemStatus"),s=function(){function e(){this._singleItemPool={},this._purchaseMethodPool={},this._singleItemPrefab={},this._purchaseMethodPrefab={},this._singleItemDefaultType=null,e.inst=this}return e.prototype.init=function(e,t,o,n){var r=this;e.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(a.SingleItem).getDisplayType();r._singleItemPool[o]=new cc.NodePool,r._singleItemPool[o].put(t),r._singleItemPrefab[o]=e,null==r._singleItemDefaultType&&(r._singleItemDefaultType=o)}),this._bundlePrefab=t,this._bundlePool=new cc.NodePool,o.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(i.NgcItemStatus).getType().toString();r._purchaseMethodPool[o]=new cc.NodePool,r._purchaseMethodPool[o].put(t),r._purchaseMethodPrefab[o]=e}),this._catePrefab=n,this._catePool=new cc.NodePool},e.prototype.getSingleItem=function(e){this._singleItemPool[e]||(e=this._singleItemDefaultType);var t=this._singleItemPool[e].get();return t||(t=cc.instantiate(this._singleItemPrefab[e])),t},e.prototype.putSingleItem=function(e){var t=e.getComponent(a.SingleItem).getDisplayType();this._singleItemPool[t].put(e)},e.prototype.getBundle=function(){var e=this._bundlePool.get();return e||(e=cc.instantiate(this._bundlePrefab)),e},e.prototype.putBundle=function(e){this._bundlePool.put(e)},e.prototype.getItemStatus=function(e){var t=e.toString(),o=this._purchaseMethodPool[t].get();return o||(o=cc.instantiate(this._purchaseMethodPrefab[t])),o},e.prototype.putItemStatus=function(e){var t=e.getComponent(i.NgcItemStatus).getType();this._purchaseMethodPool[t].put(e)},e.prototype.getCate=function(){var e=this._catePool.get();return e||(e=cc.instantiate(this._catePrefab)),e},e.prototype.putCate=function(e){this._catePool.put(e)},e.prototype.putShopItem=function(e){e.getComponent(a.SingleItem)?this.putSingleItem(e):e.getComponent(r.Bundle)?this.putBundle(e):e.getComponent(n.ItemCategory)&&this.putCate(e)},e.prototype.getShopItem=function(e,t){switch(e){case a.SingleItem:return this.getSingleItem(t);case r.Bundle:return this.getBundle();case n.ItemCategory:return this.getCate()}},e.inst=null,e}();o.NgcItemPool=s,cc._RF.pop()},{"./ItemCategory":"ItemCategory","./ItemShop/Bundle":"Bundle","./ItemShop/SingleItem":"SingleItem","./ItemStatus/ItemStatus":"ItemStatus"}],ItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"8b87fyON8tIYaTUVf90nI+y","ItemSelectLanguage");var n,r,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemSelectLanguage=void 0,function(e){e[e.Hat=0]="Hat",e[e.Glasses=1]="Glasses",e[e.Dress=2]="Dress"}(r||(r={}));var s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.codeItem="",t.boder=null,t.Icon=null,t.languageLb=null,t.callBackFn=null,t}return a(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.boder.node.active=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n,r){var a=this;cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(a.Icon.spriteFrame=t)}),this.nameItem=t,this.languageLb.string=t,this.codeItem=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.codeItem))},i([l],t.prototype,"nameItem",void 0),i([l],t.prototype,"codeItem",void 0),i([l(cc.Sprite)],t.prototype,"boder",void 0),i([l(cc.Sprite)],t.prototype,"Icon",void 0),i([l(cc.Label)],t.prototype,"languageLb",void 0),i([c],t)}(cc.Component);o.NgcItemSelectLanguage=u,cc._RF.pop()},{}],ItemShop:[function(e,t,o){"use strict";cc._RF.push(t,"95c2bsHVOhDWZFCRqCNAfnH","ItemShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemShop=void 0;var i=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../../../../Services/Telemetry/Telemetry"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._itemContainer=null,t._button=null,t._isSelected=!1,t._itemInfo=null,t}return r(t,e),t.prototype.onLoad=function(){this.setupButton()},t.prototype.setupButton=function(){this._button=this.addComponent(cc.Button),this._button.interactable=!0,this._button.transition=cc.Button.Transition.NONE;var e=new cc.Component.EventHandler;e.target=this.node,e.component="ItemShop",e.handler="onClicked",this._button.clickEvents.push(e)},t.prototype.updateInfo=function(e){e&&(this._itemInfo=e),this.childUpdateInfo()},t.prototype.setItemContainer=function(e){this._itemContainer=e},Object.defineProperty(t.prototype,"Interactable",{set:function(e){this._button.interactable=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.childSelect()},enumerable:!1,configurable:!0}),t.prototype.trackItemClick=function(){var e=this._itemInfo instanceof s.NgcSingleItemInfo?this._itemInfo.itemID:this._itemInfo.bundleID,t=c.NgcShopManager.getInstance().increaseItemClickCounter(e);l.NgcTelemetry.inst.LogEvent_ShopItemViewed({itemID:e,checker:t,itemType:this._itemInfo.category})},t.prototype.resizeBaseOnWidth=function(e){e=Math.floor(e),i.ResizableComponent.resizeNodeByWidth(this.node,e)},t.prototype.onClicked=function(){this.Selected||(this._itemContainer.onItemClick(this),this.trackItemClick())},a([p],t)}(cc.Component));o.ItemShop=d,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../../Services/Telemetry/Telemetry":"Telemetry"}],ItemStatusEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"bf958GiHCpNpYZ9RbWwLowE","ItemStatusEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusEquipped=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcItemStatus);o.NgcItemStatusEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],ItemStatusUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"7389fSzjzlNzLQExIUlQ5WM","ItemStatusUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusUnlock=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(){},a([l],t)}(s.NgcItemStatus));o.NgcItemStatusUnlock=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],ItemStatus:[function(e,t,o){"use strict";cc._RF.push(t,"9b1d6JG7jZJca5whIILJXLK","ItemStatus");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatus=void 0;var i=e("../ItemPool"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.updateItemStatusForNode=function(e,t){var n=t.itemStatusType;0==e.children.length&&o.addItemStatus(e,n);var r=e.children[0],a=r.getComponent(o);a.getType()!=n&&(r.removeFromParent(),i.NgcItemPool.inst.putItemStatus(r),a=o.addItemStatus(e,n)),a.updateInfo(t)},t.addItemStatus=function(e,t){var n=i.NgcItemPool.inst.getItemStatus(t);return e.addChild(n),n.getComponent(o)},o=a([s],t)}(cc.Component);o.NgcItemStatus=c,cc._RF.pop()},{"../ItemPool":"ItemPool"}],ItemTabAsset:[function(e,t,o){"use strict";cc._RF.push(t,"58331YkpD5FBLzw5GHKBkHp","ItemTabAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTabAsset=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundSelected=null,t.backgroundUnselected=null,t.backgroundBrandNewItemSelected=null,t.backgroundBrandNewItemUnselected=null,t.tabImageList=[],t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),a([c(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemSelected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemUnselected",void 0),a([c(cc.SpriteFrame)],t.prototype,"tabImageList",void 0),a([c(cc.Animation)],t.prototype,"flashAnimation",void 0),a([s],t)}(cc.Component);o.NgcItemTabAsset=l,cc._RF.pop()},{}],ItemTab:[function(e,t,o){"use strict";cc._RF.push(t,"2d221Zo6eJKQ7IBVMXIuRFj","ItemTab");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTab=o.NgcTabType=void 0;var i,s=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("./AssetComponent/ItemTabAsset");(function(e){e[e.BOTH_IMAGE_AND_NAME=0]="BOTH_IMAGE_AND_NAME",e[e.IMAGE=1]="IMAGE",e[e.NAME=2]="NAME"})(i=o.NgcTabType||(o.NgcTabType={}));var l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.tabImage=null,t.tabName=null,t._itemTabAsset=null,t._isSelected=!1,t._hasBrandNewItem=!1,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=i.BOTH_IMAGE_AND_NAME),this.tabName.getComponent(s.NgcLabelLocalized).setLocalizedText(e),this._tabNameKey=e,this._tabId=t,this._hasBrandNewItem=o,this._itemContainer=n,this._itemTabAsset=this.node.getComponent(c.NgcItemTabAsset),this.updateBackground(),this.updateImage()},Object.defineProperty(t.prototype,"TabNameKey",{get:function(){return this._tabNameKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HasBrandNewItem",{set:function(e){this._hasBrandNewItem=e,this.updateBackground()},enumerable:!1,configurable:!0}),t.prototype.setTabType=function(e){this.tabImage.active=e==i.IMAGE||e==i.BOTH_IMAGE_AND_NAME,this.tabName.active=e==i.NAME||e==i.BOTH_IMAGE_AND_NAME},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground()},t.prototype.updateNormalBackground=function(){this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundSelected:this._itemTabAsset.backgroundUnselected},t.prototype.updateBrandNewBackground=function(){this._hasBrandNewItem&&(this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundBrandNewItemSelected:this._itemTabAsset.backgroundBrandNewItemUnselected),this._itemTabAsset.EnableFlash=this._hasBrandNewItem},t.prototype.updateImage=function(){this.tabImage.getComponent(cc.Sprite).spriteFrame=this._itemTabAsset.tabImageList[this._tabId]},t.prototype.onTabClicked=function(){this._itemContainer.onTabClicked(this._tabNameKey)},a([p(cc.Sprite)],t.prototype,"background",void 0),a([p(cc.Node)],t.prototype,"tabImage",void 0),a([p(cc.Node)],t.prototype,"tabName",void 0),a([u],t)}(cc.Component);o.NgcItemTab=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./AssetComponent/ItemTabAsset":"ItemTabAsset"}],ItemUpgrade:[function(e,t,o){"use strict";cc._RF.push(t,"3669adGjh9H9LjxFBz/gSME","ItemUpgrade");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSprite=null,t.lockNode=null,t}return r(t,e),a([c(cc.Sprite)],t.prototype,"itemSprite",void 0),a([c(cc.Node)],t.prototype,"lockNode",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],KillAndLiveBoard:[function(e,t,o){"use strict";cc._RF.push(t,"adf62hppURMxY7qw4tm6UWM","KillAndLiveBoard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DEFAULT_VALUE=0,t.liveNum=null,t.killNum=null,t._curKill=0,t}return r(t,e),t.prototype.setLiveNum=function(e){this.liveNum.string=""+e},t.prototype.setKillNum=function(e){this.killNum.string=""+e},t.prototype.addKill=function(e){this._curKill+=e,this.setKillNum(this._curKill)},t.prototype.reset=function(){this._curKill=0,this.setLiveNum(this.DEFAULT_VALUE),this.setKillNum(this.DEFAULT_VALUE)},a([l(i.NgcLabelLocalized)],t.prototype,"liveNum",void 0),a([l(i.NgcLabelLocalized)],t.prototype,"killNum",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],LB_UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"62201MiZEJNgYR0t8ucKFBI","LB_UserInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLB_UserInfo=void 0;var i=e("../../../Services/Platform/Platform"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankNumber=null,t.avatar=null,t.avatarUrl=null,t.flag=null,t.userName=null,t.userScore=null,t.mobileIcon=null,t.desktopIcon=null,t.bg2=null,t.needToSaveNode=null,t.userNameNeedToSave=null,t.isLocalUser=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.setNeedToSave=function(e){this.needToSaveNode&&this.userNameNeedToSave&&(i.NgcPlatform.inst&&i.NgcPlatform.inst.getPlatformID()===i.PlatformID.Poki||(i.NgcPlatform.inst&&i.NgcPlatform.inst.getPlatformID()===i.PlatformID.GameDistribution&&(e=!1),this.needToSaveNode.active=e,this.userName.node.active=!e,e&&(this.userNameNeedToSave.string=this.userName.string)))},a([l(cc.Label)],t.prototype,"rankNumber",void 0),a([l(cc.Sprite)],t.prototype,"avatar",void 0),a([l(cc.Sprite)],t.prototype,"flag",void 0),a([l(cc.Label)],t.prototype,"userName",void 0),a([l(cc.Label)],t.prototype,"userScore",void 0),a([l(cc.Node)],t.prototype,"mobileIcon",void 0),a([l(cc.Node)],t.prototype,"desktopIcon",void 0),a([l(cc.Node)],t.prototype,"bg2",void 0),a([l(cc.Node)],t.prototype,"needToSaveNode",void 0),a([l(cc.Label)],t.prototype,"userNameNeedToSave",void 0),a([c],t)}(cc.Component);o.NgcLB_UserInfo=u,cc._RF.pop()},{"../../../Services/Platform/Platform":"Platform"}],LZW:[function(e,t,o){"use strict";cc._RF.push(t,"5cab8dReeBFuaCLXz0Dd68F","LZW"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.decode=function(e,t){var o=1<<t,n=o+1,r=t+1,a=[],i=0;function s(){var e;for(a=[],r=t+1,e=0;e<o;e++)a[e]=[e];a[o]=[],a[n]=null}function c(t){var o,n=0;for(o=0;o<t;o++)e[i>>3]&1<<(7&i)&&(n|=1<<o),i++;return n}return function(){for(var e,t,i=[];;)if(t=e,(e=c(r))!=o){if(e==n)break;if(e<a.length)t!==o&&a.push(a[t].concat(a[e][0]));else{if(e!==a.length)throw new Error("LZW\u89e3\u6790\u51fa\u9519");a.push(a[t].concat(a[t][0]))}i.push.apply(i,a[e]),a.length===1<<r&&r<12&&r++}else s();return i}()},e}();o.default=n,cc._RF.pop()},{}],LabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"2c05eDz1T9GTKFZFdcH0OUu","LabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLabelLocalized=void 0;var i=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamComponents=[],t.extraParams=null,t.defaultFont=null,t.subText="",t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),i.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.setExtraParams=function(e){this.extraParams=e},t.prototype.setExtraComponents=function(e){this.extraParamComponents=e},t.prototype.applyExtraParams=function(){if(this.extraParams&&0!==this.extraParamComponents.length)for(var e=0;e<this.extraParamComponents.length;e++){var t=this.extraParams[e],o=this.extraParamComponents[e];this.string=this.string.replace(o,t)}},t.prototype.updateString=function(){if(this.textKey){var e=i.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams(),this.subText&&(this.string+=this.subText))}},t.prototype.setLocalizedText=function(e){this.textKey=e,this.updateString()},a([l],t.prototype,"textKey",void 0),a([l({type:[cc.String]})],t.prototype,"extraParamComponents",void 0),a([l(cc.Font)],t.prototype,"defaultFont",void 0),a([c,u("NGC/LocalizedLabel")],t)}(cc.Label);o.NgcLabelLocalized=p,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LeaderBoardManager:[function(e,t,o){"use strict";cc._RF.push(t,"489f4n7v/pBUoO+IjSuk509","LeaderBoardManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboardManager=o.LeaderboardInitStatus=void 0;var a,i=e("../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI"),s=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../GameFramework/Scripts/CountryFlagsManager"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../GameFramework/Scripts/NgcUserInfo"),p=e("../../../SDK/Nano/NanoSrv"),d=e("../../../Services/Ads/Ads"),f=e("../../../Services/Leaderboard/Leaderboard"),h=e("../../../Services/Leaderboard/Leaderboard_impl_NanoSrv"),g=e("../../../Services/Platform/Platform");(function(e){e[e.NotInitialized=0]="NotInitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(a=o.LeaderboardInitStatus||(o.LeaderboardInitStatus={}));var m=function(){function e(){this.leaderBoardUIPrefab=null,this.leaderBoardUINode=null,this.baseUserData=null,this.initStatus=a.NotInitialized,this.allTimeBestScore=null,this.spriteFramesUrlCache=[],this.sortOrder=f.SORT_ORDER.DESC}return Object.defineProperty(e,"inst",{get:function(){return null!==e.inst_&&void 0!==e.inst_||(e.inst_=new e),e.inst_},enumerable:!1,configurable:!0}),e.prototype.setOrder=function(e){this.sortOrder=e},e.prototype.init=function(t){return n(this,void 0,void 0,function(){return r(this,function(){return e.inst.isInitalized()?[2]:(this.leaderBoardUINode=t.node,e.inst.initStatus=a.Initialized,cc.systemEvent.on("refreshLDB",this.onNanoSrvResetCallback.bind(this)),[2])})})},e.prototype.showLB=function(){e.inst.getLeaderBoardUIComponent().updateContent()&&(e.inst.getLeaderBoardUIComponent().show(),l.NgcMain.setAppContext(l.AppContext.Leaderboard))},e.prototype.checkShowBanner=function(){var e,t;s.default.inst.isAdsPoincutAvailable(s.NgcPointcuts.bannerLeaderboard,d.AdsType.Banner)?null===(e=s.default.inst)||void 0===e||e.showBanner(s.NgcPointcuts.bannerLeaderboard):null===(t=s.default.inst)||void 0===t||t.hide()},e.prototype.hideLB=function(){e.inst.leaderBoardUINode.active=!1},e.prototype.getLeaderBoardUIComponent=function(){return e.inst.leaderBoardUINode?e.inst.leaderBoardUINode.getComponent(i.NgcLeaderboardUI):null},e.prototype.getTop50=function(t,o){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,50,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getTop100=function(t,o){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,100,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getLocalPlayerRank=function(e,t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,f.NgcLeaderboard.inst.getLocalPlayerRank(e,t,this.sortOrder)];case 1:return(o=r.sent())&&1==o.status?((n=o.data).country&&(n.country=n.country.toUpperCase()),[2,n]):[2,null]}})})},e.prototype.getLeaderBoarData=function(e,t,o,a){var i;return n(this,void 0,void 0,function(){var n,s;return r(this,function(r){switch(r.label){case 0:return(n=new f.RequestLeaderboard).numRecords=t,n.populationFilter=a,n.timeFilter=o,n.position=e,n.order=this.sortOrder,[4,null===(i=f.NgcLeaderboard.inst)||void 0===i?void 0:i.loadData(n)];case 1:return(s=r.sent())&&1==s.status?[2,s.data]:[2,null]}})})},e.prototype.getNearLocalPlayer=function(e,t,o,a){return void 0===a&&(a=f.SORT_ORDER.DESC),n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,f.NgcLeaderboard.inst.getNearLocalPlayer(e,t,a,o)];case 1:return(n=r.sent())&&1==n.status?[2,n.data]:[2,null]}})})},e.prototype.getLocalUserData=function(){return n(this,void 0,Promise,function(){var e,t;return r(this,function(o){switch(o.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:(e={},t={},[4,new Promise(function(o,n){p.default.inst.servicePost("/user/login",JSON.stringify(e),function(e,r){if(e)n();else{var a=JSON.parse(r);a?(t.avatar=a.avatar,t.country=a.country?a.country.toUpperCase():null,t.devicetype=a.deviceType,t.name=a.name,t.playerId=a.id,t.socialId=a.socialId,console.log("Get local user info success"),o()):(console.log("Parse Json failed"),n())}})})]);case 1:return o.sent(),[2,t]}})})},e.prototype.isInitalized=function(){return e.inst.initStatus===a.Initialized},e.prototype.isInitalizing=function(){return e.inst.initStatus===a.Initializing},e.prototype.checkOldBestScore=function(){return n(this,void 0,void 0,function(){var t,o,n,a;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2]:[4,e.inst.getAllTimeBestScore()];case 1:if(t=r.sent(),o=l.NgcMain.inst.getBestScore(),t){if(t===o)return[2];l.NgcMain.inst.setBestScore(t)}return n={score:l.NgcMain.inst.getBestScore(),country:c.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?h.DeviceType.MOBILE:h.DeviceType.PC,time:"alltime"},p.default.inst.servicePost("/leaderboard/updatescore",JSON.stringify(n),function(e){e||console.log("update old best score to alltime LB success")}),a={_bestScore:l.NgcMain.inst.getBestScore()},p.default.inst.servicePost("/playerdata/",JSON.stringify(a),function(e){e||console.log("update old _best score success")}),[2]}})})},e.prototype.getAllTimeLocalData=function(){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.inst.getLocalPlayerRank(f.TimeFilterType.AllTime,f.PopulationFilterType.Worldwide).catch(function(){console.log("[LeaderboardManager] `getAllTimeLocalData` Can not get local player rank")})];case 1:return[2,t.sent()]}})})},e.prototype.getAllTimeBestScore=function(){return n(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,this.getAllTimeLocalData()];case 1:return(e=t.sent())&&e.hasOwnProperty("score")?[2,parseInt(e.score)]:[2,null]}})})},e.prototype.getPercentOfBeatPlayers=function(){return n(this,void 0,void 0,function(){var e,t,o;return r(this,function(n){switch(n.label){case 0:return[4,this.getAllTimeLocalData()];case 1:return(e=n.sent())&&e.hasOwnProperty("rank")&&e.hasOwnProperty("minRank")?null===e.rank||null===e.minRank?[2,null]:(t=parseInt(e.rank),o=parseInt(e.minRank),[2,Math.round((o-t)/o*100)]):[2,null]}})})},e.prototype.loadSpriteFrameFromURL=function(t){return new Promise(function(o,n){if(t){var r=e.inst.spriteFramesUrlCache.find(function(e){return e.url===t});r?o(r.spriteFrame):cc.loader.load({url:t,type:"jpg"},function(a,i){if(a)n(a);else{var s=new cc.SpriteFrame(i);r={url:t,spriteFrame:s},e.inst.spriteFramesUrlCache.push(r),o(s)}})}else n("[Util] `loadSpriteFrameFromURL` urlJPG = "+t)})},e.prototype.onNanoSrvResetCallback=function(){var t;f.NgcLeaderboard.inst.clearCacheRequestData(),(null===(t=e.inst)||void 0===t?void 0:t.getLeaderBoardUIComponent())&&(e.inst.getLeaderBoardUIComponent().reloadFilter(),e.inst.getLeaderBoardUIComponent().setLoginStatus(u.default.isUserLogined()))},e.inst_=null,e}();o.NgcLeaderboardManager=m,cc._RF.pop()},{"../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI":"LeaderBoardUI","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../Services/Platform/Platform":"Platform"}],LeaderBoardUI:[function(e,t,o){"use strict";cc._RF.push(t,"309begZN9xPZJLdrsJQ9cVK","LeaderBoardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboardUI=void 0;var c,l,u,p,d=e("../../../NanoGameCore/Core/Utils"),f=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),h=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),g=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo"),m=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),y=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),_=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog"),v=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),S=e("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),b=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),N=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),P=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),I=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),C=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),w=e("../../../NanoGameCore/SDK/Nano/NanoSrv"),O=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),T=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv"),E=e("../../../NanoGameCore/Services/Platform/Platform"),M=e("../../../NanoGameCore/Services/Social/Social"),D=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),R=e("../../ScreenManager"),B=cc._decorator,A=B.ccclass,k=B.property;(function(e){e[e.TopEdge=0]="TopEdge",e[e.Middle=1]="Middle",e[e.BottomEdge=2]="BottomEdge"})(c||(c={})),function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.none=2]="none"}(l||(l={})),function(e){e[e.none=0]="none",e[e.left=1]="left",e[e.right=2]="right"}(u||(u={})),function(e){e[e.AboveTop=0]="AboveTop",e[e.InBoard=1]="InBoard",e[e.BelowBottom=2]="BelowBottom"}(p||(p={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeFilterTogglerContainer=null,t.dailyButtonChecked=null,t.dailyButtonUnchecked=null,t.weeklyButtonChecked=null,t.weeklyButtonUnchecked=null,t.allTimeButtonChecked=null,t.allTimeButtonUnchecked=null,t.friendsButtonChecked=null,t.friendsButtonUnchecked=null,t.countryButtonChecked=null,t.countryButtonUnchecked=null,t.worldwideButtonChecked=null,t.worldwideButtonUnchecked=null,t.firstRank=null,t.firstRankHighlight=null,t.secondRank=null,t.secondRankHighlight=null,t.thirdRank=null,t.thirdRankHighlight=null,t.scrollView=null,t.scrollContent=null,t.topKeeper=null,t.bottomKeeper=null,t.top3Container=null,t.lb_userInfoPrefab=null,t.lb_infoBoardPrefab=null,t.lb_loadingBoardPrefab=null,t.mouseEventSensorNode=null,t.mouseEventSensorCheckSwipeNode=null,t.adsBannerNode=null,t.backToTopBtnNode=null,t.loginNode=null,t.inviteNode=null,t.arrowPointingNode=null,t.profile_background_1st=null,t.profile_background_2nd=null,t.profile_background_3rd=null,t.profile_background_blank_top=null,t.profile_background_blank=null,t.blockInput=null,t.loadingTop=null,t.backBtn=null,t.topKeeper_PC=null,t.botKeeper_PC=null,t.middleKeeper_PC=null,t.playerRankingNode=null,t.lb_infoBoardNode=null,t.lb_loadingBoardNode=null,t.listTopData=null,t.localUserData=null,t.localUserInfo=null,t.posOfLocalItem=null,t.isMouseDown=!1,t.isScrollContentOnTop=!1,t.scrollViewSizeStatus=c.BottomEdge,t.rankTheEndOfContent=0,t.touchStartPos=null,t.touchStartOnTop3Pos=null,t.currentScale=1,t.curTimeFilter=O.TimeFilterType.AllTime,t.curPopulationFilter=O.PopulationFilterType.Worldwide,t.hasMoreEntryToAdd=!0,t.scrollContentKeepPos=null,t.isAdsBannersEnabled=!1,t.typeSwipe=l.none,t.isLocalUserAlreadyLogin=!1,t.shareDialog=null,t.isMouseDragDown=!1,t.DISTANCE_NEXT=700,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.SCROLL_VIEW_BOTTOM_EDGE=463,t.SCROLL_VIEW_TOP_EDGE=200,t.NUMBER_MORE_ENTRY=50,t.BG_LOCAL_USER_HEX_COLER="#92CBFF",t.MAX_NAME_LENGTH=12,t.SWIPE_MIN_LENGHT=100,t.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON=100,t.needRefreshLeaderboard=!0,t._isRefreshing=!1,t}return r(t,e),t.prototype.onLoad=function(){this.DISTANCE_NEXT=cc.sys.isMobile?700:902,this.DEFAULT_SCREEN_SIZE=cc.sys.isMobile?cc.v2(640,960):cc.v2(1920,1080),this.initLeaderboardManager()},t.prototype.onActivate=function(){D.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard")},t.prototype.onResume=function(){D.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard"),this.refreshFilter()},t.prototype.start=function(){this.mouseEventSensorNode.active=!1,this.scrollViewSizeStatus=c.BottomEdge,this.backToTopBtnNode.active=!1,this.topKeeper.getComponent(g.NgcLB_UserInfo).isLocalUser=!0,this.bottomKeeper.getComponent(g.NgcLB_UserInfo).isLocalUser=!0,cc.sys.isMobile||(this.topKeeper_PC.active=this.topKeeper.active,this.topKeeper_PC.opacity=0,this.botKeeper_PC.active=this.bottomKeeper.active,this.botKeeper_PC.opacity=0,this.middleKeeper_PC.active=!0,this.middleKeeper_PC.opacity=0),this.setLoginStatus(C.default.isUserLogined()),M.NgcSocial.inst||(this.loginNode.active=!1),C.default.facebookAccessToken;var e=w.default.inst.getCurSocialInfo(),t=M.SocialType.None,o=!1;e&&("uplay"===e.platform||"ubiconnect"===e.platform?t=M.SocialType.Uplay:"facebook"===e.platform&&(t=M.SocialType.Facebook),t!=M.SocialType.None&&(M.NgcSocial.inst=M.NgcSocial.getSrvInstance(t),o=!0,console.log("Already Logged with ",e.platform))),o&&this.isLocalUserAlreadyLogin&&M.NgcSocial.inst&&M.NgcSocial.inst.fetchInfoWithAccessToken(C.default.socialId).then(function(){M.NgcSocial.inst.sendFriendListToServer(),C.default.localUserName!=M.NgcSocial.inst.getFormatName()&&(C.default.localUserName=N.NgcMain.inst.localUserName=M.NgcSocial.inst.getFormatName(),M.NgcSocial.inst.sendNameToServer()),C.default.avatarUrl!=M.NgcSocial.inst.getProfilePictureUrl()&&(C.default.avatarUrl=M.NgcSocial.inst.getProfilePictureUrl(),M.NgcSocial.inst.sendAvatarToServer())},function(){M.NgcSocial.inst.reLogin()}),this.backBtn.node.active=!I.default.inst.tabBarIsActive,this.scrollView.originX=this.scrollView.x,this.top3Container.originX=this.top3Container.x,this.topKeeper.originX=this.topKeeper.x,this.bottomKeeper.originX=this.bottomKeeper.x,this.firstRankHighlight.opacity=0,this.secondRankHighlight.opacity=0,this.thirdRankHighlight.opacity=0,E.NgcPlatform.inst&&(this.loginNode.parent.active=E.NgcPlatform.inst.getPlatformID()!==E.PlatformID.Poki,E.NgcPlatform.inst.getPlatformID()===E.PlatformID.GameDistribution&&(this.friendsButtonChecked.parent.active=!1,this.loginNode.parent.active=!1))},t.prototype.update=function(){this.checkLocalPosition(),this.isScrollContentOnTop=this.scrollContent.y<=1e-4,cc.sys.isMobile||this.updateKeeperPC()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.initLeaderboardManager=function(){m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.Initializing,m.NgcLeaderboardManager.inst.init(this).catch(function(e){console.warn(e),m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.NotInitialized}).finally(function(){m.NgcLeaderboardManager.inst.isInitalized()?m.NgcLeaderboardManager.inst.showLB():m.NgcLeaderboardManager.inst.initStatus=m.LeaderboardInitStatus.NotInitialized})},t.prototype.switchTimeBased=function(){var e=this.dailyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.dailyButtonChecked.active=e,this.dailyButtonUnchecked.active=!e;var t=this.weeklyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.weeklyButtonChecked.active=t,this.weeklyButtonUnchecked.active=!t;var o=this.allTimeButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.allTimeButtonChecked.active=o,this.allTimeButtonUnchecked.active=!o,e?this.curTimeFilter=O.TimeFilterType.Daily:t?this.curTimeFilter=O.TimeFilterType.Weekly:o&&(this.curTimeFilter=O.TimeFilterType.AllTime),this.reloadFilter()},t.prototype.switchPopulationBased=function(){var e=this.friendsButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.friendsButtonChecked.active=e,this.friendsButtonUnchecked.active=!e;var t=this.countryButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.countryButtonChecked.active=t,this.countryButtonUnchecked.active=!t;var o=this.worldwideButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.worldwideButtonChecked.active=o,this.worldwideButtonUnchecked.active=!o,e?this.curPopulationFilter=O.PopulationFilterType.Friends:t?this.curPopulationFilter=O.PopulationFilterType.Country:o&&(this.curPopulationFilter=O.PopulationFilterType.Worldwide),this.reloadFilter()},t.prototype.scrollEvents=function(){this.scrollView.getComponent(cc.ScrollView).inertia=this.scrollViewSizeStatus!==c.Middle&&this.typeSwipe!==l.horizontal,this.updateItemRenderInScrollView(),this.isUserScrollToTheEnd()&&(this.refreshFilter(),console.log("@@@@ SCROLL EVENT")),this.setBackToTopButtonEnable(this.scrollContent.y>=this.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON)},t.prototype.show=function(){var e=this;this.node.active=!0,this.reScale(),cc.view.setResizeCallback(function(){e.reScale()}),this.scheduleOnce(function(){e.reScale()},.5)},t.prototype.checkLocalPosition=function(){if(!this.isWithoutContentData()){if(this.isLocalUserInTop3())return this.topKeeper.opacity=this.scrollViewSizeStatus===c.TopEdge?255:0,void(this.bottomKeeper.opacity=0);if(!this.isLocalUserInContent())return this.bottomKeeper.opacity=255,void(this.topKeeper.opacity=0);d.Utils.getWorldPos(this.localUserInfo).y>d.Utils.getWorldPos(this.topKeeper).y?this.posOfLocalItem=p.AboveTop:d.Utils.getWorldPos(this.localUserInfo).y<d.Utils.getWorldPos(this.bottomKeeper).y?this.posOfLocalItem=p.BelowBottom:this.posOfLocalItem=p.InBoard,this.topKeeper.opacity=this.posOfLocalItem===p.AboveTop?255:0,this.bottomKeeper.opacity=this.posOfLocalItem===p.BelowBottom?255:0}},t.prototype.updateScrollViewSize=function(e){if(this.typeSwipe!=l.horizontal&&0!==e&&(!(e>0)||this.isScrollContentOnTop||this.scrollViewSizeStatus!==c.TopEdge)&&!(this.scrollViewSizeStatus===c.BottomEdge&&e>0||this.scrollViewSizeStatus===c.TopEdge&&e<0||this.isUserScrollToTheEnd()&&e<0)){var t=this.playerRankingNode.getComponent(cc.Widget);t.top+=e,t.top=cc.misc.clampf(this.SCROLL_VIEW_TOP_EDGE,this.SCROLL_VIEW_BOTTOM_EDGE,t.top),this.playerRankingNode.getComponentsInChildren(cc.Widget).forEach(function(e){return e.updateAlignment()}),this.updateScrollViewSizeStatus(),e>0&&this.isScrollContentOnTop?this.scrollView.getComponent(cc.ScrollView).scrollToTop(0):this.scrollView.getComponent(cc.ScrollView).setContentPosition(this.scrollContentKeepPos)}},t.prototype.updateTopAndBotKeeper=function(){var e=this.topKeeper.getComponent(g.NgcLB_UserInfo);e.userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---";var t=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country);if(null!=t&&(e.flag.spriteFrame=t),e.userScore.string=this.localUserData.score?this.localUserData.score.toString():"---",e.desktopIcon.active=this.localUserData.devicetype===T.DeviceType.PC,e.mobileIcon.active=this.localUserData.devicetype===T.DeviceType.MOBILE,!this.isLocalUserInTop3()){var o=this.bottomKeeper.getComponent(g.NgcLB_UserInfo);null!=t&&(o.flag.spriteFrame=t),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",o.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---",o.userScore.string=this.localUserData.score?this.localUserData.score.toString():"---",o.desktopIcon.active=this.localUserData.devicetype===T.DeviceType.PC,o.mobileIcon.active=this.localUserData.devicetype===T.DeviceType.MOBILE,o.avatarUrl=this.localUserData.avatar,o.avatarUrl?m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}):o.avatar.spriteFrame=this.profile_background_blank}e.avatarUrl=this.localUserData.avatar,e.avatarUrl?m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}):e.avatar.spriteFrame=this.profile_background_blank},t.prototype.changeViewSizeByMouse=function(e){if(this.isMouseDown){var t=Math.abs(e.getDeltaY())<2*Math.abs(e.getDeltaX())/3;if(this.typeSwipe==l.none&&(this.typeSwipe=t?l.horizontal:l.vertical),this.typeSwipe==l.horizontal);else if(this.typeSwipe==l.vertical){var o=e.getDeltaY();this.updateScrollViewSize(-o),o<0&&(this.isMouseDragDown=!0)}}},t.prototype.isUserScrollToTheEnd=function(){if(this.scrollContent.childrenCount<=1)return!0;var e=this.scrollContent.children[this.scrollContent.childrenCount-1],t=d.Utils.getWorldPos(e),o=d.Utils.getWorldPos(this.scrollView),n=t.y-e.height*e.anchorY,r=o.y-this.scrollView.height*this.scrollView.anchorY;return Math.ceil(n)>=Math.ceil(r)},t.prototype.isItemInCurrentView=function(e){var t=d.Utils.getWorldPos(e),o=d.Utils.getWorldPos(this.scrollView),n=t.y+e.height*(1-e.anchorY),r=t.y-e.height*e.anchorY,a=o.y+this.scrollView.height*(1-this.scrollView.anchorY);return!(n<o.y-this.scrollView.height*this.scrollView.anchorY||r>a)},t.prototype.updateContent=function(){return i(this,void 0,Promise,function(){var e,t,o,n,r,a,i;return s(this,function(){if(!this.listTopData)return[2,!1];if(!this.localUserData)return console.log("[LeaderboardUI] `updateContent` this.localUserData = NULL"),[2,!1];if(e=d.Utils.enumToString(O.TimeFilterType,this.curTimeFilter),t=d.Utils.enumToString(O.PopulationFilterType,this.curPopulationFilter),D.NgcTelemetry.inst.LogEvent_InfoLeaderboard({rankBalance:this.localUserData.rank,leaderboardContext:e,leaderboardCategory:t}),this.lb_loadingBoardNode&&this.removeLoadingBoard(),this.lb_infoBoardNode=null,this.resetAvatarTop3(),this.checkArrowPointLoginIconDisplay(),this.isWithoutContentData())return this.updateContentWithoutData(),this.scrollContent.removeAllChildren(),this.addInviteInfoBoard(),[2,!0];for(null==this.localUserData.score&&(this.localUserData.rank=null),this.scrollContent.removeAllChildren(),this.localUserInfo=null,o=this.listTopData,this.secondRank.opacity=0,this.thirdRank.opacity=0,n=0,r=o;n<r.length;n++)null!==(a=r[n]).rank?(i=null,1===a.rank?i=this.firstRank:2===a.rank?(this.secondRank.opacity=255,i=this.secondRank):3===a.rank?(this.thirdRank.opacity=255,i=this.thirdRank):(i=cc.instantiate(this.lb_userInfoPrefab)).parent=this.scrollContent,this.applyUserDataToNode(a,i)):console.log("[LeaderboardUI] `updateContent` - Rank = null");return console.log("@@ Local user rank ",this.localUserData.rank),o.length>3&&(this.localUserData.rank>99||!this.localUserData.rank)&&(cc.instantiate(this.lb_userInfoPrefab).parent=this.scrollContent),this.rankTheEndOfContent<this.NUMBER_MORE_ENTRY&&this.addInviteInfoBoard(),this.firstRankHighlight.active=1===this.localUserData.rank,this.secondRankHighlight.active=2===this.localUserData.rank,this.thirdRankHighlight.active=3===this.localUserData.rank,this.updateTopAndBotKeeper(),this.checkLocalPosition(),this.updateItemRenderInScrollView(),this.backToTopBtnNode.active=!1,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin),[2,!0]})})},t.prototype.updateContentWithoutData=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(){return 0==this.listTopData.length&&(this.secondRank.opacity=0,this.thirdRank.opacity=0,this.bottomKeeper.opacity=0,(e=this.firstRank.getComponent(g.NgcLB_UserInfo)).userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.userScore.string=this.localUserData.score?this.localUserData.score.toString():"---",null!=(t=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country))&&(e.flag.spriteFrame=t),e.avatarUrl=this.localUserData.avatar,e.isLocalUser=!0,this.firstRankHighlight.active=!0,this.topKeeper.opacity=0,this.bottomKeeper.opacity=0),[2]})})},t.prototype.reloadFilter=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.setBlockInput(!0),this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,e=this,[4,m.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)];case 1:return e.listTopData=o.sent(),t=this,[4,m.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return t.localUserData=o.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return o.sent(),this.setBlockInput(!1),[2]}})})},t.prototype.refreshFilter=function(){var e;return i(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return this._isRefreshing?[2]:(this._isRefreshing=!0,null===(e=O.NgcLeaderboard.inst)||void 0===e||e.clearCacheRequestData(),this.setBlockInput(!0),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,t=this,[4,m.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)]);case 1:return t.listTopData=n.sent(),o=this,[4,m.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return o.localUserData=n.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return n.sent(),this.setBlockInput(!1),this._isRefreshing=!1,[2]}})})},t.prototype.isWithoutContentData=function(){return null===this.listTopData||0==this.listTopData.length},t.prototype.addInviteInfoBoard=function(){if(null===this.lb_loadingBoardNode){switch(this.lb_infoBoardNode=cc.instantiate(this.lb_infoBoardPrefab),v.NgcBuildConfig.buildPlatform){case"POKI":case"GameDistribution":this.lb_infoBoardNode.active=!1;break;default:var e=this.isLocalUserAlreadyLogin?"LDB_INVITE_BOARD_INFO":"LDB_LOGIN_BOARD_INFO";this.lb_infoBoardNode.getComponentInChildren(b.NgcLabelLocalized).setLocalizedText(e)}this.lb_infoBoardNode.parent=this.scrollContent}},t.prototype.addLoadingBoard=function(){this.lb_loadingBoardNode=cc.instantiate(this.lb_loadingBoardPrefab),this.lb_loadingBoardNode.parent=this.scrollContent},t.prototype.removeLoadingBoard=function(){var e=this;if(this.scrollContent.childrenCount>0){var t=this.scrollContent.children.findIndex(function(t){return t===e.lb_loadingBoardNode});t>0&&(this.scrollContent.children.splice(t,1),this.lb_loadingBoardNode=null)}},t.prototype.applyUserDataToNode=function(e,t){return i(this,void 0,void 0,function(){var o,n,r;return s(this,function(){return null===(o=t.getComponent(g.NgcLB_UserInfo))?[2]:(o.rankNumber&&(o.rankNumber.string=""+e.rank),o.userName.string=e.name?e.name:"Guest",e.socialId||e.avatar?o.userName.string=C.default.correctNameFormat(o.userName.string):o.userName.string=this.reduceNameLenght(o.userName.string),o.userScore.string=e.score.toString(),null!=(n=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(e.country))&&(o.flag.spriteFrame=n),o.isLocalUser=e.rank===this.localUserData.rank,e.rank===this.localUserData.rank&&(this.localUserInfo=t,o.bg2&&(o.bg2.color=o.bg2.color.fromHEX(this.BG_LOCAL_USER_HEX_COLER)),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",r=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country),o.flag.node.active=null!=r,null!=r&&(o.flag.spriteFrame=r),o.setNeedToSave(!this.isLocalUserAlreadyLogin),cc.sys.isMobile||this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!this.isLocalUserAlreadyLogin)),o.avatarUrl=e.avatar,o.avatarUrl&&m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}),o.desktopIcon&&o.mobileIcon&&(o.desktopIcon.active=e.devicetype===T.DeviceType.PC,o.mobileIcon.active=e.devicetype===T.DeviceType.MOBILE),this.rankTheEndOfContent=Math.max(e.rank,this.rankTheEndOfContent),[2])})})},t.prototype.isLocalUserInTop3=function(){return!(!this.localUserData||!this.localUserData.rank)&&this.localUserData.rank<=3},t.prototype.isLocalUserHasNotRank=function(){return null===this.localUserData.rank},t.prototype.isLocalUserInContent=function(){return null!=this.localUserInfo},t.prototype.reduceNameLenght=function(e){return e.length>this.MAX_NAME_LENGTH&&(e=e.slice(0,this.MAX_NAME_LENGTH-3)+"..."),e},t.prototype.reScale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e,this.resizeContent()}catch(t){cc.warn(t)}},t.prototype.isLocalUserExisted=function(){return null!==this.localUserInfo},t.prototype.onButtonTopKeeperClicked=function(){this.isMouseDown=!1,null!==this.localUserData.rank&&void 0!==this.localUserData&&(this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(this.localUserInfo.x,-this.localUserInfo.y)))},t.prototype.updateScrollViewSizeStatus=function(){var e=this.playerRankingNode.getComponent(cc.Widget);e.top===this.SCROLL_VIEW_BOTTOM_EDGE?this.scrollViewSizeStatus=c.BottomEdge:e.top===this.SCROLL_VIEW_TOP_EDGE?this.scrollViewSizeStatus=c.TopEdge:this.scrollViewSizeStatus=c.Middle},t.prototype.updateItemRenderInScrollView=function(){var e=this;this.scrollContent.getComponent(cc.Layout).updateLayout(),this.scrollContent.children.forEach(function(t){t.opacity=e.isItemInCurrentView(t)?255:0})},t.prototype.onInviteButtonOnClick=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return this.shareDialog&&this.shareDialog.isValid?[2]:E.NgcPlatform.isRunFromApp()?(e=v.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native",E.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"),C.default.sharedGame_NavBar=!0,[2]):[4,h.NgcDialogManager.createDialog(_.NgcNavBarShareDialog.dialogType,_.NgcNavBarShareDialog.urlPrefab,_.NgcNavBarShareDialog.bundleName)];case 1:return t=n.sent(),o=t.getComponent(_.NgcNavBarShareDialog),this.shareDialog=o.node,o.init(o.show()),[2]}})})},t.prototype.onLoginButtonOnClick=function(e){return i(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return E.NgcPlatform.inst&&"Poki"==E.NgcPlatform.inst.getName()?[4,h.NgcDialogManager.createDialog(f.NgcMessageDialog.dialogType,f.NgcMessageDialog.urlPrefab,f.NgcMessageDialog.bundleName)]:[3,2];case 1:return t=r.sent(),(o=t.getComponent(f.NgcMessageDialog)).init("NGG_NOT_AVAILABLE_ON_THIS_WEB"),n=cc.sys.isMobile?20:null,o.show(null,e.target,null,n,.6),[2];case 2:return y.NgcNavBarManager.inst&&y.NgcNavBarManager.inst.logInOnClick(),[2]}})})},t.prototype.onButtonBackClick=function(){R.default.inst.goToStartScreen()},t.prototype.onButtonBackToTopClick=function(){this.scrollView.getComponent(cc.ScrollView).scrollToTop(.3),this.updateScrollViewSizeStatus()},t.prototype.setBackToTopButtonEnable=function(e){var t=this;!0===e&&!0===this.backToTopBtnNode.active||(!0===e&&!1===this.backToTopBtnNode.active&&(this.backToTopBtnNode.active=e,cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:255}).start()),!1===e&&!0===this.backToTopBtnNode.active&&255===this.backToTopBtnNode.opacity&&(cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:0}).call(function(){t.backToTopBtnNode.active=!1}).start()))},t.prototype.updateLocalUserLoginInfo=function(e){this.topKeeper.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.bottomKeeper.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),cc.sys.isMobile||(this.topKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.botKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e))},t.prototype.updateContentFacebookProfile=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(){return M.NgcSocial.inst?(e=this.mouseEventSensorNode.parent,t=this.localUserData.avatar=M.NgcSocial.inst.getProfilePictureUrl(),m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(t).then(function(t){e.getComponentsInChildren(g.NgcLB_UserInfo).forEach(function(e){e.isLocalUser&&(e.avatar.spriteFrame=t,e.userName.string=C.default.localUserName)})},function(e){console.log(e)}),[2]):[2]})})},t.prototype.resetAvatarTop3=function(){this.firstRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.secondRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.thirdRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top},t.prototype.setLoginStatus=function(e){if(E.NgcPlatform.isRunFromApp()){if(this.arrowPointingNode.opacity=0,!C.default.isUserLogined())return this.isLocalUserAlreadyLogin=!1,this.loginNode.active=!1,this.inviteNode.active=!1,void this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin);e=!0}this.isLocalUserAlreadyLogin=e,this.loginNode.active=!this.isLocalUserAlreadyLogin,this.inviteNode.active=this.isLocalUserAlreadyLogin,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin)},t.prototype.setBlockInput=function(e){this.blockInput.active=e,this.loadingTop.active=e},t.prototype.loadTop3UserAvatar=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r;return s(this,function(a){switch(a.label){case 0:e=[this.firstRank.getComponent(g.NgcLB_UserInfo),this.secondRank.getComponent(g.NgcLB_UserInfo),this.thirdRank.getComponent(g.NgcLB_UserInfo)],t=function(e){return s(this,function(t){switch(t.label){case 0:return e.avatarUrl?[4,new Promise(function(t){m.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}).finally(function(){t()})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},o=0,n=e,a.label=1;case 1:return o<n.length?(r=n[o],[5,t(r)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.checkArrowPointLoginIconDisplay=function(){this.isLocalUserAlreadyLogin?this.arrowPointingNode.active=!1:this.arrowPointingNode.active=this.isWithoutContentData()||1===this.listTopData.length&&1===this.localUserData.rank},t.prototype.updateKeeperPC=function(){function e(e,t){e.rankNumber&&t.rankNumber.string!==e.rankNumber.string&&(t.rankNumber.string=e.rankNumber.string),t.avatar.spriteFrame!==e.avatar.spriteFrame&&(t.avatar.spriteFrame=e.avatar.spriteFrame),t.flag.spriteFrame!==e.flag.spriteFrame&&(t.flag.spriteFrame=e.flag.spriteFrame),t.userName.string!==e.userName.string&&(t.userName.string=e.userName.string,t.userNameNeedToSave.string=t.userName.string),t.userScore.string!==e.userScore.string&&(t.userScore.string=e.userScore.string),t.desktopIcon.active!==e.desktopIcon.active&&(t.desktopIcon.active=e.desktopIcon.active),t.mobileIcon.active!==e.mobileIcon.active&&(t.mobileIcon.active=e.mobileIcon.active)}this.topKeeper_PC.opacity!==this.topKeeper.opacity&&(this.topKeeper_PC.opacity=this.topKeeper.opacity),this.topKeeper_PC.opacity>0&&(e(this.topKeeper.getComponent(g.NgcLB_UserInfo),this.topKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.topKeeper_PC,d.Utils.getWorldPos(this.topKeeper))),this.botKeeper_PC.opacity!==this.bottomKeeper.opacity&&(this.botKeeper_PC.opacity=this.bottomKeeper.opacity),this.botKeeper_PC.opacity>0&&(e(this.bottomKeeper.getComponent(g.NgcLB_UserInfo),this.botKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.botKeeper_PC,d.Utils.getWorldPos(this.bottomKeeper))),0!==this.topKeeper.opacity||0!==this.bottomKeeper.opacity||this.isLocalUserInTop3()||this.isWithoutContentData()?this.middleKeeper_PC.opacity=0:this.middleKeeper_PC.opacity=255,this.middleKeeper_PC.opacity>0&&this.localUserInfo&&(e(this.localUserInfo.getComponent(g.NgcLB_UserInfo),this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.middleKeeper_PC,d.Utils.getWorldPos(this.localUserInfo)))},t.prototype.resizeContent=function(){},a([k(cc.ToggleContainer)],t.prototype,"timeFilterTogglerContainer",void 0),a([k(cc.Node)],t.prototype,"dailyButtonChecked",void 0),a([k(cc.Node)],t.prototype,"dailyButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"weeklyButtonChecked",void 0),a([k(cc.Node)],t.prototype,"weeklyButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"allTimeButtonChecked",void 0),a([k(cc.Node)],t.prototype,"allTimeButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"friendsButtonChecked",void 0),a([k(cc.Node)],t.prototype,"friendsButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"countryButtonChecked",void 0),a([k(cc.Node)],t.prototype,"countryButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"worldwideButtonChecked",void 0),a([k(cc.Node)],t.prototype,"worldwideButtonUnchecked",void 0),a([k(cc.Node)],t.prototype,"firstRank",void 0),a([k(cc.Node)],t.prototype,"firstRankHighlight",void 0),a([k(cc.Node)],t.prototype,"secondRank",void 0),a([k(cc.Node)],t.prototype,"secondRankHighlight",void 0),a([k(cc.Node)],t.prototype,"thirdRank",void 0),a([k(cc.Node)],t.prototype,"thirdRankHighlight",void 0),a([k(cc.Node)],t.prototype,"scrollView",void 0),a([k(cc.Node)],t.prototype,"scrollContent",void 0),a([k(cc.Node)],t.prototype,"topKeeper",void 0),a([k(cc.Node)],t.prototype,"bottomKeeper",void 0),a([k(cc.Node)],t.prototype,"top3Container",void 0),a([k(cc.Prefab)],t.prototype,"lb_userInfoPrefab",void 0),a([k(cc.Prefab)],t.prototype,"lb_infoBoardPrefab",void 0),a([k(cc.Prefab)],t.prototype,"lb_loadingBoardPrefab",void 0),a([k(cc.Node)],t.prototype,"mouseEventSensorNode",void 0),a([k(cc.Node)],t.prototype,"mouseEventSensorCheckSwipeNode",void 0),a([k(cc.Node)],t.prototype,"adsBannerNode",void 0),a([k(cc.Node)],t.prototype,"backToTopBtnNode",void 0),a([k(cc.Node)],t.prototype,"loginNode",void 0),a([k(cc.Node)],t.prototype,"inviteNode",void 0),a([k(cc.Node)],t.prototype,"arrowPointingNode",void 0),a([k(cc.SpriteFrame)],t.prototype,"profile_background_1st",void 0),a([k(cc.SpriteFrame)],t.prototype,"profile_background_2nd",void 0),a([k(cc.SpriteFrame)],t.prototype,"profile_background_3rd",void 0),a([k(cc.SpriteFrame)],t.prototype,"profile_background_blank_top",void 0),a([k(cc.SpriteFrame)],t.prototype,"profile_background_blank",void 0),a([k(cc.Node)],t.prototype,"blockInput",void 0),a([k(cc.Node)],t.prototype,"loadingTop",void 0),a([k(cc.Widget)],t.prototype,"backBtn",void 0),a([k(cc.Node)],t.prototype,"topKeeper_PC",void 0),a([k(cc.Node)],t.prototype,"botKeeper_PC",void 0),a([k(cc.Node)],t.prototype,"middleKeeper_PC",void 0),a([k(cc.Node)],t.prototype,"playerRankingNode",void 0),a([A],t)}(P.default);o.NgcLeaderboardUI=L,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo":"LB_UserInfo","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog":"NavBarShareDialog","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../ScreenManager":"ScreenManager"}],Leaderboard_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"e8a4cR4oT5NqIjQEe1VpNKK","Leaderboard_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DeviceType=void 0;var c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/CountryFlagsManager"),u=e("../../SDK/Nano/NanoSrv"),p=e("./Leaderboard"),d=cc._decorator,f=d.ccclass;d.property,o.DeviceType={MOBILE:"Mobile",PC:"PC"};var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype._preInit=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv initialized")})},t.prototype._preCacheData=function(e){this._loadData(e)},t.prototype._getLocalPlayerRank=function(e){return i(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==p.SORT_ORDER.DESC,country:l.NgcCountryFlagsManager.localCountry},o=null,e.timeSent=Date.now(),e.status=p.RequestStatus.Waiting,[4,new Promise(function(e,n){u.default.inst.serviceGet("/leaderboard/info",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=p.RequestStatus.Responded,e.timeGotData=Date.now(),e.rank=o}).catch(function(){cc.js.array.remove(n.requestLocalRanks,e)})];case 1:return r.sent(),o&&1==o.status?[2,e.rank]:[2,null]}})})},t.prototype._getPlayerRank=function(e,t){return i(this,void 0,void 0,function(){var o,n,r;return s(this,function(a){switch(a.label){case 0:return o="/leaderboard/"+c.NgcBuildConfig.platformGameID+"/"+e+"/info",n={time:t.timeFilter,population:t.populationFilter,country:l.NgcCountryFlagsManager.localCountry},r=null,t.timeSent=Date.now(),t.status=p.RequestStatus.Waiting,[4,new Promise(function(e,t){u.default.inst.serviceGet(o,n,function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})}).then(function(){t.status=p.RequestStatus.Responded,t.timeGotData=Date.now(),t.rank=r.data}).catch(function(){})];case 1:return a.sent(),r&&1==r.status?[2,t.rank]:[2,null]}})})},t.prototype._loadData=function(e){return i(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={offset:e.position,count:e.numRecords,time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==p.SORT_ORDER.DESC,country:l.NgcCountryFlagsManager.localCountry,playerid:u.default.inst.userID},o=null,e.timeSent=Date.now(),e.status=p.RequestStatus.Waiting,[4,new Promise(function(e,n){u.default.inst.serviceGet("/leaderboard/top",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=p.RequestStatus.Responded,e.timeGotData=Date.now(),e.result=o}).catch(function(){cc.js.array.remove(n.requestLeaderboards,e)})];case 1:return r.sent(),[2,e.result]}})})},t.prototype._uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),i(this,void 0,void 0,function(){var n,r;return s(this,function(a){switch(a.label){case 0:return n={score:e,option:t,country:l.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?o.DeviceType.MOBILE:o.DeviceType.PC},r=null,[4,new Promise(function(e,t){u.default.inst.servicePost("/leaderboard/updatescore",JSON.stringify(n),function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})})];case 1:return a.sent(),[2,r]}})})},t.prototype._uploadLeaugeScore=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n="GT"),i(this,void 0,void 0,function(){var r,a;return s(this,function(i){switch(i.label){case 0:return r={score:t,name:e,option:n,deviceType:cc.sys.isMobile?o.DeviceType.MOBILE:o.DeviceType.PC},a=null,[4,new Promise(function(e,t){u.default.inst.servicePost("/leaderboard/updateleaguescore",JSON.stringify(r),function(o,n){if(o)return a=o,void t();a=JSON.parse(n),e()})})];case 1:return i.sent(),[2,a]}})})},t.prototype._groupAPIRequest=function(e){return i(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return t={listApi:e},o=null,[4,new Promise(function(e,n){u.default.inst.servicePost("/transact",JSON.stringify(t),function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})})];case 1:return n.sent(),[2,o]}})})},t.prototype.update=function(){},a([f],t)}(p.NgcLeaderboard);o.default=h,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../SDK/Nano/NanoSrv":"NanoSrv","./Leaderboard":"Leaderboard"}],Leaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"0c841GYrhJFb7+QnrPBzI7N","Leaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboard=o.RequestLocalRank=o.RequestLeaderboard=o.SORT_ORDER=o.UpdateMode=o.RequestStatus=o.PopulationFilterType=o.TimeFilterType=void 0;var s,c,l=e("../Service"),u=cc._decorator;u.ccclass,u.property,o.TimeFilterType={Daily:"daily",Weekly:"weekly",Monthly:"monthly",AllTime:"alltime"},o.PopulationFilterType={Friends:"friends",Country:"country",Worldwide:"worldwide"},function(e){e[e.Waiting=0]="Waiting",e[e.Responded=1]="Responded"}(s=o.RequestStatus||(o.RequestStatus={})),function(e){e[e.CHANGE=0]="CHANGE",e[e.LT=1]="LT",e[e.GT=2]="GT"}(o.UpdateMode||(o.UpdateMode={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(c=o.SORT_ORDER||(o.SORT_ORDER={}));var p=function(e,t,n,r,a){void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===n&&(n=1),void 0===r&&(r=20),void 0===a&&(a=c.DESC),this.timeFilter=o.TimeFilterType.Daily,this.populationFilter=o.PopulationFilterType.Friends,this.position=null,this.numRecords=20,this.timeSent=0,this.timeGotData=0,this.result=null,this.status=null,this.order=c.DESC,this.timeFilter=e,this.populationFilter=t,this.position=n,this.numRecords=r,this.order=a};o.RequestLeaderboard=p;var d=function(e,t,n){void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===n&&(n=c.DESC),this.timeFilter=o.TimeFilterType.Daily,this.populationFilter=o.PopulationFilterType.Friends,this.rank=null,this.timeSent=0,this.timeGotData=0,this.status=null,this.order=c.DESC,this.timeFilter=e,this.populationFilter=t,this.order=n};o.RequestLocalRank=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestLeaderboards=[],t.maxTimeForValidCacheData=60,t.timeTimeOut=10,t.requestLocalRanks=[],t.timeUpdateLocalRank=0,t.defaultTimeFilter=o.TimeFilterType.Daily,t.defaultPopulationFilter=o.PopulationFilterType.Friends,t.defaultPosition=1,t.defaultNumRecords=20,t}return r(t,e),t.prototype.getName=function(){return"Leaderboard"},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheData=function(e){void 0===e&&(e=new p),this.requestLbIsAlreadyExist(e)||(this.requestLeaderboards.push(e),this._preCacheData(e),this.getLocalPlayerRank(e.timeFilter,e.populationFilter,e.order))},t.prototype.preCacheAfterGotRespone=function(e){var t=new p;t.numRecords=e.numRecords,t.populationFilter=e.populationFilter,t.timeFilter=e.timeFilter,t.position=e.position+e.numRecords,t.order=e.order,this.preCacheData(t);var o=new p;o.numRecords=e.numRecords,o.populationFilter=e.populationFilter,o.timeFilter=e.timeFilter,o.position=e.position-e.numRecords,o.order=e.order,o.position>=0&&this.preCacheData(o)},t.prototype.loadData=function(e){return void 0===e&&(e=new p),a(this,void 0,void 0,function(){var t,o;return i(this,function(n){switch(n.label){case 0:return(t=this.requestLbIsAlreadyExist(e))?t.status!=s.Responded?[3,1]:(this.preCacheAfterGotRespone(t),[2,t.result]):[3,4];case 1:return[4,this.timeout(100)];case 2:return n.sent(),[4,this.loadData(e)];case 3:return[2,n.sent()];case 4:return this.requestLeaderboards.push(e),[4,this._loadData(e)];case 5:return o=n.sent(),this.preCacheAfterGotRespone(e),[2,o]}})})},t.prototype.getLocalPlayerRank=function(e,t,o){return void 0===o&&(o=c.DESC),a(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return n=new d(e,t,o),this.requestlocalRankIsAlreadyExist(n)?(n=this.requestlocalRankIsAlreadyExist(n)).status!=s.Responded?[3,1]:[2,n.rank]:[3,4];case 1:return[4,this.timeout(100)];case 2:return r.sent(),[4,this.getLocalPlayerRank(e,t,o)];case 3:return[2,r.sent()];case 4:return this.requestLocalRanks.push(n),[4,this._getLocalPlayerRank(n)];case 5:return[2,r.sent()]}})})},t.prototype.getPlayerRank=function(e,t,o,n){return void 0===n&&(n=c.DESC),a(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return r=new d(t,o,n),[4,this._getPlayerRank(e,r)];case 1:return[2,a.sent()]}})})},t.prototype.uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),a(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return this.clearCacheRequestData(),[4,this._uploadScore(e,t)];case 1:return[2,o.sent()]}})})},t.prototype.uploadLeaugeScore=function(e,t,o){return void 0===o&&(o="GT"),a(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return this.clearCacheRequestData(),[4,this._uploadLeaugeScore(e,t,o)];case 1:return[2,n.sent()]}})})},t.prototype.groupAPIRequest=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.clearCacheRequestData(),[4,this._groupAPIRequest(e)];case 1:return[2,t.sent()]}})})},t.prototype.requestLbIsAlreadyExist=function(e){var t=this;void 0===e&&(e=new p);var o=null;return this.requestLeaderboards.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||n.position!=e.position||n.order!=e.order||n.numRecords!=e.numRecords||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLeaderboards,n):o=n)}),o},t.prototype.requestlocalRankIsAlreadyExist=function(e){var t=this,o=null;return this.requestLocalRanks.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLocalRanks,n):o=n)}),o},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.start=function(){this.preCacheData()},t.prototype.getTopLeaderboard=function(e,t,n,r){return void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===r&&(r=20),a(this,void 0,void 0,function(){var o;return i(this,function(a){switch(a.label){case 0:return this.cacheTopLeaderboardAllFilter(r,n),o=new p(e,t,0,r,n),[4,this.loadData(o)];case 1:return[2,a.sent()]}})})},t.prototype.getNearLocalPlayer=function(e,t,n,r){return void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===r&&(r=10),a(this,void 0,void 0,function(){var o,a;return i(this,function(i){switch(i.label){case 0:return[4,this.getLocalPlayerRank(e,t,n)];case 1:return o=i.sent(),a=new p(e,t,Math.max(1,o-r),2*r,n),[4,this.loadData(a)];case 2:return[2,i.sent()]}})})},t.prototype.cacheTopLeaderboardAllFilter=function(e,t){for(var n in void 0===t&&(t=c.DESC),o.TimeFilterType)for(var r in o.PopulationFilterType){var a=new p(o.TimeFilterType[n],o.PopulationFilterType[r],0,e,t);this.loadData(a)}},t.prototype.clearCacheRequestData=function(){this.requestLeaderboards=[],this.requestLocalRanks=[]},t.srvInstances=[],t.inst=null,t}(l.NgcService);o.NgcLeaderboard=f,cc._RF.pop()},{"../Service":"Service"}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"94075lgEzJGna0vW5bEqDpv","LoadingScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../Screens/PartyRoomScreen/PartyRoomManager"),u=e("../../NanoGameCore/CrossFeatures/Tips/Script/TipManager"),p=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),f=e("../../NanoGameCore/Services/PartyRoom/PartyRoom"),h=e("../../NanoGameCore/Services/Platform/Platform"),g=e("../../NanoGameCore/Services/ServicesMgr"),m=e("../../NanoGameCore/Services/Telemetry/Telemetry"),y=e("../Utils/ConstConfig"),_=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),v=e("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),S=e("../Main"),b=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),N=e("../../NanoGameCore/CrossFeatures/GPDR/Script/NgcGDPR"),P=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarAboutDialog"),I=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConfirmDialog"),C=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog"),w=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog"),O=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarHowToPlayDialog"),T=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarLoginSocialDialog"),E=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog"),M=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog"),D=e("../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog"),R=e("../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog"),B=e("../Screens/StartScreen/StartMain"),A=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),k=e("../UserInfo"),L=e("../Tracking/TrackingManager"),G=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),F=e("../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeInfoDialog"),j=e("../../NanoGameCore/Services/Inventory/Inventory"),U=e("../../NanoGameCore/CrossFeatures/OfflineMode/OfflineMode"),x=e("../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),H=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect"),V=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageSupportBrowser"),z=e("../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadProgressionDialog"),W=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/ReviveDialog"),K=e("../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSelectLanguageDialog"),Y=e("../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog"),q=e("../../NanoGameCore/CrossFeatures/Redirection/Script/NgcRedirectionDialog"),J=e("../../NanoGameCore/SDK/Nano/NanoSrv"),X=cc._decorator,Q=X.ccclass,Z=X.property,$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackingNode=null,t.progressLoading=null,t.percentLb=null,t.logoWidget=null,t.noticeLogOutIconSF=null,t.noticeDisconnectIconSF=null,t.rateForLoadSubpackage=0,t.speedLoadBar=.25,t.gameSceneLoaded=!1,t.dots=[],t.loadSubpackagesStartTime=-1,t.loadGameSceneStartTime=-1,t._alreadyParseCookie=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"loadedPercent",{get:function(){return this._loadedPercent},set:function(e){h.NgcPlatform.inst&&(e>=1&&this._loadedPercent<1?h.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:100},"*"):e>=.75&&this._loadedPercent<.75?h.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:75},"*"):e>=.5&&this._loadedPercent<.5?h.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:50},"*"):e>=.25&&this._loadedPercent<.25&&h.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:25},"*")),this._loadedPercent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedSubpackage",{get:function(){return this._loadedSubpackage},set:function(e){if(this._loadedSubpackage=e,this._loadedSubpackage==Object.keys(y.ConstConfig.SUBPACKAGE_NAME).length){var t={};window.funnel&&(t={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker});var o={name:"loading_subpackageLoaded",param:t};window.trackingFunnelEvents.push(o),this.loadGameScene()}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e;cc.sys.isBrowser?null===(e=window.firebaseInfo)||void 0===e||e.firebaseAnalytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}):h.NgcPlatform.isOfflineMode()||(sdkbox.firebase.Analytics.init(),sdkbox.firebase.Analytics.setAnalyticsCollectionEnabled(!0),sdkbox.firebase.Analytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}),sdkbox.firebase.Analytics.logEvent("game_start",{acquisitionChannel:"Android",gameVersion:p.NgcBuildConfig.buildVersionName,deploymentEnvironment:p.NgcBuildConfig.deploymentEnvironment,clientTimestamp:Date.now()})),window.trackingFunnelEvents||(window.trackingFunnelEvents=[])},t.prototype.start=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return window.loadingGame=!0,m.NgcTelemetry.setGameImportantInfos("coin",["hero"]),o.inst=this,[4,this.initCrossFeatures()];case 1:return t.sent(),console.log("Start platform!"),[4,this.startupPlatform()];case 2:return t.sent(),[4,this.waitForInitStuff()];case 3:return t.sent(),b.default.sessionKey=v.NgcNetUtils.generateRandomUUID()+Date.now().toString(),b.default.sessionKey&&(cc.log("Saving key",b.default.sessionKey),b.default.gameRunningSession=b.default.sessionKey,cc.log("#Getting key",b.default.gameRunningSession),e=JSON.stringify({GAME_FIREBASE_SESSION_TOKEN:b.default.sessionKey}),h.NgcPlatform.inst&&h.NgcPlatform.inst.onPostMessage(e,"*")),l.NgcPartyRoomManager.mustGoToPartyRoom()&&f.NgcPartyRoom.sendIamComingStatus(),this.preloadAllBasicDialogs(),[2]}})})},t.prototype.initCrossFeatures=function(){console.log("Init cross feature!");var e=function(e){e&&(b.default.curLanguage=e,d.NgcLocalizedManager.setLanguage(e))};return new Promise(function(t){if(!h.NgcPlatform.isRunAsIframeOnNano()){var o=h.NgcPlatform.getLoginDataFromURL();return o&&(b.default.nanoLoginData=o,b.default.userIdKey=o.userId||o.playerId,b.default.secretKey=o.secretKey,b.default.changedName=!1,b.default.localUserName=o.name,b.default.socialId=o.socialId||"",console.log("Linked successfully using URL",o),window.accountURLLinked=!0,e(o.language)),void t("OK")}if(b.default.getNanoUserInfoFromLocalstorage()){window.accountLinked=!0;var n=x.default.getKey("NANO_LANGUAGE",null,!1);e(n)}t("OK")})},t.prototype.waitForInitStuff=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=[],t=new Promise(function(e){j.NgcInventory.inst.onLogin(function(){e()})}),e.push(t),p.NgcBuildConfig.offlineMode?(console.log("Init Offline system"),[4,U.OfflineMode.Init()]):[3,2];case 1:o.sent(),o.label=2;case 2:return[4,Promise.all(e)];case 3:return[2,o.sent()]}})})},t.prototype.loadSubpackage=function(){var e=this;for(var t in this.loadSubpackagesStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,Date.now(),window.funnel.checker),y.ConstConfig.SUBPACKAGE_NAME)cc.loader.downloader.loadSubpackage(y.ConstConfig.SUBPACKAGE_NAME[t],function(t){if(t)return console.error(t);e.loadedSubpackage+=1,e.loadedPercent=e.loadedSubpackage/Object.keys(y.ConstConfig.SUBPACKAGE_NAME).length*e.rateForLoadSubpackage})},t.prototype.loadGameScene=function(){var e=this;this.loadGameSceneStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,Date.now(),window.funnel.checker),h.NgcPlatform.inst&&h.NgcPlatform.inst.onGameLoadingStart(),cc.director.preloadScene(y.ConstConfig.SCENE.GAME_SCENE,function(t,o){e.loadedPercent=e.rateForLoadSubpackage+t/o*(1-e.rateForLoadSubpackage)},function(){if(cc.sys.isBrowser)try{window.parent.postMessage({GameSceneLoaded:!0},"*")}catch(t){}e.gameSceneLoaded=!0})},t.prototype.update=function(e){var t=!0;cc.sys.isBrowser&&(t=0==window.standOnLoadingScreen||null==window.standOnLoadingScreen);var o=N.default.getInstance().isShowingGDPR_Popup();if(!o&&!this._alreadyParseCookie){try{N.default.getInstance().parseCookies()}catch(a){console.warn("Parse cookie error",a)}this._alreadyParseCookie=!0}if(t=t&&!o,this.progressLoading.progress<this.loadedPercent&&t&&(this.progressLoading.progress=Math.min(this.progressLoading.progress+e*this.speedLoadBar,this.loadedPercent),this.percentLb.node&&this.percentLb.node.active&&(this.percentLb.string=Math.round(100*this.progressLoading.progress)+"%")),t&&g.NgcServicesMgr.isLoggedIn&&this.gameSceneLoaded&&100==Math.round(100*this.progressLoading.progress)){var n={};window.funnel&&(n={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker},L.default.inst.onStartSceneLoaded());var r={name:"loading_startsceneLoaded",param:n};if(window.trackingFunnelEvents.push(r),!G.default.checkAndShowUnSupportedBrowser())return;m.NgcTelemetry.inst.sendFunnelEvents(),B.default.canShowBanner=!1,cc.director.loadScene(y.ConstConfig.SCENE.GAME_SCENE),h.NgcPlatform.inst&&h.NgcPlatform.inst.onGameLoadingFinish(),window.loadingGame=!1,this.gameSceneLoaded=!this.gameSceneLoaded,this.node.active=!1}},t.prototype.nextTip=function(){u.NgcTipManager.inst.nextTip()},t.prototype.onSitelock=function(){return i(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e,t){cc.assetManager.loadBundle("Sitelock",function(o,n){if(o)return t(o);n.load("Prefab/NgcSitelockDialog",cc.Prefab,function(o,n){if(o)return t(o);var r=cc.instantiate(n);cc.find("Canvas").getComponent(cc.Canvas).node.addChild(r),e()})})})]})})},t.prototype.startupPlatform=function(){var e=this;return new Promise(function(t,o){g.NgcServicesMgr.preInit(p.NgcBuildConfig).then(function(){var n=g.NgcServicesMgr.initServices(p.NgcBuildConfig);n.then(function(o){console.log("Services Initialization finished: ",o),g.NgcServicesMgr.isInitialized=!0,b.default.totalRoundCount,S.Main.onPlatformInitCompleted(),e.startLoadResource(),t()}),n.catch(function(t){return i(e,void 0,void 0,function(){return s(this,function(){if(!h.NgcPlatform.isOfflineMode()){if(cc.error("Failed to startup platform services: ",t),t&&t.toString().includes(J.default.sitelockMsg))return this.onSitelock().catch(console.error),[2,o("Site locked!")];S.Main.onPlatformInitFailed(),t&&t.toString().includes("not match")&&k.UserInfo.resetPrivateData(),G.default.showNetworkDisconnect(),o()}return[2]})})})})})},t.prototype.startLoadResource=function(){this.loadedPercent=0,this.progressLoading.progress=0,this.loadedSubpackage=0,this.loadSubpackage()},t.prototype.preloadAllBasicDialogs=function(){[{type:_.NgcNoticeDialog.dialogType,url:_.NgcNoticeDialog.urlPrefab,bundle:_.NgcNoticeDialog.bundleName},{type:I.NgcNavBarConfirmDialog.dialogType,url:I.NgcNavBarConfirmDialog.urlPrefab,bundle:I.NgcNavBarConfirmDialog.bundleName},{type:I.NgcNavBarConfirmDialog.dialogType,url:I.NgcNavBarConfirmDialog.urlPrefab,bundle:I.NgcNavBarConfirmDialog.bundleName},{type:T.NgcNavBarLoginSocialDialog.dialogType,url:T.NgcNavBarLoginSocialDialog.urlPrefab,bundle:T.NgcNavBarLoginSocialDialog.bundleName},{type:D.NgcPartyRoomConfirmDialog.dialogType,url:D.NgcPartyRoomConfirmDialog.urlPrefab,bundle:D.NgcPartyRoomConfirmDialog.bundleName},{type:R.NgcPartyRoomNoticeDialog.dialogType,url:R.NgcPartyRoomNoticeDialog.urlPrefab,bundle:R.NgcPartyRoomNoticeDialog.bundleName},{type:C.NavBarConflicttDialog.dialogType,url:C.NavBarConflicttDialog.urlPrefab,bundle:C.NavBarConflicttDialog.bundleName},{type:O.NgcNavBarHowToPlayDialog.dialogType,url:O.NgcNavBarHowToPlayDialog.urlPrefab,bundle:O.NgcNavBarHowToPlayDialog.bundleName},{type:w.NgcNavBarEditNameDialog.dialogType,url:w.NgcNavBarEditNameDialog.urlPrefab,bundle:w.NgcNavBarEditNameDialog.bundleName},{type:P.NgcNavBarAboutDialog.dialogType,url:P.NgcNavBarAboutDialog.urlPrefab,bundle:P.NgcNavBarAboutDialog.bundleName},{type:E.NgcNavBarSettingsDialog.dialogType,url:E.NgcNavBarSettingsDialog.urlPrefab,bundle:E.NgcNavBarSettingsDialog.bundleName},{type:M.NgcNavBarShareDialog.dialogType,url:M.NgcNavBarShareDialog.urlPrefab,bundle:M.NgcNavBarShareDialog.bundleName},{type:K.NgcNavBarSelectLanguageDialog.dialogType,url:K.NgcNavBarSelectLanguageDialog.urlPrefab,bundle:K.NgcNavBarSelectLanguageDialog.bundleName},{type:"GameModeInfoDialog",url:"GameModeInfoDialog",bundle:F.NgcGameModeInfoDialog.bundleName},{type:"GameModeInfoExtendedDialog",url:"GameModeInfoExtendedDialog",bundle:F.NgcGameModeInfoDialog.bundleName},{type:"GameModeLockedInfoDialog",url:"GameModeLockedInfoDialog",bundle:F.NgcGameModeInfoDialog.bundleName},{type:W.default.dialogType,url:W.default.urlPrefab,bundle:W.default.bundleName},{type:A.NgcSpectatorManager.dialogType,url:A.NgcSpectatorManager.urlPrefab,bundle:A.NgcSpectatorManager.bundleName},{type:z.NgcCrownRoadProgressionDialog.dialogType,url:z.NgcCrownRoadProgressionDialog.urlPrefab,bundle:z.NgcCrownRoadProgressionDialog.bundleName},{type:Y.default.dialogType,url:Y.default.urlPrefab,bundle:Y.default.bundleName},{type:V.default.dialogType,url:V.default.urlPrefab,bundle:V.default.bundleName},{type:H.default.dialogType,url:H.default.urlPrefab,bundle:H.default.bundleName},{type:q.default.dialogType,url:q.default.urlPrefab,bundle:q.default.bundleName}].forEach(function(e){c.NgcDialogManager.loadDialogPrefab(e.type,e.url,e.bundle).catch(function(){cc.error("load dialog failed: "+e.type)})})},t.inst=null,a([Z(cc.Node)],t.prototype,"trackingNode",void 0),a([Z(cc.ProgressBar)],t.prototype,"progressLoading",void 0),a([Z(cc.Label)],t.prototype,"percentLb",void 0),a([Z(cc.Widget)],t.prototype,"logoWidget",void 0),a([Z(cc.SpriteFrame)],t.prototype,"noticeLogOutIconSF",void 0),a([Z(cc.SpriteFrame)],t.prototype,"noticeDisconnectIconSF",void 0),a([Z(cc.Node)],t.prototype,"dots",void 0),o=a([Q],t)}(cc.Component);o.default=$,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadProgressionDialog":"CrownRoadProgressionDialog","../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/ReviveDialog":"ReviveDialog","../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../NanoGameCore/CrossFeatures/GPDR/Script/NgcGDPR":"NgcGDPR","../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeInfoDialog":"GameModeInfoDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarAboutDialog":"NavBarAboutDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConfirmDialog":"NavBarConfirmDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarEditNameDialog":"NavBarEditNameDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarHowToPlayDialog":"NavBarHowToPlayDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarLoginSocialDialog":"NavBarLoginSocialDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSelectLanguageDialog":"NavBarSelectLanguageDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarSettingsDialog":"NavBarSettingsDialog","../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog":"NavBarShareDialog","../../NanoGameCore/CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog":"PartyRoomConfirmDialog","../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog":"PartyRoomNoticeDialog","../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog":"RealPrizeBuyTicketDialog","../../NanoGameCore/CrossFeatures/Redirection/Script/NgcRedirectionDialog":"NgcRedirectionDialog","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageSupportBrowser":"TechMessageSupportBrowser","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/CrossFeatures/Tips/Script/TipManager":"TipManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../NanoGameCore/Services/Platform/Platform":"Platform","../../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../Main":"Main","../Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../Screens/StartScreen/StartMain":"StartMain","../Tracking/TrackingManager":"TrackingManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],LocalizationDebugPanel:[function(e,t,o){"use strict";cc._RF.push(t,"73441fPH+dLfqLiRNePy89d","LocalizationDebugPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isShowTextKey=!1,t._currentLangIndex=0,t.showKeyCheckMark=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.onShowTextKey=function(){i.NgcLocalizedManager.isShowTextKey=this.showKeyCheckMark.isChecked},t.prototype.onNextLang=function(){cc.log("onNextLang")},t.prototype.onPrevLang=function(){cc.log("onPrevLang")},a([l(cc.Toggle)],t.prototype,"showKeyCheckMark",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LocalizedManager:[function(e,t,o){"use strict";cc._RF.push(t,"c829a7UEexHPbreFD0pnlXS","LocalizedManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLocalizedManager=void 0;var i=e("../../../../globals"),s=e("../BuildConfig"),c=e("../CONSTANTS"),l=e("../NgcLocalStorage"),u=e("../NgcUserInfo"),p=e("./LabelLocalized"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.languageConfig=null,t.ngcLocalizationText=null,t.gameLocalizationText=null,t.showDebugLoc=!1,t.debugPanel=null,t}var o;return r(t,e),o=t,Object.defineProperty(t,"isShowTextKey",{set:function(e){o._isShowTextKey!==e&&(o._isShowTextKey=e,this.updateLanguage())},enumerable:!1,configurable:!0}),t.prototype.getNativeLang=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getNativeLang","()V")},t.prototype.receivedNativeLang=function(e){console.log("SYSTEM_LANG: Get From native ",e),o.nativeLang=e,this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)},t.prototype.initGameLang=function(){var e=o.nativeLang||u.default.curLanguage;console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@curLang ",e);var t=!1;o.langList.forEach(function(n){n.enabled&&(n.code===e||n.extra_code&&-1!=n.extra_code.indexOf(e))&&(o.curLang=n.code,t=!0)}),t||(o.curLang=o.defaultLang)},t.prototype.onLoad=function(){o.defaultLang=s.NgcBuildConfig.defaultLanguage||c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,this.isAPK=!cc.sys.isBrowser&&cc.sys.os===cc.sys.OS_ANDROID,o.inst&&console.error("More than one NgcLocalizedManager instance"),o.inst=this,o.jsonData=this.languageConfig.json.language_list,o.langList=this.languageConfig.json.language_list,this.isAPK?this.getNativeLang():(this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)),this.showDebugLoc&&(cc.instantiate(this.debugPanel).parent=cc.find("Canvas"))},t.setLanguage=function(e){0===e.length||e==o.curLang&&!this.firstTimeInit||(this.firstTimeInit=!1,o.curLang=e,this.curLangDefaultFont=this.curData.default_font,l.default.setKey("GAME_LANGUAGE",e,!1),this.updateLanguage())},t.t=function(e){var t={key:e,text:""};if(this._isShowTextKey)return t.text=e,t;var n=o.tableText[e]||{},r=n[o.curLang]||n[this.defaultLang]||e;return r=r.replace(/\\n/gi,"\n"),t.text=r,t},t.getSpriteFrame=function(e){return this.polymorphic[e]},t.updateLanguage=function(){var e=[];this.labelLocalizeds.forEach(function(t){null!==t.node&&(e.push(t),t.textKey&&t.updateString())}),this.labelLocalizeds=e,this.spriteLocalizeds.forEach(function(e){e.spriteFrameKey&&(e.spriteFrameKey=e.spriteFrameKey)})},t.prototype.updateFromText=function(e){if(!e)return!1;for(var t=e.json,n=0,r=Object.entries(t);n<r.length;n++){var a=r[n],i=a[0],s=a[1];o.tableText[i]=s}},t.setTextKey=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);var r=e.node.getComponent(p.NgcLabelLocalized);r&&(r.textKey=t,n&&Array.isArray(n)&&r.setExtraComponents(n),o&&Array.isArray(o)&&r.setExtraParams(o),r.updateString())},t.curLang=c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.defaultLang=c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.polymorphic={},t.jsonData=[],t.langList=[],t.curData={},t.curLangDefaultFont=null,t.tableText={},t.nativeLang="",t.inst=null,t._isShowTextKey=!1,t.firstTimeInit=!0,t.labelLocalizeds=[],t.spriteLocalizeds=[],a([h(cc.JsonAsset)],t.prototype,"languageConfig",void 0),a([h(cc.JsonAsset)],t.prototype,"ngcLocalizationText",void 0),a([h(cc.JsonAsset)],t.prototype,"gameLocalizationText",void 0),a([h],t.prototype,"showDebugLoc",void 0),a([h(cc.Prefab)],t.prototype,"debugPanel",void 0),o=a([f],t)}(cc.Component);o.NgcLocalizedManager=g,i.default.NgcLocalizedManager=g,cc._RF.pop()},{"../../../../globals":"globals","../BuildConfig":"BuildConfig","../CONSTANTS":"CONSTANTS","../NgcLocalStorage":"NgcLocalStorage","../NgcUserInfo":"NgcUserInfo","./LabelLocalized":"LabelLocalized"}],LocalizedRichText:[function(e,t,o){"use strict";cc._RF.push(t,"73b89Fk4ENCgLWoqUUiJwBX","LocalizedRichText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameFramework/Scripts/Localized/LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=function(){function e(){this.extraIdentifier="",this.extraParam="",this.extraKey="",this.color=null,this.fontSize=0,this.bold=!1,this.italic=!1,this.underlined=!1,this.img=""}return a([l(cc.String)],e.prototype,"extraIdentifier",void 0),a([l(cc.String)],e.prototype,"extraParam",void 0),a([l(cc.String)],e.prototype,"extraKey",void 0),a([l(cc.Color)],e.prototype,"color",void 0),a([l(cc.Integer)],e.prototype,"fontSize",void 0),a([l(cc.Boolean)],e.prototype,"bold",void 0),a([l(cc.Boolean)],e.prototype,"italic",void 0),a([l(cc.Boolean)],e.prototype,"underlined",void 0),a([l(cc.String)],e.prototype,"img",void 0),a([c("RichTextCustomStlyeParam")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamStyles=[],t}return r(t,e),t.prototype.onLoad=function(){i.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.applyExtraParams=function(){var e=this;this.extraParamStyles&&this.extraParamStyles.forEach(function(t){var o=t.extraIdentifier,n=i.NgcLocalizedManager.t(t.extraKey).text||t.extraParam||"";n&&t&&(t.color&&(n="<color=#"+t.color.toHEX("#rrggbb")+">"+n+"</color>"),t.bold&&(n="<b>"+n+"</b>"),t.italic&&(n="<i>"+n+"</i>"),t.underlined&&(n="<u>"+n+"</u>"),t.fontSize&&(n="<size="+t.fontSize+">"+n+"</size>"),t.img&&(n="<img='"+t.img+"'>"+n+"</img>"),e.string=e.string.replace(o,n))})},t.prototype.updateString=function(){if(this.textKey){var e=i.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams())}},t.prototype.setLocalizedText=function(e,t){this.textKey=e,this.extraParamStyles=t,this.updateString()},a([l],t.prototype,"textKey",void 0),a([l({type:[p]})],t.prototype,"extraParamStyles",void 0),a([c,u("NGC/LocalizedRichText")],t)}(cc.RichText);o.default=d,cc._RF.pop()},{"../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"09d31zgRCBOGr2GG+VEcOFs","Main");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Main=o.DeviceType=o.ScreenOrientation=void 0;var c,l=e("../NanoGameCore/Core/Utils"),u=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),p=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),d=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),f=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),h=e("../NanoGameCore/GameFramework/Scripts/ProfanityCheck"),g=e("../NanoGameCore/SDK/Nano/NanoSrv"),m=e("../NanoGameCore/Services/ServicesMgr"),y=e("./ScreenManager"),_=e("./Screens/StartScreen/StartMain"),v=e("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),S=e("../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),b=e("./UserInfo"),N=e("../NanoGameCore/SDK/SDK"),P=e("../NanoGameCore/Services/Social/Social"),I=e("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),C=e("../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),w=e("../NanoGameCore/Services/Inventory/Inventory"),O=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),T=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),E=e("../NanoGameCore/Services/DailyReward/DailyReward"),M=e("../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),D=e("./LoadingScene/LoadingScene"),R=e("./Player/PlayerSkinMgr"),B=e("./Game"),A=e("./Utils/ConstConfig"),k=e("../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),L=e("./Dialog/AdsCoolDownMessage/AdsCoolDownMessage"),G=e("./UI/FullScreenButton"),F=e("./Screens/RouletteScreen/RouletteScreen"),j=e("./Player/PlayerController"),U=e("../NanoGameCore/Core/Delegate"),x=e("./Network/ImprovedNetClient"),H=e("../NanoGameCore/Services/Platform/Platform"),V=cc._decorator,z=V.ccclass,W=V.property;(function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"})(c=o.ScreenOrientation||(o.ScreenOrientation={})),o.DeviceType={MOBILE:"Mobile",PC:"PC"};var K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCanvas=null,t.mainCamera=null,t.debugTextLabel=null,t.countdownScreen=null,t.devLocalPlayerInvincible=!1,t.debugFreezePlayer=!1,t.debugBtn=null,t.debugSplashNode=null,t.previewLocalizedManagerNode=null,t.fullScreenButton=null,t.timeSinceLoad=0,t.timeInCurrentState=0,t.platformGameID="",t.buildVersion="",t.inBackground=!1,t.frameCounter=0,t.debugDisplayEnabled=!1,t.intervalMainLoop=null,t.configInfo={},t.onAppVisibleDelegate=new U.default,t.onAppHiddendDelegate=new U.default,t._needFullScreen=!0,t.didStartScreen=!1,t.localUserSkin="naked",t.hasDoneStartScreen=!1,t._listDisplayHeroes=[],t}var n;return r(t,e),n=t,t.prototype.onClaimBooster=function(){b.UserInfo.updateInventoryWithPlatform()},t.prototype.getWorldPosOfMainCharacter=function(){return _.default.inst.boosterStatusUI.convertToWorldSpaceAR(cc.v2(10,-40))},t.prototype.reload=function(){console.log("Main::reload()"),this.reset()},t.prototype.IsInGame=function(){return this.appState==d.AppState.Game},t.prototype.getLocalPlayer=function(){return j.PlayerController.localPlayer||null},t.prototype.getLocalPlayerNode=function(){var e=j.PlayerController.localPlayer;return e?e.node:null},t.prototype.userChangedName=function(e){return i(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return[4,h.NgcProfanityCheck.check(e.string)];case 1:return n.sent().status?[3,3]:(e.string="",[4,v.NgcDialogManager.createDialog(S.NgcMessageDialog.dialogType,S.NgcMessageDialog.urlPrefab,S.NgcMessageDialog.bundleName)]);case 2:return t=n.sent(),(o=t.getComponent(S.NgcMessageDialog)).init("PROFANITY_NAME_NOTICE"),o.show(null,e.node,null,null),[2];case 3:return O.default.localUserName=e.string,this.updateNameToNanosrv(),[2]}})})},t.prototype.updateNameToNanosrv=function(){var e=this;if(!u.NgcBuildConfig.offlineMode){var t="";p.NgcCountryFlagsManager.localCountry&&(t=p.NgcCountryFlagsManager.localCountry);var n=function(){console.log("### country = "+t);var n="/profile/"+g.default.inst.userID,r={name:e.localUserName,devicetype:cc.sys.isMobile?o.DeviceType.MOBILE:o.DeviceType.PC,country:t};g.default.inst.servicePost(n,JSON.stringify(r),function(e){e||console.log("Update info success")})};t?n():p.NgcCountryFlagsManager.callBack=function(){t=p.NgcCountryFlagsManager.localCountry,n()}}_.default.inst&&_.default.inst.updateNameBox()},t.prototype.updateUserConflictInfo=function(e,t){return i(this,void 0,void 0,function(){var o,n,r,a,i,c,l;return s(this,function(){return e.lbScore.string=""+b.UserInfo.curCrown,e.coins.string=""+b.UserInfo.curCoin,o=N.NgcSDK.getCurTime(),n=new Date(o),e.time.string=n.getUTCDate()+"/"+(n.getUTCMonth()+1)+"/"+n.getUTCFullYear()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds(),(r=P.NgcSocial.inst.getConflictedData()).hasOwnProperty("playerData")?((a=r.playerData).hasOwnProperty("modified")&&(i=parseInt(a.modified),c=new Date(i),t.time.string=c.getUTCDate()+"/"+(c.getUTCMonth()+1)+"/"+c.getUTCFullYear()+" "+c.getUTCHours()+":"+c.getUTCMinutes()+":"+c.getUTCSeconds()),a.hasOwnProperty("inventory")&&((l=a.inventory).hasOwnProperty(A.ConstConfig.INVENTORY.ITEM_ID.COIN)&&(t.coins.string=l.coin.count),l.hasOwnProperty(A.ConstConfig.INVENTORY.ITEM_ID.CROWN)&&(t.lbScore.string=l.crown.count))):console.log("[ConflictDialog] `updateUserConflictInfo` - 'playerData' property NOT FOUND"),[2]})})},t.prototype.createFakeName=function(){return O.default.localUserName="Guest"+f.NgcNetUtils.RandomRange(1,9999,!0).toString(),m.NgcServicesMgr.isInitialized&&this.updateNameToNanosrv(),I.NgcNavBarManager.inst&&I.NgcNavBarManager.inst.setNavBarInfo(),_.default.inst&&(_.default.inst.playerName.string=O.default.localUserName),O.default.localUserName},t.prototype.userNameIsValid=function(){var e=!0;return""!=O.default.localUserName&&O.default.localUserName||(e=!1),e},t.prototype.getTimeSinceLoad=function(){return this.timeSinceLoad},t.prototype.onLoad=function(){console.log("Main::onLoad()"),n.inst=this,e.prototype.onLoad.call(this),O.default.totalSessions++,this.configInfo=u.NgcBuildConfig,this.platformGameID=u.NgcBuildConfig.platformGameID,this.buildVersion=u.NgcBuildConfig.buildVersionName},t.prototype.onAppVisible=function(){this.inBackground=!1,this.onAppVisibleDelegate.call()},t.prototype.onAppHidden=function(){this.inBackground=!0,this.onAppHiddendDelegate.call()},t.prototype.registerEventHandlers=function(){var e=this;document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState?e.onAppVisible():"hidden"==document.visibilityState&&e.onAppHidden(),console.log("Vis change: "+document.visibilityState)}),this.node.on(cc.Node.EventType.TOUCH_START,function(e){y.default.inst.node.emit("tapDown",e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){y.default.inst.node.emit("tapUp",e)},this)},t.prototype.isRelease=function(){return!1},t.prototype.enableDebugDisplay=function(e){this.debugDisplayEnabled=e},t.prototype.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t.prototype.setDebugText=function(e){this.debugTextLabel&&(this.debugTextLabel.string=e)},t.prototype.start=function(){this.registerEventHandlers(),this.setState(d.AppState.InitSettle)},t.prototype.workState_InitSettle=function(){this.timeInCurrentState>.15&&(H.NgcPlatform.isOfflineMode()||x.default.inst.isConnected()||x.default.inst.startConnectionCycle(),I.NgcNavBarManager.inst.setUpdateConflictInfoCallBack(this.updateUserConflictInfo.bind(this)),b.UserInfo.alreadyFTUE||!m.NgcServicesMgr.isInitialized?this.setState(d.AppState.StartScreen):(F.default.setState(F.E_ROULETTE_STATE.Roulette),this.setState(d.AppState.Roulette)))},t.prototype.setState=function(e){if(e!=this.appState){switch(this.appState,this.appState=e,e){case d.AppState.StartScreen:y.default.inst.goToStartScreen();break;case d.AppState.Game:!cc.screen.fullScreen()&&this._needFullScreen&&this.fullScreenButton.onClick(),b.UserInfo.isFirstTimeClicked&&(this._needFullScreen=!1),y.default.inst.goToGameScreen();break;case d.AppState.Roulette:y.default.inst.goToRouttleScreen();break;case d.AppState.PartyScreen:y.default.inst.goToPartyScreen();break;case d.AppState.Leaderboard:y.default.inst.goToLeaderBoardScreen()}this.timeInCurrentState=0}},t.prototype.update=function(e){switch(this.timeSinceLoad+=e,this.timeInCurrentState+=e,this.frameCounter++,this.appState){case d.AppState.InitSettle:this.workState_InitSettle(e)}},t.getScreenOrientation=function(){return cc.winSize.width<cc.winSize.height?c.Portrait:c.Landscape},t.prototype.resolveSocialConflict=function(e){console.log("Overrided for NgcMain"),b.UserInfo.resolveConflict(e)},t.prototype.updateUserInfo=function(){return i(this,void 0,void 0,function(){return s(this,function(){return console.log("Overrided for NgcMain"),b.UserInfo.updateInventoryWithPlatform(),[2]})})},t.prototype.showControlDialog=function(){throw new Error("Method not implemented.")},t.prototype.getBestScore=function(){throw new Error("Method not implemented.")},t.prototype.setBestScore=function(){throw new Error("Method not implemented.")},t.onPlatformInitCompleted=function(){return i(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e){g.default.setAccessTokenOutOfDateCallback(n.displayLogoutNoticeDialog),T.default.inst=new k.default,n.setOnSocialLogoutSuccessCallback(n.resetData),P.NgcSocial.srvInstances.forEach(function(e){return e.setOnLoginSuccesCallback(n.invokeSocialLoginSuccessCallback)}),P.NgcSocial.srvInstances.forEach(function(e){return e.setOnLogoutSuccesCallback(n.invokeSocialLogoutSuccessCallback)});var t=new Promise(function(e){E.NgcDailyReward.inst.onLogin(function(t){t&&cc.error("Login DailyReward err: ",t),e()})}),o=[];o.push(t),Promise.all(o).finally(function(){e()})})]})})},t.onPlatformInitFailed=function(){},t.setOnSocialCallBack=function(e){n._onSocialCallBack.add(e)},t.invokeOnSocialCallBack=function(e,t){n._onSocialCallBack.call(e,t)},t.setOnSocialLoginSuccessCallback=function(e){n._onLoginSocialSuccessCallbackArr.push(e)},t.invokeSocialLoginSuccessCallback=function(){n._onLoginSocialSuccessCallbackArr.forEach(function(e){return e()})},t.setOnSocialLogoutSuccessCallback=function(e){n._onLogoutSocialSuccessCallbackArr.push(e)},t.invokeSocialLogoutSuccessCallback=function(){n._onLogoutSocialSuccessCallbackArr.forEach(function(e){return e()})},t.prototype.resumeGameLogic=function(){},t.prototype.pauseGameLogic=function(){},t.resetData=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),b.UserInfo.resetPrivateData(),_.default.inst&&_.default.inst.updateNameBox(),b.UserInfo.isHardResetData=t,w.NgcInventory.inst.forceFetchInventory(),_.default.inst&&_.default.inst.playerAnim.setSkinByName(R.default.inst.getCurHero()),e&&e()},t.displayLogoutNoticeDialog=function(){var e;return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return console.log("displayLogoutNoticeDialog"),[4,v.NgcDialogManager.createDialog(M.NgcNoticeDialog.dialogType,M.NgcNoticeDialog.urlPrefab,M.NgcNoticeDialog.bundleName)];case 1:return t.sent().getComponent(M.NgcNoticeDialog).init(C.NgcLocalizedManager.t("NTM_ERROR").text,C.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){l.Utils.reloadPage()},null===(e=D.default.inst)||void 0===e?void 0:e.noticeLogOutIconSF),[2]}})})},t.prototype._reset=function(){B.default.inst.goBackMainMenu()},t.prototype.showAdsCoolDownMessage=function(e,t){return void 0===t&&(t=0),i(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,v.NgcDialogManager.createDialog(L.default.dialogType,L.default.urlPrefab,L.default.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(L.default)).init("ADS_COOLDOWN"),C.NgcLocalizedManager.setTextKey(n.labelLocalized,"ADS_COOLDOWN",[t]),n.show(null,e,null,null),[2,n]}})})},t.prototype.showNotEnoughCoinMessage=function(e){return i(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return[4,v.NgcDialogManager.createDialog(S.NgcMessageDialog.dialogType,S.NgcMessageDialog.urlPrefab,S.NgcMessageDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(S.NgcMessageDialog)).labelLocalized.setLocalizedText("ASB_NOT_ENOUGH_GOLD"),o.show(null,e,null,null),[2,o]}})})},t.prototype.uploadBestScore=function(){cc.log("Method not implemented.")},Object.defineProperty(t.prototype,"listDisplayHeroes",{get:function(){if(0===this._listDisplayHeroes.length){var e=[A.ConstConfig.INVENTORY.ITEM_ID.RAYMAN,A.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,A.ConstConfig.INVENTORY.ITEM_ID.APOLLYON,A.ConstConfig.INVENTORY.ITEM_ID.KNOX,A.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,A.ConstConfig.INVENTORY.ITEM_ID.ANTON];this._listDisplayHeroes=R.default.listHeroes.filter(function(t){return!e.includes(t)})}return this._listDisplayHeroes},enumerable:!1,configurable:!0}),t.inst=null,t._onSocialCallBack=new U.default,t._onLoginSocialSuccessCallbackArr=[],t._onLogoutSocialSuccessCallbackArr=[],a([W(cc.Canvas)],t.prototype,"mainCanvas",void 0),a([W(cc.Camera)],t.prototype,"mainCamera",void 0),a([W(cc.Label)],t.prototype,"debugTextLabel",void 0),a([W(cc.Node)],t.prototype,"countdownScreen",void 0),a([W],t.prototype,"devLocalPlayerInvincible",void 0),a([W],t.prototype,"debugFreezePlayer",void 0),a([W(cc.Button)],t.prototype,"debugBtn",void 0),a([W(cc.Node)],t.prototype,"debugSplashNode",void 0),a([W(cc.Node)],t.prototype,"previewLocalizedManagerNode",void 0),a([W(G.default)],t.prototype,"fullScreenButton",void 0),n=a([z],t)}(d.NgcMain);o.Main=K,cc._RF.pop()},{"../NanoGameCore/Core/Delegate":"Delegate","../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/SDK/SDK":"SDK","../NanoGameCore/Services/DailyReward/DailyReward":"DailyReward","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../NanoGameCore/Services/Social/Social":"Social","./Dialog/AdsCoolDownMessage/AdsCoolDownMessage":"AdsCoolDownMessage","./Game":"Game","./LoadingScene/LoadingScene":"LoadingScene","./Network/ImprovedNetClient":"ImprovedNetClient","./Player/PlayerController":"PlayerController","./Player/PlayerSkinMgr":"PlayerSkinMgr","./ScreenManager":"ScreenManager","./Screens/RouletteScreen/RouletteScreen":"RouletteScreen","./Screens/StartScreen/StartMain":"StartMain","./UI/FullScreenButton":"FullScreenButton","./UserInfo":"UserInfo","./Utils/ConstConfig":"ConstConfig"}],MapGenerator:[function(e,t,o){"use strict";cc._RF.push(t,"37640LJS1pESZ1n6+kB2Ho5","MapGenerator");var n,r,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_MapItemIDs=void 0,function(e){e[e.EmptyTile=0]="EmptyTile",e[e.HardBlock=1]="HardBlock",e[e.PlayerPlacement=2]="PlayerPlacement",e[e.AbsoluteEmptyTile=3]="AbsoluteEmptyTile",e[e.BorderTile=4]="BorderTile"}(r=o.E_MapItemIDs||(o.E_MapItemIDs={}));var s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return a(t,e),o=t,t.prototype.start=function(){o.inst=this},t.createMap=function(e,t,o,n,a){var i=(n-1)*(t+1)+1,s=Math.ceil(t/2);s%2!=0&&(s+=1),i+=s;var c=(Math.ceil(e/n)-1)*(o+1)+1;i+=4-(i-1)%4,c+=4-(c-1)%4;for(var l=[],u=0;u<c;u++){for(var p=[],d=0;d<i;d++)p.push(r.EmptyTile);l.push(p)}return this.addBorder(l),this.updatePlayerPlacement(l,t,o),a&&this.updateHardBlock(l),this.updateAbsoluteEmptyTiles(l),l},t.updatePlayerPlacement=function(e,t,n){var a=!1,i=Math.ceil(t/2);i%2!=0&&(i+=1);for(var s=o.BORDER_EDGE_LAYER_NUMBER;s<e.length-o.BORDER_EDGE_LAYER_NUMBER;s++)if(s%(n+1)==0){for(var c=o.BORDER_EDGE_LAYER_NUMBER;c<e[s].length-o.BORDER_EDGE_LAYER_NUMBER;c++)a?c+i<e[s].length-o.BORDER_EDGE_LAYER_NUMBER&&(c-i)%(t+1)==0&&(e[s][c]=r.PlayerPlacement):c%(t+1)==0&&e[s][c]!==r.BorderTile&&(e[s][c]=r.PlayerPlacement);a=!a}},t.updateHardBlock=function(e){for(var t=o.BORDER_EDGE_LAYER_NUMBER;t<e.length-o.BORDER_EDGE_LAYER_NUMBER;t++)for(var n=o.BORDER_EDGE_LAYER_NUMBER;n<e[t].length-o.BORDER_EDGE_LAYER_NUMBER;n++)t%2==1&&n%2==1&&(e[t][n]=r.HardBlock)},t.updateAbsoluteEmptyTiles=function(e){for(var t=o.BORDER_EDGE_LAYER_NUMBER;t<e.length-o.BORDER_EDGE_LAYER_NUMBER;t++)for(var n=o.BORDER_EDGE_LAYER_NUMBER;n<e[t].length-o.BORDER_EDGE_LAYER_NUMBER;n++)e[t][n]==r.PlayerPlacement&&(n>=1&&e[t][n-1]==r.EmptyTile&&(e[t][n-1]=r.AbsoluteEmptyTile),n<e[t].length-1&&e[t][n+1]==r.EmptyTile&&(e[t][n+1]=r.AbsoluteEmptyTile),t>=1&&e[t-1][n]==r.EmptyTile&&(e[t-1][n]=r.AbsoluteEmptyTile),t<e.length-1&&e[t+1][n]==r.EmptyTile&&(e[t+1][n]=r.AbsoluteEmptyTile))},t.addBorder=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<o.BORDER_EDGE_LAYER_NUMBER;n++)e[t].push(r.BorderTile),e[t].unshift(r.BorderTile);for(var a=[],i=[],s=0;s<e[0].length;s++)a.push(r.BorderTile),i.push(r.BorderTile);for(var c=0;c<o.BORDER_EDGE_LAYER_NUMBER;c++)e.unshift(a),e.push(i)},t.inst=null,t.BORDER_EDGE_LAYER_NUMBER=4,o=i([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],MapInfo:[function(e,t,o){"use strict";cc._RF.push(t,"176cfnKN+9M24Gt7J28vnVN","MapInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameObjects/GameObjectBase"),s=e("./MapGenerator"),c=e("./MapManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numRow=30,t.numColumn=30,t._board=null,t.boardMixed=null,t.sizeOfTile=cc.v2(100,100),t.playerPlacements=[],t}var o;return r(t,e),o=t,t.prototype.initMap=function(e){void 0===e&&(e=[[]]),this.numRow=e.length,this.numColumn=e[0].length,this._board=[];for(var t=0;t<this.numColumn;t++)for(var n=this.numRow-1;n>=0;n--)switch(e[n][t]){case s.E_MapItemIDs.EmptyTile:this._board.push(c.default.randomNumberGenerator.randomUnit()>o.SOFT_BLOCK_DENSITY?i.GameObjectType.Block_Soft:i.GameObjectType.Empty);break;case s.E_MapItemIDs.HardBlock:this._board.push(i.GameObjectType.Block_Hard);break;case s.E_MapItemIDs.PlayerPlacement:this._board.push(i.GameObjectType.Empty),this.playerPlacements.push(cc.v2(t,this.numRow-1-n));break;case s.E_MapItemIDs.AbsoluteEmptyTile:this._board.push(i.GameObjectType.Empty);break;case s.E_MapItemIDs.BorderTile:this._board.push(i.GameObjectType.Block_Border)}this.boardMixed=this._board.slice()},t.prototype.toArrayIndex=function(e,t){return e*this.numRow+t},t.prototype.isValidPos=function(e,t){return 0<=e&&e<this.numColumn&&0<=t&&t<this.numRow},t.prototype.getBoard=function(e,t){if(this.isValidPos(e,t)&&this._board)return this._board[this.toArrayIndex(e,t)]},t.prototype.setBoard=function(e,t,o){this.isValidPos(e,t)?(this._board||cc.error("setBoard before the board init"),this._board[this.toArrayIndex(e,t)]=o):cc.error("setBoard for invalid pos ["+e+"]["+t+"]")},t.prototype.getMixedBoard=function(e,t){if(this.isValidPos(e,t)&&this.boardMixed)return this.boardMixed[this.toArrayIndex(e,t)]},t.prototype.setMixedBoard=function(e,t,o){this.isValidPos(e,t)?(this.boardMixed||cc.error("setMixedBoard before the board init"),this.boardMixed[this.toArrayIndex(e,t)]=o):cc.error("setMixedBoard for invalid pos ["+e+"]["+t+"]")},t.SOFT_BLOCK_DENSITY=.4,o=a([u],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../GameObjects/GameObjectBase":"GameObjectBase","./MapGenerator":"MapGenerator","./MapManager":"MapManager"}],MapIntroduction:[function(e,t,o){"use strict";cc._RF.push(t,"56c75dcliVPWazwl4pXhQQW","MapIntroduction");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Maps/ThemeManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.introAnim=null,t.gameBannerBackground=null,t.gameBannerSprite=null,t.welcomeNode=null,t.spriteFrameAC2=null,t.spriteFrameFC3=null,t.spriteFrameHeroes=null,t.spriteFrameJD=null,t.spriteFrameWDL=null,t._onMapIntroductionAnimFinish=null,t._gameBannerBackgroundHeightOrigin=0,t._welcomePosOrigin=cc.v2(0,0),t.JD_BG_HEIGHT_OFFSET=520,t.JD_WELCOME_POS_OFFSET=cc.v2(-12,100),t}return r(t,e),t.prototype.onLoad=function(){this._gameBannerBackgroundHeightOrigin=this.gameBannerBackground.node.height,this._welcomePosOrigin=this.welcomeNode.getPosition(),this.introAnim.on(cc.Animation.EventType.FINISHED,this.onMapIntroductionAnimFinish,this)},t.prototype.start=function(){},t.prototype.updateGameBanner=function(e){switch(this.gameBannerBackground.node.active=!0,this.gameBannerBackground.node.height=this._gameBannerBackgroundHeightOrigin,this.welcomeNode.setPosition(this._welcomePosOrigin),e){case i.E_THEME_TYPE.AC2:this.gameBannerBackground.node.color=cc.Color.BLACK,this.gameBannerSprite.spriteFrame=this.spriteFrameAC2;break;case i.E_THEME_TYPE.FC3:this.gameBannerBackground.node.active=!1,this.gameBannerSprite.spriteFrame=this.spriteFrameFC3;break;case i.E_THEME_TYPE.Heroes:this.gameBannerBackground.node.color=cc.color().fromHEX("#ff8a00"),this.gameBannerSprite.spriteFrame=this.spriteFrameHeroes;break;case i.E_THEME_TYPE.JD:this.gameBannerBackground.node.color=cc.color().fromHEX("ff0278"),this.gameBannerSprite.spriteFrame=this.spriteFrameJD,this.gameBannerBackground.node.height=this.JD_BG_HEIGHT_OFFSET,this.welcomeNode.setPosition(this.JD_WELCOME_POS_OFFSET);break;case i.E_THEME_TYPE.WDL:this.gameBannerBackground.node.color=cc.color().fromHEX("#050066"),this.gameBannerSprite.spriteFrame=this.spriteFrameWDL}},t.prototype.onMapIntroductionAnimFinish=function(){this._onMapIntroductionAnimFinish&&this._onMapIntroductionAnimFinish()},t.prototype.setOnMapIntroductionAnimFinish=function(e){this._onMapIntroductionAnimFinish=e},a([l(cc.Animation)],t.prototype,"introAnim",void 0),a([l(cc.Sprite)],t.prototype,"gameBannerBackground",void 0),a([l(cc.Sprite)],t.prototype,"gameBannerSprite",void 0),a([l(cc.Node)],t.prototype,"welcomeNode",void 0),a([l(cc.SpriteFrame)],t.prototype,"spriteFrameAC2",void 0),a([l(cc.SpriteFrame)],t.prototype,"spriteFrameFC3",void 0),a([l(cc.SpriteFrame)],t.prototype,"spriteFrameHeroes",void 0),a([l(cc.SpriteFrame)],t.prototype,"spriteFrameJD",void 0),a([l(cc.SpriteFrame)],t.prototype,"spriteFrameWDL",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Maps/ThemeManager":"ThemeManager"}],MapManager:[function(e,t,o){"use strict";cc._RF.push(t,"8398fv21TxKdJ6FE0V4prTq","MapManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../FakeRandomNumberGenerator"),s=e("../Game"),c=e("../GameCamera"),l=e("../GameObjects/Block"),u=e("../GameObjects/Bomb"),p=e("../GameObjects/Floor"),d=e("../GameObjects/GameObjectBase"),f=e("../GameObjects/PowerUpItem"),h=e("../Player/PlayerController"),g=e("../UI/GameUI/GameUI"),m=e("./AStar_UASB"),y=e("./MapGenerator"),_=e("./MapInfo"),v=e("./MapShrinkingAnim"),S=e("./ThemeManager"),b=e("../SoundManager"),N=e("../Utils/ConstConfig"),P=e("../Tracking/TrackingManager"),I=e("../Network/ImprovedNetClient"),C=e("../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderVfxHandler"),w=e("../FakeNames"),O=e("../../NanoGameCore/Services/Platform/Platform"),T=e("../GameObjects/GameObjMgr"),E=e("../Dialog/MatchLoadingDialog/MatchLoadingDialog"),M=cc._decorator,D=M.ccclass,R=M.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FloorNode=null,t.ObjectsNode=null,t.PlayersNode=null,t.EffectNode=null,t.GradientMappingEffect=null,t.BombsNode=null,t.SmokeNode=null,t.UINode=null,t.ArrowDirectionNode=null,t.ArrowIcon=null,t.PlayerEffectNode=null,t.playerWinVFX=null,t.mapShrinkingAnim=null,t.centreCompassPrefab=null,t.playerStunAnimPrefab=null,t.playerNotReviveAnimPrefab=null,t.punkRiderVfxPrefab=null,t.centerPosInWorld=null,t.mapInfo=null,t.pathFinder=null,t.objectTiles=[[]],t.mapBoardComponents=[],t.floors=[],t.softBlock=[],t.hardBlock=[],t.borderBlocks=[],t.onMapCreatedCB=null,t._isInitializingStarted=!1,t._isCreated=!1,t._curMapInitStep=-1,t.rowEdgeIndex=0,t.colEdgeIndex=0,t._timePerRound=0,t.isOffTopBlock=!1,t.isOffHardBlock=!1,t.isOffFloor=!1,t}var o;return r(t,e),o=t,t.posFromUint32=function(e){return cc.v2(e>>>8,255&e)},t.posToUnit32=function(e,t){return e<<8|t},t.worldPosFromUint32=function(e){return cc.v2(e>>>16,65535&e)},t.worldPosToUint32=function(e,t){return e<<16|t},Object.defineProperty(t.prototype,"isCreated",{get:function(){return this._isCreated},set:function(e){this._isCreated=e,e?(this.onMapCreatedCB&&this.onMapCreatedCB(),this.scheduleOnce(function(){c.default.inst.firstOffScreenObjects()},.1)):this.onMapCreatedCB=null},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst?console.error("More than one MapManager instance"):o.inst=this},t.prototype.onRequestCreatedMap=function(){var e=this,t=function(){console.log("Final showdown varaibles: "+s.default.FINAL_SHOWDOWN_TILES+" + "+s.default.FINAL_SHOWDOWN_DURATION),I.default.inst.provideGameMap(s.default.inst.gameNetID,e.mapInfo.boardMixed,o.posToUnit32(e.mapInfo.numColumn,e.mapInfo.numRow),s.default.FINAL_SHOWDOWN_TILES,s.default.MATCH_DURATION,s.default.EXTRA_DURATION,s.default.FINAL_SHOWDOWN_DURATION,u.default.BOMB_TIMER)};this.isCreated?t():this.onMapCreatedCB=t},t.prototype.initMap=function(e,t,n){var r,a;if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),!this._isInitializingStarted){this._isInitializingStarted=!0;var c=!e||e.length<=0||e[0].length<=0;if(O.NgcPlatform.isOfflineMode()?o.randomNumberGenerator=new i.default(w.default.inst.allocRandomPerson().name):o.randomNumberGenerator=new i.default(s.default.inst.gameNetID),S.default.inst.curThemeType=t||o.randomNumberGenerator.randromIntRange(0,S.default.inst.getTotalThemes()),null===(a=null===(r=g.default.inst)||void 0===r?void 0:r.mapIntro)||void 0===a||a.updateGameBanner(S.default.inst.curThemeType),this.mapInfo=new _.default,c){var l=y.default.createMap(o.NUM_PLAYER,o.PLAYER_DISTANCE_X,o.PLAYER_DISTANCE_Y,o.MAX_PLAYER_X,o.HAS_HARD_BLOCK);this.mapInfo.initMap(l)}else cc.warn("Not apply map here");this.pathFinder=new m.AStar_UASB(this.mapInfo.numColumn,this.mapInfo.numRow),this.initFloor(),this._curMapInitStep=0}},t.prototype.updateInitMap=function(){-1!==this._curMapInitStep&&(this._curMapInitStep<this.mapInfo.numColumn-1?this._smoothInitObjects(this._curMapInitStep++):(this._curMapInitStep=-1,O.NgcPlatform.isOfflineMode()&&(s.default.inst.timeStartGame=Date.now()+1e4),this.setMinAndMaxPosOfGameCam(),this.initCentreCompass(),this.isCreated=!0,c.default.inst.centerOnMap(),E.default.hide(),g.default.inst.playIntroAnim(function(){c.default.inst.playIntroAnim()})))},t.prototype.setMinAndMaxPosOfGameCam=function(){var e=cc.v2(0,0),t=cc.v2(this.mapInfo.numColumn*this.mapInfo.sizeOfTile.x,this.mapInfo.numRow*this.mapInfo.sizeOfTile.y),o=this.mapInfo.sizeOfTile;e.y+=o.y/2,t.x-=o.x,t.y-=o.y/2,c.default.inst.updateMinAndMaxPosition(e,t)},t.prototype.initFloor=function(){p.default.instantiate().init(this.FloorNode,-this.mapInfo.sizeOfTile.x/2,-this.mapInfo.sizeOfTile.y/2,this.mapInfo.numColumn*this.mapInfo.sizeOfTile.x,this.mapInfo.numRow*this.mapInfo.sizeOfTile.y)},t.prototype.initCentreCompass=function(){var e=cc.instantiate(this.centreCompassPrefab);e.parent=this.FloorNode;var t=cc.v2(Math.floor(this.mapInfo.numColumn/2),Math.floor(this.mapInfo.numRow/2));this.centerPosInWorld=cc.v2(t.x*this.mapInfo.sizeOfTile.x,t.y*this.mapInfo.sizeOfTile.y),e.setPosition(this.centerPosInWorld);var n=o.inst.getMapBoardComponentsByPosInMap(t);for(this.setBoard(t.x,t.y,d.GameObjectType.Empty);n.length>0;)n.shift().release();var r=o.inst.getMapBoardComponentsByPosInMap(cc.v2(t.x,t.y-1));for(this.setBoard(t.x,t.y-1,d.GameObjectType.Empty);r.length>0;)r.shift().release();var a=o.inst.getMapBoardComponentsByPosInMap(cc.v2(t.x+1,t.y));for(this.setBoard(t.x+1,t.y,d.GameObjectType.Empty);a.length>0;)a.shift().release()},t.prototype.initObjects=function(e){this.objectTiles=[],this.mapBoardComponents=[];for(var t=0;t<this.mapInfo.numColumn;t++){for(var o=[],n=[],r=0;r<this.mapInfo.numRow;r++)o.push(new cc.Node),n.push([]);this.objectTiles.push(o),this.mapBoardComponents.push(n)}for(t=this.mapInfo.numColumn-1;t>=0;t--)for(r=this.mapInfo.numRow-1;r>=0;r--)this.objectTiles[t][r].parent=this.ObjectsNode,this.objectTiles[t][r].setPosition(0,0),this.createABlock(this.getBoard(t,r),t,r,e,!0)},t.prototype._smoothInitObjects=function(e){if(0===e){this.objectTiles=[],this.mapBoardComponents=[];for(var t=0;t<this.mapInfo.numColumn;t++){for(var o=[],n=[],r=0;r<this.mapInfo.numRow;r++)o.push(new cc.Node),n.push([]);this.objectTiles.push(o),this.mapBoardComponents.push(n)}}var a=this.mapInfo.numColumn-1-e;for(r=this.mapInfo.numRow-1;r>=0;r--)this.objectTiles[a][r].parent=this.ObjectsNode,this.objectTiles[a][r].setPosition(0,0),this.createABlock(this.getBoard(a,r),a,r,!0,!0)},t.prototype.addPlayer=function(e){var t;if(0===this.mapInfo.playerPlacements.length)return cc.warn("Number of player is larger then playerPlacements"),null;var n=h.PlayerController.CreatePlayer(e);n.spawnPowerUpWeight=o.randomNumberGenerator.randomUnit(1,f.default.getTotalPowerUPWeight()),o.randomNumberGenerator.shuffleArr(this.mapInfo.playerPlacements);var r=this.mapInfo.playerPlacements.shift();if(n.node.parent=this.PlayersNode,n.node.setPosition(this.mapInfo.sizeOfTile.x*r.x,this.mapInfo.sizeOfTile.y*r.y),n.posInMap=r,n.data.startingPos=cc.v2(r.x,r.y),n.startPointIndex=e.startPointIndex,n.data.skin===N.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER){var a=n.animations[2].getComponent(sp.Skeleton).attachUtil.generateAttachedNodes("Head_Bone")[0];n.punkRiderVfxHandler=cc.instantiate(this.punkRiderVfxPrefab).getComponent(C.default),n.punkRiderVfxHandler.playerAnims=n.animations,n.punkRiderVfxHandler.headBone=a,n.punkRiderVfxHandler.node.parent=n.node,n.punkRiderVfxHandler.node.setSiblingIndex(n.animations[3].node.getSiblingIndex())}return n.isLocalHuman()?n.curPlayerAnimDirection=h.PlayerAnimDirection.Front:null===(t=n.punkRiderVfxHandler)||void 0===t||t.setSmokeVfxPosByAnimDirection(h.PlayerAnimDirection.Left),s.default.inst.players.push(n),g.default.inst.killAndLiveBoard.setLiveNum(s.default.inst.players.length),n},t.prototype.spawnBomb=function(e,t,n,r,a,i){void 0===i&&(i=!1);var s=u.default.Create(e,t,n,r,a);i?s.onServerConfirm():I.default.inst.requestPlantBomb(r.x,r.y,a,s.type,s.range,e.startPointIndex,o.worldPosToUint32(e.getWorldPosition().x,e.getWorldPosition().y))},t.prototype.spawnPowerUpItem=function(e,t,o,n){void 0===n&&(n=null);var r=cc.v2(t,o),a=f.default.instantiate();a.parent=this.ObjectsNode,a.setPosition(this.mapInfo.sizeOfTile.x*t,this.mapInfo.sizeOfTile.y*o);var i=a.getComponent(f.default);null!=n&&i.initJump(n,this.getNodePosFromPosInMap(r)),i.init(e,r)},t.prototype.createABlock=function(e,t,n,r,a){var i=this;void 0===r&&(r=!0),void 0===a&&(a=!1);var c=null;switch(e){case d.GameObjectType.Block_Hard:c=this.hardBlock;break;case d.GameObjectType.Block_Soft:c=this.softBlock;break;case d.GameObjectType.Block_Border:if(c=this.borderBlocks,!a){for(var u=cc.v2(t,n),p=o.inst.getMapBoardComponentsByPosInMap(u);p.length>0;)p.shift().release();s.default.inst.players.forEach(function(e){if(e.isLocalHuman()&&e.isAlive())if(o.inst.comparePosInMap(e.posInMap,u))b.SoundManager.inst.playSound(b.SoundManager.inst.AudioClips.MapShrinkClip,N.ConstConfig.PARAMS.SOUND_MAX_SHRINKING_VOLUME),e.collideWithBorder();else if(o.inst.comparePosInAxis(e.posInMap,u)){var t=h.PlayerController.localPlayer.getWorldPosition().sub(i.getNodePosFromPosInMap(u)).mag(),n=N.ConstConfig.PARAMS.SOUND_MAX_SHRINKING_VOLUME*(N.ConstConfig.PARAMS.SOUND_SHRINKING_RADIUS-t)/N.ConstConfig.PARAMS.SOUND_SHRINKING_RADIUS;b.SoundManager.inst.playSound(b.SoundManager.inst.AudioClips.MapShrinkClip,n)}!e.isLocalHuman()&&o.inst.comparePosInMap(e.posInMap,u)&&e.isAlive()&&e.collideWithBorder()})}}if(c){var f=T.GameObjMgr.inst.getBlock();f.parent=this.objectTiles[t][n],f.setPosition(t*this.mapInfo.sizeOfTile.x,n*this.mapInfo.sizeOfTile.y);var g=f.getComponent(l.default);return g.init(e,t,n,r),c.push(g),g}return null},t.prototype.reconcileExplodedBombs=function(e){e.forEach(function(e){var t=o.posFromUint32(e),n=s.default.inst.bombs.find(function(e){return e.posInMap.x==t.x&&e.posInMap.y==t.y});n&&(n.onServerConfirm(!0),n.explosion())})},t.prototype.reconcileBlock=function(e,t,o){var n,r=this,a=d.default.getPureType(o),i=this.getBoard(e,t);if(a!=d.GameObjectType.Block_Border&&(o&d.OBJ_TYPE_MASK.AI)==d.GameObjectType.AI_Dangerous&&this.playShrinkingAnim(cc.v2(e,t)),i!=a)switch(i){case d.GameObjectType.Block_Soft:if(!(c=this.softBlock.find(function(o){return o.posInMap.x==e&&o.posInMap.y==t}))){cc.log("Something wrong, couldn't found soft block at ["+e+"]["+t+"]");break}a==d.GameObjectType.Block_Soft?c.powerUpTypeInside=o&~d.OBJ_TYPE_MASK.SOFT_BLOCK:(c.isDestroying||c.release(),this.createABlock(a,e,t));break;case d.GameObjectType.Block_Hard:if(!(c=this.hardBlock.find(function(o){return o.posInMap.x==e&&o.posInMap.y==t}))){cc.log("Something wrong, couldn't found hard block at ["+e+"]["+t+"]");break}c.release(),this.createABlock(a,e,t);break;case d.GameObjectType.Block_Border:var c;if(!(c=this.borderBlocks.find(function(o){return o.posInMap.x==e&&o.posInMap.y==t}))){cc.log("Something wrong, couldn't found border block at ["+e+"]["+t+"]");break}c.release(),this.createABlock(a,e,t);break;case d.GameObjectType.Bomb:(n=s.default.inst.bombs.find(function(o){return o.posInMap.x==e&&o.posInMap.y==t}))&&!n.isExploding&&n.release();break;default:d.default.isTypePower(this.getBoard(e,t))&&(l=s.default.inst.powerUpItems.filter(function(o){return o.posInMap.x==e&&o.posInMap.y==t})).forEach(function(e){return e.release()}),this.createABlock(a,e,t)}if(a==d.GameObjectType.Block_Border&&(function(e,t){var o=r.getMapBoardComponentsByPosInMap(cc.v2(e,t));null==o||o.forEach(function(e){e.release()})}(e,t),(n=s.default.inst.bombs.find(function(o){return o.posInMap.x==e&&o.posInMap.y==t}))&&!n.isExploding&&n.release(),this.createABlock(a,e,t),this.mapShrinkingAnim.playSmokeAnim(cc.v2(e,t))),d.default.isTypePower(a)){var l=s.default.inst.powerUpItems.filter(function(o){return o.posInMap.x==e&&o.posInMap.y==t}),u=null;l.forEach(function(e){u||e.objectType!=a?e.release():u=e}),null==u&&this.spawnPowerUpItem(a,e,t)}this.setMixedBoard(e,t,o),this.setBoard(e,t,a)},t.prototype.reconcileBombs=function(e){var t=this;e.forEach(function(e){var o=255&e.mixedValue,n=(16711680&e.mixedValue)>>>16,r=(65280&e.mixedValue)>>>8,a=(251658240&e.mixedValue)>>>24,i=(4026531840&e.mixedValue)>>>28,c=s.default.inst.players.find(function(e){return e.startPointIndex==o});if(c){var l=s.default.inst.bombs.filter(function(e){return e.posInMap.x==n&&e.posInMap.y==r}),p=null;l.forEach(function(e){null!=p||e.playerOwner!=c||e.type!=a?e.release():p=e}),p?(p.timeplanted=e.timePlaced,p.range=i,p.isConfirmedByServer()||p.onServerConfirm()):I.default.inst.getCurrentGameServerTime()<e.timePlaced+u.default.BOMB_TIMER&&t.spawnBomb(c,a,i,cc.v2(n,r),e.timePlaced,!0)}})},t.prototype.onReceiveMapData=function(e,t,o){var n=this.mapInfo.numColumn,r=this.mapInfo.numRow;if(t.length==n*r){this.reconcileExplodedBombs(e),this.reconcileBombs(o);for(var a=0;a<n;a++)for(var i=0;i<r;i++){var s=t[this.mapInfo.toArrayIndex(a,i)];s!=this.mapInfo.getMixedBoard(a,i)&&this.reconcileBlock(a,i,s)}}else cc.error("Size of server map is mismatched!!!")},t.prototype.posInMapIsEmpty=function(e){return!(e.x<0||e.y<0||e.x>=this.mapInfo.numColumn||e.y>=this.mapInfo.numRow)&&this.getBoard(e.x,e.y)==d.GameObjectType.Empty},t.prototype.getPosInMap=function(e){return cc.v2(Math.round(e.x/this.mapInfo.sizeOfTile.x),Math.round(e.y/this.mapInfo.sizeOfTile.y))},t.prototype.getNodePosFromPosInMap=function(e){return cc.v2(this.mapInfo.sizeOfTile.x*e.x,this.mapInfo.sizeOfTile.y*e.y)},t.prototype.doShrinkingPhase=function(){var e,t=this.mapInfo.numRow-2*this.rowEdgeIndex,o=this.mapInfo.numColumn-2*this.colEdgeIndex;if(!(t<=0&&o<=0)){var n=this.rowEdgeIndex,r=this.mapInfo.numRow-this.rowEdgeIndex-1,a=this.colEdgeIndex,i=this.mapInfo.numColumn-this.colEdgeIndex-1;if(o===t){for(var c=a;c<=i;c++)this.playShrinkingAnim(cc.v2(c,n)),this.playShrinkingAnim(cc.v2(c,r)),s.default.inst.addDangerousTile(c,n+1,!0),s.default.inst.addDangerousTile(c,r-1,!0);for(var l=n+1;l<=r-1;l++)this.playShrinkingAnim(cc.v2(a,l)),this.playShrinkingAnim(cc.v2(i,l)),s.default.inst.addDangerousTile(a+1,l,!0),s.default.inst.addDangerousTile(i-1,l,!0);this.rowEdgeIndex++,this.colEdgeIndex++}else if(t>o){for(c=a;c<=i;c++)this.playShrinkingAnim(cc.v2(c,n)),this.playShrinkingAnim(cc.v2(c,r)),s.default.inst.addDangerousTile(c,n+1,!0),s.default.inst.addDangerousTile(c,r-1,!0);this.rowEdgeIndex++}else if(o>t){for(l=n+1;l<=r-1;l++)this.playShrinkingAnim(cc.v2(a,l)),this.playShrinkingAnim(cc.v2(i,l)),s.default.inst.addDangerousTile(a+1,l,!0),s.default.inst.addDangerousTile(i-1,l,!0);this.colEdgeIndex++}null===(e=P.default.inst)||void 0===e||e.onMapShink(s.default.gameMode,s.default.inst.getHumanPlayers().length,s.default.inst.getNumPlayersAlive(),S.default.inst.curThemeType,0)}},t.prototype.spawnBorderBlock=function(e){var t=this,n=this.objectTiles[e.x][e.y];if(!n)return cc.log("posInmap = "+e.x+", "+e.y),void cc.error("curTile not FOUND");for(var r=o.inst.getMapBoardComponentsByPosInMap(e);r.length>0;)r.shift().release();var a=T.GameObjMgr.inst.getBlock();a.parent=n,a.setPosition(e.x*this.mapInfo.sizeOfTile.x,e.y*this.mapInfo.sizeOfTile.y);var i=a.getComponent(l.default);i.renderComponent.node.color=cc.Color.WHITE,this.setBoard(e.x,e.y,d.GameObjectType.Block_Border),i.init(d.GameObjectType.Block_Border,e.x,e.y,!0),s.default.inst.players.forEach(function(n){if(n.isLocalHuman()&&n.isAlive){if(o.inst.comparePosInMap(n.posInMap,e))n.collideWithBorder();else if(o.inst.comparePosInAxis(n.posInMap,e)){h.PlayerController.localPlayer.getWorldPosition().sub(t.getNodePosFromPosInMap(e)).mag();N.ConstConfig.PARAMS.SOUND_MAX_SHRINKING_VOLUME,N.ConstConfig.PARAMS.SOUND_SHRINKING_RADIUS,N.ConstConfig.PARAMS.SOUND_SHRINKING_RADIUS}}else o.inst.comparePosInMap(n.posInMap,e)&&n.collideWithBorder()})},t.prototype.playShrinkingAnim=function(e){var t=this,o=this.getMapBoardComponentsByPosInMap(e),n=function(){O.NgcPlatform.isOfflineMode()&&(s.default.inst.gameState!=s.GameState.None&&s.default.inst.gameState!=s.GameState.AddingPlayers?(t.spawnBorderBlock(e),t.mapShrinkingAnim.playSmokeAnim(e)):cc.warn("Game was reset"))};o&&o.find(function(e){return e.objectType==d.GameObjectType.Floor||e.objectType==d.GameObjectType.Block_Soft||e.objectType==d.GameObjectType.Block_Hard||d.default.isTypePower(e.objectType)})?this.mapShrinkingAnim.playDangerousBlockAnim(o,this._timePerRound,n):this.mapShrinkingAnim.playDangerousFloorPlateAnim(e,this._timePerRound,n)},t.prototype.concentricSearch=function(e,t,o,n){t<1&&(t=1);for(var r=t+o,a=t;a<=r;a++){var i=!0,s=!0,c=e.x-a;c<0&&(c=0);var l=e.y-a;l<0&&(l=0,i=!1);var u=e.x+a;u>=this.mapInfo.numColumn&&(u=this.mapInfo.numColumn-1);var p=e.y+a;if(p>=this.mapInfo.numRow&&(p=this.mapInfo.numRow-1,s=!1),i)for(var d=c;d<=u;d++)if(!n(d,l,this.getBoard(d,l)))return;for(var f=s?p-1:p,h=i?l+1:l;h<=f;h++){if(!n(c,h,this.getBoard(c,h)))return;if(!n(u,h,this.getBoard(u,h)))return}if(s)for(d=c;d<=u;d++)if(!n(d,p,this.getBoard(d,p)))return}},t.prototype.reset=function(){this.stopShrinking(!0),this.node.getComponentsInChildren(d.default).forEach(function(e){e.release()}),this.FloorNode.removeAllChildren(),this.ObjectsNode.children.forEach(function(e){return e.destroy()}),this.BombsNode.removeAllChildren(),this.PlayersNode.removeAllChildren(),this.GradientMappingEffect.removeAllChildren(),this.objectTiles=[],this.mapBoardComponents=[],this.isCreated=!1,this.mapInfo=null,this._isInitializingStarted=!1},t.prototype.stopShrinking=function(e){this.unschedule(this.doShrinkingPhase),e&&(this.colEdgeIndex=0,this.rowEdgeIndex=0)},t.prototype.startShrinking=function(e){var t=Math.round(Math.max(this.mapInfo.numColumn,this.mapInfo.numRow)/2)-o.MAP_BORDER_SIZE,n=e/(t-Math.floor(s.default.FINAL_SHOWDOWN_TILES/2));console.log("%c Extra duration: "+e,"color: blue"),console.log("%c Total rounds: "+t,"color: blue"),console.log("%c Second per round: "+n,"color: blue"),b.SoundManager.inst.playShrinkingMusic(),this._timePerRound=n,O.NgcPlatform.isOfflineMode()&&(this.doShrinkingPhase(),this.schedule(this.doShrinkingPhase,n))},t.prototype.startFinalShrinking=function(){O.NgcPlatform.isOfflineMode()&&(this.doShrinkingPhase(),this.schedule(this.doShrinkingPhase,this._timePerRound))},t.prototype.getMapBoardComponentsByPosInMap=function(e){var t=void 0;return this.mapBoardComponents[e.x]&&(t=this.mapBoardComponents[e.x][e.y]),t||(cc.log("posinMap = "+e.x+", "+e.y),cc.log("MapManager.inst.mapBoardComponents.length= "+o.inst.mapBoardComponents.length),cc.log("MapManager.inst.mapBoardComponents[0].length= "+o.inst.mapBoardComponents[0].length)),t},t.prototype.addObjectToMapBoardComponents=function(e){(null==e?void 0:e.posInMap)&&this.mapBoardComponents[e.posInMap.x]&&this.mapBoardComponents[e.posInMap.x][e.posInMap.y]?(this.mapBoardComponents[e.posInMap.x][e.posInMap.y].push(e),c.default.inst.isInBoardScreen(e.posInMap)?e.onInScreen():e.onOutScreen()):cc.error("Can not addObjectToMapBoardComponents")},t.prototype.removeComponentInMapBoard=function(e){(null==e?void 0:e.posInMap)&&this.mapBoardComponents[e.posInMap.x]&&this.mapBoardComponents[e.posInMap.x][e.posInMap.y]&&cc.js.array.remove(this.mapBoardComponents[e.posInMap.x][e.posInMap.y],e)},t.prototype.comparePosInMap=function(e,t){return e.x===t.x&&e.y===t.y},t.prototype.comparePosInAxis=function(e,t){return e.x===t.x||e.y===t.y},t.prototype.onOffTopBlock=function(){var e=this;this.isOffTopBlock=!this.isOffTopBlock,this.softBlock.forEach(function(t){t.blockTop.active=e.isOffTopBlock}),this.hardBlock.forEach(function(t){t.blockTop.active=e.isOffTopBlock})},t.prototype.onOffHardBlock=function(){var e=this;this.isOffHardBlock=!this.isOffHardBlock,this.hardBlock.forEach(function(t){t.blockSprite.node.active=e.isOffHardBlock})},t.prototype.onOffFloor=function(){var e=this;this.isOffFloor=!this.isOffFloor,this.floors.forEach(function(t){t.active=e.isOffFloor})},t.prototype.isBoardPosExisted=function(e){return void 0!==this.getBoard(e.x,e.y)},t.prototype.getObjectTypeByPosInMap=function(e){return this.isBoardPosExisted(e)?this.getBoard(e.x,e.y):d.GameObjectType.Unknown},t.prototype.isValidCell=function(e,t){return 0<=e&&e<this.mapInfo.numColumn&&0<=t&&t<this.mapInfo.numRow},t.prototype.getBoard=function(e,t){return this.mapInfo.getBoard(e,t)},t.prototype.setBoard=function(e,t,o,n){void 0===n&&(n=!1),this.mapInfo.setBoard(e,t,o),n&&this.mapInfo.setMixedBoard(e,t,o)},t.prototype.getMixedBoard=function(e,t){return this.mapInfo.getMixedBoard(e,t)},t.prototype.setMixedBoard=function(e,t,o){this.mapInfo.setMixedBoard(e,t,o)},t.prototype.isDangerous=function(e,t){var o=this.getMixedBoard(e,t);return d.default.willBeExploded(o)||d.default.willBeShrinked(o)},t.MAP_BORDER_SIZE=4,t.NUM_PLAYER=100,t.PLAYER_DISTANCE_X=5,t.PLAYER_DISTANCE_Y=5,t.MAX_PLAYER_X=10,t.HAS_HARD_BLOCK=!0,a([R(cc.Node)],t.prototype,"FloorNode",void 0),a([R(cc.Node)],t.prototype,"ObjectsNode",void 0),a([R(cc.Node)],t.prototype,"PlayersNode",void 0),a([R(cc.Node)],t.prototype,"EffectNode",void 0),a([R(cc.Node)],t.prototype,"GradientMappingEffect",void 0),a([R(cc.Node)],t.prototype,"BombsNode",void 0),a([R(cc.Node)],t.prototype,"SmokeNode",void 0),a([R(cc.Node)],t.prototype,"UINode",void 0),a([R(cc.Node)],t.prototype,"ArrowDirectionNode",void 0),a([R(cc.Node)],t.prototype,"ArrowIcon",void 0),a([R(cc.Node)],t.prototype,"PlayerEffectNode",void 0),a([R(cc.Prefab)],t.prototype,"playerWinVFX",void 0),a([R(v.default)],t.prototype,"mapShrinkingAnim",void 0),a([R(cc.Prefab)],t.prototype,"centreCompassPrefab",void 0),a([R(cc.Prefab)],t.prototype,"playerStunAnimPrefab",void 0),a([R(cc.Prefab)],t.prototype,"playerNotReviveAnimPrefab",void 0),a([R(cc.Prefab)],t.prototype,"punkRiderVfxPrefab",void 0),o=a([D],t)}(cc.Component);o.default=B,cc._RF.pop()},{"../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderVfxHandler":"PunkRiderVfxHandler","../../NanoGameCore/Services/Platform/Platform":"Platform","../Dialog/MatchLoadingDialog/MatchLoadingDialog":"MatchLoadingDialog","../FakeNames":"FakeNames","../FakeRandomNumberGenerator":"FakeRandomNumberGenerator","../Game":"Game","../GameCamera":"GameCamera","../GameObjects/Block":"Block","../GameObjects/Bomb":"Bomb","../GameObjects/Floor":"Floor","../GameObjects/GameObjMgr":"GameObjMgr","../GameObjects/GameObjectBase":"GameObjectBase","../GameObjects/PowerUpItem":"PowerUpItem","../Network/ImprovedNetClient":"ImprovedNetClient","../Player/PlayerController":"PlayerController","../SoundManager":"SoundManager","../Tracking/TrackingManager":"TrackingManager","../UI/GameUI/GameUI":"GameUI","../Utils/ConstConfig":"ConstConfig","./AStar_UASB":"AStar_UASB","./MapGenerator":"MapGenerator","./MapInfo":"MapInfo","./MapShrinkingAnim":"MapShrinkingAnim","./ThemeManager":"ThemeManager"}],MapShrinkingAnim:[function(e,t,o){"use strict";cc._RF.push(t,"9f35aS7kZxNSoi/fUnGUnam","MapShrinkingAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameObjects/FloorPlate"),s=e("../GameObjects/ShrinkingSmoke"),c=e("./MapManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.floorPlatePrefab=null,t.shrinkingSmokePrefab=null,t}return r(t,e),t.prototype.playDangerousBlockAnim=function(e,t,o){e?(this.scheduleOnce(function(){o&&o()},t),e.forEach(function(e){e.ownTween=cc.tween(e.renderComponent.node).to(t,{color:cc.Color.RED}).call(function(){e.renderComponent.node.color=cc.Color.WHITE}).start()})):o&&o()},t.prototype.playDangerousFloorPlateAnim=function(e,t,o){var n=i.default.instantiate(e);n.parent=c.default.inst.FloorNode;var r=cc.v2(e.x*c.default.inst.mapInfo.sizeOfTile.x,e.y*c.default.inst.mapInfo.sizeOfTile.y);n.setPosition(r),n.opacity=0,n.color=cc.Color.WHITE,cc.tween(n).to(t,{color:cc.Color.RED,opacity:200}).call(function(){o&&o()}).start()},t.prototype.playSmokeAnim=function(e,t){var o=s.default.instantiate(e);o.parent=c.default.inst.SmokeNode;var n=cc.v2(e.x*c.default.inst.mapInfo.sizeOfTile.x,e.y*c.default.inst.mapInfo.sizeOfTile.y);o.setPosition(n);var r=o.getComponent(cc.Animation);r.play(),r.once(cc.Animation.EventType.FINISHED,function(){o.getComponent(s.default).release(),t&&t()})},t.prototype.playBombPlacementAnim=function(e){var t=s.default.instantiate(e);t.parent=c.default.inst.GradientMappingEffect;var o=cc.v2(e.x*c.default.inst.mapInfo.sizeOfTile.x,e.y*c.default.inst.mapInfo.sizeOfTile.y+2*c.default.inst.mapInfo.sizeOfTile.y/3);t.setPosition(o),t.getComponent(cc.Animation).play()},a([p(cc.Prefab)],t.prototype,"floorPlatePrefab",void 0),a([p(cc.Prefab)],t.prototype,"shrinkingSmokePrefab",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../GameObjects/FloorPlate":"FloorPlate","../GameObjects/ShrinkingSmoke":"ShrinkingSmoke","./MapManager":"MapManager"}],MapUI:[function(e,t,o){"use strict";cc._RF.push(t,"3a4584NZMRNOrf1H7MMq31Q","MapUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerInfoTag_BgNode=null,t.playerInfoTag_FlagNode=null,t.playerInfoTag_NameNode=null,t}return r(t,e),a([c(cc.Node)],t.prototype,"playerInfoTag_BgNode",void 0),a([c(cc.Node)],t.prototype,"playerInfoTag_FlagNode",void 0),a([c(cc.Node)],t.prototype,"playerInfoTag_NameNode",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],MatchLoadingDialog:[function(e,t,o){"use strict";cc._RF.push(t,"46282wj8pxM5Y7YEfcBc96m","MatchLoadingDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler"),l=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),u=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),p=e("../../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI"),d=e("../../Player/PlayerSkinMgr"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.heroSkin=null,t.punkRiderHandler=null,t}var o;return r(t,e),o=t,t.load=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.NgcDialogManager.loadDialogPrefab(this.dialogType,this.urlPrefab,this.bundleName)];case 1:return e.sent(),[2]}})})},t.show=function(e){return i(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this._isShowing?(cc.warn("The match loading dialog are showing, don't push it"),[2]):(this._isShowing=!0,o._alreadyPreloadEndGameFlowDialog||o.preloadEndGameFlowDialog(),[4,u.NgcDialogManager.createDialog(this.dialogType,this.urlPrefab,this.bundleName)]);case 1:return t=n.sent(),this._inst=t.getComponent(o),this._inst.show(e),this._inst.heroSkin.setSkin(d.default.inst.getCurHero()),this._inst.punkRiderHandler.enableOrDisableSmokeBasedOnSkin(d.default.inst.getCurHero()),[2]}})})},t.hide=function(){var e;null===(e=this._inst)||void 0===e||e.hide(),this._inst=null,this._isShowing=!1},t.preloadEndGameFlowDialog=function(){var e=this,t=cc.assetManager.getBundle(p.NgcResultUI.bundleName);t?t.preloadDir("./",function(t){t?cc.error("Preload end game flow dialog err: ",t.message):e._alreadyPreloadEndGameFlowDialog=!0}):cc.error("Can not get bundle name : "+p.NgcResultUI.bundleName)},t.dialogType="MatchLoadingDialog",t.urlPrefab="Prefabs/Dialogs/MatchLoadingDialog",t.bundleName="resources",t._alreadyPreloadEndGameFlowDialog=!1,a([g(sp.Skeleton)],t.prototype,"heroSkin",void 0),a([g(c.default)],t.prototype,"punkRiderHandler",void 0),o=a([h],t)}(l.NgcDialogBase);o.default=m,cc._RF.pop()},{"../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler":"PunkRiderPreviewVfxHandler","../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../Player/PlayerSkinMgr":"PlayerSkinMgr"}],MaterialMgr:[function(e,t,o){"use strict";cc._RF.push(t,"503f59GaixOErgURMO4g6hW","MaterialMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.powerUpVFXMaterial=null,t.powerDownVFXMaterial=null,t.powerNegVFXMaterial=null,t.redExplodingMaterial=null,t.blueExplodingMaterial=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.inst=null,a([c(cc.Material)],t.prototype,"powerUpVFXMaterial",void 0),a([c(cc.Material)],t.prototype,"powerDownVFXMaterial",void 0),a([c(cc.Material)],t.prototype,"powerNegVFXMaterial",void 0),a([c(cc.Material)],t.prototype,"redExplodingMaterial",void 0),a([c(cc.Material)],t.prototype,"blueExplodingMaterial",void 0),o=a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],MessageBuilder:[function(e,t,o){"use strict";var n;cc._RF.push(t,"68a772G6VJJUbJR2SYOFoCr","MessageBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageBuilder=void 0;var r=e("./Protocol"),a=e("./MessageDefines"),i=e("long");o.MessageBuilder=((n={})[r.Protocol.SERVER_INIT]=function(e,t){var o=a.Server_Init.create();return o.msgType=r.Protocol.SERVER_INIT,o.clientID=e,o.serverVersion=t,a.Server_Init.encode(o).finish()},n[r.Protocol.JOIN_ROOM]=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=a.Client_JoinRoom.create();return n.msgType=r.Protocol.JOIN_ROOM,n.roomType=e,n.params=JSON.stringify(t),n.options=JSON.stringify(o),a.Client_JoinRoom.encode(n).finish()},n[r.Protocol.LEAVE_ROOM]=function(){var e=a.Client_LeaveRoom.create();return e.msgType=r.Protocol.LEAVE_ROOM,a.Client_LeaveRoom.encode(e).finish()},n[r.Protocol.PING]=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var o=a.Ping.create();return o.msgType=r.Protocol.PING,o.reqTime=i.fromValue(e),o.resTime=i.fromValue(t),a.Ping.encode(o).finish()},n[r.Protocol.NGC_BROADCAST]=function(e,t,o,n){var i=a.NGC_Broadcast.create();return i.msgType=r.Protocol.NGC_BROADCAST,i.type=e,i.fromID=t,i.payload=JSON.stringify(o),i.timestamp=n,a.NGC_Broadcast.encode(i).finish()},n),cc._RF.pop()},{"./MessageDefines":"MessageDefines","./Protocol":"Protocol",long:100}],MessageDefines:[function(e,t){"use strict";var o;cc._RF.push(t,"21664NSlX9Hs54StsQ6KbXx","MessageDefines"),o=function(e){var t=e.Reader,o=e.Writer,n=e.util,r=e.roots.default||(e.roots.default={});return r.Server_Init=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.clientID="",e.prototype.serverVersion="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.clientID&&Object.hasOwnProperty.call(e,"clientID")&&t.uint32(18).string(e.clientID),null!=e.serverVersion&&Object.hasOwnProperty.call(e,"serverVersion")&&t.uint32(26).string(e.serverVersion),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,a=new r.Server_Init;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.msgType=e.uint32();break;case 2:a.clientID=e.string();break;case 3:a.serverVersion=e.string();break;default:e.skipType(7&i)}}return a},e}(),r.Client_JoinRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.roomType="",e.prototype.params="",e.prototype.options="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.roomType&&Object.hasOwnProperty.call(e,"roomType")&&t.uint32(18).string(e.roomType),null!=e.params&&Object.hasOwnProperty.call(e,"params")&&t.uint32(26).string(e.params),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(34).string(e.options),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,a=new r.Client_JoinRoom;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.msgType=e.uint32();break;case 2:a.roomType=e.string();break;case 3:a.params=e.string();break;case 4:a.options=e.string();break;default:e.skipType(7&i)}}return a},e}(),r.Client_LeaveRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,a=new r.Client_LeaveRoom;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.msgType=e.uint32();break;default:e.skipType(7&i)}}return a},e}(),r.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.reqTime=n.Long?n.Long.fromBits(0,0,!0):0,e.prototype.resTime=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.reqTime&&Object.hasOwnProperty.call(e,"reqTime")&&t.uint32(16).uint64(e.reqTime),null!=e.resTime&&Object.hasOwnProperty.call(e,"resTime")&&t.uint32(24).uint64(e.resTime),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,a=new r.Ping;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.msgType=e.uint32();break;case 2:a.reqTime=e.uint64();break;case 3:a.resTime=e.uint64();break;default:e.skipType(7&i)}}return a},e}(),r.NGC_Broadcast=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.type="",e.prototype.fromID="",e.prototype.payload="",e.prototype.timestamp=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.fromID&&Object.hasOwnProperty.call(e,"fromID")&&t.uint32(26).string(e.fromID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(40).uint64(e.timestamp),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,a=new r.NGC_Broadcast;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:a.msgType=e.uint32();break;case 2:a.type=e.string();break;case 3:a.fromID=e.string();break;case 4:a.payload=e.string();break;case 5:a.timestamp=e.uint64();break;default:e.skipType(7&i)}}return a},e}(),r},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":101}],MessageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0f009wFhwFLSbriVV856/2W","MessageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMessageDialog=void 0;var i=e("../../../../Core/Utils"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../DialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelLocalized=null,t.background=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===t&&(t=!1),this.labelLocalized.setLocalizedText(e),this.background&&(this.background.active=t)},t.prototype.show=function(e,t,o,n,r){var a=this;e||(e=cc.find("Canvas"));var s=this.node.getComponent(cc.Widget);null!=o&&(s.isAlignLeft=!0,s.left=o),null!=n&&(s.isAlignRight=!0,s.right=n),this.node.parent=e,r&&(this.node.scale=r);var c=i.Utils.getWorldPos(t);i.Utils.setWorldPos(this.node,c),s.updateAlignment(),this.node.active=!0,this.node.opacity=1,this.node.y=this.node.y+t.height/2+30,cc.tween(this.node).delay(.1).to(0,{opacity:255}).to(1.5,{opacity:0,y:this.node.y+20}).call(function(){a.hide()}).start()},t.urlPrefab="MessageDialog",t.bundleName="02_dialog",t.dialogType="NgcMessageDialog",a([p(s.NgcLabelLocalized)],t.prototype,"labelLocalized",void 0),a([p(cc.Node)],t.prototype,"background",void 0),a([u],t)}(c.NgcDialogBase);o.NgcMessageDialog=d,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../DialogBase":"DialogBase"}],ModeButton:[function(e,t,o){"use strict";cc._RF.push(t,"85addauUUFO4LeKX2CqxScm","ModeButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcModeButton=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.infoButton=null,t.buttonNameLabel=null,t.progressBar=null,t.progressBarFill=null,t.highlight=null,t.lockedContents=null,t.unlockedContents=null,t.modeNameLabel=null,t.timerLabel=null,t.numbers=null,t.loadingIcon=null,t.crownIcon=null,t.crownIconProgressScale=.025,t.numberProgressScale=.18,t.numberProgressColor=cc.color(255,234,77),t.leftNumberLabel=null,t.rightNumberLabel=null,t}return r(t,e),t.prototype.onLoad=function(){this.leftNumberLabel=this.numbers.getChildByName("Left").getComponent(i.NgcLabelLocalized),this.rightNumberLabel=this.numbers.getChildByName("Right").getComponent(i.NgcLabelLocalized),this.crownIcon.active=!1},t.prototype.playLoadingAnimation=function(){this.loadingIcon.active=!0},t.prototype.update=function(e){this.loadingIcon.active&&(this.loadingIcon.angle-=550*e)},t.prototype.isLoading=function(){return this.loadingIcon.active},t.prototype.stopLoadingAnimation=function(){var e=this;this.loadingIcon.active&&cc.tween(this.loadingIcon).to(.25,{opacity:0},{easing:"cubicOut"}).call(function(){e.loadingIcon.active=!1}).start()},t.prototype.updateProgressNumber=function(e,t){null!=e&&(console.log("PROGRESS: ",e),this.leftNumberLabel.string=e.toString()),null!=t&&(this.rightNumberLabel.string="/"+t.toString())},t.prototype.refreshContents=function(e,t,o){-1!==t?(this.timerLabel.node.parent.active=!0,this.timerLabel.startCount(t),o&&this.timerLabel.setTimerExpiredCallback(o)):this.timerLabel.node.parent.active=!1,s.NgcLocalizedManager.setTextKey(this.modeNameLabel.getComponent(i.NgcLabelLocalized),e)},a([p(cc.Node)],t.prototype,"background",void 0),a([p(cc.Node)],t.prototype,"infoButton",void 0),a([p(cc.Node)],t.prototype,"buttonNameLabel",void 0),a([p(cc.Node)],t.prototype,"progressBar",void 0),a([p(cc.Node)],t.prototype,"progressBarFill",void 0),a([p(cc.Node)],t.prototype,"highlight",void 0),a([p(cc.Node)],t.prototype,"lockedContents",void 0),a([p(cc.Node)],t.prototype,"unlockedContents",void 0),a([p(cc.Node)],t.prototype,"modeNameLabel",void 0),a([p(c.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),a([p(cc.Node)],t.prototype,"numbers",void 0),a([p(cc.Node)],t.prototype,"loadingIcon",void 0),a([p(cc.Node)],t.prototype,"crownIcon",void 0),a([p()],t.prototype,"crownIconProgressScale",void 0),a([p()],t.prototype,"numberProgressScale",void 0),a([p(cc.Color)],t.prototype,"numberProgressColor",void 0),a([u],t)}(cc.Component);o.NgcModeButton=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"d0868QNIN9PFLsjPnGNpx+7","NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TrackType=void 0;var c,l=e("crypto-js"),u=e("simple-crypto-js"),p=e("../../Core/Utils"),d=e("../../GameFramework/Scripts/BuildConfig"),f=e("../../GameFramework/Scripts/CountryFlagsManager"),h=e("../../GameFramework/Scripts/Network/NetUtils"),g=e("../../GameFramework/Scripts/NgcUserInfo"),m=e("../../Services/Platform/Platform"),y=e("../SDK"),_=cc._decorator;_.ccclass,_.property,function(e){e.Launching="launching",e.GDPR_response="gdpr_response",e.Install_app_click="install_app_click",e.Vignette_interaction="vignette_interaction",e.Sitelock_Banner_Popup="sitelock_banner_popup",e.Sitelock_Banner_Interaction="sitelock_banner_interaction"}(c=o.TrackType||(o.TrackType={}));var v=function(e){function t(){var o=e.call(this)||this;return o.userID=null,o.gameID=null,o.initialized=!1,o.cryptr=new u.default("pizzataco"),o.loggedIn=!1,o.devTimeOffsetMinutes=0,o.serviceURL="",o.encrypt=!0,o.loginAuthority="",o.uplayInfo={},o.loginData={},o.accessToken=null,o.randomNameDisabled=!1,t.inst&&cc.error("There are multiple places constructing NanoSrv!!!"),t.inst=o,"UAT"!==d.NgcBuildConfig.deploymentEnvironment&&"Dev"!==d.NgcBuildConfig.deploymentEnvironment||(o.encrypt=!1),o}return r(t,e),t.prototype._preInit=function(){var e=this;return new Promise(function(t){e.preInitialized=!0,t("NanoSrv pre-initialized")})},t.prototype._init=function(e){var t=this;return f.NgcCountryFlagsManager.getLocalCountry(),this.serviceURL=e.SDK.NanoSrv.url,this.gameID=e.platformGameID,0==this.serviceURL.length?new Promise(function(e,t){t('"Service url not set (Platform.env init data serviceURL field)"')}):this._readUserID()?(console.log("userID = "+this.userID),new Promise(function(e){t.initialized=!0,e("NanoSrv initialized")})):new Promise(function(e,t){t("NanoSrv Unable to determine or create new user ID")})},t.prototype._login=function(){var e=this;return new Promise(function(t,o){var n=e.getAccessToken();n.catch(function(e){o(e)}),n.then(function(n){e.accessToken=n;var r=p.Utils.getUrlParameter("platform"),a={from:"game",gameId:e.gameID,type:c.Launching,platform:r||d.NgcBuildConfig.buildPlatform,country:f.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?"Mobile":"PC",browser:p.BROWSER_TYPE[p.Utils.getBrowserType()].toLowerCase(),page_url:encodeURIComponent(window.location!==window.parent.location?document.referrer:document.location.href),os:p.OS_TYPE[p.Utils.getOSType()].toLowerCase(),timeZone:p.Utils.getTimeZone()};e.sendTracking(a);var i=JSON.stringify(e.uplayInfo);e.serviceGet("/profile",i,function(n,r){n&&o(n),e.loginData=JSON.parse(r).data,t(r)})})})},t.prototype._getUsername=function(){return"uplay"==this.loginAuthority?this.uplayInfo.name:"Guest"},t.prototype._getCohort=function(){if(null==this.loginData)return"";var e=this.getCurGameData();return e?e.cohort:""},t.prototype.getCurGameData=function(){return null==this.loginData?null:this.loginData.playerData},t.prototype.getCurSocialInfo=function(){return null==this.loginData?null:this.loginData.socialInfo},t.prototype._getTotalSessions=function(){return g.default.totalSessions},t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return""},t.prototype.getName=function(){return"Nano"},t.prototype._createFakeUserID=function(){return"~"+h.NgcNetUtils.generateRandomUUID()},t.prototype._readUserID=function(){return this.userID=g.default.userIdKey,!0},t.setAccessTokenOutOfDateCallback=function(e){t._accessTokenOutOfDateCallback=e},t.prototype.serviceGet=function(e,o,n){var r=this.serviceURL+e,a=this;p.Utils.getHttp(r,o,function(e,o){if(e){console.log("[NanoSrv] `serviceGet` - err = "+e);var r=JSON.parse(e);return r&&"Outofdate"===r.message&&t._accessTokenOutOfDateCallback(),void n(e,null)}if(a.encrypt){var i=l.AES.decrypt(o,l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(l.enc.Utf8);n(null,i)}else n(null,o)},this.accessToken)},t.prototype.servicePost=function(e,o,n){if(!m.NgcPlatform.isOfflineMode()){var r=this.serviceURL+e,a=JSON.parse(o);a&&(a.modified=Date.now());var i=l.AES.encrypt(JSON.stringify(a),l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(),s=JSON.stringify({enc:i});this.encrypt||(s=o);var c=p.Utils.postHttp(r,s,"application/json",this.accessToken),u=this;c.then(function(e){if(u.encrypt){var t=l.AES.decrypt(e,l.SHA256(g.default.secretKey).toString(l.enc.Base64)).toString(l.enc.Utf8);n(null,t)}else n(null,e)}),c.catch(function(e){e&&"Outofdate"===e.message&&t._accessTokenOutOfDateCallback(),n(e,null)})}},t.prototype.servicePostAsync=function(e,t){return i(this,void 0,Promise,function(){var o=this;return s(this,function(){return[2,new Promise(function(n,r){o.servicePost(e,t,function(e,t){e?r(e):n(t)})})]})})},t.prototype.getCurGameInfo=function(){return this.loginData.gameInfo},t.prototype.getAccessToken=function(){var e=this,o=window.location!=window.parent.location?document.referrer:document.location.href;o=m.NgcPlatform.isRunFromApp()?"":o;var n=p.Utils.getUrlParameter("platform"),r=null,a={playerId:this.userID,gameVersion:d.NgcBuildConfig.buildVersionName,secretKey:g.default.secretKey,gameId:this.gameID,platform:n||d.NgcBuildConfig.buildPlatform,referrerUrl:o,enc:this.encrypt},i=g.default.userAppId;i&&(a.appUserId=i),console.log("@@@@@@@@@@@@ appUserId From NANO APP ",i);var s=JSON.stringify(a);return new Promise(function(o,n){var a=p.Utils.postHttp(e.serviceURL+"/auth/gettoken",s);a.then(function(e){var a=JSON.parse(e);if(a){var i=a.data;"BL"===i&&n(t.sitelockMsg),r=i.accessToken,o(r)}}),a.catch(function(e){n(e)})})},t.prototype.sendTracking=function(e){var t=this.serviceURL+"/tdata";if(this.accessToken){var o=JSON.stringify(e);p.Utils.postHttp(t,o,"application/json",this.accessToken)}else{var n=a(a({},e),{gameId:d.NgcBuildConfig.platformGameID,playerId:this.userID});o=JSON.stringify(n),p.Utils.postHttp(t,o,"application/json")}},t.prototype.refreshAccessToken=function(){return i(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,o){e.getAccessToken().then(function(o){e.accessToken=o,t()},function(e){o(e)})})];case 1:return t.sent(),[2]}})})},t.prototype.serviceGetAsync=function(e,t){var o=this;return void 0===t&&(t=null),new Promise(function(n,r){o.serviceGet(e,t,function(e,t){if(e)return r(e);n(t)})})},t.prototype._logout=function(){return new Promise(function(e){e()})},t.prototype.resetUserID=function(){var e=this;g.default.resetNgcData();var t=null;return window.accountLinked?(window.blockGameLoading=!0,this.randomNameDisabled=!0,t=new Promise(function(t,o){var n=setTimeout(function(){window.accountLinked&&(g.default.getNanoUserInfoFromLocalstorage(),clearInterval(n),e._init(d.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()}))},1e3)})):t=new Promise(function(t,o){e._init(d.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()})}),t},t.prototype._onResetCompleted=function(){t._onResetCompletedCallbacks.forEach(function(e){e&&e()})},t.prototype._onResetFailed=function(){console.error("[NanoSrv] onResetFailed")},t.setOnResetCallback=function(e){t._onResetCompletedCallbacks.includes(e)||t._onResetCompletedCallbacks.push(e)},t.removeOnResetCallback=function(e){cc.js.array.remove(t._onResetCompletedCallbacks,e)},t.inst=null,t.sitelockMsg="Black Listed",t._onResetCompletedCallbacks=[],t.LOCAL_STORAGE_USERID_KEY="_linseb",t}(y.NgcSDK);o.default=v,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../GameFramework/Scripts/Network/NetUtils":"NetUtils","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../SDK":"SDK","crypto-js":41,"simple-crypto-js":139}],NavBarA2HSInstalledNotice:[function(e,t,o){"use strict";cc._RF.push(t,"43d9er40j5DDL0s7yQ6/tg8","NavBarA2HSInstalledNotice");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSInstalledNotice=void 0;var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(){var e=this,t=cc.find("Canvas");this.node.parent=t,this.node.active=!0,this.node.setPosition(cc.v2(0,0)),this.node.opacity=0,cc.tween(this.node).to(.5,{opacity:255}).delay(1).to(.5,{opacity:0}).call(function(){e.hide()}).start()},t.prototype.hide=function(){this.node.active=!1,this.node.destroy()},t.urlPrefab="NavBarA2HSInstaledNotice",t.dialogType="NgcNavBarA2HSInstalledNotice",a([c],t)}(i.NgcNavBarDialogBase));o.NgcNavBarA2HSInstalledNotice=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarA2HSNotSupportTotally_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"dc05fYoAz1IgqolbDoGhHpW","NavBarA2HSNotSupportTotally_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupportTotally_Mobile=void 0;var i=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("./NavBarA2HSNoticeDialog"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pcBrowser=null,t}return r(t,e),t.prototype.onLoad=function(){this.pcBrowser.string="\u2022 Chrome\n\u2022 Firefox\n\u2022 Internet Explorer\n\u2022 Safari\n"+i.NgcLocalizedManager.t("AHS_CHROMIUM_BASED").text},t.urlPrefab="NavBarA2HSNotSupportTotally_Mobile",t.dialogType="NavBarA2HSNotSupportTotally_Mobile",a([u(cc.Label)],t.prototype,"pcBrowser",void 0),a([l],t)}(s.NgcNavBarA2HSNoticeDialog);o.NavBarA2HSNotSupportTotally_Mobile=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"30083oXbRRDR4ew4mHKFzZ5","NavBarA2HSNotSupport_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_Mobile=void 0;var i=e("./NavBarA2HSNoticeDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="NavBarA2HSNotSupport_Mobile",t.dialogType="NavBarA2HSNotSupport_Mobile",a([c],t)}(i.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_Mobile=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_PC:[function(e,t,o){"use strict";cc._RF.push(t,"df6e5eb8tdNKa9nt2E3rhac","NavBarA2HSNotSupport_PC");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_PC=void 0;var i=e("./NavBarA2HSNoticeDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="NavBarA2HSNotSupport_PC",t.dialogType="NavBarA2HSNotSupport_PC",a([c],t)}(i.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_PC=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c237dGk8rVLK5Kd+dy465i/","NavBarA2HSNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSNoticeDialog=void 0;var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.safariNode=null,t.FFnode=null,t.edgeNode=null,t.pcNode=null,t.macNode=null,t}return r(t,e),t.prototype.start=function(){if(cc.sys.isMobile)this.safariNode&&this.FFnode&&this.edgeNode&&(this.safariNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI,this.FFnode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX,this.edgeNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE);else if(this.pcNode&&this.macNode){var e=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI;this.pcNode.active=cc.sys.os!==cc.sys.OS_OSX||cc.sys.os===cc.sys.OS_OSX&&!e,this.macNode.active=cc.sys.os===cc.sys.OS_OSX&&e}},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NavBarA2HSInstaledNotice",t.dialogType="NgcNavBarA2HSNoticeDialog",a([l(cc.Node)],t.prototype,"safariNode",void 0),a([l(cc.Node)],t.prototype,"FFnode",void 0),a([l(cc.Node)],t.prototype,"edgeNode",void 0),a([l(cc.Node)],t.prototype,"pcNode",void 0),a([l(cc.Node)],t.prototype,"macNode",void 0),a([c],t)}(i.NgcNavBarDialogBase);o.NgcNavBarA2HSNoticeDialog=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarAboutDialog:[function(e,t,o){"use strict";cc._RF.push(t,"90482k8tLZBJa7twH0G37fj","NavBarAboutDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarAboutDialog=void 0;var i=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcUserInfo"),p=e("../../../NgcVersion"),d=e("../../../SDK/Nano/NanoSrv"),f=e("../../../Services/Platform/Platform"),h=e("./NavBarDialogBase"),g=cc._decorator,m=g.ccclass,y=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versionLabel=null,t.mainLayout=null,t.supportCode=null,t.PRIVACY_POLICY_URL="https://legal.ubi.com/privacypolicy/",t.TERMS_AND_CONDITIONS_URL="https://legal.ubi.com/termsofuse",t.SUPPORT_CODE_DURATION=25056e5,t}return r(t,e),t.prototype.start=function(){var e="",t=this.mainLayout.node.getChildByName("privacy_policy_button"),o=this.mainLayout.node.getChildByName("terms_and_conditions");f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==i.Utils.enumToString(f.PlatformID,f.PlatformID.Poki)&&(t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==i.Utils.enumToString(f.PlatformID,f.PlatformID.GameDistribution)&&(e="Game Distribution ",t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==i.Utils.enumToString(f.PlatformID,f.PlatformID.HUZ)&&(t.active=!1,o.active=!1),s.NgcBuildConfig.offlineMode&&(t.active=!1,o.active=!1),f.NgcPlatform.isRunFromApp()&&(t.active=!1,o.active=!1),this.versionLabel.string=s.NgcBuildConfig.buildVersionName+"\n"+e+p.NgcVersionConfig.buildNgcVersion,this.mainLayout.updateLayout(),this.getSupportCode()},t.prototype.getSupportCode=function(){var e=this;if(f.NgcPlatform.isOfflineMode())this.supportCode.opacity=0;else{var t=this.supportCode.getChildByName("left"),o=this.supportCode.getChildByName("right"),n=null,r=null,a=Date.now();if(u.default.supportCode.length>0&&(n=u.default.supportCode.split("|")[0],r=parseInt(u.default.supportCode.split("|")[1])),r&&a-r>=this.SUPPORT_CODE_DURATION&&(n=null),n)return l.NgcLocalizedManager.setTextKey(t.getComponent(c.NgcLabelLocalized),"NGG_SUPPORT_CODE"),void(o.getComponent(c.NgcLabelLocalized).string=n);this.supportCode.opacity=0,d.default.inst.serviceGet("/supportcode",null,function(n,r){if(r){var i=JSON.parse(r).data;u.default.supportCode=i+"|"+a,l.NgcLocalizedManager.setTextKey(t.getComponent(c.NgcLabelLocalized),"NGG_SUPPORT_CODE"),o.getComponent(c.NgcLabelLocalized).string=i,cc.tween(e.supportCode).to(.25,{opacity:255}).start()}else console.log("Cant get support code")})}},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onButtonPrivacyClick=function(){cc.sys.openURL(this.PRIVACY_POLICY_URL)},t.prototype.onButtonTermsAndConditionsClick=function(){cc.sys.openURL(this.TERMS_AND_CONDITIONS_URL)},t.urlPrefab="NavBarAboutDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarAboutDialog",t.savedSupportCode=null,a([y(cc.Label)],t.prototype,"versionLabel",void 0),a([y(cc.Layout)],t.prototype,"mainLayout",void 0),a([y(cc.Node)],t.prototype,"supportCode",void 0),a([m],t)}(h.NgcNavBarDialogBase);o.NgcNavBarAboutDialog=_,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NgcVersion":"NgcVersion","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","./NavBarDialogBase":"NavBarDialogBase"}],NavBarConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d4076QxIzBParflV+seqF4+","NavBarConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarConfirmDialog=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("./NavBarDialogBase"),c=e("./NavBarManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t.headerNode=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=!0),this._callBackOk=o,this._callBackClose=n,this.titleLabel.setLocalizedText(e),this.messageLabel.setLocalizedText(t),this.headerNode.active=r},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){var t;(null===(t=c.NgcNavBarManager.inst)||void 0===t?void 0:t.isExitConfirmationDialogShowing)&&(c.NgcNavBarManager.inst.isExitConfirmationDialogShowing=!1),e.prototype.hide.call(this)},t.urlPrefab="NavBarConfirmDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarConfirmDialog",a([p(i.NgcLabelLocalized)],t.prototype,"titleLabel",void 0),a([p(i.NgcLabelLocalized)],t.prototype,"messageLabel",void 0),a([p(cc.Node)],t.prototype,"headerNode",void 0),a([u],t)}(s.NgcNavBarDialogBase);o.NgcNavBarConfirmDialog=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager"}],NavBarConflictDialogOverwrite:[function(e,t,o){"use strict";cc._RF.push(t,"986220KZCJI4orxFk/HoWD2","NavBarConflictDialogOverwrite");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.urlPrefab="GameResources/Prefabs/Dialogs/NavBar/NavBarConflictDialogOverwrite",t.bundleName="resources",t.dialogType="NavBarConflictDialogOverwrite",a([c],t)}(i.NavBarConflicttDialog));o.default=l,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog"}],NavBarConflictDialog:[function(e,t,o){"use strict";cc._RF.push(t,"7b658de4NVEm5XFbT4JMqze","NavBarConflictDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarConflicttDialog=void 0;var c=e("./NavBarDialogBase"),l=e("./NavBarManager"),u=e("./NavBarUserConflictInfo"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.localSave=null,t.cloudSave=null,t}var o;return r(t,e),o=t,t.prototype.init=function(e){this._callBackOk=e,this.updateUserConflictInfo(),o.instancesQueue.push(this),this.resizeWidget(!0,.75,!0)},t.prototype.localSaveOnClick=function(){this._callBackOk&&this._callBackOk(!0),this.hideNode()},t.prototype.cloudSaveOnClick=function(){this._callBackOk&&this._callBackOk(!1),this.hideNode()},t.prototype.hideNode=function(){cc.js.array.remove(o.instancesQueue,this),this.hide()},t.prototype.updateUserConflictInfo=function(){return i(this,void 0,void 0,function(){return s(this,function(){return l.NgcNavBarManager.inst.updateUserConflictInfoCallback&&l.NgcNavBarManager.inst.updateUserConflictInfoCallback(this.localSave,this.cloudSave),[2]})})},t.staticHide=function(){o.instancesQueue.forEach(function(e){e.node&&e.hide()}),o.instancesQueue=[]},t.urlPrefab="NavBarConflictDialog",t.bundleName="02_dialog_navbar",t.dialogType="NavBarConflicttDialog",t.instancesQueue=[],a([f(u.NgcNavBarUserConflictInfo)],t.prototype,"localSave",void 0),a([f(u.NgcNavBarUserConflictInfo)],t.prototype,"cloudSave",void 0),o=a([d],t)}(c.NgcNavBarDialogBase);o.NavBarConflicttDialog=h,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager","./NavBarUserConflictInfo":"NavBarUserConflictInfo"}],NavBarDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"db17c5fcRlEA6QEbmErHOrw","NavBarDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarDialogBase=void 0;var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_navbar",t.enqueStack=[],o=a([c],t)}(i.NgcDialogBase));o.NgcNavBarDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NavBarEditNameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"32eb8KY1HROqbXo4cM23GoR","NavBarEditNameDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarEditNameDialog=void 0;var c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcUserInfo"),d=e("../../../GameFramework/Scripts/ProfanityCheck"),f=e("../../../Services/Platform/Platform"),h=e("../../../Services/Telemetry/Telemetry"),g=e("./NavBarDialogBase"),m=cc._decorator,y=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.nameNotAllowNode=null,t.editBox=null,t.okButton=null,t.loadingNode=null,t.renameSuccessNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=12,t.WRONG_PROFANITY_NAME="NAV_NAME_NOT_ALLOW",t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t.NAME_IS_EMPTY="NAV_NAME_IS_EMPTY",t}return r(t,e),t.prototype.start=function(){this.editBox.string=p.default.localUserName,this.nameNotAllowNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.showSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:20}),this.hideSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:-120}),this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.textLabel.enableBold=!1},t.prototype.onEditBoxBegan=function(){var e=this.editBox.placeholderLabel.getComponent(c.NgcLabelLocalized);l.NgcLocalizedManager.setTextKey(e,"NAV_ENTER_NAME_HERE"),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){this.renameSuccessNode.active=!1,this.editBox.string.length>this.MAX_NAME_LENGTH?(this.editBox.textLabel.string=this.editBox.string=this.editBox.string.substr(0,this.MAX_NAME_LENGTH),this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.MAX_CHARACTER_REACHED),this.nameNotAllowNode.active=!0,this.editBox.blur()):this.nameNotAllowNode.active=!1,0===this.editBox.string.length?this.okButton.interactable=!1:this.okButton.interactable=!0},t.prototype.onOkButtonClick=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,d.NgcProfanityCheck.check(this.editBox.string)];case 1:return e=t.sent(),this.nameNotAllowNode.active=!e.status,this.loadingNode.active=!1,this.okButton.interactable=!1,e.status?0==this.editBox.string.length?(this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.NAME_IS_EMPTY),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2]):(this.editBox.backgroundImage=this.grayBGSF,p.default.localUserName=u.NgcMain.inst.localUserName=this.editBox.string,p.default.changedName=!0,u.NgcMain.inst.updateNameToNanosrv(),this._callback&&this._callback(p.default.localUserName),h.NgcTelemetry.inst.LogEvent_NameEvent(this.editBox.string),f.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_CHANGENAME:!0}),"*"),this.hide(),[2]):(this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.WRONG_PROFANITY_NAME),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2])}})})},t.prototype.onChangeNameCB=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this),p.default.changeNameLocation=""},t.prototype.showSuccessText=function(){this.renameSuccessNode.active=!0,this.renameSuccessNode.opacity=0,cc.tween(this.renameSuccessNode).to(.2,{opacity:255}).start()},t.urlPrefab="NavBarEditNameDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarEditNameDialog",a([_(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),a([_(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),a([_(cc.Node)],t.prototype,"nameNotAllowNode",void 0),a([_(cc.EditBox)],t.prototype,"editBox",void 0),a([_(cc.Button)],t.prototype,"okButton",void 0),a([_(cc.Node)],t.prototype,"loadingNode",void 0),a([_(cc.Node)],t.prototype,"renameSuccessNode",void 0),a([y],t)}(g.NgcNavBarDialogBase);o.NgcNavBarEditNameDialog=v,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBBrowserDialog:[function(e,t,o){"use strict";cc._RF.push(t,"45d5bls0C1HbKpwLhaMd7n7","NavBarFBBrowserDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NavBarFBBrowserDialog",t.dialogType="NgcNavBarFBBrowserDialog",a([c],t)}(i.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBPagePluginDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d9f2eogqodM5K3wR22A1T4o","NavBarFBPagePluginDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarFBPagePluginDialog=void 0;var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbPage=null,t.FACEBOOK_PAGE_IFRAME_SRC="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FUbisoft-Nano-106342894560936&tabs=timeline&width=340&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId",t}return r(t,e),t.prototype.start=function(){this.fbPage=document.getElementsByClassName("fb-container")[0];var e=document.getElementById("fbPage-iframe");this.fbPage&&(e.src=this.FACEBOOK_PAGE_IFRAME_SRC,this.fbPage.style.position="absolute",this.fbPage.style.top="50%",this.fbPage.style.left="50%",this.fbPage.style.transform="translate(-50%, -50%)",this.fbPage.style.zIndex="1")},t.prototype.hide=function(){e.prototype.hide.call(this),this.fbPage&&(this.fbPage.style.zIndex="-1")},t.prototype.update=function(){},t.urlPrefab="NavBarFBPagePluginDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarFBPagePluginDialog",a([c],t)}(i.NgcNavBarDialogBase));o.NgcNavBarFBPagePluginDialog=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarGDPRDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4e4c0xCwCJEDIKS+7vH0bh3","NavBarGDPRDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GDPR_STEPS=void 0;var i,s=e("./NavBarDialogBase"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.ASK_COOKIES=0]="ASK_COOKIES",e[e.SET_COOKES=1]="SET_COOKES"})(i=o.GDPR_STEPS||(o.GDPR_STEPS={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t.stepsCookies=[],t.refuseNode=null,t.emoteActions=[],t.imgSprite=null,t}return r(t,e),t.prototype.registryListener=function(){cc.sys.isMobile?(this.refuseNode.on(cc.Node.EventType.TOUCH_START,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.TOUCH_CANCEL,this.unTargetRefuse.bind(this))):(this.refuseNode.on(cc.Node.EventType.MOUSE_MOVE,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.MOUSE_LEAVE,this.unTargetRefuse.bind(this)))},t.prototype.start=function(){this.registryListener()},t.prototype.destroyListener=function(){},t.prototype.targetRefuse=function(){this.onHoldRefuseBtn(!0)},t.prototype.unTargetRefuse=function(){this.onHoldRefuseBtn(!1)},t.prototype.onHoldRefuseBtn=function(e){this.imgSprite.spriteFrame=e?this.emoteActions[1]:this.emoteActions[0]},t.prototype.moveToStep=function(e){this.stepsCookies.forEach(function(e){e.active=!1}),this.stepsCookies[e].active=!0},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t,this.moveToStep(i.ASK_COOKIES)},t.prototype.okOnClick=function(){cc.log("GDPR  okOnClick"),this.hide()},t.prototype.refuseOnClick=function(){cc.log("GDPR  refuseOnClick"),this.hide()},t.prototype.acceptOnClick=function(){cc.log("GDPR  acceptOnClick"),this.hide()},t.prototype.settingOnClick=function(){cc.log("GDPR  settingOnClick"),this.moveToStep(i.SET_COOKES)},t.prototype.backOnClick=function(){cc.log("GDPR  backOnClick"),this.moveToStep(i.ASK_COOKIES)},t.prototype.hide=function(){this.destroyListener(),e.prototype.hide.call(this)},t.NavBarGPDR_Mobile="NavBarGPDR_Mobile",t.NavBarGPDR_PC="NavBarGPDR_PC",t.dialogType="NgcNavBarGDPRDialog",a([u(cc.Node)],t.prototype,"stepsCookies",void 0),a([u(cc.Node)],t.prototype,"refuseNode",void 0),a([u(cc.SpriteFrame)],t.prototype,"emoteActions",void 0),a([u(cc.Sprite)],t.prototype,"imgSprite",void 0),a([l],t)}(s.NgcNavBarDialogBase);o.default=p,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarHowToPlayDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e6bb2EoDBtE2oIQtEltGAzR","NavBarHowToPlayDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarHowToPlayDialog=void 0;var i=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../Tips/Script/TipManager"),l=e("./NavBarDialogBase"),u=e("./NavBarTipItem"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipItem=null,t.scrollView=null,t.tipConfig=null,t.tips=[],t}return r(t,e),t.prototype.start=function(){this.initTips()},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.initTips=function(){this.parseInputConfigFile()&&this.loadTipSpriteFrames()},t.prototype.parseInputConfigFile=function(){var e=this;c.NgcTipManager.staticTipConfig&&(this.tipConfig=c.NgcTipManager.staticTipConfig);var t=this.tipConfig.text.split("\r\n");t.shift();try{t.forEach(function(t){var o=t.split("|"),n=o[0];if(null!=n&&0!=n.length&&""!=n){var r=o[1],a=c.Type_Tip.Both;switch(o[2].toLowerCase()){case"mobile":a=c.Type_Tip.Mobile;break;case"desktop":a=c.Type_Tip.Desktop;break;default:a=c.Type_Tip.Both}var i=new c.Tip(a,n,r,null);a==c.Type_Tip.Both?e.tips.push(i):cc.sys.isMobile&&a==c.Type_Tip.Mobile?e.tips.push(i):cc.sys.isMobile||a!=c.Type_Tip.Desktop||e.tips.push(i)}})}catch(o){return console.error("Error reading configTip file. Format error?"),!1}return!0},t.prototype.loadTipSpriteFrames=function(){var e=this;cc.assetManager.loadBundle(i.NgcBuildConfig.services.Tips.bundles,function(t,o){e.tips.forEach(function(t){o.load(t.imageName,cc.SpriteFrame,function(o,n){if(!o){t.spriteFrame=n;var r=cc.instantiate(e.tipItem),a=r.getComponent(u.NgcNavBarTipItem);a.tipLabel.string=s.NgcLocalizedManager.t(t.textKey).text,a.tipImg.spriteFrame=t.spriteFrame,r.parent=e.scrollView.content}})})})},t.urlPrefab="NavBarHowToPlayDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarHowToPlayDialog",a([f(cc.Prefab)],t.prototype,"tipItem",void 0),a([f(cc.ScrollView)],t.prototype,"scrollView",void 0),a([f(cc.TextAsset)],t.prototype,"tipConfig",void 0),a([d],t)}(l.NgcNavBarDialogBase);o.NgcNavBarHowToPlayDialog=h,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Tips/Script/TipManager":"TipManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarTipItem":"NavBarTipItem"}],NavBarItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"98ef35kBepPoIfUalI8lXq+","NavBarItemSelectLanguage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarItemSelectLanguage=void 0;var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.languageCode="",t.iconCheckSprite=null,t.languageLb=null,t.backGroundNode=null,t.iconChecked=null,t.iconUnchecked=null,t.callBackFn=null,t.COLOR_UNCHECKED="#FFFFFF",t.COLOR_CHECKED="#B4CDE3",t}return r(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this._isSelected?(this.iconCheckSprite.spriteFrame=this.iconChecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_CHECKED)):(this.iconCheckSprite.spriteFrame=this.iconUnchecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_UNCHECKED))},enumerable:!1,configurable:!0}),t.prototype.setInfo=function(e,t,o,n,r){this.nameItem=t,this.languageLb.string=t,this.languageCode=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.languageCode))},t.urlPrefab="NavBarItemSelectLanguage",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarItemSelectLanguage",a([l],t.prototype,"nameItem",void 0),a([l],t.prototype,"languageCode",void 0),a([l(cc.Sprite)],t.prototype,"iconCheckSprite",void 0),a([l(cc.Label)],t.prototype,"languageLb",void 0),a([l(cc.Node)],t.prototype,"backGroundNode",void 0),a([l(cc.SpriteFrame)],t.prototype,"iconChecked",void 0),a([l(cc.SpriteFrame)],t.prototype,"iconUnchecked",void 0),a([c],t)}(i.NgcNavBarDialogBase);o.NgcNavBarItemSelectLanguage=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLeaveGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2e7f5iSO01Ou7FOix0uwSOa","NavBarLeaveGameDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callLeave=null,t}var o;return r(t,e),o=t,t.prototype.show=function(){e.prototype.show.call(this),o.isOpening=!0},t.prototype.start=function(){},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callLeave=e},t.prototype.onClickLeaveBtn=function(){window.allowBack=!0,history.back(),this.hide()},t.prototype.onClickCancelBtn=function(){this.hide()},t.prototype.hide=function(){o.isOpening=!1,e.prototype.hide.call(this)},t.NavBarLeaveGame_Mobile="NavBarConfirmLeave_Mobile",t.NavBarLeaveGame_PC="NavBarConfirmLeave_PC",t.dialogType="NgcNavBarLeaveGameDialog",t.isOpening=!1,o=a([c],t)}(i.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLoginSocialDialog:[function(e,t,o){"use strict";cc._RF.push(t,"02bb3l5unNA1JLDDrLH60/p","NavBarLoginSocialDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarLoginSocialDialog=void 0;var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../Services/Leaderboard/Leaderboard"),p=e("../../../Services/Platform/Platform"),d=e("../../../Services/Social/Social"),f=e("../../../Services/Telemetry/Telemetry"),h=e("../../TechMessage/Script/TechMessages"),g=e("./NavBarDialogBase"),m=e("./NavBarManager"),y=cc._decorator,_=y.ccclass,v=y.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbLogin=null,t.uplayLogin=null,t.isFBLoginOpen=!1,t.isUplayLoginOpen=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.init=function(e){this._onSocialCallBack=e},t.prototype.show=function(){1!==d.NgcSocial.srvInstances.length?e.prototype.show.call(this):this.onLoginButtonClick(d.NgcSocial.inst.getSocialType())},t.prototype.onFacebookLoginClick=function(){return i(this,void 0,void 0,function(){return s(this,function(){return h.default.showWarningLoginWithWebview()||this.onLoginButtonClick(d.SocialType.Facebook),[2]})})},t.prototype.onUplayLoginClick=function(){return i(this,void 0,void 0,function(){return s(this,function(){return h.default.showWarningLoginWithWebview()||this.onLoginButtonClick(d.SocialType.Uplay),[2]})})},t.prototype.onLoginButtonClick=function(e){return i(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return t=!1,c.NgcBuildConfig.serverSplitting?[4,p.NgcPlatform.inst.isWebLoginPopupOpen()]:[3,2];case 1:o=r.sent(),t=d.NgcSocial.inst&&d.NgcSocial.inst.isLoginPopUpOpen()||o,this.fbLogin.interactable=this.uplayLogin.interactable=!t,r.label=2;case 2:if(!t){if(p.NgcPlatform.inst.isCallbackFromHost=!1,f.NgcTelemetry.inst.LogEvent_LoginAttempt(d.NgcSocial.inst.getName()),d.NgcSocial.inst=d.NgcSocial.getSrvInstance(e),(n=this)._onSocialCallBack(null,"onPreLogin"),d.NgcSocial.inst.login(function(e,t){e?n._onSocialCallBack&&n._onSocialCallBack(e,null):("Conflict"===t?l.NgcMain.inst.resolveSocialConflict(function(e,t){n._onSocialCallBack(e,t),n.onLoginSuccess()}):(n._onSocialCallBack(null,"login"),n.onLoginSuccess()),f.NgcTelemetry.inst.LogEvent_LoginSuccess("fb:"+d.NgcSocial.inst.getSocialID(),{Name:d.NgcSocial.inst.getFormatName(),AvatarUrl:d.NgcSocial.inst.getProfilePictureUrl(),FriendList:d.NgcSocial.inst.getFriendsData()}))}),n._onSocialCallBack)return this.node.active=!1,[2];this.hide()}return[2]}})})},t.prototype.update=function(){if(!c.NgcBuildConfig.serverSplitting){var e=!1;window.parent&&(e=window.parent.ubiWindow&&!window.parent.ubiWindow.closed||window.parent.fbWindow);var t=d.NgcSocial.inst&&d.NgcSocial.inst.isLoginPopUpOpen()||e;this.fbLogin.interactable=this.uplayLogin.interactable=!t}},t.prototype.onButtonCloseClick=function(){this._onSocialCallBack&&this._onSocialCallBack(null,"close"),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onLoginSuccess=function(){m.NgcNavBarManager.inst.updateListEffectBtn(),m.NgcNavBarManager.inst.setNavBarInfo(),u.NgcLeaderboard.inst.clearCacheRequestData(),p.NgcPlatform.inst.onSocialLogInFromGame()},t.urlPrefab="NavBarLoginSocialDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarLoginSocialDialog",t.uplayLoginWindow=null,a([v(cc.Button)],t.prototype,"fbLogin",void 0),a([v(cc.Button)],t.prototype,"uplayLogin",void 0),a([_],t)}(g.NgcNavBarDialogBase);o.NgcNavBarLoginSocialDialog=S,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../TechMessage/Script/TechMessages":"TechMessages","./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager"}],NavBarManager:[function(e,t,o){"use strict";cc._RF.push(t,"b2e69kLRItBnZ59jZWRHkuQ","NavBarManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarManager=o.NavBarState=void 0;var l,u,p=e("../../../../Scripts/Main"),d=e("../../../Core/Utils"),f=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),h=e("../../../GameFramework/Scripts/BuildConfig"),g=e("../../../GameFramework/Scripts/CountryFlagsManager"),m=e("../../../GameFramework/Scripts/NgcMain"),y=e("../../../GameFramework/Scripts/NgcScreenManager"),_=e("../../../GameFramework/Scripts/NgcUserInfo"),v=e("../../../SDK/Nano/NanoSrv"),S=e("../../../Services/Inventory/Inventory"),b=e("../../../Services/Platform/Platform"),N=e("../../../Services/Social/Social"),P=e("../../../Services/Telemetry/Telemetry"),I=e("../../DailyReward/Script/DailyRewardManager"),C=e("../../Dialogs/Script/MessageDialog/MessageDialog"),w=e("../../Dialogs/Script/NgcDialogManager"),O=e("../../GameMode/Script/GameModeManager"),T=e("./NavBarA2HSInstalledNotice"),E=e("./NavBarA2HSNotSupportTotally_Mobile"),M=e("./NavBarA2HSNotSupport_Mobile"),D=e("./NavBarA2HSNotSupport_PC"),R=e("./NavBarAboutDialog"),B=e("./NavBarConfirmDialog"),A=e("./NavBarDialogBase"),k=e("./NavBarEditNameDialog"),L=e("./NavBarFBBrowserDialog"),G=e("./NavBarFBPagePluginDialog"),F=e("./NavBarHowToPlayDialog"),j=e("./NavBarLoginSocialDialog"),U=e("./NavBarNoticeDialog"),x=e("./NavBarSettingsDialog"),H=e("./NavBarShareDialog"),V=e("./NgcA2HSManager.ts"),z=cc._decorator,W=z.ccclass,K=z.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(l=o.NavBarState||(o.NavBarState={})),function(e){e[e.Support=0]="Support",e[e.Alternative=1]="Alternative",e[e.NotSupport=2]="NotSupport"}(u||(u={}));var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.mainContent=null,t.colorBand=null,t.colorAnim=null,t.editNode=null,t.logedInTxtNode=null,t.loginNode=null,t.logOutNode=null,t.layOutNode=null,t.profileNode=null,t.moreGameNode=null,t.userAvatarSprite=null,t.countryFlagSprite=null,t.playerNameLabel=null,t.socialName=null,t.defaultAvatar=null,t.addToHomeIcon=null,t.addToHomeSF_Moblie=null,t.addToHomeSF_PC=null,t.addToHomeMobiletxt=null,t.addToHomePCtxt=null,t.effectMainBtn=null,t.effectA2HSBtn=null,t.effectShareGameBtn=null,t.effectLoginBtn=null,t.addToHomeNode=null,t.shareNode=null,t.currentGamesNode=null,t.likeUsNode=null,t.moreGameSprite=null,t.flashAnims=[],t.navOnOFFButton=null,t.backToAppButton=null,t.NANO_URL="https://nano.ubisoft.com/",t.NANO_FB_PAGE="https://www.facebook.com/UbisoftMobile",t.BRAND_URL="https://rabbids.ubisoft.com/",t.LOG_OUT_TITTLE="NAV_LOG_OUT",t.LOG_OUT_MSG="SNS_LOG_OUT_MSG",t.MoreGameIconUrl="https://nano-storage.s3-us-west-2.amazonaws.com/DEV/RWR/image_more_games.png",t._sendHideAdsTrackerInNavBar=null,t.onNavBarClose=null,t.onNavBarShow=null,t.updateUserConflictInfoCallback=null,t._isFirstTimeCheckA2HS=!0,t._curState=null,t._isMoving=!1,t._xPosMainHide=0,t._xPosMainShow=0,t._xPosButtonsHide=0,t._xPosButtonShow=0,t.listNoticeButtons=[],t._navBtnMoving=!1,t._touchStartTimer=0,t.isExitConfirmationDialogShowing=!1,t.onSocialCallBack=null,t}var o;return r(t,e),o=t,t.prototype.setOnNavBarCloseCallback=function(e){this.onNavBarClose=e},t.prototype.setOnNavBarShowCallback=function(e){this.onNavBarShow=e},t.prototype.setUpdateConflictInfoCallBack=function(e){this.updateUserConflictInfoCallback=e},t.prototype.setHideAdsTracker=function(e){this._sendHideAdsTrackerInNavBar=e},Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},set:function(e){var t=this;if(this._curState!=e){this._isMoving=!0;var o=this._xPosMainHide,n=this._xPosButtonsHide,r=0,a=0,i=0,s=[];switch(this.layOutNode.children.forEach(function(e){e.active&&s.push(e)}),e){case l.Hide:o=this._xPosMainHide,n=this._xPosButtonsHide,r=500,a=0,i=.03*s.length,this.effectMainBtn.active=!0;break;case l.Show:this.onNavBarShow&&this.onNavBarShow(),o=this._xPosMainShow,n=this._xPosButtonShow,r=480,a=120,this.effectMainBtn.active=!1}cc.tween(this.mainContent).delay(i).to(.2,{x:o}).call(function(){t._isMoving=!1,e==l.Hide&&t.onNavBarClose&&t.onNavBarClose()}).start(),cc.tween(this.profileNode).to(.25,{x:n}).start(),s.forEach(function(e,t){cc.tween(e).to(.3+.05*t,{x:n}).start()}),this.background.active=!0,cc.tween(this.background).to(.2,{opacity:a}).call(function(){t.background.active=e==l.Show}).start(),this._curState=e,cc.tween(this.effectMainBtn.parent).parallel(cc.tween().to(.1,{scaleX:1.6}).to(.1,{scaleX:1}),cc.tween().to(.3,{x:520}).delay(.2).to(.2,{x:r})).start(),cc.tween(this.colorBand).to(.3,{scaleX:3}).delay(.2).to(.2,{scaleX:1}).start(),this.updateListEffectBtn()}},enumerable:!1,configurable:!0}),t.prototype.isPopUpShowing=function(){return 0!=A.NgcNavBarDialogBase.enqueStack.length},t.prototype.getShowingPopUp=function(){return A.NgcNavBarDialogBase.enqueStack},t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.navOnOFFButton||(this.navOnOFFButton=this.mainContent.getChildByName("ButtonOnOffNavBar")),this.navOnOFFButton.on("touchstart",this.onTouchStart.bind(this)),this.navOnOFFButton.on("touchmove",this.onTouchMove.bind(this)),this.navOnOFFButton.on("touchend",this.onTouchEnd.bind(this)),cc.sys.isMobile?window.addEventListener("resize",this.updateOnOffButotnPos.bind(this)):cc.view.on("canvas-resize",this.updateOnOffButotnPos.bind(this),this),this.init(),this.node.active=!1,h.NgcBuildConfig.offlineMode&&d.findNode(this,/scrollview>view>layout$/).children.forEach(function(e){e.active="HowToPlay"==e.name})},t.prototype.onTouchStart=function(){this._navBtnMoving=!1,this._touchStartTimer=Date.now()},t.prototype.onTouchMove=function(e){if(this._curState!==l.Show){var t=this.mainContent.getChildByName("LimitTop"),o=this.mainContent.getChildByName("LimitBottom"),n=d.Utils.getWorldPos(t).y,r=d.Utils.getWorldPos(o).y,a=(e.getLocationX(),e.getLocationY());if(!(a>n||a<r||Date.now()-this._touchStartTimer<100)){var i=this.navOnOFFButton.getComponent(cc.Widget);this._navBtnMoving=!0,i.enabled=!1;var s=d.Utils.getWorldPos(this.navOnOFFButton);d.Utils.setWorldPos(this.navOnOFFButton,cc.v2(s.x,a))}}},t.prototype.onTouchEnd=function(){if(this._navBtnMoving){var e=this.navOnOFFButton.getComponent(cc.Widget);if(e){var t=d.Utils.getWorldPos(this.navOnOFFButton).y,o=cc.find("Canvas");e.top=o.height-(t+this.navOnOFFButton.height/2),e.enabled=!0}}(Date.now()-this._touchStartTimer<100||!this._navBtnMoving)&&this.mainBtnOnClick(),this._navBtnMoving=!1},t.prototype.updateOnOffButotnPos=function(){var e=this.navOnOFFButton.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.top=h.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height+5,e.updateAlignment()},t.prototype.init=function(){var e=this;this.updateOnOffButotnPos(),this.background.opacity=0,this.background.active=!1,this._xPosMainShow=0,this._xPosButtonShow=20,this._xPosMainHide=-this.mainContent.width-this.colorBand.width,this._xPosButtonsHide=this._xPosMainHide,this.mainContent.x=this._xPosMainHide,this._curState=l.Hide,this.layOutNode.children.forEach(function(t){t.x=e._xPosMainHide}),this.colorAnim.scaleY=this.colorBand.height/840,this.applyPlatformType(),this.updateListEffectBtn(),v.default.setOnResetCallback(this.onNanoSrvResetCallback),this.checkAndShowA2HSOnStart(),this.backToAppButton.active=b.NgcPlatform.isRunFromApp(),this.backToAppButton.getComponent(cc.Widget).alignMode=cc.Widget.AlignMode.ALWAYS},t.prototype.onBackToAppButtonClick=function(){return i(this,void 0,void 0,function(){return s(this,function(){return this.curState=l.Hide,this.onBackToAppOK(),[2]})})},t.prototype.onQuitGame=function(){return i(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.isExitConfirmationDialogShowing?[2]:(this.isExitConfirmationDialogShowing=!0,this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(B.NgcNavBarConfirmDialog.dialogType,B.NgcNavBarConfirmDialog.urlPrefab,B.NgcNavBarConfirmDialog.bundleName)]);case 1:return e=n.sent(),(t=e.getComponent(B.NgcNavBarConfirmDialog)).init("","NAV_QUIT_CONFIRM",function(){console.log("Quit game----OK-"),cc.game.end()},function(){o.isExitConfirmationDialogShowing=!1},!1),t.dialogNode.height=410,t.show(),[2]}})})},t.prototype.onBackToAppOK=function(){b.NgcPlatform.inst&&b.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_BACK_TO_APP_BUTTON:!0}),"*")},t.prototype.updateRemote=function(){var e=this;v.default.inst&&v.default.inst.loginData&&v.default.inst.loginData.gameInfo.navbar&&(v.default.inst.loginData.gameInfo.navbar.remoteData.forEach(function(t){switch("NANO_URL"==t.LINK_CODE&&(e.NANO_URL=t.LINK),t.LINK_CODE){case"NANO_URL":e.NANO_URL=t.LINK;break;case"RABBID_URL":e.BRAND_URL=t.LINK}}),cc.assetManager.loadRemote(v.default.inst.loginData.gameInfo.navbar.moreGames,cc.SpriteFrame,function(t,o){t&&console.error(t),e.moreGameSprite.spriteFrame=new cc.SpriteFrame(o)}))},t.prototype.mainBtnOnClick=function(){this._isMoving||y.default.inst.isSwitching||(this.curState==l.Show?this.curState=l.Hide:this.curState==l.Hide&&(f.default.inst.hide(),this.setNavBarInfo(),this.curState=l.Show),this.updateListEffectBtn())},t.prototype.setNavBarInfo=function(){var e=this;h.NgcBuildConfig.services.NavBar.loginButton&&N.NgcSocial.inst?(this.loginNode.active=this.editNode.active=!_.default.isUserLogined(),this.logOutNode.active=this.logedInTxtNode.active=_.default.isUserLogined()):this.loginNode.active=this.logOutNode.active=this.logedInTxtNode.active=!1,h.NgcBuildConfig.offlineMode&&(this.loginNode.active=!1),b.NgcPlatform.isRunFromApp()&&(this.loginNode.active=!1,this.logOutNode.active=!1),N.NgcSocial.inst&&_.default.isUserLogined()?(_.default.avatarUrl&&d.Utils.loadSpriteFrameFromURL(_.default.avatarUrl).then(function(t){e.userAvatarSprite.spriteFrame=t}).catch(function(){console.log("Load url: "+_.default.avatarUrl+" - FAILED"),e.userAvatarSprite.spriteFrame=e.defaultAvatar}),this.socialName.string="Uplay"===N.NgcSocial.inst.getName()?"Ubisoft":N.NgcSocial.inst.getName()):this.userAvatarSprite.spriteFrame=this.defaultAvatar,this.playerNameLabel.string=_.default.localUserName,this.countryFlagSprite.spriteFrame=g.NgcCountryFlagsManager.inst.getFlagSpriteFrame(g.NgcCountryFlagsManager.localCountry),this.addToHomeIcon.spriteFrame=cc.sys.isMobile?this.addToHomeSF_Moblie:this.addToHomeSF_PC,this.addToHomeMobiletxt.active=cc.sys.isMobile,this.addToHomePCtxt.active=!this.addToHomeMobiletxt.active},t.prototype.setChangeNameCallBack=function(e){this.onChangeNameCallBack=e},t.prototype.setLoginSocialCallBack=function(e){this.onSocialCallBack=e},t.prototype.invokeOnSocialCallBack=function(e,t){null!=this.onSocialCallBack&&this.onSocialCallBack(e,t),p.Main.invokeOnSocialCallBack(e,t),this.onSocialInteraction(e,t),o.inst.updateListEffectBtn()},t.prototype.onSocialInteraction=function(e,t){return i(this,void 0,void 0,function(){return s(this,function(){return"login"!==t&&"logout"!==t||(S.NgcInventory.inst.forceFetchInventory().then(function(){O.NgcGameModeManager.inst.refresh()}),cc.error("onSocialInteraction",e,"result",t),_.default.supportCode="",cc.systemEvent.emit("refreshShop",e,t),cc.systemEvent.emit("refreshCrownRoad",e,t),cc.systemEvent.emit("refreshLDB",e,t),cc.systemEvent.emit("refreshNameBox",e,t)),"login"===t&&I.NgcDailyRewardManager.inst.checkReward(),[2]})})},t.prototype.editOnClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return _.default.changeNameLocation="SideBar",this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(k.NgcNavBarEditNameDialog.dialogType,k.NgcNavBarEditNameDialog.urlPrefab,k.NgcNavBarEditNameDialog.bundleName)];case 1:return e=o.sent(),t=e.getComponent(k.NgcNavBarEditNameDialog),this.onChangeNameCallBack&&t.onChangeNameCB(this.onChangeNameCallBack),t.show(),[2]}})})},t.prototype.logInOnClick=function(e){return i(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return h.NgcBuildConfig.services.NavBar.loginButton?(t=this,this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(j.NgcNavBarLoginSocialDialog.dialogType,j.NgcNavBarLoginSocialDialog.urlPrefab,j.NgcNavBarLoginSocialDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return o=r.sent(),(n=o.getComponent(j.NgcNavBarLoginSocialDialog)).init(function(e,o){t.invokeOnSocialCallBack(e,o),null!=o&&"onPreLogin"!=o&&n.hide()}),n.show(),[2]}})})},t.prototype.checkA2HSResult=function(e){switch(e){case"accepted":console.log("User accepted the A2HS prompt"),P.NgcTelemetry.inst.LogEvent_AddToHomeComplete("NavigationBar"),window.deferredPrompt=null,_.default.added_A2HS=!0;break;case"denied":console.log("User dismissed the A2HS prompt");break;case"installed":cc.screen.fullScreen()&&this.showInstalledA2HS()}},t.prototype.showInstalledA2HS=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,w.NgcDialogManager.createDialog(T.NgcNavBarA2HSInstalledNotice.dialogType,T.NgcNavBarA2HSInstalledNotice.urlPrefab,T.NgcNavBarA2HSInstalledNotice.bundleName)];case 1:return e.sent().getComponent(T.NgcNavBarA2HSInstalledNotice).show(),[2]}})})},t.prototype.addToHomeOnClick=function(e){return i(this,void 0,void 0,function(){var t,o,n,r,a,c=this;return s(this,function(p){switch(p.label){case 0:return h.NgcBuildConfig.services.NavBar.addToHomeButton?d.Utils.isRunningWithFacebookApp()?[4,w.NgcDialogManager.createDialog(L.default.dialogType,L.default.urlPrefab,L.default.bundleName)]:[3,2]:(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return(a=p.sent()).getComponent(L.default).show(),[2];case 2:if(t=function(){return i(c,void 0,void 0,function(){var e,t=this;return s(this,function(o){switch(o.label){case 0:return e=function(e){var o="accepted"===e.outcome?"accepted":"denied";t.checkA2HSResult(o)},window.deferredPrompt?(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then(e),[3,3]):[3,1];case 1:return[4,w.NgcDialogManager.createDialog(T.NgcNavBarA2HSInstalledNotice.dialogType,T.NgcNavBarA2HSInstalledNotice.urlPrefab,T.NgcNavBarA2HSInstalledNotice.bundleName)];case 2:o.sent().getComponent(T.NgcNavBarA2HSInstalledNotice).show(),o.label=3;case 3:return[2]}})})},this.curState=l.Hide,P.NgcTelemetry.inst.LogEvent_AddToHomeInit("NavigationBar"),o=function(){return i(c,void 0,void 0,function(){return s(this,function(){return b.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_WEB_A2HS_BUTTON_FUNCTION:!0}),"*"),[2]})})},n=null,r=this.checkA2HSSupport(cc.sys.os,cc.sys.browserType),!cc.sys.isMobile)return[3,9];switch(r){case u.Support:return[3,3];case u.Alternative:return[3,4];case u.NotSupport:return[3,6]}return[3,6];case 3:return t(),[2];case 4:return[4,w.NgcDialogManager.createDialog(M.NavBarA2HSNotSupport_Mobile.dialogType,M.NavBarA2HSNotSupport_Mobile.urlPrefab,M.NavBarA2HSNotSupport_Mobile.bundleName)];case 5:return a=p.sent(),n=a.getComponent(M.NavBarA2HSNotSupport_Mobile),[3,8];case 6:return[4,w.NgcDialogManager.createDialog(E.NavBarA2HSNotSupportTotally_Mobile.dialogType,E.NavBarA2HSNotSupportTotally_Mobile.urlPrefab,E.NavBarA2HSNotSupportTotally_Mobile.bundleName)];case 7:return a=p.sent(),n=a.getComponent(E.NavBarA2HSNotSupportTotally_Mobile),[3,8];case 8:return[3,13];case 9:switch(r){case u.Support:return[3,10];case u.Alternative:case u.NotSupport:return[3,11]}return[3,11];case 10:return b.NgcPlatform.isRunAsIframeOnNano()?o():t(),[2];case 11:return[4,w.NgcDialogManager.createDialog(D.NavBarA2HSNotSupport_PC.dialogType,D.NavBarA2HSNotSupport_PC.urlPrefab,D.NavBarA2HSNotSupport_PC.bundleName)];case 12:return a=p.sent(),n=a.getComponent(D.NavBarA2HSNotSupport_PC),[3,13];case 13:return n.show(),[2]}})})},t.prototype.showNotSupportA2HSPlatformDialog=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=cc.sys.isMobile?U.default.NavBarA2HSRedirectDialog_Mobile:U.default.NavBarA2HSRedirectDialog_PC,[4,w.NgcDialogManager.createDialog(U.default.dialogType,e,U.default.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(U.default)).init(function(){V.default.gotoNano()}),o.show(),[2]}})})},t.prototype.shareOnClick=function(e){return i(this,void 0,void 0,function(){var t,o,n;return s(this,function(r){switch(r.label){case 0:return h.NgcBuildConfig.services.NavBar.shareButton?(this.curState=l.Hide,b.NgcPlatform.isRunFromApp()?(t=h.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native",b.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:t}}),"*"),_.default.sharedGame_NavBar=!0,[3,3]):[3,1]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return[4,w.NgcDialogManager.createDialog(H.NgcNavBarShareDialog.dialogType,H.NgcNavBarShareDialog.urlPrefab,H.NgcNavBarShareDialog.bundleName)];case 2:o=r.sent(),(n=o.getComponent(H.NgcNavBarShareDialog)).init("NavigationBar"),n.show(),r.label=3;case 3:return[2]}})})},t.prototype.settingOnClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return h.NgcBuildConfig.services.NavBar.settingButton?(this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(x.NgcNavBarSettingsDialog.dialogType,x.NgcNavBarSettingsDialog.urlPrefab,x.NgcNavBarSettingsDialog.bundleName)]):(this.showNotice(event.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return e=o.sent(),(t=e.getComponent(x.NgcNavBarSettingsDialog)).init(),t.show(),[2]}})})},t.prototype.aboutOnClick=function(e){return void 0===e&&(e=null),i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return h.NgcBuildConfig.services.NavBar.abountButton?(this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(R.NgcNavBarAboutDialog.dialogType,R.NgcNavBarAboutDialog.urlPrefab,R.NgcNavBarAboutDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(R.NgcNavBarAboutDialog).show(),[2]}})})},t.prototype.howToPlayOnClick=function(e){return void 0===e&&(e=null),i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return h.NgcBuildConfig.services.NavBar.howtoPlayButton?(this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(F.NgcNavBarHowToPlayDialog.dialogType,F.NgcNavBarHowToPlayDialog.urlPrefab,F.NgcNavBarHowToPlayDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(F.NgcNavBarHowToPlayDialog).show(),[2]}})})},t.prototype.currentGamesOnClick=function(e){h.NgcBuildConfig.services.NavBar.currentGamesButton?(this.curState=l.Hide,P.NgcTelemetry.inst.LogEvent_BrandGameInit("NavigationBar"),cc.sys.openURL(this.BRAND_URL)):this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB")},t.prototype.logOutOnClick=function(){return i(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return this.curState=l.Hide,[4,w.NgcDialogManager.createDialog(B.NgcNavBarConfirmDialog.dialogType,B.NgcNavBarConfirmDialog.urlPrefab,B.NgcNavBarConfirmDialog.bundleName)];case 1:return e=n.sent(),(t=e.getComponent(B.NgcNavBarConfirmDialog)).init(this.LOG_OUT_TITTLE,this.LOG_OUT_MSG,function(){b.NgcPlatform.inst.isCallbackFromHost=!1,N.NgcSocial.inst.checkLoginStatus().finally(function(){b.NgcPlatform.inst.onSocialLogOutFromGame(),v.default.inst.resetUserID().finally(function(){m.NgcMain.inst.createFakeName(),_.default.setAccountLinkData(),b.NgcPlatform.inst.isLogoutFromGame=!0;try{N.NgcSocial.inst.logout()}catch(e){console.warn(e)}N.NgcSocial.inst.onLogoutSuccesCallback&&N.NgcSocial.inst.onLogoutSuccesCallback(),o.invokeOnSocialCallBack(null,"logout")})})},null),t.show(),[2]}})})},t.prototype.moreGamesOnClick=function(e){h.NgcBuildConfig.services.NavBar.moreGamesButton?(this.curState=l.Hide,P.NgcTelemetry.inst.LogEvent_MoreGameInit("NavigationBar"),cc.sys.openURL(this.NANO_URL)):this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB")},t.prototype.likeUsOnClick=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return h.NgcBuildConfig.services.NavBar.likeUsButton?(this.curState=l.Hide,P.NgcTelemetry.inst.LogEvent_LikeUsInit("NavigationBar"),[4,w.NgcDialogManager.createDialog(G.NgcNavBarFBPagePluginDialog.dialogType,G.NgcNavBarFBPagePluginDialog.urlPrefab,G.NgcNavBarFBPagePluginDialog.bundleName)]):(this.showNotice(e.target,"NGG_NOT_AVAILABLE_ON_THIS_WEB"),[2]);case 1:return t.sent().getComponent(G.NgcNavBarFBPagePluginDialog).show(),[2]}})})},t.prototype.hideNabarOnClick=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.curState=l.Hide,this.updateListEffectBtn()},t.prototype.updateListEffectBtn=function(){this.effectA2HSBtn.active=this.addToHomeNode.active&&!_.default.added_A2HS,this.effectShareGameBtn.active=this.shareNode.active&&!_.default.sharedGame_NavBar;var e=this.loginNode.active&&!_.default.isUserLogined();this.effectMainBtn.active=this.effectA2HSBtn.active||this.effectShareGameBtn.active||e,this.flashAnims.forEach(function(e){e.play("flash")})},t.prototype.update=function(){var e=this.colorBand.height/840;this.colorAnim.scaleY!=e&&(this.colorAnim.scaleY=e)},t.prototype.checkA2HSSupport=function(e,t){console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport os ",e),console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport browser ",t),console.log("@@@@@@@@@@@@@@@@@ checkA2HSSupport cc.sys.OS_OSX ",cc.sys.OS_OSX);var o={},n=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],r=[cc.sys.BROWSER_TYPE_CHROME,cc.sys.BROWSER_TYPE_FIREFOX,cc.sys.BROWSER_TYPE_EDGE,cc.sys.BROWSER_TYPE_IE,cc.sys.BROWSER_TYPE_OPERA,cc.sys.BROWSER_TYPE_ANDROID];return o=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],n.forEach(function(e){return o[e]=c(r)}),o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_CHROME]=u.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_FIREFOX]=u.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_SAFARI]=u.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_EDGE]=u.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_IE]=u.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_OPERA]=u.NotSupport,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_ANDROID]=u.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_CHROME]=u.Support,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_FIREFOX]=u.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_SAFARI]=u.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_EDGE]=u.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_IE]=u.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_OPERA]=u.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_ANDROID]=u.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_CHROME]=u.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_FIREFOX]=u.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_SAFARI]=u.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_EDGE]=u.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_IE]=u.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_OPERA]=u.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_ANDROID]=u.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_CHROME]=u.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_FIREFOX]=u.NotSupport,(cc.sys.OS_IOS!==e&&cc.sys.OS_OSX!==e||!["FxiOS","EdgiOS","CriOS"].some(function(e){return navigator.userAgent.includes(e)&&console.log("## browser for Iso name = "+e),navigator.userAgent.includes(e)}))&&o.hasOwnProperty(e)&&o[e].hasOwnProperty(t)?o[e][t]:u.NotSupport},t.prototype.showNotice=function(e,t){return i(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return[4,w.NgcDialogManager.createDialog(C.NgcMessageDialog.dialogType,C.NgcMessageDialog.urlPrefab,C.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(C.NgcMessageDialog)).init(t),n.show(null,e,20,null,.6),[2]}})})},t.prototype.checkAndShowA2HSOnStart=function(){V.default.shouldA2HS()&&V.default.isValidOrigin()&&this._isFirstTimeCheckA2HS&&(this.showA2HSDialog(),this._isFirstTimeCheckA2HS=!1)},t.prototype.showA2HSDialog=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r,a=this;return s(this,function(i){switch(i.label){case 0:return e=cc.sys.isMobile?U.default.NavBarA2HSNoticeDialog_Mobile:U.default.NavBarA2HSNoticeDialog_PC,[4,w.NgcDialogManager.createDialog(U.default.dialogType,e,U.default.bundleName)];case 1:return t=i.sent(),o=t.getComponent(U.default),n=function(){a.addToHomeOnClick(null),V.default.removeA2HSParameter()},r=function(){V.default.removeA2HSParameter()},o.init(n.bind(this),r),o.show(),[2]}})})},t.prototype.showAllNavBar=function(e){this.node.active=e},t.prototype.applyPlatformType=function(){null===h.NgcBuildConfig.buildPlatform&&void 0===h.NgcBuildConfig.buildPlatform||(this.loginNode.active=!b.NgcPlatform.isRunFromApp()&&h.NgcBuildConfig.services.NavBar.loginButton&&!!N.NgcSocial.inst,this.addToHomeNode.active=h.NgcBuildConfig.services.NavBar.addToHomeButton&&!b.NgcPlatform.isRunFromApp(),this.shareNode.active=h.NgcBuildConfig.services.NavBar.shareButton,this.moreGameNode.active=h.NgcBuildConfig.services.NavBar.moreGamesButton,this.currentGamesNode.active=h.NgcBuildConfig.services.NavBar.currentGamesButton,this.likeUsNode.active=h.NgcBuildConfig.services.NavBar.likeUsButton)},t.prototype.onNanoSrvResetCallback=function(){o.inst.setNavBarInfo()},t.inst=null,a([K(cc.Node)],t.prototype,"background",void 0),a([K(cc.Node)],t.prototype,"mainContent",void 0),a([K(cc.Node)],t.prototype,"colorBand",void 0),a([K(cc.Node)],t.prototype,"colorAnim",void 0),a([K(cc.Node)],t.prototype,"editNode",void 0),a([K(cc.Node)],t.prototype,"logedInTxtNode",void 0),a([K(cc.Node)],t.prototype,"loginNode",void 0),a([K(cc.Node)],t.prototype,"logOutNode",void 0),a([K(cc.Node)],t.prototype,"layOutNode",void 0),a([K(cc.Node)],t.prototype,"profileNode",void 0),a([K(cc.Node)],t.prototype,"moreGameNode",void 0),a([K(cc.Sprite)],t.prototype,"userAvatarSprite",void 0),a([K(cc.Sprite)],t.prototype,"countryFlagSprite",void 0),a([K(cc.Label)],t.prototype,"playerNameLabel",void 0),a([K(cc.Label)],t.prototype,"socialName",void 0),a([K(cc.SpriteFrame)],t.prototype,"defaultAvatar",void 0),a([K(cc.Sprite)],t.prototype,"addToHomeIcon",void 0),a([K(cc.SpriteFrame)],t.prototype,"addToHomeSF_Moblie",void 0),a([K(cc.SpriteFrame)],t.prototype,"addToHomeSF_PC",void 0),a([K(cc.Node)],t.prototype,"addToHomeMobiletxt",void 0),a([K(cc.Node)],t.prototype,"addToHomePCtxt",void 0),a([K(cc.Node)],t.prototype,"effectMainBtn",void 0),a([K(cc.Node)],t.prototype,"effectA2HSBtn",void 0),a([K(cc.Node)],t.prototype,"effectShareGameBtn",void 0),a([K(cc.Node)],t.prototype,"effectLoginBtn",void 0),a([K(cc.Node)],t.prototype,"addToHomeNode",void 0),a([K(cc.Node)],t.prototype,"shareNode",void 0),a([K(cc.Node)],t.prototype,"currentGamesNode",void 0),a([K(cc.Node)],t.prototype,"likeUsNode",void 0),a([K(cc.Sprite)],t.prototype,"moreGameSprite",void 0),a([K(cc.Animation)],t.prototype,"flashAnims",void 0),a([K(cc.Node)],t.prototype,"navOnOFFButton",void 0),a([K(cc.Node)],t.prototype,"backToAppButton",void 0),o=a([W],t)}(cc.Component);o.NgcNavBarManager=Y,cc._RF.pop()},{"../../../../Scripts/Main":"Main","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GameMode/Script/GameModeManager":"GameModeManager","./NavBarA2HSInstalledNotice":"NavBarA2HSInstalledNotice","./NavBarA2HSNotSupportTotally_Mobile":"NavBarA2HSNotSupportTotally_Mobile","./NavBarA2HSNotSupport_Mobile":"NavBarA2HSNotSupport_Mobile","./NavBarA2HSNotSupport_PC":"NavBarA2HSNotSupport_PC","./NavBarAboutDialog":"NavBarAboutDialog","./NavBarConfirmDialog":"NavBarConfirmDialog","./NavBarDialogBase":"NavBarDialogBase","./NavBarEditNameDialog":"NavBarEditNameDialog","./NavBarFBBrowserDialog":"NavBarFBBrowserDialog","./NavBarFBPagePluginDialog":"NavBarFBPagePluginDialog","./NavBarHowToPlayDialog":"NavBarHowToPlayDialog","./NavBarLoginSocialDialog":"NavBarLoginSocialDialog","./NavBarNoticeDialog":"NavBarNoticeDialog","./NavBarSettingsDialog":"NavBarSettingsDialog","./NavBarShareDialog":"NavBarShareDialog","./NgcA2HSManager.ts":"NgcA2HSManager.ts"}],NavBarNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e1ae6EiznRJEbPkw8P5sFJp","NavBarNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t},t.prototype.okOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.NavBarA2HSRedirectDialog_Mobile="NavBarA2HSRedirectDialog_Mobile",t.NavBarA2HSRedirectDialog_PC="NavBarA2HSRedirectDialog_PC",t.NavBarA2HSNoticeDialog_Mobile="NavBarA2HSNoticeDialog_Mobile",t.NavBarA2HSNoticeDialog_PC="NavBarA2HSNoticeDialog_PC",t.dialogType="NgcNavBarNoticeDialog",a([c],t)}(i.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarSelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"02a4d2U3WNEWocgmMDsdhaY","NavBarSelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarSelectLanguageDialog=void 0;var i=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../GameFramework/Scripts/NgcUserInfo"),c=e("../../../Services/Platform/Platform"),l=e("../../../Services/Telemetry/Telemetry"),u=e("./NavBarDialogBase"),p=e("./NavBarItemSelectLanguage"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e;var o=i.NgcLocalizedManager.jsonData;o.sort(function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}),this.selectedLang=i.NgcLocalizedManager.curLang,o.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(p.NgcNavBarItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code===i.NgcLocalizedManager.curLang||e.extra_code&&-1!=e.extra_code.indexOf(i.NgcLocalizedManager.curLang),function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.languageCode==e.code||e.extra_code&&-1!=e.extra_code.indexOf(t.languageCode)})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.selectedLang!==s.default.curLanguage&&this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){s.default.curLanguage=e,i.NgcLocalizedManager.setLanguage(e),l.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e});var t={GAME_LANGUAGE_CODE:e};if(window.location!==window.parent.location){var o=JSON.stringify(t);console.log("@@@@@ changeLanguageOnClick msg ",o),c.NgcPlatform.inst&&c.NgcPlatform.inst.onPostMessage(o,"*")}},t.prototype.show=function(){e.prototype.show.call(this),l.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),l.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.urlPrefab="NavBarSelectLanguageDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarSelectLanguageDialog",a([h(cc.Prefab)],t.prototype,"itemPrefab",void 0),a([h(cc.Node)],t.prototype,"content",void 0),a([f],t)}(u.NgcNavBarDialogBase);o.NgcNavBarSelectLanguageDialog=g,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase","./NavBarItemSelectLanguage":"NavBarItemSelectLanguage"}],NavBarSettingsDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c58635gSO1LnKS1leAZUO0T","NavBarSettingsDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarSettingsDialog=void 0;var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcSoundManager"),d=e("../../../GameFramework/Scripts/NgcUserInfo"),f=e("../../../Services/Platform/Platform"),h=e("../../../Services/Telemetry/Telemetry"),g=e("../../Dialogs/Script/NgcDialogManager"),m=e("./NavBarDialogBase"),y=e("./NavBarSelectLanguageDialog"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundSFs=[],t.musicSFs=[],t.soundSprite=null,t.musicSprite=null,t.musicON_OFFLabel=null,t.soundON_OFFLabel=null,t.languageButton=null,t.gdprButton=null,t.controlButton=null,t.forWebNode=null,t}return r(t,e),t.prototype.init=function(){this.musicSprite.spriteFrame=d.default.musicOff?this.musicSFs[1]:this.musicSFs[0],l.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,d.default.musicOff?"NGG_OFF":"NGG_ON"),this.soundSprite.spriteFrame=d.default.soundOff?this.soundSFs[1]:this.soundSFs[0],l.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,d.default.soundOff?"NGG_OFF":"NGG_ON"),this.languageButton.active=c.NgcBuildConfig.services.NavBar.languageButton,this.controlButton.active=c.NgcBuildConfig.services.NavBar.controlButton&&cc.sys.isMobile,this.gdprButton.active=c.NgcBuildConfig.services.NavBar.cookieButton,f.NgcPlatform.isRunFromApp()&&(this.forWebNode.active=!1)},t.prototype.soundOnClick=function(){d.default.soundOff=!d.default.soundOff,this.soundSprite.spriteFrame=d.default.soundOff?this.soundSFs[1]:this.soundSFs[0],l.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,d.default.soundOff?"NGG_OFF":"NGG_ON"),h.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"soundOff",settingValue:d.default.soundOff})},t.prototype.musicOnClick=function(){d.default.musicOff=!d.default.musicOff,this.musicSprite.spriteFrame=d.default.musicOff?this.musicSFs[1]:this.musicSFs[0],l.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,d.default.musicOff?"NGG_OFF":"NGG_ON"),p.NgcSoundManager.inst.resumeLastPlayedMusic()||p.NgcSoundManager.inst.playStartScreenMusic(),h.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"MusicOff",settingValue:d.default.musicOff})},t.prototype.onChangeLanguageButtonClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,g.NgcDialogManager.createDialog(y.NgcNavBarSelectLanguageDialog.dialogType,y.NgcNavBarSelectLanguageDialog.urlPrefab,y.NgcNavBarSelectLanguageDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(y.NgcNavBarSelectLanguageDialog)).init(),t.show(),[2]}})})},t.prototype.onChangeControlButtonClick=function(){return i(this,void 0,void 0,function(){return s(this,function(){return u.NgcMain.inst.showControlDialog(),[2]})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){h.NgcTelemetry.inst.LogEvent_ExitScreen("OptionsScreen"),e.prototype.hide.call(this)},t.prototype.show=function(){h.NgcTelemetry.inst.LogEvent_EnterScreen("OptionsScreen"),e.prototype.show.call(this)},t.prototype.onSetCookiesBtnClick=function(){setTimeout(function(){window.showCookiesPop()},250),this.hide()},t.urlPrefab="NavBarSettingsDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarSettingsDialog",a([S(cc.SpriteFrame)],t.prototype,"soundSFs",void 0),a([S(cc.SpriteFrame)],t.prototype,"musicSFs",void 0),a([S(cc.Sprite)],t.prototype,"soundSprite",void 0),a([S(cc.Sprite)],t.prototype,"musicSprite",void 0),a([S(cc.Label)],t.prototype,"musicON_OFFLabel",void 0),a([S(cc.Label)],t.prototype,"soundON_OFFLabel",void 0),a([S(cc.Node)],t.prototype,"languageButton",void 0),a([S(cc.Node)],t.prototype,"gdprButton",void 0),a([S(cc.Node)],t.prototype,"controlButton",void 0),a([S(cc.Node)],t.prototype,"forWebNode",void 0),a([v],t)}(m.NgcNavBarDialogBase);o.NgcNavBarSettingsDialog=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarSelectLanguageDialog":"NavBarSelectLanguageDialog"}],NavBarShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d87968eNOlMhJWnzy9T0m6d","NavBarShareDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarShareDialog=void 0;var i,s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcUserInfo"),u=e("../../../Services/Platform/Platform"),p=e("../../../Services/Telemetry/Telemetry"),d=e("./NavBarDialogBase"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.Native=0]="Native",e[e.Facebook=1]="Facebook",e[e.Email=2]="Email",e[e.Twitter=3]="Twitter"})(i||(i={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alertTextNode=null,t.shareContainer=null,t.context=null,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t}return r(t,e),t.prototype.onLoad=function(){this.shareContainer.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainer.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainer.getChildByName("email").active=this.checkShareConfig("email")},t.prototype.checkShareConfig=function(e){return!c.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||c.NgcBuildConfig.services.ShareMe[e]},t.prototype.onButtonFaceBookClick=function(){var e=this,t=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=facebook",o=encodeURIComponent(t);if(u.NgcPlatform.isRunFromApp())this.postShareMessage("FB",o),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(i,i.Facebook)),l.default.sharedGame_NavBar=!0;else if("undefined"!=typeof FB)p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(i,i.Facebook)),FB.ui({method:"share",href:t,display:cc.sys.isMobile?"iframe":"popup"},function(t){t&&(console.log("Share success: post_id = "+t.post_id),p.NgcTelemetry.inst.LogEvent_ShareComplete(e.context,s.Utils.enumToString(i,i.Facebook)),l.default.sharedGame_NavBar=!0)});else{var n="https://www.facebook.com/sharer/sharer.php?u=";n+=o,cc.sys.openURL(n),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(i,i.Facebook)),l.default.sharedGame_NavBar=!0}},t.prototype.onButtonTwitterClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=twitter",t="https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+c.NgcBuildConfig.services.NavBar.shareDescription;u.NgcPlatform.isRunFromApp()?this.postShareMessage("TWITTER",t):cc.sys.openURL(t),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(i,i.Twitter)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonEmailClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=mail",t=encodeURIComponent(e),o="mailto:example@website.com?subject=";o+=c.NgcBuildConfig.services.NavBar.shareGameName+"&body=",o+=c.NgcBuildConfig.services.NavBar.shareDescription+" "+t,u.NgcPlatform.isRunFromApp()?this.postShareMessage("EMAIL",o):cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX?cc.sys.openURL(o):window.location.href=o,p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(i,i.Email)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonCopyClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=copylink";u.NgcPlatform.isRunFromApp()?this.postShareMessage("COPY_LINK",e):s.Utils.copyToClipboard(e),this.flashAlertNode()},t.prototype.postShareMessage=function(e,t){u.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:e,link:t}}),"*")},t.prototype.flashAlertNode=function(){cc.tween(this.alertTextNode).to(.25,{opacity:255}).delay(1.5).to(.25,{opacity:0}).start()},t.prototype.shareNative=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native";navigator.share({url:e}).then(function(){console.log("Share was successful."),l.default.sharedGame_NavBar=!0}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.show=function(){p.NgcTelemetry.inst.LogEvent_ShareInit(this.context),1!=u.NgcPlatform.inst.useOwnSharingMethod()?cc.sys.isMobile&&navigator.share?(this.shareNative(),this.hide()):(navigator.clipboard.writeText(c.NgcBuildConfig.services.NavBar.shareUrl),this.alertTextNode.opacity=255,this.flashAlertNode(),e.prototype.show.call(this)):this.hide()},t.prototype.init=function(e){this.context=e},t.urlPrefab="NavBarShareDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarShareDialog",a([g(cc.Node)],t.prototype,"alertTextNode",void 0),a([g(cc.Node)],t.prototype,"shareContainer",void 0),a([h],t)}(d.NgcNavBarDialogBase);o.NgcNavBarShareDialog=m,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarTipItem:[function(e,t,o){"use strict";cc._RF.push(t,"b857fF7aWVD+ZWXyWtqVD1z","NavBarTipItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarTipItem=void 0;var i=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipLabel=null,t.tipImg=null,t}return r(t,e),t.urlPrefab="NavBarTipItem",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarTipItem",a([l(cc.Label)],t.prototype,"tipLabel",void 0),a([l(cc.Sprite)],t.prototype,"tipImg",void 0),a([c],t)}(i.NgcNavBarDialogBase);o.NgcNavBarTipItem=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarUserConflictInfo:[function(e,t,o){"use strict";cc._RF.push(t,"e662dsdldhArbVHw/hSYA54","NavBarUserConflictInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarUserConflictInfo=void 0;var i=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastSave=null,t.time=null,t.lbScore=null,t.coins=null,t.stars=null,t}return r(t,e),t.prototype.start=function(){},t.urlPrefab="NavBarShareDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarShareDialog",a([l(i.NgcLabelLocalized)],t.prototype,"lastSave",void 0),a([l(i.NgcLabelLocalized)],t.prototype,"time",void 0),a([l(cc.Label)],t.prototype,"lbScore",void 0),a([l(cc.Label)],t.prototype,"coins",void 0),a([l(cc.Label)],t.prototype,"stars",void 0),a([c],t)}(cc.Component);o.NgcNavBarUserConflictInfo=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],NetClient:[function(e,t,o){"use strict";cc._RF.push(t,"91abdvgwGxKp6QXoINwcDoE","NetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../Screens/PartyRoomScreen/PartyRoomManager"),u=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),p=e("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),d=e("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),f=e("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),h=e("../Dialog/QCDebug/ParamsDebugDialog"),g=e("../FakeNames"),m=e("../Player/PlayerAnim"),y=e("./messages"),_=e("./messages"),v=e("./messagesJson"),S=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),b=e("./messages/rpb"),N=e("./messages/utils"),P=e("../../NanoGameCore/Services/PartyRoom/PartyRoom"),I=e("../Game"),C=e("../Main"),w=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),O=e("../GameObjects/PowerUpItem"),T=e("../Maps/MapManager"),E=e("../Player/PlayerSkinMgr"),M=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),D=e("../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface"),R=e("../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager"),B=cc._decorator,A=B.ccclass,k=B.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.useLocalServer=!1,t.minDurationPing=9999999,t.differenceTimeWithSever=0,t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one NetClient!!"):(o.inst=this,e.prototype.onLoad.call(this),this.useLocalServer&&(this.serverAddress="ws://localhost:1340"))},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,console.log("Scheduling send player state"),this.schedule(this.sendLocalPlayerGameState,this.GAME_UPDATE_TIME_MS/1e3))},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerGameState)},t.prototype.RequestPlantBomb=function(e,t,o,n,r,a,i){var s=_.ClientMessage_PlantBomb(I.default.inst.curGameNetID,e,t,n,r,o,a,i);this._sendWebsocketMessage(b.Client_PlantBomb.encode(s).finish())},t.prototype.ClaimUniqueItem=function(e,t,o,n){if(this.isConnected()){var r=_.ClientMessage_ClaimUniqueItem(e,I.default.inst.curGameNetID,t,o,n);this._sendWebsocketMessage(b.Client_ClaimUniqueItem.encode(r).finish())}},t.prototype._sendLocalPlayerGameState=function(){if(this.isConnected()){var e=_.ClientMessage_PlayerStateData_Multi(I.default.inst.getObjectStateData(),I.default.inst.curGameNetID);this._sendWebsocketMessage(b.Client_PlayerStateData.encode(e).finish()),I.default.inst.clearObjectStateUpdated()}},t.prototype._exitGame=function(){console.log("** EXITING GAME *** ");var e=C.Main.inst.getLocalPlayer();if(e&&this.isConnected()){var t=_.ClientMessage_PlayerExitGame(e.netID,I.default.inst.curGameNetID);this._sendWebsocketMessage(b.Client_PlayerExitGame.encode(t).finish())}this.stopGameMode()},t.prototype._sendPing=function(){if(this.connected){var e=f.NgcNetUtils.generateRandomUUID(),t=Date.now(),o=y.ClientMessage_Ping(e,!1);this._sendWebsocketMessage(b.Client_Ping.encode(o).finish()),this.pingLog[e]=t,this.pingsSent++}else console.error("Can't send ping if not connected!")},t.prototype._broadcastMessage=function(e,t,o){var n=v.ClientMessage_BroadcastMessage(this.localPlayerNetID,e,t,o,Date.now());this._sendWebsocketMessage(JSON.stringify(n))},t.prototype._handleMessage_ServerPing=function(e){if(e.pong){var t=e.id,o=this.pingLog[t];if(!o)return void(this.pongLog[t]?console.log("Received duplicate pong!"):console.warn("Received pong for unrecognized ping ID: "+t));this.lastPongTime=Date.now();var n=this.lastPongTime-o;this.minDurationPing>n&&(this.minDurationPing=n,this.differenceTimeWithSever=(o+this.lastPongTime)/2-e.serverTime),delete this.pingLog[t],this.pongLog[t]=Date.now(),this.pongsRecd++,this.noteLatency(n)}else{var r=y.ClientMessage_Ping(e.id,!0);this._sendWebsocketMessage(b.Client_Ping.encode(r).finish())}},t.prototype._handleMessage_ServerFullGameState=function(e){I.default.inst.updateStateFromServer(e)},t.prototype._handleMessage_ServerGameStartingStatus=function(e){I.default.inst.node.emit("gameStartingStatus",e),I.default.inst.setGameParameters(e.gameParameters),this.setServerTime(e.serverTime)},t.prototype.handleMessage_UniqueItemClaimed=function(e){if(e.gameID==I.default.inst.curGameNetID){var t=O.default.findItemByID(e.uniqueItemID),o=I.default.inst.findPlayerByNetID(e.playerNetID);t&&o&&t.collect(o)}else console.log("Got message from unknown gameID "+e.gameID)},t.prototype._handleMessage_ServerOrderCreateBot=function(){var e=g.default.inst.allocRandomPerson();e||(cc.error("FakeNames.inst.allocRandomPerson ERROR"),(e={}).name="err",e.countryCode=""),this.requestToHostBot(e.name+"|"+e.countryCode,m.default.chooseRandomBotSkin())},t.prototype.handleMessage_ServerHandoverBot=function(e){cc.log("handleMessage_ServerHandoverBot "+e.botNetID),I.default.inst.handoverBot(e.botNetID)},t.prototype.handleMessage_ServerDeliverGameMap=function(e){I.default.inst.onReceiveMapData(e.explodedPosList,Array.from(e.mapData),e.bombs)},t.prototype.handleMessage_ServerMapShrinked=function(e){I.default.inst.onMapShrinked(e.curRound)},t.prototype.handleMessage_ServerRequestGameMap=function(){I.default.inst.node.emit("serverRequestGameMap")},t.prototype.provideGameMap=function(e,t,o,n,r,a,i,s){var c=b.Client_ProvideGameMap.create({message:b.MessageType.CLIENT_PROVIDEGAMEMAP,gameID:e,mapData:new Uint8Array(t),mapSize:o,finalShowdownTiles:n,matchDuration:r,extraDuration:a,finalShowdownDuration:i,bombDuration:s});this._sendWebsocketMessage(b.Client_ProvideGameMap.encode(c).finish())},t.prototype._requestToHostBot=function(e,t){if(this.connected){if(!(M.NgcBuildConfig.enabledDebugMode&&I.default.inst.players.length>=h.default.totalPlayer)){console.log("Requesting to host a bot for the game...");var o=this.localPlayerNetID+":"+f.NgcNetUtils.generateRandomUUID(),n=R.NgcGameModeManager.inst.selectedModeId,r=y.ClientMessage_RequestJoinGame(I.default.inst.curGameNetID,e,o,t,n,this.localPlayerNetID);this._sendWebsocketMessage(b.Client_RequestJoinGame.encode(r).finish())}}else console.warn("Not connected to server- can't join")},t.prototype._requestToJoinGame=function(e){var t=this;if(void 0===e&&(e="-1"),this.connected){console.log("Requesting to join game...",e);var o=w.default.localUserName;o&&""!=o||(o=C.Main.inst.createFakeName());var n=o+"|"+(null==u.NgcCountryFlagsManager.localCountry?"us":u.NgcCountryFlagsManager.localCountry),r=E.default.inst.getCurHero(),a=R.NgcGameModeManager.inst.selectedModeId,i=y.ClientMessage_RequestJoinGame(e,n,this.localPlayerNetID,r,a);this._sendWebsocketMessage(b.Client_RequestJoinGame.encode(i).finish())}else this.connectCycleRunning?this.scheduleOnce(function(){var o,n,r;0!==(null===(r=null===(n=null===(o=T.default.inst)||void 0===o?void 0:o.mapInfo)||void 0===n?void 0:n.playerPlacements)||void 0===r?void 0:r.length)&&t.requestToJoinGame(e)},.1):console.warn("Not connected to server- can't join")},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||M.NgcBuildConfig.useNgcServer||(console.log("Start connect cycle"),l.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=l.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype._onDisconnect=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),I.default.inst&&I.default.inst.pause(!0),[4,c.NgcDialogManager.createDialog(S.NgcNoticeDialog.dialogType,S.NgcNoticeDialog.urlPrefab,S.NgcNoticeDialog.bundleName)];case 1:return e.sent().getComponent(S.NgcNoticeDialog).init(p.NgcLocalizedManager.t("ERROR").text,p.NgcLocalizedManager.t("NTM_NETWORK_DISCONNECTED").text,function(){history.go(0)},this.iconNetworkErr),[2]}})})},t.prototype._onError=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),I.default.inst.pause(!0),[4,c.NgcDialogManager.createDialog(S.NgcNoticeDialog.dialogType,S.NgcNoticeDialog.urlPrefab,S.NgcNoticeDialog.bundleName)];case 1:return e.sent().getComponent(S.NgcNoticeDialog).init(p.NgcLocalizedManager.t("ERROR").text,p.NgcLocalizedManager.t("NTM_NETWORK_ERROR").text,function(){history.go(0)},this.iconNetworkErr),[2]}})})},t.prototype._onConnect=function(){var e=this;this.localPlayerNetID=f.NgcNetUtils.generateRandomUUID(),console.log("Connected! my random netID is "+this.localPlayerNetID),this.connected=!0,this.schedule(this.sendPing,o.PING_TIME_MS/1e3),this.setOnDisconnectedListener(function(t){return i(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:switch(t){case D.DisconnectReason.Server:return[3,1];case D.DisconnectReason.ForcedByClient:return[3,3]}return[3,4];case 1:return[4,c.NgcDialogManager.createDialog(S.NgcNoticeDialog.dialogType,S.NgcNoticeDialog.urlPrefab,S.NgcNoticeDialog.bundleName)];case 2:return e.sent().getComponent(S.NgcNoticeDialog).init(p.NgcLocalizedManager.t("NTM_ERROR").text,p.NgcLocalizedManager.t("NTM_NETWORK_DISCONNECTED").text,function(){history.go(0)},this.iconNetworkErr),[3,5];case 3:case 4:return[3,5];case 5:return[2]}})})});var t=this;this.webSocket.onmessage=function(e){t.messagesRecd++,t.lastMsgTime=Date.now();var o=t;if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){var e=this.result,t=new Uint8Array(e);switch(N.GetMessageType(t)){case b.MessageType.SERVER_REQUESTGAMEMAP:o.handleMessage_ServerRequestGameMap(b.Server_RequestGameMap.decode(t));break;case b.MessageType.SERVER_DELIVERGAMEMAP:o.handleMessage_ServerDeliverGameMap(b.Server_DeliverGameMap.decode(t));break;case b.MessageType.SERVER_MAPSHRINKED:o.handleMessage_ServerMapShrinked(b.Server_MapShrinked.decode(t));break;case b.MessageType.SERVER_GAMESTARTINGSTATUS:o.handleMessage_ServerGameStartingStatus(b.Server_GameStartingStatus.decode(t));break;case b.MessageType.SERVER_FULLGAMESTATE:o.handleMessage_ServerFullGameState(b.Server_FullGameState.decode(t));break;case b.MessageType.SERVER_ORDERCREATEBOT:o.handleMessage_ServerOrderCreateBot(b.Server_OrderCreateBot.decode(t));break;case b.MessageType.SERVER_HANDOVERBOT:o.handleMessage_ServerHandoverBot(b.Server_HandoverBot.decode(t));break;case b.MessageType.SERVER_PING:o.handleMessage_ServerPing(b.Server_Ping.decode(t));break;case b.MessageType.SERVER_UNIQUE_ITEM_CLAIMED:o.handleMessage_UniqueItemClaimed(b.Server_UniqueItemClaimed.decode(t))}},n.readAsArrayBuffer(e.data),C.Main.inst.inBackground&&cc.director.mainLoop()}else{var r=JSON.parse(e.data);switch(console.log("OnMessage: "+e.data),r.message){case v.MessageType.ServerBroadcastMessage:case v.MessageType.ServerBroadcastTechMessage:o.handleMessage_ServerBroadcastMessage(r)}P.NgcPartyRoom.inst&&P.NgcPartyRoom.inst.updateMessage(r),C.Main.inst.inBackground&&cc.director.mainLoop()}},t.webSocket.onclose=function(e){t.onDisconnect(e)},t.webSocket.onerror=function(e){t.onError(e)}},t.prototype._tryConnectToServer=function(e,t){void 0===e&&(e=null);var o=this.serverAddress;null!=e&&""!=e&&(o=e),this.webSocket=new WebSocket(o,[]),console.log("Trying to connect to server @ "+o);var n=this;this.webSocket.onopen=function(){n.onConnect(),t&&t()},this.webSocket.onerror=function(e){console.log("ConnectError: ",JSON.stringify(e))},n.webSocket.onclose=function(e){console.log("ConnectClose: ",JSON.stringify(e))}},t.prototype.start=function(){},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.curentGameServerTime=function(){return Math.round(Date.now()-this.differenceTimeWithSever)},t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,a([k(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),a([k(cc.Boolean)],t.prototype,"useLocalServer",void 0),o=a([A],t)}(d.NgcNetClient);o.default=L,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager":"GameModeManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface":"NetworkInterface","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../Dialog/QCDebug/ParamsDebugDialog":"ParamsDebugDialog","../FakeNames":"FakeNames","../Game":"Game","../GameObjects/PowerUpItem":"PowerUpItem","../Main":"Main","../Maps/MapManager":"MapManager","../Player/PlayerAnim":"PlayerAnim","../Player/PlayerSkinMgr":"PlayerSkinMgr","../Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./messages":"messages","./messages/rpb":"rpb","./messages/utils":"utils","./messagesJson":"messagesJson"}],NetLatencyDisplay:[function(e,t,o){"use strict";cc._RF.push(t,"81f7avbkJBEhZzrIFYvZFjy","NetLatencyDisplay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Network/NetClient"),s=e("../Main"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.latencyLabel=null,t.timeSinceLastMessageLabel=null,t.timeSinceLastPongLabel=null,t.pingsSentLabel=null,t.pongsRecdLabel=null,t.messagesRecdLabel=null,t}return r(t,e),t.prototype.start=function(){this.turnOn(!1)},t.prototype.turnOn=function(e){this.container.active=e},t.prototype.monitorEnableDisable=function(){s.Main.inst.debugDisplayEnabled?this.container.active||this.turnOn(!0):this.latencyLabel.enabled&&this.turnOn(!1)},t.prototype.update=function(){this.monitorEnableDisable(),this.latencyLabel.string=i.default.inst.averageLatencyMS.toFixed(1),this.timeSinceLastMessageLabel.string=i.default.inst.timeSinceLastMsg.toFixed(1),this.timeSinceLastPongLabel.string=i.default.inst.timeSinceLastMsg.toFixed(1),this.pingsSentLabel.string=i.default.inst.pingsSent.toString(),this.pongsRecdLabel.string=i.default.inst.pongsRecd.toString(),this.messagesRecdLabel.string=i.default.inst.messagesRecd.toString()},a([u(cc.Node)],t.prototype,"container",void 0),a([u(cc.Label)],t.prototype,"latencyLabel",void 0),a([u(cc.Label)],t.prototype,"timeSinceLastMessageLabel",void 0),a([u(cc.Label)],t.prototype,"timeSinceLastPongLabel",void 0),a([u(cc.Label)],t.prototype,"pingsSentLabel",void 0),a([u(cc.Label)],t.prototype,"pongsRecdLabel",void 0),a([u(cc.Label)],t.prototype,"messagesRecdLabel",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Main":"Main","../Network/NetClient":"NetClient"}],NetStatsTracker:[function(e,t,o){"use strict";cc._RF.push(t,"d6847EbSKRHWJB78F33hRkq","NetStatsTracker");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetStatsTracker=void 0;var i=e("../../../Services/Telemetry/Telemetry"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sessionStarted=!1,t.timeBetweenRemoteUpdates_Total=0,t.timeBetweenRemoteUpdates_NumSamples=0,t.oldRemoteDataReceived=0,t.pingRoundTrip_TotalTime=0,t.pingRoundTrip_NumSamples=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.warn("Already a netstats tracker!"):o.inst=this},t.prototype.resetAll=function(){this.timeBetweenRemoteUpdates_Total=0,this.timeBetweenRemoteUpdates_NumSamples=0,this.oldRemoteDataReceived=0,this.pingRoundTrip_TotalTime=0,this.pingRoundTrip_NumSamples=0},t.prototype.reportPingRoundtripTime=function(e){this.pingRoundTrip_TotalTime+=e,this.pingRoundTrip_NumSamples++},t.prototype.reportOldRemoteDataReceived=function(){this.oldRemoteDataReceived++},t.prototype.reportTimeBetweenRemoteUpdates=function(e){this.timeBetweenRemoteUpdates_NumSamples++,this.timeBetweenRemoteUpdates_Total+=e},t.prototype.beginSession=function(){this.sessionStarted&&console.warn("NetStatsTrackers: beginSession() called without first seeing endSession()"),this.resetAll(),this.sessionStarted=!0},t.prototype.endSession=function(){var e={averageTimeBetweenRemoteUpdatesMS:this.timeBetweenRemoteUpdates_Total/(this.timeBetweenRemoteUpdates_NumSamples+1),avergePingRoundTripTimeMS:this.pingRoundTrip_TotalTime/(this.pingRoundTrip_NumSamples+1),oldRemoteDataReceived:this.oldRemoteDataReceived};i.NgcTelemetry.inst.LogEvent_ReportNetStats(e),this.sessionStarted=!1},t.prototype.start=function(){},t.inst=null,o=a([c],t)}(cc.Component));o.NgcNetStatsTracker=l,cc._RF.pop()},{"../../../Services/Telemetry/Telemetry":"Telemetry"}],NetUtils:[function(e,t,o){"use strict";cc._RF.push(t,"a9a03K+BxBM/LvKMOa7Ew/2","NetUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetUtils=void 0;var n=function(){function e(){}return e.SetRandomSeed=function(t){e.randomSeed=t},e.generateRandomUUID=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.RandomRange=function(e,t,o){void 0===o&&(o=!1);var n=t-e,r=e+Math.random()*n;return o&&(r=Math.round(r)),r},e.randomSeed=305419896,e}();o.NgcNetUtils=n,cc._RF.pop()},{}],NetworkInterface:[function(e,t,o){"use strict";cc._RF.push(t,"e82f8eFuq9JRLlZLxj0h+iz","NetworkInterface"),Object.defineProperty(o,"__esModule",{value:!0}),o.DisconnectReason=void 0,function(e){e[e.Server=0]="Server",e[e.ForcedByClient=1]="ForcedByClient",e[e.OpenNewConnection=2]="OpenNewConnection"}(o.DisconnectReason||(o.DisconnectReason={})),cc._RF.pop()},{}],"NgcA2HSManager.ts":[function(e,t,o){"use strict";cc._RF.push(t,"742d86H7tBPP4YC24ldmC+L","NgcA2HSManager.ts");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../GameFramework/Scripts/BuildConfig"),a=e("../../../Services/Platform/Platform"),i=cc._decorator,s=i.ccclass,c=(i.property,function(){function e(){}var t;return t=e,e.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},e.gotoNano=function(){var e=r.NgcBuildConfig.gameClientURL;-1==r.NgcBuildConfig.gameClientURL.indexOf("?")?e+="?A2HS=true":e+="&A2HS=true",cc.sys.openURL(e)},e.getGameUrl=function(){var e=a.NgcPlatform.inst.getPartyLinkBase();return e.replace(/#\w*/g,"")},e.getURLParameter=function(e){var o=t.getGameUrl();console.log("url",o);var n=new URL(o).search;if(null==n||""==n){var r=o.indexOf("?");r>=0&&(n=o.substring(r,o.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},e.shouldA2HS=function(){var e;return(null===(e=a.NgcPlatform.inst)||void 0===e?void 0:e.getPlatformID())!=a.PlatformID.Android&&"true"==t.getURLParameter("A2HS")},e.removeA2HSParameter=function(){if(t.isValidOrigin())try{var e=t.getGameUrl();e.indexOf("&A2HS=true")>=0?e=e.replace("&A2HS=true",""):e.indexOf("A2HS=true")>=0&&(e=e.replace("A2HS=true","")),window.history.pushState({},document.title,e)}catch(o){cc.warn(o)}},t=n([s],e)}());o.default=c,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../Services/Platform/Platform":"Platform"}],NgcAchievementHelper:[function(e,t,o){"use strict";cc._RF.push(t,"16b429Q5XROo7TybJ+bLR88","NgcAchievementHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAchievementHelper=void 0;var n=e("../../../Services/Inventory/Inventory"),r=function(){function e(){this._achievementMaxValueList={},this._addAchievementRequestQueue=[],this._isAddingAchievement=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.updateAchievementMaxValue=function(e,t){this._achievementMaxValueList[e]=t},e.prototype.addTo=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var a=Math.min(t,o._achievementMaxValueList[e])-r.count;a>0&&o.addItem(e,a)}})},e.prototype.addMore=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var a=o._achievementMaxValueList[e]-r.count,i=Math.min(t,a);i>0&&o.addItem(e,i)}})},e.prototype.addItem=function(e,t){var o={itemID:e,count:t};this._addAchievementRequestQueue.push(o),this.checkToSendAddItem()},e.prototype.checkToSendAddItem=function(){var e=this;if(0==this._isAddingAchievement&&this._addAchievementRequestQueue.length>0){this._isAddingAchievement=!0;var t=[];this._addAchievementRequestQueue.forEach(function(e){return t.push(e)}),this._addAchievementRequestQueue=[],n.NgcInventory.inst.addItemList(t,function(){e._isAddingAchievement=!1,e.checkToSendAddItem()})}},e._instance=null,e}();o.NgcAchievementHelper=r,cc._RF.pop()},{"../../../Services/Inventory/Inventory":"Inventory"}],NgcAdsManager:[function(e,t,o){"use strict";cc._RF.push(t,"7b4a4QYLitORLDTHDie5ot/","NgcAdsManager");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPointcuts=void 0;var r=e("../../../SDK/Nano/NanoSrv"),a=e("../../../Services/Ads/Ads"),i=cc._decorator,s=i.ccclass;i.property,function(e){e.bannerLeaderboard="banner_leaderboard",e.bannerPartyRoom="banner_partyroom",e.bannerRewardVideo="banner_reward_video",e.bannerMainMenu="banner_mainmenu",e.bannerLoading="banner_loading",e.bannerShop="banner_shop",e.bannerRealPrize="banner_realPrize",e.bannerRevive="banner_revive",e.bannerResult="banner_result",e.bannerSpectator="banner_spectator",e.videoDaily="video_daily2x",e.videoShopReward="video_shop",e.videoRewardDialog="video_endgame2x",e.videoReviveDialog="video_revive",e.videoLuckybooster="video_luckybooster",e.interPreGame="inter_pregame"}(o.NgcPointcuts||(o.NgcPointcuts={}));var c=function(){function e(){this.alllowedPointcuts=[],this._isReceivedAdsConfig=!1}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return t._inst||cc.error("YOU SHOULD NEW INSTACE OF NgcAdsManager WHEN SERVICE IS INITED"),t._inst},set:function(e){t._inst=e},enumerable:!1,configurable:!0}),e.prototype.getAllowedPointcut=function(){return this._isReceivedAdsConfig?this.alllowedPointcuts||[]:this._getAdsConfig()},e.prototype.isAdsPoincutAvailable=function(e,t){var o=this.getAllowedPointcut();return!!o&&-1!==o.indexOf(e)&&a.NgcAds.inst&&a.NgcAds.inst.adsIsAvailable(t)},e.prototype._getAdsConfig=function(){var e,t=null===(e=r.default.inst.getCurGameInfo())||void 0===e?void 0:e.adsPointcut;if(!t)return[];cc.log("@@@@@AdsConfig ",t);var o=this,n=function(e){Object.keys(e).forEach(function(t){e[t]&&o.alllowedPointcuts.push(t)})};return n(t.banner_poincut||{}),n(t.video_poincut||{}),n(t.interstitial_poincut||{}),cc.log("this.alllowedPointcuts ",this.alllowedPointcuts),this._isReceivedAdsConfig=!0,this.alllowedPointcuts||[]},e.prototype.showBanner=function(e,t,o){this.show(e,a.AdsType.Banner,null,null,t,o)},e.prototype.showInterstitial=function(e,t,o){this.show(e,a.AdsType.Interstitial,null,null,t,o)},e.prototype.showRewardVideo=function(e,t,o,n,r){this.show(e,a.AdsType.VideoReward,t,o,n,r)},e.showBannerTimeStamp=0,t=n([s],e)}();o.default=c,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads"}],NgcBoosterItem:[function(e,t,o){"use strict";cc._RF.push(t,"2285aWUi7xKKYcxny+b2ue3","NgcBoosterItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Core/ResizableComponent"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.image=null,t._index=0,t._boosterItemList=[],t}return r(t,e),t.prototype.onLoad=function(){var e=i.ResizableComponent.getResizableComponent(this.image.node);e.baseSize&&(e.baseSize.designWidth=this.image.node.width,e.baseSize.designHeight=this.image.node.height)},t.prototype.setBoosterItemList=function(e){this._boosterItemList=e},Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},set:function(e){this._index=e,this.ImageSprite=this._boosterItemList[this._index%this._boosterItemList.length].spriteFrame},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ImageSprite",{set:function(e){this.image.spriteFrame=e;var t=i.ResizableComponent.getResizableComponent(this.image.node);t.baseSize&&(t.baseSize.width=this.image.node.width,t.baseSize.height=this.image.node.height),i.ResizableComponent.resizeNodeByWidth(this.image.node,this.image.node.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.node.y},set:function(e){this.node.y=e},enumerable:!1,configurable:!0}),a([l(cc.Sprite)],t.prototype,"image",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent"}],NgcBoosterScroll:[function(e,t,o){"use strict";cc._RF.push(t,"efcd2ug45JEg5Km+/9hBmQn","NgcBoosterScroll");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterScroll=o.SpinDirection=void 0;var i,s=e("./NgcBoosterItem"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.UP=1]="UP",e[e.DOWN=-1]="DOWN"})(i=o.SpinDirection||(o.SpinDirection={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t._boosterItemList=[],t._spinDirection=i.DOWN,t._isInitalized=!1,t._isRunningNormal=!1,t._onSpinFinishCallback=null,t._duration=3,t._moveSpeed=100,t._spinFast=!1,t}return r(t,e),t.prototype.update=function(e){this._isRunningNormal?this.move(100*e*this._spinDirection):this._spinFast&&this.move(e*this._moveSpeed*this._spinDirection)},Object.defineProperty(t.prototype,"spinFast",{set:function(e){this._spinFast=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RunNormal",{set:function(e){this._isRunningNormal=e},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){void 0===t&&(t=i.DOWN),this._boosterItemList=e,this._spinDirection=t,this.item1.node.width=this.node.width,this.item1.node.height=this.node.height,this.item1.y=0,this.item1.setBoosterItemList(this._boosterItemList),this.item1.Index=0,this.item2.node.width=this.node.width,this.item2.node.height=this.node.height,this.item2.y=this.node.height,this.item2.setBoosterItemList(this._boosterItemList),this.item2.Index=1,this._isInitalized=!0},t.prototype.displaySpinAnimation=function(e,t,o,n){var r=this._boosterItemList.findIndex(function(t){return t.itemID==e});this._duration=o,this._onSpinFinishCallback=n;var a=this._boosterItemList.length*this.node.height,s=this.item1.y+this.node.height*(r-this.item1.Index),c=(this._spinDirection==i.DOWN?s>=0?-s:-(a+s):s<=0?-s:a-s)+t*a*this._spinDirection;this.startSpinning(c)},t.prototype.startSpinning=function(e){this._lastY=0,cc.tween({y:0}).to(this._duration,{y:e},{progress:this.spinUpdate.bind(this),easing:"cubicOut"}).call(this.onSpinFinish.bind(this)).start()},t.prototype.onSpinFinish=function(){this._onSpinFinishCallback&&(this._onSpinFinishCallback(),this._onSpinFinishCallback=null)},t.prototype.spinUpdate=function(e,t,o,n){var r=e+(t-e)*n,a=r-this._lastY;this._lastY=r,this.move(a)},t.prototype.move=function(e){if(0!=this._isInitalized){var t=Math.floor(Math.abs(e/(2*this.node.height)));t>0&&(this.item1.Index=e>0?this.getPreviousIndexOfItem(this.item1.Index,t):this.getNextIndexOfItem(this.item1.Index,t),this.item2.Index=e>0?this.getPreviousIndexOfItem(this.item2.Index,t):this.getNextIndexOfItem(this.item2.Index,t)),e%=2*this.node.height,this.moveItem(this.item1,e),this.moveItem(this.item2,e)}},t.prototype.moveItem=function(e,t){if(e.y+=t,e.y>=this.node.height){var o=e.y-this.node.height;e.y=-this.node.height+o,e.Index=this.getPreviousIndexOfItem(e.Index,1)}e.y<=-this.node.height&&(o=e.y+this.node.height,e.y=this.node.height+o,e.Index=this.getNextIndexOfItem(e.Index,1))},t.prototype.getNextIndexOfItem=function(e,t){return(e+2*t)%this._boosterItemList.length},t.prototype.getPreviousIndexOfItem=function(e,t){var o=(e-2*t)%this._boosterItemList.length;return o>=0?o:this._boosterItemList.length+o},a([u(s.default)],t.prototype,"item1",void 0),a([u(s.default)],t.prototype,"item2",void 0),a([l],t)}(cc.Component);o.NgcBoosterScroll=p,cc._RF.pop()},{"./NgcBoosterItem":"NgcBoosterItem"}],NgcBoosterTypeHelper:[function(e,t,o){"use strict";cc._RF.push(t,"9cc4ahhoK1IrKOC/ZbgTf6r","NgcBoosterTypeHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeHelper=o.BoosterUseType=void 0,function(e){e[e.IN_GAME=0]="IN_GAME",e[e.IN_MAIN_MENU=1]="IN_MAIN_MENU"}(o.BoosterUseType||(o.BoosterUseType={}));o.NgcBoosterTypeHelper=function(e){this.luckyBoosterManager=null,this.luckyBoosterManager=e},cc._RF.pop()},{}],NgcBoosterTypeInGameHelper:[function(e,t,o){"use strict";cc._RF.push(t,"cbb0dwKBQhJK6kwroi41S0T","NgcBoosterTypeInGameHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInGameHelper=void 0;var a=e("./NgcBoosterTypeHelper"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return a.BoosterUseType.IN_GAME},t.prototype.canRunNormal=function(){return""===this.luckyBoosterManager.AvailableBooster},t.prototype.checkShowBooster=function(){this.luckyBoosterManager.LuckyBoosterInfo.enable&&this.luckyBoosterManager.DailyBoosterUI.show()},t.prototype.checkDisplayUseBoosterInGame=function(){""!=this.luckyBoosterManager.AvailableBooster?this.luckyBoosterManager.enableUseBoosterInGame(!0):this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){t&&t()},t}(a.NgcBoosterTypeHelper);o.NgcBoosterTypeInGameHelper=i,cc._RF.pop()},{"./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcBoosterTypeInMainMenuHelper:[function(e,t,o){"use strict";cc._RF.push(t,"83d59IEbuNMqp3rFFn+5h/t","NgcBoosterTypeInMainMenuHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInMainMenuHelper=void 0;var a=e("../../../../../Scripts/UserInfo"),i=e("./NgcBoosterTypeHelper"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.BoosterUseType.IN_MAIN_MENU},t.prototype.canRunNormal=function(){return!0},t.prototype.checkShowBooster=function(){this.luckyBoosterManager.LuckyBoosterInfo.enable&&""==this.luckyBoosterManager.AvailableBooster&&this.extraBoosterShowCondition()?this.luckyBoosterManager.DailyBoosterUI.show():this.luckyBoosterManager.DailyBoosterUI.hide()},t.prototype.extraBoosterShowCondition=function(){return!a.UserInfo.curBooster},t.prototype.checkDisplayUseBoosterInGame=function(){this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){this.luckyBoosterManager.DailyBoosterUI.moveBoosterToCharacter(e,t)},t}(i.NgcBoosterTypeHelper);o.NgcBoosterTypeInMainMenuHelper=s,cc._RF.pop()},{"../../../../../Scripts/UserInfo":"UserInfo","./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcDialogManager:[function(e,t,o){"use strict";cc._RF.push(t,"f6569DlbhZGC4eUKorNVw66","NgcDialogManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogManager=void 0;var a=e("../../../Core/Utils"),i=e("./DialogBase"),s=e("./MessageDialog/MessageDialog"),c=function(){function e(){}return e.loadDialogPrefab=function(t,o,i){return n(this,void 0,void 0,function(){var s=this;return r(this,function(){return[2,i?new Promise(function(c,l){return n(s,void 0,void 0,function(){var n,s;return r(this,function(r){switch(r.label){case 0:return e.dialogPrefabs[t]&&c(),n=function(n){n.load(o,cc.Prefab,function(o,n){o?l():(e.dialogPrefabs[t]=n,c())})},[4,a.Utils.loadBundle(i)];case 1:return(s=r.sent())&&n(s),[2]}})})}):new Promise(function(n,r){e.dialogPrefabs[t]&&n(),cc.log("urlPrefab",o),cc.resources.load(o,cc.Prefab,function(o,a){if(o)return cc.error(o.message||o),void r();e.dialogPrefabs[t]=a,n()})})]})})},e.preLoadBunddle=function(e){var t=this;e.forEach(function(e){return n(t,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,a.Utils.loadBundle(e)];case 1:return t.sent(),[2]}})})})},e.createDialog=function(t,o,a,i){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return i||(i=cc.find("Canvas")),e.dialogPrefabs[t]?[3,2]:[4,this.loadDialogPrefab(t,o,a)];case 1:r.sent(),r.label=2;case 2:return(n=cc.instantiate(e.dialogPrefabs[t])).parent=i,[2,n]}})})},e.hasPopUpShowing=function(){return i.NgcDialogBase.dialogStacks.length>0},e.getShowingPopUps=function(){return i.NgcDialogBase.dialogStacks},e.destroyAllPopUps=function(){i.NgcDialogBase.dialogStacks.forEach(function(e){e&&e.hide()})},e.showAdsReminderMsg=function(t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return[4,e.createDialog(s.NgcMessageDialog.dialogType,s.NgcMessageDialog.urlPrefab,s.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(s.NgcMessageDialog)).init("ADB_REMINDER"),n.show(null,t,null,null),[2]}})})},e.showNotEnoughCurrencyMsg=function(t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return[4,e.createDialog(s.NgcMessageDialog.dialogType,s.NgcMessageDialog.urlPrefab,s.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(s.NgcMessageDialog)).init("ITS_NOT_ENOUGH_COINS"),n.show(null,t,null,null),[2]}})})},e.dialogPrefabs={},e.LIST_BUNDLE_NAME_PRELOAD=["02_dialog","02_dialog_navbar","02_dialog_PWF","02_dialog_realprize","03_end_game_flow","02_crown_road"],e}();o.NgcDialogManager=c,cc._RF.pop()},{"../../../Core/Utils":"Utils","./DialogBase":"DialogBase","./MessageDialog/MessageDialog":"MessageDialog"}],NgcGDPR:[function(e,t,o){"use strict";cc._RF.push(t,"a729bwpczVNILVPUVfrjfXr","NgcGDPR"),Object.defineProperty(o,"__esModule",{value:!0}),o.COOKIE_CONSENT=void 0;var n=e("../../../Core/Utils"),r=e("../../../SDK/Nano/NanoSrv"),a=e("../../../Services/Ads/Ads"),i=e("../../../Services/Platform/Platform"),s=e("../../../Services/Telemetry/Telemetry");(function(e){e[e.ADS_COOKIE_ENABLE=0]="ADS_COOKIE_ENABLE",e[e.TRACKING_COOKIE_ENABLE=1]="TRACKING_COOKIE_ENABLE"})(o.COOKIE_CONSENT||(o.COOKIE_CONSENT={}));var c=function(){function e(){}return e.getInstance=function(){return e._inst||(e._inst=new e),window.GDPRCallback=e._inst.GDPRCallback.bind(this),e._inst},e.prototype.isShowingGDPR_Popup=function(){return i.NgcPlatform.isRunAsIframeOnNano()?!!window.parent.isShowingGDPR:!!window.isShowingGDPR},e.prototype.parseCookies=function(){var e,t=null===(e=window.parseCookies)||void 0===e?void 0:e.call(window);this.GDPRCallback(!!t.ads,!!t.analytic)},e.prototype.getCookie=function(){},e.prototype.GDPRCallback=function(t,o){var i=setInterval(function(){if(s.NgcTelemetry.inst&&a.NgcAds.inst){if(s.NgcTelemetry.inst.isActive=o,a.NgcAds.inst.targetingPersonalAds(t),window.trackingGDPRNeeded&&!e.trackingSent){e.trackingSent=!0;var c={from:"game",type:r.TrackType.GDPR_response,response_tracking_cookie:s.NgcTelemetry.inst.isActive,timeZone:n.Utils.getTimeZone()};r.default.inst.sendTracking(c)}clearInterval(i)}},100)},e._inst=null,e.trackingSent=!1,e}();o.default=c,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry"}],NgcGameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"e10d4QHwOZEJ5uxK/JBwE2N","NgcGameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!0)},t.inst=null,o=a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],NgcGame:[function(e,t,o){"use strict";cc._RF.push(t,"7b81eCNf0xEy7QBd3egNZU1","NgcGame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGame=void 0;var c=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../CrossFeatures/EndGameFlow/Result/Script/ResultUI"),u=e("../../CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),p=e("../../CrossFeatures/TechMessage/Script/TechMessages"),d=e("../../Services/Telemetry/Telemetry"),f=e("./Network/NetUtils"),h=e("./NgcGameCamera"),g=e("./NgcMain"),m=e("./NgcSceneManager"),y=cc._decorator,_=y.ccclass,v=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curGameNetID="",t.paused=!1,t}var o;return r(t,e),o=t,t.prototype.pause=function(e){this.paused=e},t.prototype.onLoad=function(){null==o.inst?(o.inst=this,this.subscribeEvents()):console.error("More than one Game inst created")},t.prototype.onGameQueueStart=function(){this._onBeforeGameQueueStart(),d.NgcTelemetry.inst.LogEvent_GameQueueStart(),this.generateRoundID()},t.prototype.onGamePlayStart=function(){this._onBeforeGameRoundStart(),p.default.inst.onGamePlayStart()},t.prototype.generateRoundID=function(){o.roundID=f.NgcNetUtils.generateRandomUUID()},t.prototype.subscribeEvents=function(){var e=this;this.node.on("changeSpectatorTarget",function(t){return e.changeSpectatorTargetCallback(t)})},t.prototype.changeSpectatorTargetCallback=function(e){var t=m.NgcSceneManager.inst.findPlayerByNetID(e);h.default.inst.setTarget(t,1,!0)},t.prototype.gameOver=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.startSpectatorView()];case 1:return e.sent(),this.showResult(),this._gameOver(),[2]}})})},t.prototype.showRevive=function(){},t.prototype.showResult=function(){var e=this;c.NgcDialogManager.createDialog(l.NgcResultUI.dialogType,l.NgcResultUI.urlPrefab,l.NgcResultUI.bundleName).then(function(t){var o=t.getComponent(l.NgcResultUI);o.init(function(){e.uploadBestScore(),u.NgcSpectatorManager.inst.startSpectator()}),o.show()})},t.prototype.startSpectatorView=function(){return i(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,c.NgcDialogManager.createDialog(u.NgcSpectatorManager.dialogType,u.NgcSpectatorManager.urlPrefab,u.NgcSpectatorManager.bundleName).then(function(){u.NgcSpectatorManager.inst.show(e.getSpectatorParrent()),u.NgcSpectatorManager.inst.startView()})];case 1:return t.sent(),[2]}})})},t.prototype.showVideoReward=function(){c.NgcDialogManager.createDialog("VideoRewardDialog","VideoRewardDialog","03_end_game_flow").then(function(e){var t=e.getComponent("VideoRewardDialog");t.init(function(){g.NgcMain.inst.reset()}),t.show()})},t.inst=null,t.roundID=null,o=a([_],t)}(cc.Component));o.NgcGame=v,cc._RF.pop()},{"../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../Services/Telemetry/Telemetry":"Telemetry","./Network/NetUtils":"NetUtils","./NgcGameCamera":"NgcGameCamera","./NgcMain":"NgcMain","./NgcSceneManager":"NgcSceneManager"}],NgcItemInfoManager:[function(e,t,o){"use strict";cc._RF.push(t,"5a628yMIEFGcKe3yJoOn0Kc","NgcItemInfoManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemInfoManager=o.NgcBundleInfo=o.NgcSingleItemInfo=o.NgcItemInfo=o.NgcItemStatusType=void 0;var a,i=e("../../Core/Delegate"),s=e("../../Core/Utils"),c=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),l=e("../../SDK/Nano/NanoSrv"),u=e("../../Services/GameShop/GameShop"),p=e("../../Services/Inventory/Inventory"),d=e("./BuildConfig"),f=e("./NgcLocalStorage"),h=e("./NgcShopManager");(function(e){e[e.Currency=0]="Currency",e[e.IAP=1]="IAP",e[e.Achievement=2]="Achievement",e[e.WatchAds=3]="WatchAds",e[e.DailyReward=4]="DailyReward",e[e.LikeSocial=5]="LikeSocial",e[e.Unlock=6]="Unlock",e[e.Equipped=7]="Equipped",e[e.Bundle=8]="Bundle",e[e.CrownRoad=9]="CrownRoad",e[e.ComingSoon=10]="ComingSoon",e[e.None=11]="None"})(a=o.NgcItemStatusType||(o.NgcItemStatusType={}));var g=function(){};o.NgcItemInfo=g;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(g);o.NgcSingleItemInfo=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(g);o.NgcBundleInfo=y;var _=function(){function e(){this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=null,this._itemInfoList=[],this._singleItemInfoList=[],this._boughtItemIDs=[],this._isStartedLoading=!1,this._finishLoadingCallbackList=new i.default}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"isStartedLoading",{set:function(e){this._isStartedLoading=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsFinishLoading",{get:function(){return!!this._tableItemList&&!!this._bundelDataList&&!!this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemInfoList",{get:function(){return this._itemInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemSpriteFrameList",{get:function(){return this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoughtItemIDs",{get:function(){return this._boughtItemIDs},enumerable:!1,configurable:!0}),e.prototype.registerFinishLoadingCallback=function(e){this._finishLoadingCallbackList.add(e)},e.prototype.deleteFinishLoadingCallback=function(e){this._finishLoadingCallbackList.del(e)},e.prototype.updateEquippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=a.Equipped,this.saveEquippedItemInfoList()),t},e.prototype.updateUnequippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=a.Unlock,this.saveEquippedItemInfoList()),t},e.prototype.updateEquippedItemList=function(e){e=e.filter(function(e){return null!=e}),this._singleItemInfoList.forEach(function(t){var o=e.find(function(e){return e===t.itemID});t.itemStatusType=o?a.Equipped:t.itemStatusType===a.Equipped?a.Unlock:t.itemStatusType}),this.saveEquippedItemInfoList()},e.prototype.updateBoughtItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.isBought=!0,t.itemStatusType=a.Unlock,this._boughtItemIDs.push(t.itemID)),t},e.prototype.updateBrandNewItem=function(e,t){var o=this.getSingleItemInfo(e);o&&(o.isBrandNew=t,this.saveBrandNewItemInfoList())},e.prototype.isThereEliminatedBundle=function(){var e=this._itemInfoList.length;return this.removeEliminatedBundle(),e>this._itemInfoList.length},e.prototype.includeSingleItem=function(e){return this._singleItemInfoList.findIndex(function(t){return t.itemID===e})>-1},e.prototype.getSingleItemInfo=function(e){return this._singleItemInfoList.find(function(t){return t.itemID===e})},e.prototype.getItemSpriteFrame=function(e){var t=e.split("/").pop().replace(".png","");return this._itemSpriteFrameList[t]},e.prototype.saveEquippedItemInfoList=function(){var t=this._singleItemInfoList.filter(function(e){return e.itemStatusType===a.Equipped}).map(function(e){return e.itemID});f.default.setKey(e.EQUIPPED_ITEM_LIST,t)},e.prototype.saveBrandNewItemInfoList=function(){var e=this._singleItemInfoList.filter(function(e){return!0===e.isBrandNew}).map(function(e){return e.itemID});this.uploadBrandNewItemInfoList(e)},e.prototype.uploadBrandNewItemInfoList=function(e,t){var o={_brandNewIDs:e};l.default.inst.servicePost("/playerdata",JSON.stringify(o),function(e,o){e||t&&t(o)})},e.prototype.getBrandNewItemInfoList=function(e){l.default.inst.serviceGet("/playerdata",null,function(t,o){if(!t){var n=JSON.parse(o).data._brandNewIDs||[];e&&e(n)}})},e.prototype.removeEliminatedBundle=function(){var e=this;this._itemInfoList=this._itemInfoList.filter(function(t){if(!t.isBundle)return!0;var o=t;return!e.isBundleExprited(o.timer)&&!e.isBundleContainBoughtItem(o)})},e.prototype.isBundleExprited=function(e){return Date.parse(e)-(new Date).getTime()<0},e.prototype.isBundleContainBoughtItem=function(e){for(var t=0,o=e.itemIDs;t<o.length;t++){var n=o[t];if(this._boughtItemIDs.includes(n))return!0}return!1},e.prototype.getItemInfoByBundleID=function(e){return this._itemInfoList.find(function(t){return t.bundleID===e})},e.prototype.loadData=function(e){var t=this;this._isStartedLoading||(this._itemInfoList=[],this._isStartedLoading=!0,this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=e?null:{},this._singleItemInfoList=[],p.NgcInventory.inst&&p.NgcInventory.inst.onLogin(function(e,o){!e&&o&&(t._tableItemList=p.NgcInventory.inst.objectTypeTable,t.checkAllItemInfoIsReady())}),u.NgcGameShop.inst&&u.NgcGameShop.inst.onLogin(function(e,o){!e&&o&&(t._bundelDataList=u.NgcGameShop.inst.shopTable,t.checkAllItemInfoIsReady())}),cc.loader.loadResDir("Texture/shop_items",cc.SpriteFrame,function(e,o){e&&console.log("Load shop item texture error = ",e),o.length>0&&(t._itemSpriteFrameList={},o.forEach(function(e){return t._itemSpriteFrameList[e.name]=e}),console.log(t._itemSpriteFrameList),t.checkAllItemInfoIsReady())}))},e.prototype.checkAllItemInfoIsReady=function(){this.IsFinishLoading&&(this.generateItemList(),this.getSaveEquippedItemList(),this.getBrandNewItemList(),this.getBoughtItemIDs(),this.removeEliminatedBundle(),this._finishLoadingCallbackList.call())},e.prototype.getSaveEquippedItemList=function(){var t=this;f.default.getKey(e.EQUIPPED_ITEM_LIST,[]).forEach(function(e){var o=t._singleItemInfoList.find(function(t){return t.itemID===e});o&&(o.itemStatusType=a.Equipped)})},e.prototype.clearSaveEquippedItemList=function(){f.default.setKey(e.EQUIPPED_ITEM_LIST,[])},e.prototype.getBrandNewItemList=function(){var e=this,t=function(t){t.forEach(function(t){var o=e._singleItemInfoList.find(function(e){return e.itemID===t});o&&(o.isBrandNew=!0)})};d.NgcBuildConfig.offlineMode||this.getBrandNewItemInfoList(function(e){t(e),h.NgcShopManager.getInstance().checkHasBrandNewItem()})},e.prototype.getBoughtItemIDs=function(){return this._boughtItemIDs=this._singleItemInfoList.filter(function(e){return e.isBought}).map(function(e){return e.itemID})},e.prototype.generateItemList=function(){for(var e in this._bundelDataList){var t=u.NgcGameShop.inst.getItems(e);(null==t?void 0:t.length)>=1&&this.addItemInfo(t,e)}},e.prototype.addItemInfo=function(e,t){var o=this,n=e.map(function(e){return o._tableItemList[e.itemID]}).filter(function(e){return null!=e&&null!=e});if(0!=n.length){var r=n.map(function(e){return o.getItemSpriteFrame(e.picture)}),i=this._bundelDataList[t],s=1!=n.length,c=this.getItemInfoByBundleID(t);if(null==c&&(s?c=new y:(c=new m,this._singleItemInfoList.push(c)),this._itemInfoList.push(c)),c.bundleID=t,c.isBundle=s,c.price=0!==i.price?u.NgcGameShop.inst.getPrices(i.bundleID)[0]:null,c.category=i.category,c.subCategory=0!=i.sub_category?i.sub_category:"UNNAME_CATEGORY",0==s){var l=c;l.itemID=e[0].itemID,l.itemName=i.name,l.spriteFrame=r[0],l.isBought=this.isItemBought(e[0].itemID),l.isBrandNew=!1,l.isEquipped=!1,l.itemStatusType=this.determineItemStatus(l.isBought,c.price),l.displayType=s?null:i.displayType?i.displayType:"type1",l.isShowName=!!i.isShowName&&1==i.isShowName}else{var p=c;p.itemIDs=e.map(function(e){return e.itemID}),p.itemNames=e.map(function(e){return e.itemID}),p.spriteFrames=r,p.fullCost=0!==i.fullCost?u.NgcGameShop.inst.getFullCost(i.bundleID)[0]:null,p.bundleName=i.name,p.itemStatusType=a.Bundle,p.promoTag=i.promoTag,p.xValue=i.xValue,p.timer=i.timer}}},e.prototype.determineItemStatus=function(e,t){var o;if(e)return a.Unlock;if(null!=t){var n=null===(o=p.NgcInventory.inst.objectTypeTable[t.currency])||void 0===o?void 0:o.category;if(!n)return a.None;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.soft_currency))return a.Currency;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.achievement_currency))return c.NgcAchievementHelper.getInstance().updateAchievementMaxValue(t.currency,t.value),a.Achievement;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.ads_currency))return a.WatchAds;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.daily_login_currency))return a.DailyReward;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.crown_road_currency))return a.CrownRoad;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.coming_soon_currency))return a.ComingSoon;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.like_social_currency))return a.LikeSocial;if(n===s.Utils.enumToString(p.InventoryCurrencyType,p.InventoryCurrencyType.iap_currency))return a.IAP}return a.None},e.prototype.isItemBought=function(e){return!!p.NgcInventory.inst.ownedItems[e]},e._instance=null,e.EQUIPPED_ITEM_LIST="EQUIPPED_ITEM_LIST",e.BRAND_NEW_ITEM_LIST="BRAND_NEW_ITEM_LIST",e}();o.NgcItemInfoManager=_,cc._RF.pop()},{"../../Core/Delegate":"Delegate","../../Core/Utils":"Utils","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","./BuildConfig":"BuildConfig","./NgcLocalStorage":"NgcLocalStorage","./NgcShopManager":"NgcShopManager"}],NgcLocalStorage:[function(e,t,o){"use strict";cc._RF.push(t,"87e6amhpJRBVKyOf23BaoGr","NgcLocalStorage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("simple-crypto-js"),r=e("./BuildConfig"),a=function(){function e(){}return e.getCryptr=function(){return this.cryptr||(this.cryptr=new n.default(e.ENDCRYPT_KEY)),this.cryptr},e.keymangle=function(e,t){return(e+=t?r.NgcBuildConfig.platformGameID:"").split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0).toString()},e.setKey=function(t,o,n){void 0===n&&(n=!0);var r=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(t,n),r.encrypt(o))},e.getKey=function(e,t,o){var n;void 0===o&&(o=!0);try{n=this.getCryptr().decrypt(cc.sys.localStorage.getItem(this.keymangle(e,o)))}catch(r){n=t}return""!==n&&null!=n||(n=t),n},e.ENDCRYPT_KEY="123321",e.cryptr=null,e}();o.default=a,cc._RF.pop()},{"./BuildConfig":"BuildConfig","simple-crypto-js":139}],NgcLuckyBoosterManager:[function(e,t,o){"use strict";cc._RF.push(t,"7c3a8ip6NpDPI+9HeFJQaOG","NgcLuckyBoosterManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLuckyBoosterManager=o.NO_ADS_SPIN_CURRENCY_NUMBER=o.NO_ADS_SPIN_CURRENCY=o.LuckyItem=o.LuckyBoosterInfo=void 0;var a=e("../../../../Scripts/Screens/StartScreen/StartMain"),i=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcItemInfoManager"),u=e("../../../GameFramework/Scripts/NgcLocalStorage"),p=e("../../../GameFramework/Scripts/NgcMain"),d=e("../../../GameFramework/Scripts/NgcShopManager"),f=e("../../../SDK/Nano/NanoSrv"),h=e("../../../Services/Ads/Ads"),g=e("../../../Services/Inventory/Inventory"),m=e("../../../Services/Telemetry/Telemetry"),y=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),_=e("../../OfflineMode/OfflineMode"),v=e("./BoosterUseTypeHelper/NgcBoosterTypeHelper"),S=e("./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper"),b=e("./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper"),N=e("./NgcBoosterScroll");o.LuckyBoosterInfo=function(){};o.LuckyItem=function(){},o.NO_ADS_SPIN_CURRENCY="coin",o.NO_ADS_SPIN_CURRENCY_NUMBER=20;var P=function(){function e(){this._luckyBoosterInfo={},this._dailyBoosterUI=null,this._boosterUseType=v.BoosterUseType.IN_MAIN_MENU,this._boosterTypeHelperList=[],this.applyBoosterCallback=null,this._pressedSpinButton=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"BoosterUseType",{get:function(){return this._boosterUseType},set:function(e){this._boosterUseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AvailableBooster",{get:function(){return u.default.getKey("availableBooster","")},set:function(e){u.default.setKey("availableBooster",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoosterTypeHelper",{get:function(){return this._boosterTypeHelperList[this._boosterUseType]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LuckyBoosterInfo",{get:function(){return this._luckyBoosterInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DailyBoosterUI",{get:function(){return this._dailyBoosterUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NumberOfRound",{get:function(){return u.default.getKey("numberOfRound",0)},set:function(e){u.default.setKey("numberOfRound",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EnableLuckyBooster",{set:function(e){this._dailyBoosterUI.spinButton.interactable=e,this._dailyBoosterUI.spinButton.enableAutoGrayEffect=!e,this._dailyBoosterUI.boosterScroll.RunNormal=e&&this.BoosterTypeHelper.canRunNormal()},enumerable:!1,configurable:!0}),e.prototype.initBoosterTypeHelper=function(){this._boosterTypeHelperList.push(new S.NgcBoosterTypeInGameHelper(this)),this._boosterTypeHelperList.push(new b.NgcBoosterTypeInMainMenuHelper(this))},e.prototype.init=function(e){var t=this;this._dailyBoosterUI=e,console.log("lkb",g.NgcInventory.inst.objectTypeTable),this.initBoosterTypeHelper(),this._dailyBoosterUI.hide();var o=function(){t.onFinishLoadingItem(),l.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(o)};l.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(o)},e.prototype.setApplyBoosterCallback=function(e){this.applyBoosterCallback=e},e.prototype.applyBooster=function(){this.applyBoosterCallback&&this.applyBoosterCallback()},e.prototype.consumeBooster=function(){this.AvailableBooster="",this.EnableLuckyBooster=!0,this.checkBoosterUI()},e.prototype.enableUseBoosterInGame=function(e){this._dailyBoosterUI.enableInGameText(e),e&&this._dailyBoosterUI.boosterScroll.displaySpinAnimation(this.AvailableBooster,0,.7,null)},e.prototype.checkBoosterUI=function(){this.BoosterTypeHelper.checkShowBooster(),this.BoosterTypeHelper.checkDisplayUseBoosterInGame(),a.default.inst.checkBoosterStatusUI()},e.prototype.onFinishLoadingItem=function(){this._luckyBoosterInfo=f.default.inst.getCurGameInfo().luckyBooster,this.EnableLuckyBooster=!0,this.getBoosterItemList(),this.checkBoosterUI()},e.prototype.getBoosterItemList=function(){var e,t=g.NgcInventory.inst.objectTypeTable;null===(e=this._luckyBoosterInfo.luckyTable)||void 0===e||e.forEach(function(e){e&&(e.spriteFrame=l.NgcItemInfoManager.getInstance().getItemSpriteFrame(t[e.itemID].picture))}),this._dailyBoosterUI.boosterScroll.init(this._luckyBoosterInfo.luckyTable,N.SpinDirection.DOWN)},e.prototype.handleNanoServiceError=function(e){"adDailyLimit"===JSON.parse(e).res&&this.onAdDailyLimit()},e.prototype.onAdDailyLimit=function(){this._dailyBoosterUI.showLuckyBoosterMessage("LKB_DAILYSPINLIMIT"),m.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.onSpinNotEnoughCurrency=function(){this._dailyBoosterUI.showLuckyBoosterMessage("ITS_NOT_ENOUGH_COINS"),m.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.trackClaimBooster=function(e){var t=this.NumberOfRound+1;m.NgcTelemetry.inst.LogEvent_LuckyboosterCollected(e.itemID,e.quantity,t),this.NumberOfRound=t},e.prototype.canClaimBooster=function(){return n(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(e,t){if(c.NgcBuildConfig.offlineMode||h.NgcAds.inst.isFakeAdsPlatform())return g.NgcInventory.inst.getItemCount(o.NO_ADS_SPIN_CURRENCY,function(n,r){!n&&r&&r.count>=o.NO_ADS_SPIN_CURRENCY_NUMBER&&e(!0),t("notEnoughCurrency")}),void e(!0);f.default.inst.serviceGet("/luckybooster/canclaim",null,function(o,n){o&&t("adDailyLimit"),!o&&n&&(JSON.parse(n),e(!0))})})]})})},e.prototype.onSpinButtonClick=function(){return n(this,void 0,void 0,function(){var e,t,o=this;return r(this,function(n){switch(n.label){case 0:if(this._pressedSpinButton)return[2];this._pressedSpinButton=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.canClaimBooster()];case 2:return n.sent()?(m.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(0),this.EnableLuckyBooster=!1,this._dailyBoosterUI.boosterScroll.spinFast=!0,this._dailyBoosterUI.boosterScroll._moveSpeed=100,cc.tween(this._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:800},{easing:"cubicIn"}).start(),e=function(e,t){e?o.getLuckyBoosterWinItem():(cc.tween(o._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:100},{easing:"cubicOut"}).call(function(){o._dailyBoosterUI.boosterScroll.spinFast=!1,o.EnableLuckyBooster=!0}).start(),t<=0&&o._dailyBoosterUI.showLuckyBoosterMessage("NGG_ADS_UNAVAILABLE")),o._pressedSpinButton=!1},h.NgcAds.inst.isFakeAdsPlatform()?e(!0,0):s.default.inst.showRewardVideo(s.NgcPointcuts.videoLuckybooster,null,null,null,e),[3,4]):[2];case 3:return t=n.sent(),this.onDailyError(t),this._pressedSpinButton=!1,[3,4];case 4:return[2]}})})},e.prototype.onDailyError=function(e){switch(e){case"adDailyLimit":this.onAdDailyLimit();break;case"notEnoughCurrency":this.onSpinNotEnoughCurrency()}},e.prototype.getLuckyBoosterWinItem=function(){var e=this;(function(){if(c.NgcBuildConfig.offlineMode){var t=i.Utils.randomArr(e._luckyBoosterInfo.luckyTable).itemID;e.displaySpinAnimation(t)}else f.default.inst.servicePost("/luckybooster/claim",JSON.stringify({}),function(t,o){if(t)return e.handleNanoServiceError(t),void(e.EnableLuckyBooster=!0);if(!t&&o){var n=JSON.parse(o);e.displaySpinAnimation(n.data.itemID)}})})()},e.prototype.displaySpinAnimation=function(e){var t=this,o=i.Utils.randomFromTo(this._luckyBoosterInfo.minFullSpins,this._luckyBoosterInfo.maxFullSpins);this._dailyBoosterUI.boosterScroll.spinFast=!1,this._dailyBoosterUI.boosterScroll.displaySpinAnimation(e,o,3,function(){return t.showItemClaimAnimation(e)})},e.prototype.showItemClaimAnimation=function(e){var t=this,o=this._luckyBoosterInfo.luckyTable.find(function(t){return t.itemID===e}),n={itemID:o.itemID,count:o.quantity};y.default.inst.showRewardAnimation(n,function(){return t.checkUseBooster(o)},!0),this.trackClaimBooster(o)},e.prototype.checkUseBooster=function(e){var t=this;this.BoosterTypeHelper.checkPlayAnimationMoveBoosterToCharacter(e.spriteFrame,function(){return t.onClaimBooster(e.itemID)})},e.prototype.onClaimBooster=function(e){var t,n,r=this;if(c.NgcBuildConfig.offlineMode||h.NgcAds.inst.isFakeAdsPlatform()){var a=["",0],i=a[0],s=a[1];c.NgcBuildConfig.offlineMode?(i=(t=[_.OfflineMode.Config.DailyBoosterType,_.OfflineMode.Config.DailyBoosterPrice])[0],s=t[1]):(i=(n=[o.NO_ADS_SPIN_CURRENCY,o.NO_ADS_SPIN_CURRENCY_NUMBER])[0],s=n[1]),g.NgcInventory.inst.consumeItem(i,s,function(){})}c.NgcBuildConfig.offlineMode&&(_.OfflineMode.UpdateItem(e,1),_.OfflineMode.MarkClaimLuckyBooster(e)),g.NgcInventory.inst.forceFetchInventory(function(){p.NgcMain.inst.onClaimBooster(e),d.NgcShopManager.getInstance().updateBoughtItem(e),r.AvailableBooster=e,r.EnableLuckyBooster=!0,r.checkBoosterUI()})},e._instance=null,e}();o.NgcLuckyBoosterManager=P,cc._RF.pop()},{"../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../OfflineMode/OfflineMode":"OfflineMode","./BoosterUseTypeHelper/NgcBoosterTypeHelper":"NgcBoosterTypeHelper","./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper":"NgcBoosterTypeInGameHelper","./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper":"NgcBoosterTypeInMainMenuHelper","./NgcBoosterScroll":"NgcBoosterScroll"}],NgcMain:[function(e,t,o){"use strict";cc._RF.push(t,"20518EDME9IH7pdIlp3ji+5","NgcMain");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMain=o.AppContext=o.AppState=void 0;var c,l,u=e("../../Core/Utils"),p=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),d=e("../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog"),f=e("../../SDK/Nano/NanoSrv"),h=e("./Ads/AdsManager_impl"),g=e("./Ads/NgcAdsManager"),m=e("./Network/NetUtils"),y=e("./NgcUserInfo"),_=cc._decorator,v=_.ccclass;_.property,function(e){e[e.InitSettle=0]="InitSettle",e[e.StartScreen=1]="StartScreen",e[e.ShopScreen=2]="ShopScreen",e[e.Game=3]="Game",e[e.PartyScreen=4]="PartyScreen",e[e.Roulette=5]="Roulette",e[e.Leaderboard=6]="Leaderboard"}(c=o.AppState||(o.AppState={})),function(e){e[e.NOT_SET=0]="NOT_SET",e[e.Options=1]="Options",e[e.MainMenu=2]="MainMenu",e[e.Matchmaking=3]="Matchmaking",e[e.Gameplay=4]="Gameplay",e[e.Results=5]="Results",e[e.Rewards=6]="Rewards",e[e.Spectator=7]="Spectator",e[e.Leaderboard=8]="Leaderboard",e[e.PartyRoom=9]="PartyRoom",e[e.ItemsShopScreen=10]="ItemsShopScreen",e[e.EndOfActionPhase=11]="EndOfActionPhase",e[e.PrizeScreen=12]="PrizeScreen"}(l=o.AppContext||(o.AppContext={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curGameNetID="",t.localUserName="",t.appState=c.StartScreen,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){null==o.inst?(window.warningBack=this.showWarningPopup.bind(this),o.inst=this,this.createInstanceOfAdsManager()):console.error("More than one Game inst created")},t.prototype.createInstanceOfAdsManager=function(){g.default.inst||(g.default.inst=new h.default)},t.setAppContext=function(e){0!=o.appContextStack.length?this.appContextStack[this.appContextStack.length-1]=e:o.pushAppContext(e)},t.pushAppContext=function(e){o.appContextStack.push(e)},t.getAppContext=function(){return 0==o.appContextStack.length?l.NOT_SET:this.appContextStack[this.appContextStack.length-1]},t.getAppContextName=function(){var e=this.getAppContext();return u.Utils.enumToString(l,e)},t.prototype.updateNameToNanosrv=function(){},t.prototype.showWarningPopup=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return d.default.isOpening?[2]:(e=cc.sys.isMobile?d.default.NavBarLeaveGame_Mobile:d.default.NavBarLeaveGame_PC,[4,p.NgcDialogManager.createDialog(d.default.dialogType,e,d.default.bundleName)]);case 1:return t.sent().getComponent(d.default).show(),[2]}})})},t.popAppContext=function(){0!=o.appContextStack.length&&this.appContextStack.pop()},t.prototype.setState=function(){},t.prototype.createFakeName=function(){return f.default.inst.randomNameDisabled||(y.default.localUserName=this.localUserName="Guest"+m.NgcNetUtils.RandomRange(1,9999,!0).toString()),this.updateNameToNanosrv(),this.localUserName},t.prototype.reset=function(){this._reset()},t.inst=null,t.appContextStack=[],o=a([v],t)}(cc.Component);o.NgcMain=S,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog":"NavBarLeaveGameDialog","../../SDK/Nano/NanoSrv":"NanoSrv","./Ads/AdsManager_impl":"AdsManager_impl","./Ads/NgcAdsManager":"NgcAdsManager","./Network/NetUtils":"NetUtils","./NgcUserInfo":"NgcUserInfo"}],NgcNetClientRefactor:[function(e,t,o){"use strict";cc._RF.push(t,"2080dMH2odOAZQ+BuSQLHLH","NgcNetClientRefactor");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetClientRefactor=o.WS_CLOSE_FOR_NEW_CONNECTION_CODE=void 0;var c=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),l=e("../BuildConfig"),u=e("./Messaging/MessageBuilder"),p=e("./Messaging/Protocol"),d=e("./Messaging/MessageDefines"),f=e("./NetStatsTracker"),h=e("long"),g=e("../../../Services/PartyRoom/PartyRoom"),m=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),y=e("./NetworkInterface"),_=e("../../../SDK/Nano/NanoSrv"),v=cc._decorator,S=v.ccclass;v.property,o.WS_CLOSE_FOR_NEW_CONNECTION_CODE=4e3;var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.websocket=null,t.serverAddress="ws://localhost:1337",t.connected=!1,t.LATENCY_HISTORY_MAX_ENTRIES=10,t.onMessageHandlers={},t.connectRetryCount=0,t.connectCycleRunning=!1,t.messagesRecd=0,t.lastMsgTime=-1,t.serverDelta=0,t.lowestPing=0,t.recentPing=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.calculatedDelta=!1,t.latencyMovingHistory=[],t.averageLatencyMS=0,t.serverClockOffsetMS=0,t.clientID="",t.localPlayerID="",t.broadcastMessageRoutingTable={},t.pingTimeout=null,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){if(n.inst)cc.error("More than one NetClient!!");else{n.inst=this;var e=_.default.inst&&_.default.inst.getCurGameInfo()&&_.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||l.NgcBuildConfig.gameServerURL}},t.prototype.connect=function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=n.CONNECTION_TIMEOUT),void 0===r&&(r=n.MAX_RETRY),i(this,void 0,Promise,function(){var n,a,i,c,l=this;return s(this,function(){return n=r,a=this.serverAddress,""!=e&&(a=e),i=e!==this.serverAddress,c=function(e,o){n<=0?o():l.websocket&&l.websocket.readyState===WebSocket.OPEN?e(l.websocket):l.connect(a,t,n-1).then(e,o)},[2,new Promise(function(e,n){setTimeout(function(){c(e,n)},t),i&&l.websocket&&l.websocket.close(o.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket&&l.websocket.readyState==WebSocket.OPEN?e(l.websocket):(l.websocket&&l.websocket.close(o.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket=new WebSocket(a,[]),cc.log("[NGC_NetClient] Trying to connect to server @ "+a),l.websocket.onopen=function(t){l.serverAddress=a,l.websocket.binaryType="arraybuffer",l._onOpen(t),e(l.websocket)},l.websocket.onmessage=function(e){l._onMessage(e)},l.websocket.onerror=function(e){l._onError(e)},l.websocket.onclose=function(e){l._onClose(e)})})]})})},t.prototype._onOpen=function(e){cc.log("[NGC_NetClient] Connection is opened!"),this.connected=!0,this.schedule(this._sendPing,n.PING_TIME_MS/1e3),this.onOpen&&this.onOpen(e)},t.prototype._onMessage=function(e){if(this.messagesRecd++,this.lastMsgTime=Date.now(),e.data instanceof ArrayBuffer){var t=new Uint8Array(e.data),o=p.GetMessageType(t);o>p.Protocol.OP_END?this.onRoomMessage(o,t):this.resolveSystemMessage(o,t)}else"string"==typeof e.data&&this.checkJsonMessageData(e.data);this.onMessageFromServer&&this.onMessageFromServer(e)},t.prototype.onMessage=function(e,t){this.onMessageHandlers[e]=t},t.prototype.onRoomMessage=function(e,t){this.onMessageHandlers[e]&&this.onMessageHandlers[e](t)},t.prototype._onError=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return cc.log("[NGC_NetClient] ConnectError: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),this.onError?[4,this.onError(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype._onClose=function(e){return i(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return cc.log("[NGC_NetClient] ConnectClose: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),t=e.code===o.WS_CLOSE_FOR_NEW_CONNECTION_CODE?y.DisconnectReason.OpenNewConnection:y.DisconnectReason.Server,this._onDisconnectedCB&&this._onDisconnectedCB(t),this.onClose?[4,this.onClose(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype._sendPing=function(){this.send(u.MessageBuilder[p.Protocol.PING](Date.now(),0))},t.prototype.startConnectionCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||(cc.log("[NGC_NetClient] Start connection cycle"),c.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=c.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.connect(e),this.schedule(this.connectCycleFunc,n.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.connect()},t.prototype.cancelConnectCycle=function(){console.log("Cancel connection cycle"),this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.isConnected=function(){return this.connected},t.prototype._onServerInit=function(e){var t=d.Server_Init.decode(e);this.clientID=t.clientID,this.onServerInit&&this.onServerInit(t),cc.log("[NGC_NetClient] Server init",t)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.handleNGCBroadcast=function(e){var t=d.NGC_Broadcast.decode(e),o=t.type,n=this.broadcastMessageRoutingTable[o];n?n.forEach(function(e){e(t)}):console.warn("Received unrecognized broadcast message of type "+o)},t.prototype.sendNgcBroadcast=function(e,t){this.send(u.MessageBuilder[p.Protocol.NGC_BROADCAST](e,this.getCombinedNetID(),t,Date.now()))},t.prototype.noteLatency=function(e){f.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),m.default.inst.setTrackingParams({averagePing:Math.round(this.averageLatencyMS),currentPing:e}),m.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype._onServerPing=function(e){var t=d.Ping.decode(e),o=h.fromValue(t.reqTime).toNumber(),n=h.fromValue(t.resTime).toNumber();if(0!==n){var r=Date.now();this.lastPongTime=r,this.recentPing=r-o,(this.recentPing<this.lowestPing||!this.calculatedDelta)&&(this.calculatedDelta=!0,this.lowestPing=this.recentPing,this.serverDelta=n-this.recentPing-o),this.noteLatency(this.recentPing),this.onServerPing&&this.onServerPing(t)}else this.send(u.MessageBuilder[p.Protocol.PING](t.reqTime,Date.now()))},t.prototype.exitGame=function(){this._onPreExitGame&&this._onPreExitGame(),this.sendLeaveGameMessage(),this._onPostExitGame&&this._onPostExitGame()},t.prototype.resolveSystemMessage=function(e,t){switch(e){case p.Protocol.SERVER_INIT:this._onServerInit(t);break;case p.Protocol.PING:this._onServerPing(t);break;case p.Protocol.NGC_BROADCAST:this.handleNGCBroadcast(t)}},t.prototype.checkJsonMessageData=function(e){var t=JSON.parse(e);console.log("OnMessage: "+e),g.NgcPartyRoom.inst&&g.NgcPartyRoom.inst.updateMessage(t)},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.send=function(e){var t;null===(t=this.websocket)||void 0===t||t.send(e)},t.prototype.sendJoinGameMessage=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=u.MessageBuilder[p.Protocol.JOIN_ROOM](e,t,o);this.send(n)},t.prototype.sendLeaveGameMessage=function(){var e=u.MessageBuilder[p.Protocol.LEAVE_ROOM]();this.send(e)},t.prototype.isClientID=function(e){return n.DetachClientID(e)===this.clientID},t.prototype.isLocalPlayerID=function(e){return n.DetachPlayerID(e)===this.localPlayerID},t.prototype.getCombinedNetID=function(){return this.clientID+":"+this.localPlayerID},t.DetachClientID=function(e){return e.split(":").shift()},t.DetachPlayerID=function(e){return e.split(":").pop()},t.prototype.forceDisconnect=function(e){void 0===e&&(e=y.DisconnectReason.ForcedByClient),this.connected=!1,this.unschedule(this._sendPing),this.websocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.inst=null,t.PING_TIME_MS=1e3,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,t.GAME_UPDATE_TIME_MS=200,t.CONNECTION_TIMEOUT=5e3,t.MAX_RETRY=5,n=a([S],t)}(cc.Component);o.NgcNetClientRefactor=b,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/PartyRoom/PartyRoom":"PartyRoom","../BuildConfig":"BuildConfig","./Messaging/MessageBuilder":"MessageBuilder","./Messaging/MessageDefines":"MessageDefines","./Messaging/Protocol":"Protocol","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface",long:100}],NgcNetClient:[function(e,t,o){"use strict";cc._RF.push(t,"9d867cIF1ZEn5Yj8ZZ31l+x","NgcNetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetClient=void 0;var c=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),l=e("../../../Core/Utils"),u=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),p=e("../../../SDK/Nano/NanoSrv"),d=e("../../../Services/Platform/Platform"),f=e("../BuildConfig"),h=e("./NetStatsTracker"),g=e("./NetworkInterface"),m=cc._decorator,y=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.broadcastMessageRoutingTable={},t.GAME_UPDATE_TIME_MS=200,t.serverAddress="ws://localhost:1337",t.wssCacert=null,t.localPlayerNetID="",t.connected=!1,t.webSocket=null,t.averageLatencyMS=0,t.latencyPingSampleCount=0,t.latencyMovingHistory=[],t.latencyHistroyNextIndexNumber=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.pingsSent=0,t.pongsRecd=0,t.messagesRecd=0,t.serverClockOffsetMS=0,t.LATENCY_HISTORY_MAX_ENTRIES=30,t.pingLog={},t.pongLog={},t.gameMode=!1,t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){if(o.inst)console.error("More than one NetClient!!");else{o.inst=this;var e=p.default.inst&&p.default.inst.getCurGameInfo()&&p.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||f.NgcBuildConfig.gameServerURL}},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.isConnected=function(){return this.connected},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,console.log("Scheduling send player state"),this.schedule(this.sendLocalPlayerGameState,this.GAME_UPDATE_TIME_MS/1e3))},t.prototype.getServerTime=function(){return Date.now()-this.serverClockOffsetMS},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerGameState)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.localTimeToServer=function(e){return e},t.prototype._startUpdateLoop=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.gameMode?[4,this.timeout(this.GAME_UPDATE_TIME_MS)]:[3,2];case 1:return e.sent(),this.sendLocalPlayerGameState(),[3,0];case 2:return[2]}})})},t.prototype._sendWebsocketMessage=function(e){e instanceof Uint8Array&&d.NgcPlatform.inst.isSocketMessageUsingArrayBuffer()&&(e=l.Utils.convertUint8ArrayToArrayBuffer(e)),this.webSocket.send(e)},t.prototype.sendLocalPlayerGameState=function(){this._sendLocalPlayerGameState()},t.prototype.exitGame=function(){this._exitGame()},t.prototype.sendPing=function(){this._sendPing()},t.prototype.broadcastMessage=function(e,t,o){this._broadcastMessage(e,t,o)},t.prototype.noteLatency=function(e){h.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),u.default.inst.setTrackingParams({averagePing:this.averageLatencyMS,currentPing:e}),u.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype.handleMessage_ServerBroadcastMessage=function(e){var t=e.type,o=this.broadcastMessageRoutingTable[t];o?o.forEach(function(t){t(e)}):console.warn("Received unrecognized broadcast message of type "+t)},t.prototype.handleMessage_ServerPing=function(e){this._handleMessage_ServerPing(e)},t.prototype.handleMessage_ServerFullGameState=function(e){this._handleMessage_ServerFullGameState(e)},t.prototype.handleMessage_ServerGameStartingStatus=function(e){this._handleMessage_ServerGameStartingStatus(e)},t.prototype.handleMessage_ServerOrderCreateBot=function(e){this._handleMessage_ServerOrderCreateBot(e)},t.prototype.requestToHostBot=function(e,t){this._requestToHostBot(e,t)},t.prototype.requestToJoinGame=function(e,t){void 0===e&&(e="-1"),void 0===t&&(t=""),this._requestToJoinGame(e,t)},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),console.log("Start connect cycle"),c.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=c.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0},t.prototype.onDisconnect=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._onDisconnectedCB&&this._onDisconnectedCB(g.DisconnectReason.Server),[4,this._onDisconnect(e)];case 1:return t.sent(),[2]}})})},t.prototype.onError=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._onError(e)];case 1:return t.sent(),[2]}})})},t.prototype.onConnect=function(){this._onConnect()},t.prototype.tryConnectToServer=function(e,t){void 0===e&&(e=null),void 0===t&&(t=function(){}),this._tryConnectToServer(e,t)},t.prototype.start=function(){},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.forceDisconnect=function(e){void 0===e&&(e=g.DisconnectReason.ForcedByClient),console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),this.webSocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.PING_TIME_MS=1e3,t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,a([_({type:cc.Asset})],t.prototype,"wssCacert",void 0),o=a([y],t)}(cc.Component);o.NgcNetClient=v,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../BuildConfig":"BuildConfig","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface"}],NgcRedirectionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c7677p77IVG+5C1+QmpOQsE","NgcRedirectionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/CountryFlagsManager"),l=e("../../../SDK/Nano/NanoSrv"),u=e("../../../Services/Platform/Platform"),p=e("../../Dialogs/Script/DialogBase"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackingParams={type:l.TrackType.Vignette_interaction,interaction_type:"",gameId:s.NgcBuildConfig.platformGameID,platform:s.NgcBuildConfig.buildPlatform,page_url:encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href),country:c.NgcCountryFlagsManager.localCountry},t.qrCodeGroup=null,t.appStoreNode=null,t.ggpNode=null,t.qrSprite=null,t.closeBtnNode=null,t.nanoIcon=null,t._dialogOriginalSize=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?window.addEventListener("resize",this.updateDialogPosition.bind(this)):cc.view.on("canvas-resize",this.updateDialogPosition.bind(this),this)},t.prototype.init=function(e){var t=this;if(void 0===e&&(e={}),this.node.setScale(.8),this._redirectInfo=e,this.qrCodeGroup.active=!!e.qr_code,this.closeBtnNode.active=!!e.close_button,this.ggpNode.active=!!e.ggp_button,this.appStoreNode.active=!!e.appstore_button,e.qr_code){this._QRCodeShortenLink=e.qr_code_url;var o=this;u.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){o.createQRCode(e)})}e.app_logo&&(this._nanoLogoURL=e.app_logo,cc.assetManager.loadRemote(this._nanoLogoURL,function(e,o){if(e)throw new Error("[App Logo] Remote asset app logo is missing a valid URL");t.nanoIcon.spriteFrame=new cc.SpriteFrame(o)})),this.show(),this.updateDialogPosition()},t.prototype.updateDialogPosition=function(){var e=this.node.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.top=s.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height,e.updateAlignment()},t.prototype.createQRCode=function(e){this.qrSprite.spriteFrame=e,console.log("@@@@ createQRCode ",e)},t.prototype.sendTracking=function(e){var t={type:l.TrackType.Vignette_interaction,interaction_type:e,gameId:s.NgcBuildConfig.platformGameID,platform:s.NgcBuildConfig.buildPlatform,page_url:encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href),os:i.OS_TYPE[i.Utils.getOSType()].toLowerCase(),timeZone:i.Utils.getTimeZone(),country:c.NgcCountryFlagsManager.localCountry};l.default.inst.sendTracking(t)},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.closeOnClick=function(){this.hide()},t.prototype.onGGPBtnClick=function(){this._redirectInfo.ggp_page&&(this.sendTracking("click_GGP"),cc.sys.openURL(this._redirectInfo.ggp_page))},t.prototype.onAppStorePBtnClick=function(){this._redirectInfo.appstore_page&&(this.sendTracking("click_AppStore"),cc.sys.openURL(this._redirectInfo.appstore_page))},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcRedirectionDialog",t.urlPrefab="NgcRedirectionDialog",t.bundleName="02_techmessage_dialog",a([h(cc.Node)],t.prototype,"qrCodeGroup",void 0),a([h(cc.Node)],t.prototype,"appStoreNode",void 0),a([h(cc.Node)],t.prototype,"ggpNode",void 0),a([h(cc.Sprite)],t.prototype,"qrSprite",void 0),a([h(cc.Node)],t.prototype,"closeBtnNode",void 0),a([h(cc.Sprite)],t.prototype,"nanoIcon",void 0),a([f],t)}(p.NgcDialogBase);o.default=g,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/DialogBase":"DialogBase"}],NgcRedirection:[function(e,t,o){"use strict";cc._RF.push(t,"b99a3YDegxGToTxrbteKgbD","NgcRedirection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.RedirectionType=void 0;var c,l=e("../../../Core/Utils"),u=e("../../../GameFramework/Scripts/BuildConfig"),p=e("../../../GameFramework/Scripts/CountryFlagsManager"),d=e("../../../GameFramework/Scripts/NgcUserInfo"),f=e("../../../SDK/Nano/NanoSrv"),h=e("../../../Services/Platform/Platform"),g=e("../../Dialogs/Script/NgcDialogManager"),m=e("../../GIF/CCGIF"),y=e("./NgcRedirectionDialog"),_=cc._decorator,v=_.ccclass,S=_.property;(function(e){e.Deactive="deactivated",e.Redirection_Popup="redirection_popup",e.Direct_Access="direct_access"})(c=o.RedirectionType||(o.RedirectionType={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifSp=null,t.response={main_menu_vignette:{desktop:{},mobile_browser:{},mobile_app:{},mobile_webview:{}},general:{ggp_page:"",appstore_page:"",vignette_thumbnail:"",qr_link:"",app_logo:""}},t._redirectionType=c.Deactive,t}return r(t,e),t.prototype.onLoad=function(){var e=this;cc.sys.isMobile||(this.node.getComponent(cc.Widget).right=.03),this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,h.NgcPlatform.isOfflineMode()?this.node.active=!1:f.default.inst.serviceGet("/redirections",null,function(t,o){if(t)e.node.active=!1;else{var n=JSON.parse(o);if(n.status){if(e.parseConfig(n.data||{}),!e.isSupportVignette())return void(e.node.active=!1);"/"===e.response.general.qr_link.charAt(e.response.general.qr_link.length-1)&&(e.response.general.qr_link=e.response.general.qr_link.slice(0,e.response.general.qr_link.length-1)),console.log("@@@@Redirection Response ",e.response);var r=n.data.general.vignette_thumbnail;e.node.addComponent(m.default).loadUrl(e.gifSp,r,function(){cc.tween(e.node).delay(1).to(.75,{opacity:255},{easing:"backOut"}).call(function(){e.node.getComponent(cc.Button).interactable=!0}).start()})}}})},t.prototype.parseConfig=function(e){this.response=e,h.NgcPlatform.isRunFromApp()?this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_app||{}:cc.sys.isMobile?l.Utils.isRunningWithFacebookApp&&(this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_browser||{}):this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.desktop||{},this._redirectionType=this.vignetteConfig&&this.vignetteConfig.redirection||c.Deactive},t.prototype.isSupportVignette=function(){return this._redirectionType!==c.Deactive},t.prototype.onClickInstallBtn=function(){var e={type:f.TrackType.Install_app_click};if(f.default.inst.sendTracking(e),cc.sys.isMobile){var t=l.Utils.getOSType()===l.OS_TYPE.ANDROID?this.response.general.ggp_page:this.response.general.appstore_page;cc.sys.openURL(t)}else{var o={type:f.TrackType.Vignette_interaction,interaction_type:"qr",playerId:d.default.userIdKey,gameId:u.NgcBuildConfig.platformGameID,platform:u.NgcBuildConfig.buildPlatform,page_url:encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href),country:p.NgcCountryFlagsManager.localCountry,os:l.OS_TYPE[l.Utils.getOSType()].toLowerCase(),timeZone:l.Utils.getTimeZone()},n=this.response.main_menu_vignette.desktop.redirection_popup||{},r={ggp_button:n.ggp_button,appstore_button:n.appstore_button,install_app:n.install_app,add_to_home_screen:n.add_to_home_screen,continue_to_browser:n.continue_to_browser,qr_code:n.qr_code,close_button:n.close_button,appstore_page:this.response.general.appstore_page,ggp_page:this.response.general.ggp_page,qr_code_url:""+f.default.inst.serviceURL+this.response.general.qr_link+"?"+l.Utils.convertRecordToString(o),app_logo:""+this.response.general.app_logo};i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,g.NgcDialogManager.createDialog(y.default.dialogType,y.default.urlPrefab,y.default.bundleName)];case 1:return e.sent().getComponent(y.default).init(r),[2]}})})}},t.prototype.start=function(){},a([S(cc.Sprite)],t.prototype,"gifSp",void 0),a([v],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GIF/CCGIF":"CCGIF","./NgcRedirectionDialog":"NgcRedirectionDialog"}],NgcRevive:[function(e,t,o){"use strict";cc._RF.push(t,"76644hQL+xH66s6O+MhbYN/","NgcRevive");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.REVIVE_NO_ADS_CURRENCY_NUMBER=o.REVIVE_NO_ADS_CURRENCY=o.NgcReviveData=o.REVIVE_ACTION=void 0;var c,l=e("../../../../../globals"),u=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../../../GameFramework/Scripts/BuildConfig"),d=e("../../../../SDK/Nano/NanoSrv"),f=e("../../../../Services/Ads/Ads"),h=e("../../../Dialogs/Script/NgcDialogManager"),g=e("./ReviveDialog"),m=cc._decorator,y=m.ccclass,_=m.property;(function(e){e[e.NONE=-1]="NONE",e[e.NON_OFFER=0]="NON_OFFER",e[e.WATCHED=1]="WATCHED",e[e.REFUSE_OFFER=2]="REFUSE_OFFER"})(c=o.REVIVE_ACTION||(o.REVIVE_ACTION={}));o.NgcReviveData=function(){},o.REVIVE_NO_ADS_CURRENCY="coin",o.REVIVE_NO_ADS_CURRENCY_NUMBER=20;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customRevivePrefab=null,t.reviveAdsStatus=null,t._canReviveFunc=null,t._acceptOfferFunc=null,t._refuseOfferFunc=null,t._offerCountDown=5,t._reviveDialogShowing=!1,t._offerAccepted=!1,t._reviveAction=c.NON_OFFER,t._gameCustomCountDown=0,t._reviveData=null,t._freeOfferStatus=!0,t.tookFreeOffered=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"offerCountDown",{get:function(){return this._offerCountDown||this._gameCustomCountDown},enumerable:!1,configurable:!0}),t.prototype.setCustomOfferCountdown=function(e){this._gameCustomCountDown=e},t.prototype.setReviveAction=function(e){this._reviveAction=e},t.prototype.getReviveAction=function(){return this._reviveAction},t.prototype.getReviveData=function(){var e=d.default.inst&&d.default.inst.getCurGameInfo()&&d.default.inst.getCurGameInfo().gameParams||{};return this._reviveData=e&&e.revive||{},this._reviveData},t.prototype.onLoad=function(){o.inst?console.log("Duplicate NgcRevive Inst"):o.inst=this},t.prototype.isFreeOfferAvailable=function(){return this._freeOfferStatus},t.prototype.start=function(){},t.prototype.notUsingAdToRevive=function(){return!(!f.NgcAds.inst.isFakeAdsPlatform()&&!p.NgcBuildConfig.offlineMode)},t.prototype.getFreeOfferStatus=function(e){var t=this;if(void 0===e&&(e=null),p.NgcBuildConfig.alwaysOfferFreeRevive)e&&e(!0);else{if(p.NgcBuildConfig.offlineMode)return this._freeOfferStatus=l.default.OfflineMode.GetFreeOffer(),void(e&&e(l.default.OfflineMode.GetFreeOffer()));d.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t._freeOfferStatus=JSON.parse(n).data._reviveFreeOfferStatus,null==t._freeOfferStatus&&(t._freeOfferStatus=!0),e&&e(t._freeOfferStatus))})}},t.prototype.tookFreeOffer=function(e){var t=this;if(void 0===e&&(e=null),p.NgcBuildConfig.alwaysOfferFreeRevive)e&&e();else{if(p.NgcBuildConfig.offlineMode)return l.default.OfflineMode.SetFreeOffer(!1),this.tookFreeOffered=!0,this._freeOfferStatus=!1,void(e&&e());d.default.inst.servicePost("/playerdata",JSON.stringify({_reviveFreeOfferStatus:!1}),function(o,n){o||(t._freeOfferStatus=!1,t.tookFreeOffered=!0,e&&e(n))})}},t.prototype.setReviveFunctions=function(e,t,o){this._canReviveFunc=e,this._acceptOfferFunc=t,this._refuseOfferFunc=o},t.prototype.useDefaultReviveCondition=function(){return!0},t.prototype.canRevive=function(e,t){var n=u.default.inst&&u.default.inst.isAdsPoincutAvailable(u.NgcPointcuts.videoReviveDialog,f.AdsType.VideoReward);if((p.NgcBuildConfig.offlineMode||f.NgcAds.inst.isFakeAdsPlatform()||n)&&!o.inst.isOfferAccepted()){if(this.useDefaultReviveCondition()){if(p.NgcBuildConfig.offlineMode)return this._canReviveFunc&&this._canReviveFunc();var r=this.getReviveData();return e<=r.maxRemainingPlayers&&e>=r.minRemainingPlayers&&t>=r.minScore}return this._canReviveFunc&&this._canReviveFunc()}return!1},t.prototype.acceptOffer=function(){this._offerAccepted=!0,this._reviveDialogShowing=!1,this._acceptOfferFunc&&this._acceptOfferFunc(),this.setReviveAction(c.WATCHED),this.isFreeOfferAvailable()&&o.inst.tookFreeOffer()},t.prototype.refuseOffer=function(){this.setReviveAction(c.REFUSE_OFFER),this._reviveDialogShowing=!1,this._refuseOfferFunc&&this._refuseOfferFunc()},t.prototype.showReviveDialog=function(){return i(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return this._reviveDialogShowing=!0,e=function(){return i(t,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return this.customRevivePrefab?(e=cc.instantiate(this.customRevivePrefab),t=cc.find("Canvas"),e.parent=t,[3,3]):[3,1];case 1:return[4,h.NgcDialogManager.createDialog(g.default.dialogType,g.default.urlPrefab,g.default.bundleName)];case 2:e=n.sent(),n.label=3;case 3:return o=e.getComponent(g.default),this._offerCountDown=this.getReviveData().offerCountDown,o.init(this.acceptOffer.bind(this),this.refuseOffer.bind(this),this._offerCountDown),this._reviveDialogShowing=!0,[2]}})})},this._offerAccepted||this.getFreeOfferStatus(e),[2]})})},t.prototype.isReviveDialogShowing=function(){return this._reviveDialogShowing},t.prototype.isOfferAccepted=function(){return this._offerAccepted},t.prototype.reset=function(){this._reviveDialogShowing=!1,this._offerAccepted=!1,this._reviveAction=c.NON_OFFER},t.inst=null,a([_(cc.Prefab)],t.prototype,"customRevivePrefab",void 0),o=a([y],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../SDK/Nano/NanoSrv":"NanoSrv","../../../../Services/Ads/Ads":"Ads","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./ReviveDialog":"ReviveDialog"}],NgcSceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"701c7suFclL8LCKjWtaWVMh","NgcSceneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSceneManager=void 0;var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("More than one scene manager!"):o.inst=this},t.prototype.depopulate=function(){},t.prototype.populate=function(){},t.prototype.findPlayerByNetID=function(e){return this._findPlayerByNetID(e)},t.prototype.findPlayerLead=function(){return this._findPlayerLead()},t.inst=null,o=a([s],t)}(cc.Component));o.NgcSceneManager=c,cc._RF.pop()},{}],NgcScreenBase:[function(e,t,o){"use strict";cc._RF.push(t,"8f06fH1qeVKHIcy0IL29h/h","NgcScreenBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screenIndex=0,t.poolID=0,t.rescaleNodes=[],t.backgroundWidget=null,t.lastScreenID=-1,t.currentScale=1,t.topBarHeight=0,t}return r(t,e),t.prototype.onActivate=function(){},t.prototype.onDeactivate=function(){this.backgroundWidget.target=null},t.prototype.reScale=function(){var e=this,t=Math.min(1,cc.winSize.width/cc.winSize.height*cc.view.getDesignResolutionSize().height/cc.view.getDesignResolutionSize().width);this.rescaleNodes.forEach(function(o){o&&(o.scale*=t/e.currentScale)}),this.currentScale=t},t.prototype.init=function(){},t.prototype.onPause=function(){},t.prototype.onResume=function(){},t.prototype.onTapDown=function(){},t.prototype.onTapUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onKeyUp=function(){},t.prototype.activate=function(e,t){void 0===t&&(t=null),this.node.active=e,e?(this.onActivate(),this.setTargetForBackgroundWidget(t),this.reScale()):this.onDeactivate()},t.prototype.setTargetForBackgroundWidget=function(e){this.backgroundWidget&&(this.backgroundWidget.target=e,this.backgroundWidget.isAlignLeft=!0,this.backgroundWidget.isAlignRight=!0,this.backgroundWidget.left=0,this.backgroundWidget.right=0,this.backgroundWidget.top=-this.topBarHeight,this.backgroundWidget.updateAlignment())},t.allScreens=[],a([c],t.prototype,"screenIndex",void 0),a([c],t.prototype,"poolID",void 0),a([c([cc.Node])],t.prototype,"rescaleNodes",void 0),a([c(cc.Widget)],t.prototype,"backgroundWidget",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NgcScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"91c7cuwTHxAL5H0rx4XEo0j","NgcScreenManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.TransitionType=void 0;var i,s=e("../../Core/Utils"),c=e("../../CrossFeatures/Dialogs/Script/DialogBase"),l=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),u=e("../../Services/Ads/Ads"),p=e("../Scripts/Ads/NgcAdsManager"),d=e("../Scripts/BuildConfig"),f=e("../Scripts/NgcScreenBase"),h=cc._decorator,g=h.ccclass,m=h.property;(function(e){e[e.Slide=0]="Slide",e[e.Immediately=1]="Immediately",e[e.FadeIn=2]="FadeIn"})(i=o.TransitionType||(o.TransitionType={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MainScreenWidget=null,t.TopBannerWidget=null,t.TabBarWidget=null,t.NavBarWidget=null,t.SystemNoticeWidget=null,t.loadingNode=null,t.curScreenContainer=null,t.nextScreenContainer=null,t.navBarIconNode=null,t.transitionNode=null,t.canvas=null,t.screenIDs=cc.Enum({}),t.screenPrefabs=[],t.screenPools=[],t.menuPageview=null,t.gameplayContainer=null,t._isSwitching=!1,t._topBannerIsActive=!1,t._tabBarIsActive=!1,t._disableAlignment=!1,t.currentScreen=null,t.blockInputComp=null,t._tabBarInitState=!1,t._menuNodePool={},t.needLoadPointcutData=!1,t.allowPoincuts=[],t._disablePageEvent=!1,t._pageTurningCallback=null,t._disableTabSwipe=!1,t.lastPageIndex=-1,t._bannerActiveBefore=!1,t._pageViewScrolling=!1,t._tabBar=null,t._scrollToPageDisabled=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isSwitching",{get:function(){return this._isSwitching},set:function(e){this._isSwitching=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topBannerIsActive",{get:function(){return this._topBannerIsActive},set:function(e){this._topBannerIsActive=e,this.TopBannerWidget.node.active=e,this.resizeBannerContainer(),this.updateAlignment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabBarIsActive",{get:function(){return this._tabBarIsActive},set:function(e){this._tabBarIsActive!==e&&(this._disableAlignment||(this._tabBarIsActive=e,this.TabBarWidget.node.active=e,this.updateAlignment()))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst?console.error("More than one NgcScreenManager instance"):(o.inst=this,l.NgcDialogManager.preLoadBunddle(l.NgcDialogManager.LIST_BUNDLE_NAME_PRELOAD),cc.view.on("canvas-resize",this.updateAlignmentOnResize.bind(this),this),this.createBlockInputLayer(),cc.sys.isNative&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this))},t.prototype.onKeyDown=function(e){cc.log("[NGCscreenmanager]onkeydown ",e.keyCode),(e.keyCode==cc.macro.KEY.back||cc.macro.KEY.backspace)&&c.NgcDialogBase.hasDialogShowing||this.currentScreen&&this.currentScreen.onKeyDown(e)},t.prototype.createBlockInputLayer=function(){this.blockInputComp=this.transitionNode.addComponent(cc.BlockInputEvents),this.blockInputComp.enabled=!1},t.prototype.setTouchStatus=function(e){this.blockInputComp.enabled=!e},t.prototype.currentTouchStatus=function(){return this.blockInputComp.enabled},Object.defineProperty(t.prototype,"tabBarInitState",{get:function(){return this._tabBarInitState},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){for(var o in void 0===e&&(e=!1),void 0===t&&(t=!1),this.screenPrefabs)this.screenPools.push(new cc.NodePool);this.topBannerIsActive=e,this.tabBarIsActive=t,this._tabBarInitState=t,this.updateAlignment(),this.initPageViewScreens()},t.prototype.onBeforeInitPageview=function(){},t.prototype.pageOrder=function(){return null},t.prototype.defaultPageOrder=function(){return null},t.prototype.gamePlayScreens=function(){return null},t.prototype.screenPointcuts=function(){return[p.NgcPointcuts.bannerShop,p.NgcPointcuts.bannerLeaderboard,p.NgcPointcuts.bannerMainMenu,p.NgcPointcuts.bannerPartyRoom,p.NgcPointcuts.bannerRealPrize]},t.prototype.initPageViewScreens=function(){var e=this;this.onBeforeInitPageview();try{this.allowPoincuts=p.default.inst.getAllowedPointcut()||[]}catch(s){this.allowPoincuts=[],this.needLoadPointcutData=!0,console.warn("Cant load pointcut data here.")}this.topBannerIsActive=!1,this.TopBannerWidget.node.opacity=0,this.menuPageview.node.on("page-turning",this.onPageTurning,this),this.menuPageview.node.on("scroll-began",this.onPageScrollingBegin,this),this.menuPageview.node.on("scroll-ended",this.onPageScrollEnd,this);var t=this.menuPageview.content,o=this.MainScreenWidget;o.top=0,o.bottom=this.TabBarWidget.node.height,o.updateAlignment();var n=new cc.Node("TemporaryNode");n.addComponent(cc.BlockInputEvents),this.menuPageview.node.parent.addChild(n,-1,"Temporary node"),n.opacity=0,this.defaultPageOrder().forEach(function(t){var o=e.getScreen(t);o.node.parent=n,e._menuNodePool[o.poolID]=o.node});for(var r=this.pageOrder().length,a=0;a<5-r;a++){var i=this.menuPageview.content.children[0];this.menuPageview.content.removeChild(i,!0)}this.pageOrder().forEach(function(n,r){var a,i=e.getScreen(n);e._menuNodePool[i.poolID]=i.node,i.node.screenIndex=r;var s=t.children[r];s.width=o.node.width,s.height=o.node.height;var c=s.getComponent(cc.Widget),l=e.screenPointcuts()[r];-1!==(null===(a=e.allowPoincuts)||void 0===a?void 0:a.indexOf(l))&&(c.top=e.getTopBarHeight(),c.updateAlignment()),i.node.parent=s,i.node.getComponent(cc.Widget).updateAlignment(),i.pageNode=s,i.needActivate=!0,i.topBarHeight=e.getTopBarHeight(),i.reScale(),s.opacity=0}),this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.MainScreenWidget.enabled=!1,this.onAfterInitPageview()},t.prototype.updateAlignmentOnResize=function(){this.updateAlignment(),this.resizePageView(),this.checkResizeNavBarWidget(this.currentScreen,!1)},t.prototype.resizePageView=function(){var e=this.MainScreenWidget;for(var t in e.updateAlignment(),this.menuPageview.getComponent(cc.Widget).updateAlignment(),this._menuNodePool){var o=this._menuNodePool[t],n=o.parent;n.width=e.node.width,n.height=e.node.height;var r=n.getComponent(cc.Widget),a=o.screenIndex,i=this.screenPointcuts()[a];-1!==this.allowPoincuts.indexOf(i)&&(r.top=this.getTopBarHeight(),r.updateAlignment()),o.parent=n,o.getComponent(cc.Widget).updateAlignment();var s=o.getComponent(f.default);s.topBarHeight=this.getTopBarHeight(),s.setTargetForBackgroundWidget(n),s.reScale()}this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.menuPageview.scrollToPage(this.menuPageview.getCurrentPageIndex(),.01),this._tabBar.updateTabButtons(!1)},t.prototype.disablePageviewSwipe=function(){this.menuPageview.enabled=!1},t.prototype.enablePageviewSwipe=function(){this.menuPageview.enabled=!0},t.prototype.onAfterInitPageview=function(){},t.prototype.canSwitchToOtherScreen=function(){return!this.menuPageview.isAutoScrolling()},t.prototype.getScreenByPageId=function(e){var t=this.menuPageview.content.children[e];return t.children[0]?t.children[0].getComponent(f.default):null},t.prototype.hideAllScreens=function(e){if(!this._pageViewScrolling){var t=this.menuPageview.content;e.opacity=255,t.children.forEach(function(t){e!==t&&(t.opacity=0)})}},t.prototype.showAllScreens=function(){this.menuPageview.content.children.forEach(function(e){e.opacity=255})},t.prototype.clearPageTurningCallback=function(){this._pageTurningCallback&&(this.unschedule(this._pageTurningCallback),this._pageTurningCallback=null)},t.prototype.onPageTurning=function(e,t){var o=this;void 0===t&&(t=!0),e||(e=this.menuPageview),this.clearPageTurningCallback();var n=this.getScreenByPageId(e.getCurrentPageIndex());n&&(this._scrollToPageDisabled=!0,t&&!this._disableTabSwipe&&(this._tabBar.forceSwitchTab(),this._tabBar.selectTabByIndex(e.getCurrentPageIndex())),this._disableTabSwipe=!1,this._pageTurningCallback=function(){o.hideAllScreens(n.node.parent),o._scrollToPageDisabled=!1},this._tabBar.node.opacity=255,this.scheduleOnce(this._pageTurningCallback,.5),this._pageViewScrolling=!1)},t.prototype.onPageScrollingBegin=function(e){var t;if(this._pageViewScrolling)return this.showAllScreens(),this._tabBar.forceSwitchTab(),void this._tabBar.selectTabByIndex(e.getCurrentPageIndex());e||(e=this.menuPageview),this.lastPageIndex=this.menuPageview.getCurrentPageIndex(),this.clearPageTurningCallback(),null===(t=this._tabBar)||void 0===t||t.clearAfterSwitchCallback();var o=this.menuPageview.content,n=e.getCurrentPageIndex(),r=(o.children[n],o.children[n-1]),a=o.children[n+1];r&&(r.opacity=255),a&&(a.opacity=255),this._pageViewScrolling=!0},t.prototype.onPageScrollEnd=function(e){this.lastPageIndex===e.getCurrentPageIndex()&&this.hideAllScreens(this.currentScreen.node.parent)},t.prototype.getPageIndexByScreenID=function(e){return this.pageOrder().indexOf(e)},t.prototype.getTopBarHeight=function(){return d.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height},t.prototype.resizeBannerContainer=function(){if(this.topBannerIsActive){var e=d.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height;this.TopBannerWidget.node.height!=e&&(this.TopBannerWidget.node.height=e,this.updateAlignment())}},t.prototype.getScreen=function(e){if(this._menuNodePool[e])return this._menuNodePool[e].getComponent(f.default);var t=this.screenPools[e].get();return t||(t=cc.instantiate(this.screenPrefabs[e])),t.getComponent(f.default).poolID=e,t.getComponent(f.default)},t.prototype.setTabBar=function(e){this._tabBar=e},t.prototype.takeScreenshot=function(e){var t=new cc.Node("Screenshot"),o=t.addComponent(cc.Sprite),n=s.Utils.getScreenshotTexture(e),r=new cc.SpriteFrame(n);return o.spriteFrame=r,t.scaleY=-1,t},t.prototype.isNonPageviewScreen=function(e){return-1===this.pageOrder().indexOf(e)},t.prototype.switchScreen=function(e,t,o){var n,r=this;void 0===t&&(t=i.FadeIn);var a=this.getScreen(e),s=this.currentScreen;if(p.default.inst?p.default.inst.hide():this.hideBanner(),this.isSwitching=!0,a.lastScreenID=s?s.poolID:-1,this.isNonPageviewScreen(e))s&&this.isNonPageviewScreen(s.poolID)?(s.activate(!1),a.node.parent=this.gameplayContainer,a.node.opacity=0,cc.tween(s.node).to(.25,{opacity:0}).call(function(){r.screenPools[s.poolID].put(s.node),cc.tween(a.node).to(.25,{opacity:255}).call(function(){a.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start()):(this.gameplayContainer.active=!0,a.node.parent=this.gameplayContainer,a.node.opacity=0,cc.tween(this._tabBar.node).to(.25,{opacity:0}).start(),cc.tween(this.menuPageview.node).to(.25,{opacity:0}).call(function(){r.menuPageview.node.active=!1,s&&s.onPause(),cc.tween(a.node).to(.25,{opacity:255}).call(function(){a.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start());else if(s&&this.isNonPageviewScreen(s.poolID))s.activate(!1),cc.tween(s.node).to(.25,{opacity:0}).call(function(){var t;r.screenPools[s.poolID].put(s.node),r.gameplayContainer.active=!1,r.menuPageview.node.active=!0,a.needActivate?(a.activate(!0,a.pageNode),a.needActivate=!1):a.onResume(),null===(t=r._tabBar)||void 0===t||t.updateTabPlacementByScreenID(e,!1),r.menuPageview.node.opacity=0,cc.tween(r._tabBar.node).to(.25,{opacity:255}).start(),cc.tween(r.menuPageview.node).to(.25,{opacity:255}).call(function(){r.isSwitching=!1,o&&o(),r.menuPageview.scrollToPage(r.getPageIndexByScreenID(e),.1)}).start()}).start();else{cc.tween(this._tabBar.node).to(.25,{opacity:255}).start(),a.node.parent.opacity=255,null==s||s.onPause();var c=i.Immediately?0:.5;this._tabBar&&(c=this._tabBar.tweenDuration+.15),null===(n=this._tabBar)||void 0===n||n.updateTabPlacementByScreenID(e,!0),this._scrollToPageDisabled?c=.15:this.menuPageview.scrollToPage(this.getPageIndexByScreenID(e),c),this._scrollToPageDisabled=!1,this.scheduleOnce(function(){r.isSwitching=!1,a.needActivate?(a.activate(!0,a.pageNode),a.needActivate=!1):a.onResume(),o&&o()},c)}this.checkResizeNavBarWidget(a),this.currentScreen=a},t.prototype.checkResizeNavBarWidget=function(e,t){var o;if(void 0===t&&(t=!1),e&&e.node&&e.node.screenIndex){var n=e.node.screenIndex;if(t){var r=this.screenPointcuts()[n];-1!==(null===(o=this.allowPoincuts)||void 0===o?void 0:o.indexOf(r))?this.NavBarWidget.top=this.getTopBarHeight():this.NavBarWidget.top=0}else this.NavBarWidget.top=u.NgcAds.inst.isBannerShowing?this.getTopBarHeight():0;this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.NavBarWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()})}},t.prototype.updateAlignment=function(){this.MainScreenWidget.top=0,this.MainScreenWidget.bottom=this.tabBarIsActive?this.TabBarWidget.node.height:0,this.MainScreenWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()}),this.NavBarWidget.top=this.MainScreenWidget.top,this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.curScreenContainer.width=this.nextScreenContainer.width=this.MainScreenWidget.node.width,this.curScreenContainer.height=this.nextScreenContainer.height=this.MainScreenWidget.node.height},t.prototype.showTabBar=function(){this.tabBarIsActive=!0},t.prototype.hideTabBar=function(){this.tabBarIsActive=!1},t.prototype.showBanner=function(){this.topBannerIsActive=!0},t.prototype.hideBanner=function(){this.topBannerIsActive=!1},t.prototype.startFadeOut=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:0}).call(function(){t&&t()}).start()},t.prototype.startFadeIn=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:255}).call(function(){t&&t()}).start()},t.prototype.update=function(){this.resizeBannerContainer(),this.updateLoadBannerPointcuts()},t.prototype.updateLoadBannerPointcuts=function(){if(this.needLoadPointcutData){try{this.allowPoincuts=p.default.inst.getAllowedPointcut()||[]}catch(e){console.warn("Fail to load pointcut data.",e)}this.allowPoincuts&&0!==this.allowPoincuts.length&&(this.updateAlignmentOnResize(),this.needLoadPointcutData=!1)}},t.inst=null,a([m(cc.Widget)],t.prototype,"MainScreenWidget",void 0),a([m(cc.Widget)],t.prototype,"TopBannerWidget",void 0),a([m(cc.Widget)],t.prototype,"TabBarWidget",void 0),a([m(cc.Widget)],t.prototype,"NavBarWidget",void 0),a([m(cc.Widget)],t.prototype,"SystemNoticeWidget",void 0),a([m(cc.Node)],t.prototype,"loadingNode",void 0),a([m(cc.Node)],t.prototype,"curScreenContainer",void 0),a([m(cc.Node)],t.prototype,"nextScreenContainer",void 0),a([m(cc.Node)],t.prototype,"navBarIconNode",void 0),a([m(cc.Node)],t.prototype,"transitionNode",void 0),a([m(cc.Canvas)],t.prototype,"canvas",void 0),a([m(cc.Prefab)],t.prototype,"screenPrefabs",void 0),a([m(cc.PageView)],t.prototype,"menuPageview",void 0),a([m(cc.Node)],t.prototype,"gameplayContainer",void 0),o=a([g],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../Services/Ads/Ads":"Ads","../Scripts/Ads/NgcAdsManager":"NgcAdsManager","../Scripts/BuildConfig":"BuildConfig","../Scripts/NgcScreenBase":"NgcScreenBase"}],NgcShopManager:[function(e,t,o){"use strict";cc._RF.push(t,"f353c0Msm1KariDzKDPduO5","NgcShopManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcShopManager=o.NgcItemCategoryInfo=o.NgcItemTabInfo=o.NgcItemShopStructure=void 0;var n=e("../../Core/Delegate"),r=e("../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation"),a=e("../../CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),i=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),s=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),c=e("../../CrossFeatures/TabBar/Script/TabBarManager"),l=e("../../Services/GameShop/GameShop"),u=e("../../Services/Inventory/Inventory"),p=e("../../Services/Telemetry/Telemetry"),d=e("./Ads/NgcAdsManager"),f=e("./NgcItemInfoManager");o.NgcItemShopStructure=function(){};var h=function(){};o.NgcItemTabInfo=h;var g=function(){};o.NgcItemCategoryInfo=g;var m=function(){function e(){this._itemShopStructure={tabs:[]},this._itemPreviewCallback=new n.default,this._itemEquipCallback=new n.default,this._currencyIDList=[],this._currencyUpdateCallback=new n.default,this._currencyList=[],this._hasBrandNewItem=!1,this._displayAnimItemQueue=[],this._counter={},this.buyingItem=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.resetItemClickCounter=function(){this._counter={}},e.prototype.increaseItemClickCounter=function(e){return this._counter[e]=this._counter[e]||0,this._counter[e]+=1,this._counter[e]},Object.defineProperty(e.prototype,"HasBrandNewItem",{get:function(){return this._hasBrandNewItem},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e,t){var o=this,n=function(){o.generateItemShopStructure(),o.checkInit(),t&&t(),f.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(n)};f.NgcItemInfoManager.getInstance().isStartedLoading=!1,f.NgcItemInfoManager.getInstance().loadData(e),f.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(n)},e.prototype.setUI=function(e){this._itemContainer=e,this.checkInit()},e.prototype.setNumberOfItemInRow=function(e){this._itemContainer.setNumberOfItemInRow(e)},e.prototype.registerCurrencyUpdate=function(e,t){this._currencyIDList=e,this._currencyUpdateCallback.add(t)},e.prototype.registerItemPreviewCallback=function(e){this._itemPreviewCallback.add(e)},e.prototype.registerItemEquipCallback=function(e){this._itemEquipCallback.add(e)},e.prototype.getCurrencyCountByID=function(e){return this._currencyList.find(function(t){return t.itemID===e}).count},Object.defineProperty(e.prototype,"IsInitialized",{get:function(){return this.IsGeneratedItemShopStructure&&null!=this._itemContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsGeneratedItemShopStructure",{get:function(){return this._itemShopStructure.tabs.length>0},enumerable:!1,configurable:!0}),e.prototype.checkInit=function(){this.IsInitialized&&(this._itemContainer.init(this._itemShopStructure),this.updateCurrency())},e.prototype.generateItemShopStructure=function(){var e=this;this._itemShopStructure={tabs:[]},f.NgcItemInfoManager.getInstance().ItemInfoList.forEach(function(t){return t.itemStatusType!=f.NgcItemStatusType.None&&e.addToItemStructure(t)}),this.setBundleAsTheFirstTab(),this.checkHasBrandNewItem()},e.prototype.addToItemStructure=function(e,t){var o=this.findTab(t||e.category,this._itemShopStructure.tabs),n=this.findCategory(e.subCategory,o.categories);0==n.items.includes(e)&&n.items.push(e),1==o.categories.length&&"UNNAME_CATEGORY"==o.categories[0].cateNameKey?o.categories[0].shouldDisplay=!1:o.categories.forEach(function(e){return e.shouldDisplay=!0})},e.prototype.findTab=function(e,t){var o=t.find(function(t){return t.tabNameKey===e});return o||((o=new h).tabNameKey=e,o.categories=[],t.push(o)),o},e.prototype.findCategory=function(e,t){var o=t.find(function(t){return t.cateNameKey===e});return o||((o=new g).cateNameKey=e,o.items=[],t.push(o)),o},e.prototype.setBundleAsTheFirstTab=function(){var e=this._itemShopStructure.tabs.findIndex(function(e){return"bundle"===e.tabNameKey});if(e>-1){var t=this._itemShopStructure.tabs.splice(e,1)[0];this._itemShopStructure.tabs.unshift(t)}},e.prototype.checkHasBrandNewItem=function(){this.checkTabHasBrandNewItem(),this.checkShopHasBrandNewItem()},e.prototype.checkTabHasBrandNewItem=function(){this._itemShopStructure.tabs.forEach(function(e){var t=!1;e.categories.forEach(function(e){return e.items.forEach(function(e){!e.isBundle&&e.isBrandNew&&(t=!0)})}),e.hasBrandNewItem=t})},e.prototype.checkShopHasBrandNewItem=function(){var e=this;this._hasBrandNewItem=!1,this._itemShopStructure.tabs.forEach(function(t){t.hasBrandNewItem&&(e._hasBrandNewItem=!0)}),c.NgcTabBarManager.inst.updateTabButtons(!1)},e.prototype.updateCurrency=function(e){var t=this;this._currencyList=[],this._currencyIDList.forEach(function(o){u.NgcInventory.inst.getItemCount(o,function(n,r){if(!n&&r){var a={itemID:o,count:r.count};t._currencyList.push(a),t._currencyList.length===t._currencyIDList.length&&(t._currencyUpdateCallback.call(t._currencyList),e&&e())}})})},e.prototype.includeItem=function(e){return f.NgcItemInfoManager.getInstance().includeSingleItem(e)},e.prototype.previewItem=function(e){this._itemPreviewCallback.call(e)},e.prototype.equipItem=function(e){f.NgcItemInfoManager.getInstance().updateEquippedItem(e),this._itemContainer.refresh(),this._itemEquipCallback.call(e)},e.prototype.updateBoughtItem=function(e){f.NgcItemInfoManager.getInstance().updateBoughtItem(e),f.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!0),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.removeBrandItem=function(e){f.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!1),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.unequipItem=function(e){f.NgcItemInfoManager.getInstance().updateUnequippedItem(e),this._itemContainer.refresh()},e.prototype.updateEquippedItemList=function(e){f.NgcItemInfoManager.getInstance().updateEquippedItemList(e),this._itemContainer.refresh()},e.prototype.achievementAddTo=function(e,t){s.NgcAchievementHelper.getInstance().addTo(e,t)},e.prototype.achievementAddMore=function(e,t){s.NgcAchievementHelper.getInstance().addMore(e,t)},e.prototype.checkRemoveEliminatedBundle=function(){f.NgcItemInfoManager.getInstance().isThereEliminatedBundle()&&(this.generateItemShopStructure(),this._itemContainer.updateItemStructure(this._itemShopStructure))},e.prototype.showItemBoughtAnim=function(e){var t=this,o=this._displayAnimItemQueue.shift();o&&(r.default.inst.showRewardAnimation(o,null,!1),setTimeout(function(){t._displayAnimItemQueue.length>0?t.showItemBoughtAnim(e):e&&e()},1200))},e.prototype.onItemBought=function(e){this.updateBoughtItem(e);var t=f.NgcItemInfoManager.getInstance().getSingleItemInfo(e),o=l.NgcGameShop.inst.getItems(t.bundleID);this._displayAnimItemQueue.push(o[0])},e.prototype.getTrackingModeOfPayment=function(e){switch(e){case f.NgcItemStatusType.IAP:return"IAP";case f.NgcItemStatusType.WatchAds:return"Ads";case f.NgcItemStatusType.Achievement:return"Achievement";case f.NgcItemStatusType.LikeSocial:return"Follow";case f.NgcItemStatusType.Currency:return"Currency";default:return"Others"}},e.prototype.onPlayerPurchaseItemTrackEvent=function(e,t){void 0===t&&(t=1);var o={itemPurchaseID:"",itemPurchaseValue:t,itemSpentID:e.price.currency,modeOfPayment:"",itemSpentValue:e.price.value};e instanceof f.NgcSingleItemInfo?o.itemPurchaseID=e.itemID:o.itemPurchaseID=e.bundleID,o.modeOfPayment=this.getTrackingModeOfPayment(e.itemStatusType),p.NgcTelemetry.inst.LogEvent_PurchaseItem(o)},e.prototype.onPlayerPurchaseCollectItemTrackEvent=function(e,t,o,n){void 0===n&&(n=1);var r={itemPurchaseID:e,itemPurchaseValue:n,modeOfPayment:"",bundleID:t};r.modeOfPayment=this.getTrackingModeOfPayment(o),p.NgcTelemetry.inst.LogEvent_CollectPurchaseItem(r)},e.prototype.buyItem=function(e){var t=this;this.buyingItem||(this.buyingItem=!0,l.NgcGameShop.inst.buyBundle(e.bundleID,function(o,n){!o&&n?u.NgcInventory.inst.forceFetchInventory().then(function(){t.onPlayerPurchaseItemTrackEvent(e);var o=null;if(e instanceof f.NgcSingleItemInfo){var n=e;t.onPlayerPurchaseCollectItemTrackEvent(n.itemID,"null",n.itemStatusType,1),t.onItemBought(n.itemID),o=n.itemID}else{var r=e;e.itemIDs.forEach(function(e){t.onPlayerPurchaseCollectItemTrackEvent(e,r.bundleID,r.itemStatusType,1),t.onItemBought(e)})}t.updateShop(),t.showItemBoughtAnim(function(){t.checkRemoveEliminatedBundle(),o&&t.equipItem(o),t.buyingItem=!1})}):t.buyingItem=!1}))},e.prototype.watchAds=function(e){var t=this,o=function(t,o){!t&&o&&u.NgcInventory.inst.getItemCount(e.price.currency,n)},n=function(o,n){!o&&n&&(n.count>=e.price.value?t.buyItem(e):(t.onPlayerPurchaseItemTrackEvent(e),t.updateShop()))};d.default.inst.showRewardVideo(d.NgcPointcuts.videoShopReward,e.price.currency,1,null,function(n){n?u.NgcInventory.inst.addItem(e.price.currency,1,o):i.NgcDialogManager.createDialog(a.NgcMessageDialog.dialogType,a.NgcMessageDialog.urlPrefab,a.NgcMessageDialog.bundleName).then(function(e){var o=e.getComponent(a.NgcMessageDialog);o.init("NGG_ADS_UNAVAILABLE");var n=t._itemContainer._interactionButton.node;o.show(null,n,null,null)})})},e.prototype.updateShop=function(){var e=this;this.updateCurrency(function(){e._itemContainer.refresh()})},e._instance=null,e}();o.NgcShopManager=m,cc._RF.pop()},{"../../Core/Delegate":"Delegate","../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","../../Services/Telemetry/Telemetry":"Telemetry","./Ads/NgcAdsManager":"NgcAdsManager","./NgcItemInfoManager":"NgcItemInfoManager"}],NgcSoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"edf08O5qdJBeoFGkiEn77Bl","NgcSoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSoundManager=void 0;var i=e("../../Core/Utils"),s=e("./NgcUserInfo"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScreenMusicClip=null,t.AudioClips=cc.Enum({}),t.lastMusicClip=null,t.lastMusicLoop=!0,t.lastMusicVolume=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Too many Sound Managers"):o.inst=this},t.prototype.isSoundPlaying=function(e){return cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.start=function(){},t.prototype._playSFX=function(e,t,o){var n=null;return s.default.soundOff||null==e||(n=cc.audioEngine.playEffect(e,o||!1),cc.audioEngine.setVolume(n,t)),n},t.prototype.playSound=function(e,t,o){(!t||t>1)&&(t=1),t<0&&(t=0);var n=this[i.Utils.enumToString(this.AudioClips,e)];return Array.isArray(this[i.Utils.enumToString(this.AudioClips,e)])&&(n=i.Utils.randomArr(this[i.Utils.enumToString(this.AudioClips,e)])),this._playSFX(n,t,o)},t.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},t.prototype.setVolume=function(e,t){t<0&&(t=0),cc.audioEngine.setVolume(e,t)},t.prototype.playStartScreenMusic=function(){this.playMusic(this.startScreenMusicClip,!0)},t.prototype.playMusic=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=1),this.stopMusic(),s.default.musicOff||(cc.audioEngine.playMusic(e,t),cc.audioEngine.setMusicVolume(o),this.lastMusicClip=e,this.lastMusicLoop=t,this.lastMusicVolume=o)},t.prototype.resumeLastPlayedMusic=function(){return!!this.lastMusicClip&&(this.playMusic(this.lastMusicClip,this.lastMusicLoop,this.lastMusicVolume),!0)},t.prototype.playSoundWithClip=function(e,t,o){return(!t||t>1)&&(t=1),t<0&&(t=0),this._playSFX(e,t,o)},t.inst=null,a([u({type:cc.AudioClip})],t.prototype,"startScreenMusicClip",void 0),o=a([l],t)}(cc.Component);o.NgcSoundManager=p,cc._RF.pop()},{"../../Core/Utils":"Utils","./NgcUserInfo":"NgcUserInfo"}],NgcTechMessageUpdateIOS:[function(e,t,o){"use strict";cc._RF.push(t,"a0bf5ZlLy5J5Zs6ByeIHdLu","NgcTechMessageUpdateIOS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedBrowser=[],t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.urlPrefab="NgcTechMessageUpdateIOS",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageUpdateIOS",a([l(cc.Node)],t.prototype,"supportedBrowser",void 0),a([c],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NgcTrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"41c9019Gh9FFqHRcdT5n9gO","NgcTrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Services/Telemetry/Telemetry"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.log("Duplicate NgcTrackingManager"),o.inst=this},t.prototype.LogCustomEvent=function(e,t){i.NgcTelemetry.inst.LogCustomEvent(e,t)},t.inst=null,o=a([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../Services/Telemetry/Telemetry":"Telemetry"}],NgcUserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"5f8be7WVZZC9aUsTUD15Rz5","NgcUserInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.convertToBoolean=o.convertToNum=void 0;var n=e("uuidv4"),r=e("../../../globals"),a=e("../../Core/Utils"),i=e("../../SDK/Nano/NanoSrv"),s=e("../../Services/Platform/Platform"),c=e("./BuildConfig"),l=e("./Network/NetUtils"),u=e("./NgcLocalStorage");function p(e){try{var t=parseFloat(e);return"number"!=typeof t||isNaN(t)?0:t}catch(o){return 0}}function d(e){return"true"==e||1==e}o.convertToNum=p,o.convertToBoolean=d;var f=function(){function e(){this.LOCALIZATION_LANG={ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"}}return Object.defineProperty(e,"soundOff",{get:function(){return void 0===e._soundOff&&(e._soundOff=d(u.default.getKey(e.SOUND_OFF,!1))),e._soundOff},set:function(t){e._soundOff=t,u.default.setKey(e.SOUND_OFF,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"musicOff",{get:function(){return d(u.default.getKey(this.MUSIC_OFF,this._musicOff))},set:function(e){u.default.setKey(this.MUSIC_OFF,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineDailyReward",{get:function(){return u.default.getKey(this.OFFLINE_DAILY_REWARD,null)},set:function(e){u.default.setKey(this.OFFLINE_DAILY_REWARD,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineInventory",{get:function(){return u.default.getKey(this.OFFLINE_INVENTORY,null)},set:function(e){u.default.setKey(this.OFFLINE_INVENTORY,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curLanguage",{get:function(){return this.lang_selected?u.default.getKey(this.CUR_LOCALIZATION_LANG,cc.sys.language):["zh-cn","zh-sg"].includes(cc.sys.languageCode)?"zh":["zh-tw","zh-mo","zh-hk"].includes(cc.sys.languageCode)?"cn":cc.sys.language},set:function(e){this.lang_selected=!0,u.default.setKey(this.CUR_LOCALIZATION_LANG,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"localUserName",{get:function(){return u.default.getKey(this.USER_NAME_LOCAL,this._localUserName)},set:function(e){u.default.setKey(this.USER_NAME_LOCAL,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookId",{get:function(){return u.default.getKey(this.CUR_FACEBOOK_ID,this._facebookId,!1)},set:function(e){u.default.setKey(this.CUR_FACEBOOK_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"avatarUrl",{get:function(){return u.default.getKey(this.CUR_AVATAR_URL,this._avatarUrl,!1)},set:function(e){u.default.setKey(this.CUR_AVATAR_URL,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"secretKey",{get:function(){if(null!=this._secretKey&&""!=this._secretKey)return this._secretKey;var e="";try{e=n.uuid()}catch(o){e=l.NgcNetUtils.generateRandomUUID()}var t=u.default.getKey(this.SECRET_KEY,e);return t===e&&(this.secretKey=e),t},set:function(e){u.default.setKey(this.SECRET_KEY,e),this._secretKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userIdKey",{get:function(){if(null!=this._userIdKey&&""!=this._userIdKey)return this._userIdKey;var e="";try{e=n.uuid()}catch(o){e=l.NgcNetUtils.generateRandomUUID()}var t=u.default.getKey(this.USERID_KEY,e);return t===e?this.userIdKey=e:this._userIdKey=t,t},set:function(e){u.default.setKey(this.USERID_KEY,e),this._userIdKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userAppId",{get:function(){return null!=this._userAppId&&""!=this._userAppId?this._userAppId:u.default.getKey(this.APP_USER_ID_KEY,this._userAppId)},set:function(e){u.default.setKey(this.APP_USER_ID_KEY,e),this._userAppId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookAccessToken",{get:function(){return u.default.getKey(this.FACEBOOK_ACCESS_TOKEN,null,!1)},set:function(e){u.default.setKey(this.FACEBOOK_ACCESS_TOKEN,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameRunningSession",{get:function(){return u.default.getKey(this.GAME_RUNNING_SESSION,"")},set:function(e){u.default.setKey(this.GAME_RUNNING_SESSION,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalRoundCount",{get:function(){var e=this;if(c.NgcBuildConfig.offlineMode)return this._totalRoundCount=r.default.OfflineMode.GetTotalRoundCount();if(null==this._totalRoundCount){if(this.readTotalRoundCount)return this._totalRoundCount;this.readTotalRoundCount=!0,i.default.inst.serviceGet("/playerdata",null,function(t,o){t||(e._totalRoundCount=Number(JSON.parse(o).data._totalRoundCount)||0)})}return this._totalRoundCount},enumerable:!1,configurable:!0}),e.uploadTotalRoundCount=function(){if(c.NgcBuildConfig.offlineMode)r.default.OfflineMode.IncTotalRoundCount();else{var t={_totalRoundCount:(e._totalRoundCount||0)+1};e._totalRoundCount+=1,i.default.inst.servicePost("/playerdata",JSON.stringify(t),function(){})}},Object.defineProperty(e,"onboardingEventFlags",{get:function(){var e=u.default.getKey("onboarding_events",null);if(e)try{this._onboardingEventFlags=JSON.parse(e)}catch(t){this._onboardingEventFlags=e}return this._onboardingEventFlags},enumerable:!1,configurable:!0}),e.setOnBoardingEventFlags=function(e){this._onboardingEventFlags[e]=!0,u.default.setKey("onboarding_events",JSON.stringify(this._onboardingEventFlags))},Object.defineProperty(e,"visitedScreens",{get:function(){var e=u.default.getKey("visitedScreens",null);if(e)try{this._visitedScreens=JSON.parse(e)}catch(t){this._visitedScreens=e}return this._visitedScreens},enumerable:!1,configurable:!0}),e.addVisitedScreen=function(e){this._visitedScreens[e]=!0,u.default.setKey("visitedScreens",JSON.stringify(this._visitedScreens))},Object.defineProperty(e,"socialId",{get:function(){var e=u.default.getKey(this.CUR_SOCIAL_ID,null,!1);return null!==e&&e.includes(this.CUR_SOCIAL_ID)&&(e=e.substr(this.CUR_SOCIAL_ID.length)),e},set:function(e){e.includes(this.CUR_SOCIAL_ID)||(e=this.CUR_SOCIAL_ID+e),u.default.setKey(this.CUR_SOCIAL_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalSessions",{get:function(){return p(u.default.getKey(this.TOTAL_SESSIONS,0))},set:function(e){u.default.setKey(this.TOTAL_SESSIONS,e)},enumerable:!1,configurable:!0}),e.isUserLogined=function(){return null!==e.socialId&&void 0!==e.socialId&&""!==e.socialId},Object.defineProperty(e,"added_A2HS",{get:function(){return d(u.default.getKey(this.ADDED_A2HS,!1))},set:function(e){this._added_A2HS=e,u.default.setKey(this.ADDED_A2HS,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"lang_selected",{get:function(){return d(u.default.getKey(this.LANG_SELECTED,!1))},set:function(e){u.default.setKey(this.LANG_SELECTED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sharedGame_NavBar",{get:function(){return d(u.default.getKey(this.SHARED_GAME_IN_NAVBAR,!1))},set:function(e){this._sharedGame_NavBar=e,u.default.setKey(this.SHARED_GAME_IN_NAVBAR,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"changedName",{get:function(){return d(u.default.getKey(this.CHANGED_NAME,!1))},set:function(e){this._changedName=e,u.default.setKey(this.CHANGED_NAME,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberOfAdsWatched",{get:function(){return p(u.default.getKey(this.NUMBER_OF_ADS_WATCHED,0))},set:function(e){u.default.setKey(this.NUMBER_OF_ADS_WATCHED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberAdsSession",{get:function(){return p(u.default.getKey(this.NUMBER_OF_ADS_SESSION,0))},set:function(e){this.isAddedThisSession||(u.default.setKey(this.NUMBER_OF_ADS_SESSION,e),this.isAddedThisSession=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ticketAmount",{get:function(){return p(u.default.getKey(this.TICKET_AMOUNT,0))},set:function(e){u.default.setKey(this.TICKET_AMOUNT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameModePoint",{get:function(){return p(u.default.getKey(this.GAME_MODE_POINT,0))},set:function(e){u.default.setKey(this.GAME_MODE_POINT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supportCode",{get:function(){return u.default.getKey(this.SUPPORT_CODE,"")},set:function(e){u.default.setKey(this.SUPPORT_CODE,e)},enumerable:!1,configurable:!0}),e.updateAdsInfo=function(){this.numberOfAdsWatched++,this.numberAdsSession++},e.isNameCorrectFormat=function(e){if(e.length>12)return!1;var t=e.split(" ");return!(t[0].length>9||t.length>1&&(2!==t[1].length||"."!==t[1][1]))},e.correctNameFormat=function(t){if(e.isNameCorrectFormat(t))return t;var o=t.split(" ");if(1!==o.length){var n=o[0];n.length>9&&(n=n.slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...");var r=o[1];return r.length>0&&(r=r[0]+"."),n+" "+r}return o[0].length>9?o[0].slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...":t},Object.defineProperty(e,"changeNameLocation",{get:function(){return u.default.getKey(this.CHANGE_NAME_LOCATION,"")},set:function(e){u.default.setKey(this.CHANGE_NAME_LOCATION,e)},enumerable:!1,configurable:!0}),e.setAccountLinkData=function(t){void 0===t&&(t=null),s.NgcPlatform.isRunAsIframeOnNano()||((t=t||{}).playerId=e.userIdKey,t.secretKey=e.secretKey,t.name=e.localUserName,t.hasOwnProperty("platform")&&(t.socialId=e.socialId,t.avatarUrl=e.avatarUrl,t.facebookAccessToken=e.facebookAccessToken),u.default.setKey("NGC_AccountData",JSON.stringify(t),!1),console.log("NGC set link account",t))},e.getNanoUserInfoFromLocalstorage=function(t){void 0===t&&(t=!0);var o=u.default.getKey("userInfo",null,!1);if(o){var n=o;return t&&(e.nanoLoginData=n,e.userIdKey=n.userId||n.playerId,e.secretKey=n.secretKey,e.localUserName=n.name,e.socialId=n.socialId||"",console.log("Iframe linked successfully",o)),n}return null},e.generateGuestName=function(){e.localUserName="Guest"+l.NgcNetUtils.RandomRange(1,9999,!0).toString()},e.resetWhenLoggedInFromAnotherPlace=function(t){var o=e.userIdKey;if(this.resetNgcData(),s.NgcPlatform.isRunAsIframeOnNano()){window.parent.postMessage(JSON.stringify({RESET_ACCOUNT_DATA:!0}),"*");var n=setInterval(function(){var r=e.getNanoUserInfoFromLocalstorage(!1);r&&o!==r.playerId&&(clearInterval(n),t&&t(),location.reload())},250)}else window.accountURLLinked&&(e.generateGuestName(),e.setAccountLinkData()),t&&t(),location.reload()},e.resetNgcData=function(){e.localUserName="",e.totalSessions=0,e.socialId="",e.facebookId="",e.avatarUrl="",e.numberOfAdsWatched=0,e.numberAdsSession=0,e.isAddedThisSession=!1,e.secretKey="",e.userIdKey="",e.gameModePoint=0,e.supportCode="",e.changeNameLocation="",e.changedName=!1,a.Utils.deleteCookie("fblo_"+c.NgcBuildConfig.SDK.FacebookSrv.appID)},e.SOUND_OFF="SOUND_OFF",e.MUSIC_OFF="MUSIC_OFF",e.USER_NAME_LOCAL="USER_NAME_LOCAL",e.CUR_FACEBOOK_ID="CUR_FACEBOOK_ID",e.CUR_SOCIAL_ID="CUR_SOCIAL_ID",e.CUR_AVATAR_URL="CUR_AVATAR_URL",e.CUR_LOCALIZATION_LANG="CUR_LOCALIZATION_LANG",e.FACEBOOK_ACCESS_TOKEN="FACEBOOK_ACCESS_TOKEN",e.SECRET_KEY="secretKey",e.USERID_KEY="userIdKey",e.GAME_RUNNING_SESSION="GAME_RUNNING_SESSION",e.GAME_VERSION="GAME_VERSION",e.TOTAL_SESSIONS="TOTAL_SESSIONS",e.TOTAL_GAME_ROUNDS="TOTAL_GAME_ROUNDS",e.ADDED_A2HS="ADDED_A2HS",e.SHARED_GAME_IN_NAVBAR="SHARED_GAME_IN_NAVBAR",e.CHANGED_NAME="CHANGED_NAME",e.NUMBER_OF_ADS_WATCHED="NUMBER_OF_ADS_WATCHED",e.NUMBER_OF_ADS_SESSION="NUMBER_OF_ADS_SESSION",e.OFFLINE_DAILY_REWARD="DailyReward",e.OFFLINE_INVENTORY="Inventory",e.TICKET_AMOUNT="TICKET_AMOUNT",e.GAME_MODE_POINT="GAME_MODE_POINT",e.SUPPORT_CODE="SUPPORT_CODE",e.LANG_SELECTED="LANG_SELECTED",e.APP_USER_ID_KEY="appUserIdKey",e.CHANGE_NAME_LOCATION="CHANGE_NAME_LOCATION",e.NANO_LOGIN_DATA="NANO_LOGIN_DATA",e._soundOff=void 0,e._musicOff=!1,e._localUserName="",e._facebookId="",e._avatarUrl="",e._secretKey="",e._userIdKey="",e._userAppId="",e._totalRoundCount=null,e.readTotalRoundCount=!1,e._onboardingEventFlags={},e._visitedScreens={},e.sessionKey="",e._added_A2HS=!1,e._sharedGame_NavBar=!1,e._changedName=!1,e.isAddedThisSession=!1,e.MAX_FIRST_NAME_LENGHT=9,e.nanoLoginData=null,e.realPrizeVisited=!1,e}();o.default=f,cc._RF.pop()},{"../../../globals":"globals","../../Core/Utils":"Utils","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig","./Network/NetUtils":"NetUtils","./NgcLocalStorage":"NgcLocalStorage",uuidv4:155}],NgcVersion:[function(e,t,o){"use strict";cc._RF.push(t,"274a1VKRfdOmLLZdoTXx+6A","NgcVersion"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcVersionConfig=void 0,o.NgcVersionConfig={buildNgcVersion:"NGC v4.2.0i"},cc._RF.pop()},{}],NgcWorldPosInterface:[function(e,t,o){"use strict";cc._RF.push(t,"8042fBacs9ChI1ZDgzF6Z2W","NgcWorldPosInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],NoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"aebf20CLyhKxregCDz1w9HE","NoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNoticeDialog=void 0;var i=e("../DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,n?(this.icon.spriteFrame=n,this.icon.node.active=!0):this.icon.node.active=!1},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.urlPrefab="NoticeDialog",t.bundleName="02_dialog",t.dialogType="NgcNoticeDialog",a([l(cc.Label)],t.prototype,"titleLabel",void 0),a([l(cc.Label)],t.prototype,"contentLabel",void 0),a([l(cc.Sprite)],t.prototype,"icon",void 0),a([c],t)}(i.NgcDialogBase);o.NgcNoticeDialog=u,cc._RF.pop()},{"../DialogBase":"DialogBase"}],OfflineMode:[function(e,t,o){"use strict";cc._RF.push(t,"5e8d1UV/3ND45p0P9vv3EIS","OfflineMode");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.OfflineMode=o.__DEV_DAILY_REWARD__=void 0;var a=e("../../../globals"),i=e("../../../NanoGameCore/Core/Utils"),s=e("../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),c=e("../../../NanoGameCore/Services/Inventory/Inventory"),l=e("../../../Scripts/UserInfo"),u=e("../../../Scripts/UserInfo"),p=e("../../SDK/Nano/NanoSrv");o.__DEV_DAILY_REWARD__=!1;var d=function(){function e(){}return e.Init=function(){return n(this,void 0,void 0,function(){var t,o,n,a;return r(this,function(r){switch(r.label){case 0:return t=e,[4,i.LoadAsset("offline:config/offline-config")];case 1:return t.Config=r.sent().json,e.GetInventory()?[3,3]:[4,i.LoadAsset("offline:text/start-inventory")];case 2:o=r.sent(),s.default.setKey("offline-inventory",o.json),r.label=3;case 3:return e.GetDailyRewardState()||s.default.setKey("offline-daily-reward-state",{curStep:"1",curStepStartDate:Date.now()}),[4,i.LoadAsset("offline:text/game-info")];case 4:return n=r.sent(),p.default.inst.loginData.gameInfo=n.json,null==s.default.getKey("offline-free-offer",null)&&s.default.setKey("offline-free-offer",!0),a=this,[4,i.LoadAsset("offline:text/profanity")];case 5:return a.profanityList=r.sent().json,[2]}})})},e.ProfanityCheck=function(e){var t=this,o=!1,n=(e=(e=(e=e.trim().toLocaleLowerCase()).replace(/^[0-9]+/i,"")).replace(/[0-9]+$/i,"")).split(" "),r=n.join("");for(var a in this.profanityList)this.profanityList[a].includes(e)&&(o=!0),n.forEach(function(e){t.profanityList[a].includes(e)&&(o=!0)}),this.profanityList[a].filter(function(e){return r.includes(e)}).length>1&&(o=!0);return!o},e.GetInventory=function(){return s.default.getKey("offline-inventory",null)},e.UpdateItem=function(e,t){var o=this.GetInventory();o[e]?o[e].count+=t:o[e]={count:t,itemID:e},s.default.setKey("offline-inventory",o),u.UserInfo.updateInventoryWithPlatform()},e.GetDailyRewardState=function(){return s.default.getKey("offline-daily-reward-state",null)},e.SetDailyRewardState=function(e){s.default.setKey("offline-daily-reward-state",e)},e.GetFreeOffer=function(){return s.default.getKey("offline-free-offer",null)},e.SetFreeOffer=function(e){return s.default.setKey("offline-free-offer",e)},e.MarkClaimLuckyBooster=function(e){s.default.setKey("offline-luckybooster-claimtime",{itemID:e,time:Date.now()})},e.GetMarkedLuckyBooster=function(){return s.default.getKey("offline-luckybooster-claimtime",null)},e.CleanLuckyBooster=function(){return n(this,void 0,void 0,function(){var e,t;return r(this,function(){return(e=this.GetMarkedLuckyBooster())?(c.NgcInventory.inst.ownedItems[e.itemID].count=0,t=i.Utils.enumToString(l.boosterType,u.UserInfo.curBooster),this.UpdateItem(t,-1),u.UserInfo.curBooster=l.boosterType.none,[2]):[2]})})},e.GetTotalRoundCount=function(){return parseInt(s.default.getKey("offline-total-round-count",0))},e.IncTotalRoundCount=function(){var e=this.GetTotalRoundCount();s.default.setKey("offline-total-round-count",e+1)},e.profanityList={},e}();o.OfflineMode=d,a.default.OfflineMode=d,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../Scripts/UserInfo":"UserInfo","../../../globals":"globals","../../SDK/Nano/NanoSrv":"NanoSrv"}],OffscreenDisableRender:[function(e,t,o){"use strict";cc._RF.push(t,"d71324Y1kZJDpzcWHpcXLsd","OffscreenDisableRender");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./GameCamera"),s=e("./Main"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderComponent=null,t.referenceCamera=null,t.myLocalBoundingBox=null,t.myGroupID=0,t.myWidth=0,t}var o;return r(t,e),o=t,t.prototype.start=function(){this.myGroupID=15&o.nextID,o.nextID++,this.myLocalBoundingBox=this.node.getBoundingBox(),this.myWidth=this.myLocalBoundingBox.width,this.myWidth<50&&(this.myWidth=50)},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0),r=this.referenceCamera||i.default.inst.cameraOb;return r.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),r.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.IsNodeVisible=function(e){var t=this.getScreenRect(e);return!(t.max.x<-this.myWidth||t.min.x>i.default.inst.screenWidth+this.myWidth)},t.prototype.update=function(){this.renderComponent&&(15&s.Main.inst.frameCounter)==this.myGroupID&&this.renderComponent&&(this.IsNodeVisible(this.node)?this.renderComponent.enabled||(this.renderComponent.enabled=!0):this.renderComponent.enabled&&(this.renderComponent.enabled=!1))},t.nextID=0,a([u(cc.RenderComponent)],t.prototype,"renderComponent",void 0),a([u(cc.Camera)],t.prototype,"referenceCamera",void 0),o=a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./GameCamera":"GameCamera","./Main":"Main"}],ParamsDebugDialog:[function(e,t,o){"use strict";cc._RF.push(t,"6fdabfkWKdK6LoW51QCVtA7","ParamsDebugDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),s=e("../../../NanoGameCore/Services/Inventory/Inventory"),c=e("../../Main"),l=e("../../Screens/StartScreen/StartMain"),u=e("../../UserInfo"),p=e("../../Utils/ConstConfig"),d=e("../../TuningData"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.toggleInvincible=null,t.numPlayerSlider=null,t.totalPlayerLb=null,t.matchDurationSlider=null,t.matchDurationLb=null,t.extraDurationSlider=null,t.extraDurationLb=null,t.content=null,t}var o;return r(t,e),o=t,t.prototype.init=function(e){this._callBackOk=e,this.toggleInvincible.isChecked=c.Main.inst.devLocalPlayerInvincible,this.numPlayerSlider.progress=1,this.matchDurationSlider.progress=d.default.inst.params.game.matchDuration/1e3,this.extraDurationSlider.progress=d.default.inst.params.game.extraDuration/1e3},t.prototype.OkOnClick=function(){this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.toggleInvincibleOnClick=function(){c.Main.inst.devLocalPlayerInvincible=this.toggleInvincible.isChecked},t.prototype.changeMatchDuration=function(){var e=Math.max(1,Math.round(1e3*this.matchDurationSlider.progress));d.default.inst.params.game.matchDuration=e,this.matchDurationLb.string=e+"s"},t.prototype.changeExtraDuration=function(){var e=Math.max(1,Math.round(1e3*this.extraDurationSlider.progress));d.default.inst.params.game.extraDuration=e,this.extraDurationLb.string=e+"s"},t.prototype.changeNumPlayer=function(){var e=Math.max(1,Math.round(100*this.numPlayerSlider.progress));d.default.inst.params.mapGenerator.numPlayer=e,this.totalPlayerLb.string=e+"",o.totalPlayer=e},t.prototype.clearStorage=function(){cc.sys.localStorage.clear()},t.prototype.add1000Gold=function(){u.UserInfo.curCoin+=1e4,l.default.inst.curCoin=u.UserInfo.curCoin,s.NgcInventory.inst.addItem(p.ConstConfig.INVENTORY.ITEM_ID.COIN,1e4,function(e){e&&console.log("Add item coin ERR: "+e)})},t.urlPrefab="Prefabs/Dialogs/ParamsDebugDialog",t.bundleName="resources",t.dialogType="ParamsDebugDialog",t.totalPlayer=100,a([g(cc.Toggle)],t.prototype,"toggleInvincible",void 0),a([g(cc.Slider)],t.prototype,"numPlayerSlider",void 0),a([g(cc.Label)],t.prototype,"totalPlayerLb",void 0),a([g(cc.Slider)],t.prototype,"matchDurationSlider",void 0),a([g(cc.Label)],t.prototype,"matchDurationLb",void 0),a([g(cc.Slider)],t.prototype,"extraDurationSlider",void 0),a([g(cc.Label)],t.prototype,"extraDurationLb",void 0),a([g(cc.Node)],t.prototype,"content",void 0),o=a([h],t)}(i.NgcDialogBase);o.default=m,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../Main":"Main","../../Screens/StartScreen/StartMain":"StartMain","../../TuningData":"TuningData","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig"}],PartyAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"1a28acm81dC8rrnoPBqusnZ","PartyAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyAnimation=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitingGroupNode=null,t}return r(t,e),a([c(cc.Node)],t.prototype,"waitingGroupNode",void 0),a([s],t)}(cc.Component);o.NgcPartyAnimation=l,cc._RF.pop()},{}],PartyInfoBuilder:[function(e,t,o){"use strict";cc._RF.push(t,"f2148afUDNJN5iBC1Owq+Mm","PartyInfoBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyInfoBuilder=void 0;var n=cc._decorator,r=(n.ccclass,n.property,5),a=function(){function e(){this.netID="",this.playerName="",this.skin={},this.minPlayer=2,this.maxPlayer=2,this.country="",this.avatarURL="",this.joinGamePayload={},this.startGamePayload={},this.isPrivate=!0,this.isAllowBot=!0,this.isLoginSocial=!1,this.isNewUser=!1,this.isAutoStartGame=!1,this.map="",this.timeDelayNextGame=r}return e.prototype.setPrivate=function(e){return this.isPrivate=e,this},e.prototype.setAllowBot=function(e){return this.isAllowBot=e,this},e.prototype.setPlayerName=function(e){return this.playerName=e,this},e.prototype.setCountry=function(e){return this.country=e,this},e.prototype.setPlayerNetID=function(e){return this.netID=e,this},e.prototype.setMaxPlayer=function(e){return this.maxPlayer=e,this},e.prototype.setMinPlayer=function(e){return this.minPlayer=e,this},e.prototype.setNewUser=function(e){return this.isNewUser=e,this},e.prototype.setAutoStartGame=function(e){return this.isAutoStartGame=e,this},e.prototype.setSkin=function(e){return this.skin=e,this},e.prototype.setAvatarURL=function(e){return this.avatarURL=e,this},e.prototype.setLoginSocial=function(e){return this.isLoginSocial=e,this},e.prototype.setTimeDelayNextGame=function(e){return this.timeDelayNextGame=e,this},e.prototype.setJoinPayload=function(e){return this.joinGamePayload=e,this},e.prototype.setStartPayload=function(e){return this.startGamePayload=e,this},e.prototype.setStartGameFuncion=function(e){return this.functionStartGame=e,this},e.prototype.setUpdatePayloadFuncion=function(e){return this.functionUpdateStartPayload=e,this},e.prototype.setOnMultiLoginFuntion=function(e){return this.functionOnMutilLogin=e,this},e.prototype.setOnSocialCallBack=function(e){return this.functionOnSocialCallBack=e,this},e.prototype.getJoinPayload=function(){var e=this.joinGamePayload;return e.avatarUrl=this.avatarURL,e.skin=this.skin,e},e.prototype.getStartPayload=function(){this.functionUpdateStartPayload&&this.functionUpdateStartPayload();var e=this.startGamePayload;return e.isPrivate=this.isPrivate,e.allowBot=this.isAllowBot,e},e.prototype.IsPrivate=function(){return this.isPrivate},e.prototype.IsAllowBot=function(){return this.isAllowBot},e}();o.NgcPartyInfoBuilder=a,cc._RF.pop()},{}],PartyPlayerItem:[function(e,t,o){"use strict";cc._RF.push(t,"8b5eccZjZxDp7DVCLbidsN6","PartyPlayerItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyPlayerItem=void 0;var i=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/CountryFlagsManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLB=null,t.avatarSpr=null,t.defaultAvatar=null,t.flagSpr=null,t.hostNode=null,t.readySpr=null,t.glowEffect=null,t.isHost=!1,t.glowEffectOnce=!1,t._playGlowOnce=!1,t}return r(t,e),t.prototype.setInfo=function(e,t){void 0===t&&(t=!1),this.netID=e.netID,this.isHost=e.isHost;var o=e.playerName.split("|");if(this.nameLB.string=o[0],this.flagSpr.spriteFrame=s.NgcCountryFlagsManager.inst.getFlagSpriteFrame(o[1]),e.payload.avatarUrl){var n=this;i.Utils.loadSpriteFrameFromURL(e.payload.avatarUrl).then(function(e){n.avatarSpr.spriteFrame=e}).catch(function(){})}else this.defaultAvatar&&(this.avatarSpr.spriteFrame=this.defaultAvatar);this.enableEffect(t)},t.prototype.enableEffect=function(e){var t=this;cc.log("#Play effect"),this.node.scale=.2,cc.tween(this.node).to(.2,{scale:1.05}).to(.1,{scale:.95}).to(.1,{scale:1}).call(function(){e&&(t.glowEffect.node.active=!0,t.glowEffect.node.active&&(t.glowEffect.setAnimation(0,"joins",!1),t.glowEffect.setCompleteListener(function(){t.glowEffect.node.active=!1})))}).start()},t.prototype.getWorldPos=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},a([u(cc.Label)],t.prototype,"nameLB",void 0),a([u(cc.Sprite)],t.prototype,"avatarSpr",void 0),a([u({type:cc.SpriteFrame})],t.prototype,"defaultAvatar",void 0),a([u(cc.Sprite)],t.prototype,"flagSpr",void 0),a([u(cc.Node)],t.prototype,"hostNode",void 0),a([u(cc.Sprite)],t.prototype,"readySpr",void 0),a([u(sp.Skeleton)],t.prototype,"glowEffect",void 0),a([l],t)}(cc.Component);o.NgcPartyPlayerItem=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager"}],PartyRoomConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"19c4c8eYmJABIV6cXYyTynI","PartyRoomConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomConfirmDialog=void 0;var i=e("./PartyRoomDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){this._callBackOk=o,this._callBackClose=n,this.titleLabel.string=e,this.messageLabel.string=t,cc.log(this)},t.prototype.okOnClick=function(){cc.log(this),this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomConfirmDialog",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomConfirmDialog",a([l(cc.Label)],t.prototype,"titleLabel",void 0),a([l(cc.Label)],t.prototype,"messageLabel",void 0),a([c],t)}(i.NgcPartyRoomDialogBase);o.NgcPartyRoomConfirmDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"3196bhdpJZCEoGebLHKXqNS","PartyRoomDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomDialogBase=void 0;var i=e("../../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomDialogBase",a([c],t)}(i.NgcDialogBase));o.NgcPartyRoomDialogBase=l,cc._RF.pop()},{"../../../Dialogs/Script/DialogBase":"DialogBase"}],PartyRoomEnterCodeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"71460+chIVEJa0PtvqreWM5","PartyRoomEnterCodeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../Services/PartyRoom/PartyRoom"),l=e("../../../Dialogs/Script/NgcDialogManager"),u=e("../../../TechMessage/Script/NgcTechMessageUpdateIOS"),p=e("./PartyRoomDialogBase"),d=e("./ScanQRCodeDialog"),f=cc._decorator,h=f.ccclass,g=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.warningNode=null,t.editBox=null,t.okButton=null,t.scanButton=null,t.loadingNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=4,t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t}return r(t,e),t.prototype.start=function(){var e=this;this.warningNode.active=!1,this.loadingNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.inputFlag=cc.EditBox.InputFlag.INITIAL_CAPS_ALL_CHARACTERS,this.scheduleOnce(function(){e.editBox.focus()},.1);var t=this.editBox.node.parent.getChildByName("OR");this.scanButton.node.active=cc.sys.isMobile,t&&(t.active=cc.sys.isMobile)},t.prototype.onEditBoxBegan=function(){!1===this.okButton.interactable&&(this.warningNode.active=!1,this.okButton.interactable=!0),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){},t.prototype.onQRCodeScannerClick=function(){var e=this;if(navigator.userAgent.match(/iPhone|iPod|iPad/)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".").split(".");if(parseInt(t[0])<14)return void i(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,l.NgcDialogManager.createDialog(u.default.dialogType,u.default.urlPrefab,u.default.bundleName)];case 1:return e.sent().getComponent(u.default).init(),[2]}})})}void 0!==navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return i(e,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,l.NgcDialogManager.createDialog(d.NgcScanQRCodeDialog.dialogType,d.NgcScanQRCodeDialog.urlPrefab,d.NgcScanQRCodeDialog.bundleName)];case 1:return e=n.sent(),(o=e.getComponent(d.NgcScanQRCodeDialog)).init(t,this.onScanOK.bind(this)),o.show(),[2]}})})}).catch(function(){return i(e,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,l.NgcDialogManager.createDialog(d.NgcScanQRCodeDialog.dialogType,d.NgcScanQRCodeDialog.urlPrefab,d.NgcScanQRCodeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(d.NgcScanQRCodeDialog)).init(null,this.onScanOK.bind(this)),t.show(),[2]}})})}):alert("Not support!")},t.prototype.onScanOK=function(e){e.match(/id=(.+)/)?(this.warningNode.active=!1,this.editBox.string=RegExp.$1,this.onOkButtonClick()):this.warningNode.active=!0},t.prototype.onOkButtonClick=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,c.NgcPartyRoom.inst.getRoomCodeInfo(this.editBox.string.toUpperCase())];case 1:return e=t.sent(),console.log("PWF onOkButtonClick ",e),this.loadingNode.active=!1,this.okButton.interactable=!1,this.editBox.backgroundImage=this.grayBGSF,e&&e.status?(this._callback&&this._callback(e.data),this.hide()):this.warningNode.active=!0,[2]}})})},t.prototype.onGetRoomInfoSuccess=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomEnterCode",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomEnterCodeDialog",a([g(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),a([g(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),a([g(cc.Node)],t.prototype,"warningNode",void 0),a([g(cc.EditBox)],t.prototype,"editBox",void 0),a([g(cc.Button)],t.prototype,"okButton",void 0),a([g(cc.Button)],t.prototype,"scanButton",void 0),a([g(cc.Node)],t.prototype,"loadingNode",void 0),a([h],t)}(p.NgcPartyRoomDialogBase);o.default=m,cc._RF.pop()},{"../../../../Services/PartyRoom/PartyRoom":"PartyRoom","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../TechMessage/Script/NgcTechMessageUpdateIOS":"NgcTechMessageUpdateIOS","./PartyRoomDialogBase":"PartyRoomDialogBase","./ScanQRCodeDialog":"ScanQRCodeDialog"}],PartyRoomManager:[function(e,t,o){"use strict";cc._RF.push(t,"35a613TXgNJy4xahGrGXEP/","PartyRoomManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomManager=o.PARTY_MENU_SCREEN=void 0;var c,l=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),p=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),d=e("../../../NanoGameCore/SDK/Nano/NanoSrv"),f=e("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),h=e("../../../NanoGameCore/Services/Social/Social"),g=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),m=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),y=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),_=e("./PartyRoomUI"),v=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),S=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog"),b=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog"),N=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),P=e("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),I=e("../../../NanoGameCore/Services/Ads/Ads"),C=e("../../../NanoGameCore/Services/Platform/Platform"),w=e("../../../NanoGameCore/Core/Utils"),O=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),T=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog"),E=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),M=e("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),D=e("../../Network/ImprovedNetClient"),R=cc._decorator,B=R.ccclass,A=R.property;(function(e){e[e.CREATE_GAME_MENU=0]="CREATE_GAME_MENU",e[e.WATING_ROOM_MENU=1]="WATING_ROOM_MENU",e[e.IDLE_MENU=2]="IDLE_MENU"})(c=o.PARTY_MENU_SCREEN||(o.PARTY_MENU_SCREEN={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partyRoomUI=null,t.gameTitle="All Star Blast",t.description="Come join me at this funny All Star Blast game! ",t.alowPlayerJoin=!0,t._isGameStaredFromRoom=!1,t._isSetupCallback=!1,t._joinByInvited=!1,t._curRoomState=f.PARTY_ROOM_STATE.RECRUITING,t._socialShareURL="",t._isShowingErrorPopup=!1,t._autoStartGameEventCall=!1,t._autoCrash=!0,t._needToCreateGame=!1,t._isAbleCopy=!1,t._QRCodeShortenLink="",t._roomCode="",t._isShowExitPopUp=!1,t.exitDialog=null,t._checkTokenDelayTime=2e3,t._checkTokenCurTime=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){},t.prototype.timeoutCheckValidToken=function(){var e=this;this.clearTimeOutValidToken(),this.timeOutValidToken=setTimeout(function(){e.checkAuthenticationValid(),e.timeoutCheckValidToken()},5e3)},t.prototype.onResume=function(){this.onActivate()},t.prototype.onPause=function(){m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.onActivate=function(){var e;this._timeOut&&clearTimeout(this._timeOut),this.timeoutCheckValidToken(),this.setUpCallBackFunctions(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0),this.isGameStartedFromRoom()?(g.NgcTelemetry.inst.LogEvent_ReturnParty(),this.requestReadyToPlay(),m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID(f.NgcPartyRoom.inst.getPartyID()),this.initEmote()):o.mustGoToPartyRoom()?(cc.log("@You're invited to room"),this.isPC()&&this.copyClipboard(),o.s_enterRoomOnce=!0,this._joinByInvited=!0,this.showUI(),this.switchMenu(c.IDLE_MENU)):(""!=(null===(e=f.NgcPartyRoom.inst)||void 0===e?void 0:e.getPartyID())&&(this.reset(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0)),this.showUI(),this.switchMenu(c.CREATE_GAME_MENU),u.NgcMain.setAppContext(u.AppContext.PartyRoom),g.NgcTelemetry.inst.LogEvent_EnterScreen("PartyRoom")),y.NgcNavBarManager.inst&&(cc.log("@Party init Change Name CallBack"),y.NgcNavBarManager.inst.setChangeNameCallBack(this.onUserChangeName.bind(this)),y.NgcNavBarManager.inst.setLoginSocialCallBack(this.onSocialCallBack.bind(this))),this.checkAuthenticationValid(),this.showBannerAds()},t.prototype.canExitWithoutPrompt=function(){return this._currentMenu!==c.WATING_ROOM_MENU},t.prototype.reset=function(){var e;null===(e=f.NgcPartyRoom.inst)||void 0===e||e.reset(),this.onClose(),this.partyRoomUI.reset(),this._curRoomState=f.PARTY_ROOM_STATE.RECRUITING,this._currentMenu=null},t.prototype.clearTimeOutValidToken=function(){this.timeOutValidToken&&(clearTimeout(this.timeOutValidToken),this.timeOutValidToken=null)},t.prototype.checkPlayerIsDead=function(){return!1},t.prototype.onDeactivate=function(){cc.log("@Hide Party with friends"),m.NgcEmotesManager.inst&&m.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.update=function(){var e=E.NgcBuildConfig.useNgcServer&&M.NgcNetClientRefactor.inst.isConnected()||P.NgcNetClient.inst.isConnected();this._joinByInvited&&e&&(this._joinByInvited=!1,this.requestToJoinParty(f.NgcPartyRoom.getURLParameter(f.URL_PARAMETER.PARTY_ID)))},t.prototype.setUpCallBackFunctions=function(){f.NgcPartyRoom.inst&&!this._isSetupCallback&&(f.NgcPartyRoom.inst.setAllPartyCallBack(this.onPartyMessage.bind(this),this.onPlayerJoin.bind(this),this.onPlayerQuit.bind(this)),this._isSetupCallback=!0)},t.init=function(e){o.s_requestInfor=e},t.prototype.showUI=function(){this.partyRoomUI.onShow()},t.prototype.closeUI=function(e){void 0===e&&(e=!1),this.switchMenu(c.CREATE_GAME_MENU),this.partyRoomUI.onClose(),this.onClose(),this.requestLeaveParty(),clearTimeout(this._timeOut),this.clearTimeOutValidToken(),this.hideBannerAds(),e&&u.NgcMain.inst.setState(u.AppState.StartScreen),g.NgcTelemetry.inst.LogEvent_LeaveParty(),cc.log("Close UI")},t.prototype.forceClose=function(){this.isGameStartedFromRoom()&&(this.closeUI(!1),this.reset())},t.prototype.onClickRequestJoinGame=function(){this.builder().isLoginSocial||!f.NgcPartyRoom.isLoginMandatory()?(this.showLoading(),this.partyRoomUI.onCreateButtonClick(),this.requestToJoinParty(this.partyRoomUI.partyIDEditBox.string)):this.showLoginDialog()},t.prototype.onClickRequestJoinGameWithCode=function(){cc.log("CLick on JoinGame btn PWF"),this.requestJoinGameWithCode()},t.prototype.requestJoinGameWithCode=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,v.NgcDialogManager.createDialog(T.default.dialogType,T.default.urlPrefab,T.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(T.default)).onGetRoomInfoSuccess(this.requestJoinGameFromCodeCallback.bind(this)),t.show(),[2]}})})},t.prototype.requestJoinGameFromCodeCallback=function(e){var t=this;console.log("requestJoinGameFromCodeCallback ",e),f.NgcPartyRoom.getURLParameter(f.URL_PARAMETER.SERVER_URL,e.url);var o=f.NgcPartyRoom.getURLParameter(f.URL_PARAMETER.PARTY_ID,e.url),n=D.default.inst.websocket,r=function(){t.builder().setPlayerNetID(E.NgcBuildConfig.useNgcServer?D.default.inst.clientID:P.NgcNetClient.inst.localPlayerNetID),t.requestToJoinParty(o)};E.NgcBuildConfig.useNgcServer?M.NgcNetClientRefactor.inst.connect(e.serverURL).then(function(){if(D.default.inst.websocket!==n){var e=D.default.inst.clientID;new Promise(function(t,o){var n=15,r=setInterval(function(){if(console.log(D.default.inst.clientID),D.default.inst.clientID!==e)return t(),void clearInterval(r);0==(n-=1)&&o("Fail")},100)}).finally(function(){r()})}else r()}):P.NgcNetClient.inst.tryConnectToServer(e.serverURL,r)},t.prototype.getRoomCode=function(){return this._roomCode},t.prototype.requestToJoinParty=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=this;if(this._timeOut=setTimeout(function(){n.partyRoomUI.resetButtonCreateGame()},3e4),this.isValidDataRequest()){var r=o.s_requestInfor.getJoinPayload(),a=this.builder().playerName+"|"+this.builder().country,i=this.builder().netID,s=this.builder().minPlayer,c=this.builder().maxPlayer,l=f.NgcPartyRoom.inst.getClientUrl();f.NgcPartyRoom.inst.requestJoinParty(e,t,a,i,l,s,c,r)}else cc.warn("#Party Room : Need to call setPartyInfor() to setup reqest information"),this.displayReloadNoticeDialog()},t.prototype.requestLeaveParty=function(){f.NgcPartyRoom.inst.requestLeaveParty()},t.prototype.requestStartParty=function(){if(f.NgcPartyRoom.inst.isHost()){var e=f.NgcPartyRoom.inst.getPartyID(),t=this.builder().getStartPayload();f.NgcPartyRoom.inst.requestStartParty(e,t)}},t.prototype.requestReadyToPlay=function(){var e=f.NgcPartyRoom.inst.getPartyID();f.NgcPartyRoom.inst.requestReadyToPlay(e)},t.prototype.requestChangeInfor=function(e){var t=f.NgcPartyRoom.inst.getPartyID();if(t){var o=e+"|"+this.builder().country,n=f.NgcPartyRoom.inst.findPlayerByNet(this.builder().netID);n.payload.avatarUrl=this.builder().avatarURL;var r={playerName:o,payload:n.payload};f.NgcPartyRoom.inst.sendMessageToParty(t,f.PARTY_REQUEST_TYPE.CHANGE_INFOR,r)}},t.prototype.isValidDataRequest=function(){return!!(this.builder().netID&&this.builder().playerName&&this.builder().country&&this.builder().minPlayer&&this.builder().maxPlayer)},t.prototype.onPartyMessage=function(e,t){return i(this,void 0,void 0,function(){var o,n,r,a,i,l,u,p=this;return s(this,function(s){switch(s.label){case 0:switch(this.checkAuthenticationValid(),e){case f.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED:return[3,1];case f.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE:return[3,5];case f.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE:return[3,6];case f.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS:return[3,7];case f.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR:return[3,8];case f.PARTY_ROOM_MESSAGE.ON_GAME_START:return[3,9];case f.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING:return[3,10]}return[3,11];case 1:return cc.log("@Party ON_ROOM_CREATED",t),(o=t.partyUrl.indexOf("id="))>0&&(this._roomCode=String(t.partyUrl).substring(o+3),cc.log("roomCode ",this._roomCode)),this.isPC()?[4,this.copyClipboard()]:[3,3];case 2:s.sent(),s.label=3;case 3:return cc.log("this._isAbleCopy",this._isAbleCopy),n=f.NgcPartyRoom.inst.getInviteLink(!1)+"&method="+f.INVITE_METHOD.QR_CODE,[4,f.NgcPartyRoom.inst.shortenURL(n)];case 4:return(r=s.sent())&&(console.log(r),(a=JSON.parse(r))&&a.url?a.url.startsWith("http://")&&a.url.startsWith("https://")?this._QRCodeShortenLink=a.url:this._QRCodeShortenLink="https://"+a.url:this._QRCodeShortenLink=f.NgcPartyRoom.inst.getInviteLink()),this.switchMenu(c.WATING_ROOM_MENU),clearTimeout(this._timeOut),[3,11];case 5:return cc.log("@Party ON_ROOM_STATE_CHANGE",t),this.hideLoading(),this._curRoomState=t,this._curRoomState==f.PARTY_ROOM_STATE.RECRUITING||(this._curRoomState==f.PARTY_ROOM_STATE.FULL?(this.requestLeaveParty(),this.showDialogRoomFull()):this._curRoomState==f.PARTY_ROOM_STATE.PLAYING?this.isGameStartedFromRoom()||(this.requestLeaveParty(),this.showDialogGameRunning()):this._curRoomState==f.PARTY_ROOM_STATE.UNAVAILABLE&&this.showDialogEndGame()),[3,11];case 6:return cc.log("@Party ON_HOST_CHANGE",t),i=t,f.NgcPartyRoom.inst.isHost()&&this._curRoomState==f.PARTY_ROOM_STATE.RECRUITING&&(this.showDialogHostChange(),cc.log("@Party ON_HOST_CHANGE You become new host")),this.partyRoomUI.updateHostInfor(i),[3,11];case 7:return cc.log("@Party ON_PLAYER_CHANGE_STATUS",t),l=t,this.partyRoomUI.updatePlayerInfo(l),this.builder().isAutoStartGame&&this.isGameStartedFromRoom()&&f.NgcPartyRoom.inst.isPlayersReady()&&f.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this.scheduleOnce(function(){p.partyRoomUI.showIncomingPlayer(0,!1),p.autoStartNextGame(p.builder().timeDelayNextGame)},.5),[3,11];case 8:return cc.log("@Party ON_PLAYER_CHANGE_INFOR",t),l=t,this.partyRoomUI.updatePlayerInfo(l),[3,11];case 9:return t.gameID,t.gamePass,t.serverUrl,this.startGamePlay(t),cc.log("@Party ON_GAME_START",t),[3,11];case 10:return u=t,this.partyRoomUI.showIncomingPlayer(u),[3,11];case 11:return[2]}})})},t.prototype.onPlayerJoin=function(e){cc.log("@Party onPlayerJoin",e);var t=e.netID==this.builder().netID&&!this.isHost()||this.isHost();this.partyRoomUI.addUser(e,t),this.checkAuthenticationValid()},t.prototype.onPlayerQuit=function(e){cc.log("@Party onPlayerQuit",e),this.partyRoomUI.removeUser(e),this.checkAuthenticationValid()},t.prototype.switchMenu=function(e){if(this._currentMenu!=e)switch(this._currentMenu=e,this.partyRoomUI.switchMenuScreen(this._currentMenu),this._currentMenu){case c.CREATE_GAME_MENU:this.hideLoading();break;case c.WATING_ROOM_MENU:this.onRoomCreate();break;case c.IDLE_MENU:this.showLoading()}},t.prototype.isReadyForNextGame=function(){},t.prototype.startGamePlay=function(e){if(this.exitDialog&&this.exitDialog.closeOnClick(),this._isGameStaredFromRoom=!0,cc.log("@Party PlayGame"),this.isHost()){var t={usersInRoom:f.NgcPartyRoom.inst.getAllPlayers().length,roomID:f.NgcPartyRoom.inst.getPartyID(),autoPlayActivated:this.builder().isAutoStartGame};g.NgcTelemetry.inst.LogEvent_PlayerClickedStartPartyGame(t),this._autoStartGameEventCall&&(this._autoStartGameEventCall=!1)}this.clearTimeOutValidToken(),this.builder().functionStartGame(e),y.NgcNavBarManager.inst.isPopUpShowing()&&y.NgcNavBarManager.inst.getShowingPopUp().forEach(function(e){e&&e.hide()}),this.hideBannerAds()},t.prototype.onClose=function(){this._isGameStaredFromRoom=!1,this._autoStartGameEventCall=!1,this._currentMenu=null},t.prototype.isGameStartedFromRoom=function(){return this._isGameStaredFromRoom},t.prototype.onRoomCreate=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r,a;return s(this,function(){return cc.log("onRoom Create"),this.isHost()&&(e={allowsRandom:!1,roomID:f.NgcPartyRoom.inst.getPartyID()},g.NgcTelemetry.inst.LogEvent_PlayerClickedCreatePartyRoom(e)),t=this,C.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){t.partyRoomUI.addQRCode(e)}),this.hideLoading(),this.initEmote(),o="",(n=f.NgcPartyRoom.getURLParameter(f.URL_PARAMETER.METHOD))?n==f.INVITE_METHOD.QR_CODE?o=f.INVITE_METHOD.QR_CODE:n==f.INVITE_METHOD.SOCIAL?o=f.INVITE_METHOD.SOCIAL:n==f.INVITE_METHOD.IN_GAME&&(o=f.INVITE_METHOD.IN_GAME):o=this.isHost()?f.INVITE_METHOD.HOST:f.INVITE_METHOD.SHARE_LINK,r={joinContext:o,isNewUser:this.builder().isNewUser,roomID:f.NgcPartyRoom.inst.getPartyID()},g.NgcTelemetry.inst.LogEvent_JointRoom(r),this.isHost()||this.builder().isLoginSocial||this.partyRoomUI.visibleEditNameTag(!0),a=f.NgcPartyRoom.inst.getInviteLink()+"&method="+f.INVITE_METHOD.SOCIAL,this.genSocialShareURL(a),[2]})})},t.prototype.allowPlayerJoinCheckBox=function(e){this.alowPlayerJoin=e.isChecked},t.prototype.showLoading=function(){this.partyRoomUI.showLoading(!0)},t.prototype.hideLoading=function(){this.partyRoomUI.showLoading(!1)},t.prototype.getGameID=function(){return f.NgcPartyRoom.inst.getGameID()},t.getURLParameter=function(e){return f.NgcPartyRoom.getURLParameter(e)},t.getServerFromInviteLink=function(){return f.NgcPartyRoom.getURLParameter(f.URL_PARAMETER.SERVER_URL)},t.mustGoToPartyRoom=function(){return f.NgcPartyRoom.isPlayerInvited()&&!o.s_enterRoomOnce},t.prototype.isHost=function(){return f.NgcPartyRoom.inst.isHost()},t.prototype.autoStartNextGame=function(e){var t=this;f.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this._curRoomState==f.PARTY_ROOM_STATE.RECRUITING?-1==e?(m.NgcEmotesManager.inst.extendEmotesUI(!1),this._autoStartGameEventCall=!0,this.requestStartParty(),this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost())):(this.partyRoomUI.startGameCountDown(!0,e),this.partyRoomUI.enableStartButton(!1,this.isHost()),this.scheduleOnce(function(){t.autoStartNextGame(e-1)},1)):(this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost()))},t.prototype.onUserChangeName=function(e){this.requestChangeInfor(e)},t.prototype.showDialogRoomFull=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("PWF_ROOM_FULL").text,l.NgcLocalizedManager.t("PWF_ROOM_FULL_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogEndGame=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("PWF_GAME_ENDS").text,l.NgcLocalizedManager.t("PWF_GAME_ENDS_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogGameRunning=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("PWF_GAME_STARTED").text,l.NgcLocalizedManager.t("PWF_GAME_STARTED_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogHostChange=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("PWF_HOST_CHANGES").text,l.NgcLocalizedManager.t("PWF_HOST_CHANGE_CONTENT").text,function(){}),t.show(),[2]}})})},t.prototype.showExitDialog=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),i(this,void 0,void 0,function(){var o,n,r;return s(this,function(a){switch(a.label){case 0:return this._isShowExitPopUp?[2]:(this._isShowExitPopUp=!0,o=this,[4,v.NgcDialogManager.createDialog(b.NgcPartyRoomConfirmDialog.dialogType,b.NgcPartyRoomConfirmDialog.urlPrefab,b.NgcPartyRoomConfirmDialog.bundleName)]);case 1:return n=a.sent(),(r=n.getComponent(b.NgcPartyRoomConfirmDialog)).init(l.NgcLocalizedManager.t("PWF_LEAVE_PARTY").text,l.NgcLocalizedManager.t("PWF_LEAVE_PARTY_CONTENT").text,function(){o.closeUI(t),o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!0)},function(){o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!1)}),r.show(),this.exitDialog=r,[2]}})})},t.prototype.onClickExit=function(){this.showExitDialog(null,!0)},t.prototype.onClickStartGame=function(){this.requestStartParty()},t.prototype.showCommingSoonDialgo=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("NGG_COMING_SOON").text,l.NgcLocalizedManager.t("NGG_COMING_SOON").text,function(){}),t.show(),[2]}})})},t.prototype.displayLogoutNoticeDialog=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayLogoutNoticeDialog"),[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("NTM_ERROR").text,l.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){w.Utils.reloadPage(),this._isShowingErrorPopup=!1}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.displayReloadNoticeDialog=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayReloadNoticeDialog"),[4,v.NgcDialogManager.createDialog(S.NgcPartyRoomNoticeDialog.dialogType,S.NgcPartyRoomNoticeDialog.urlPrefab,S.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(S.NgcPartyRoomNoticeDialog)).init(l.NgcLocalizedManager.t("NTM_ERROR").text,l.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){this._joinByInvited=!0,w.Utils.reloadPage(),this._isShowingErrorPopup=!1}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.showLoginDialog=function(){return i(this,void 0,void 0,function(){return s(this,function(){return y.NgcNavBarManager.inst&&"function"==typeof y.NgcNavBarManager.inst.logInOnClick&&(this._needToCreateGame=!0,y.NgcNavBarManager.inst.logInOnClick()),[2]})})},t.prototype.initEmote=function(){if(m.NgcEmotesManager.inst){var e={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:this.checkPlayerIsDead,parentForBubble:this.partyRoomUI.parentofBubble,parentForEmojis:this.partyRoomUI.parentofEmoji};cc.log(e),m.NgcEmotesManager.inst.init(e),m.NgcEmotesManager.inst.setBroadcastNetID(f.NgcPartyRoom.inst.getPartyID()),m.NgcEmotesManager.inst.allowScrollView(!1),m.NgcEmotesManager.inst.extendEmotesUI(!1)}else cc.error("Emote doesn't have instance")},t.prototype.getPosEmojiForPlayerById=function(e){return cc.v2(this.partyRoomUI.getPosEmojiForPlayerById(e))},t.prototype.builder=function(){return o.s_requestInfor||cc.error("Need to init set Infor first\n ex :let request = new PartyInfoBuilder()\n request.setPlayerName(NgcUserInfo.localUserName)\n        .setCountry(NgcCountryFlagsManager.localCountry)\n       .setMaxPlayer(32)\n       .setMinPlayer(2)\n       .setPlayerNetID(NetClient.inst.localPlayerNetID)\n       .setSkin(UserInfo.curSkin)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n        .setTimeDelayNextGame(5)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n       .setPrivate(true)\n       .setAllowBot(false)\n       .setJoinPayload({})\n       .setStartPayload({})\n       .setStartGameFuncion(()=>{});)'"),o.s_requestInfor},t.prototype.onButtonFaceBookClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=f.NgcPartyRoom.inst.getInviteLink()+"&method="+f.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return g.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Facebook"),"undefined"!=typeof FB?FB.ui({display:"popup",method:"share",mobile_iframe:!0,href:""==this._socialShareURL?e:this._socialShareURL},function(e){e&&(console.log("Share success: post_id = "+e.post_id),g.NgcTelemetry.inst.LogEvent_ShareComplete("PartyRoom","Facebook"))}):(t="https://www.facebook.com/sharer/sharer.php?u=",t+=encodeURIComponent(this._socialShareURL),cc.sys.openURL(t)),[2]}})})},t.prototype.onButtonTwitterClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=f.NgcPartyRoom.inst.getInviteLink()+"&method="+f.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="https://twitter.com/intent/tweet?text=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),cc.log("description",this.description),cc.sys.openURL(t),g.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Twitter"),[2]}})})},t.prototype.onButtonEmailClick=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=f.NgcPartyRoom.inst.getInviteLink()+"&method="+f.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="mailto:example@website.com?subject=",t+=encodeURIComponent(this.gameTitle)+"&body=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),window.location.href=t,g.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Email"),[2]}})})},t.prototype.onButtonCopyClick=function(){this.copyClipboard(),this.isPC()||(this.shareNative(),this.partyRoomUI.onQRCodeButtonEvent())},t.prototype.copyClipboard=function(){return i(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var o=f.NgcPartyRoom.inst.getInviteLink(!0);if(C.NgcPlatform.isRunFromApp()&&C.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_COPYLINK:o}),"*"),null!=o&&""!=o||(o="test"),void 0===navigator.clipboard)console.log("navigator.clipboard"),e.copyLinkToClipboardAlternative(o),t();else{var n=navigator.clipboard.writeText(o);n.then(function(){e._isAbleCopy=!0,e.partyRoomUI.showClickCopiedText(),t()}),n.catch(function(){e.copyLinkToClipboardAlternative(o),t()})}})];case 1:return t.sent(),[2]}})})},t.prototype.copyLinkToClipboardAlternative=function(e){var t=document.createElement("textarea");t.value=e,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var o=document.execCommand("copy"),n=o?"successful":"unsuccessful";this._isAbleCopy=!!o,console.warn(n)}catch(r){cc.warn("Was not possible to copy te text: ",r),this._isAbleCopy=!1}document.body.removeChild(t),this.partyRoomUI.showClickCopiedText()},t.prototype.isAbleCopy=function(){return this._isAbleCopy},t.prototype.shareNative=function(){var e=f.NgcPartyRoom.inst.getInviteLink(!0);C.NgcPlatform.isRunFromApp()?C.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"):navigator.share&&navigator.share({url:e}).then(function(){console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.isPC=function(){return!cc.sys.isMobile},t.prototype.onSocialCallBack=function(e,t){cc.log(e),cc.log(t),"login"==t?(this.builder().setLoginSocial(!0).setPlayerName(N.default.localUserName).setAvatarURL(N.default.avatarUrl),cc.log("(UserInfo.avatarUrl",N.default.avatarUrl),this.partyRoomUI.setLoginStatus(!0),this.timeoutCheckValidToken(),this._needToCreateGame?this.onClickRequestJoinGame():this.requestChangeInfor(N.default.localUserName),this._needToCreateGame=!1):"logout"==t?(this.isHost()&&f.NgcPartyRoom.isLoginMandatory()?this.closeUI(!0):(cc.log("Party change name",N.default.localUserName),this.builder().setLoginSocial(!1),this.builder().setPlayerName(N.default.localUserName).setAvatarURL(N.default.avatarUrl),this.requestChangeInfor(N.default.localUserName),this.partyRoomUI.setLoginStatus(!1),this.timeoutCheckValidToken()),this._needToCreateGame=!1):"onPreLogin"==t?this.clearTimeOutValidToken():"close"==t&&(this.timeoutCheckValidToken(),this._needToCreateGame=!1)},t.prototype.genSocialShareURL=function(e){return i(this,void 0,void 0,function(){var t,o=this;return s(this,function(){return(t=f.NgcPartyRoom.inst.shortenURL(e)).then(function(e){if(e){var t=JSON.parse(e);t&&t.url&&(o._socialShareURL=t.url,o._socialShareURL.startsWith("https://")||o._socialShareURL.startsWith("http://")||(o._socialShareURL="https://"+o._socialShareURL))}cc.log("#Share URL SOCIAL",e)}),t.catch(function(e){cc.warn(e)}),cc.log("#Share URL SOCIAL",e),[2]})})},t.prototype.checkAuthenticationValid=function(){var e=this;if(Date.now()-this._checkTokenCurTime>this._checkTokenDelayTime){this._checkTokenCurTime=Date.now();var t=this;d.default.inst.serviceGet("/auth/check",null,function(o){o&&(h.NgcSocial.inst.checkLoginStatus().then(function(){h.NgcSocial.inst.isConnected()&&h.NgcSocial.inst.logout(function(){})}),e.builder().isLoginSocial&&t.builder().functionOnMutilLogin&&t.builder().functionOnMutilLogin(),e.clearTimeOutValidToken(),e.closeUI(!0))})}},t.prototype.showBannerAds=function(){var e,t;O.default.inst.isAdsPoincutAvailable(O.NgcPointcuts.bannerPartyRoom,I.AdsType.Banner)?null===(e=O.default.inst)||void 0===e||e.showBanner(O.NgcPointcuts.bannerPartyRoom):null===(t=O.default.inst)||void 0===t||t.hide()},t.prototype.hideBannerAds=function(){var e;null===(e=O.default.inst)||void 0===e||e.hide(O.NgcPointcuts.bannerPartyRoom)},t.s_enterRoomOnce=!1,t.TIME_OUT_FOR_SCREEN_DISAPPEAR=5,a([A(_.NgcPartyRoomUI)],t.prototype,"partyRoomUI",void 0),a([A],t.prototype,"gameTitle",void 0),a([A],t.prototype,"description",void 0),o=a([B],t)}(p.default);o.NgcPartyRoomManager=k,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog":"PartyRoomConfirmDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog":"PartyRoomEnterCodeDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog":"PartyRoomNoticeDialog","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Network/ImprovedNetClient":"ImprovedNetClient","./PartyRoomUI":"PartyRoomUI"}],PartyRoomNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"891602V7ZdHpYyr5Je5X6NA","PartyRoomNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomNoticeDialog=void 0;var i=e("./PartyRoomDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o){this._callBackOk=o,this.titleLabel.string=e,this.messageLabel.string=t},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomNoticeDialog",t.bundleName="02_dialog_PWF",t.dialogType="NgcPartyRoomNoticeDialog",a([l(cc.Label)],t.prototype,"titleLabel",void 0),a([l(cc.Label)],t.prototype,"messageLabel",void 0),a([c],t)}(i.NgcPartyRoomDialogBase);o.NgcPartyRoomNoticeDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomUI:[function(e,t,o){"use strict";cc._RF.push(t,"98eed6b+hNH94Hxs79AOP+N","PartyRoomUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomUI=void 0;var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../NanoGameCore/Services/Ads/Ads"),c=e("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),l=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem"),u=e("./PartyRoomManager"),p=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),d=e("../../../NanoGameCore/Core/Utils"),f=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),h=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),g=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),m=cc._decorator,y=m.ccclass,_=m.property,v=cc.v3(50,50),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerPrefab=null,t.playerPanelNode=null,t.buttonStartNode=null,t.buttonCreateGameNode=null,t.buttonJoinGameNode=null,t.roomCodeNode=null,t.roomCodeLbl=null,t.headerCreateGameNode=null,t.buttonInviteNode=null,t.qrCodeSpriteMobile=null,t.qrCodeSpritePC=null,t.createGameMenuNode=null,t.watingRoomMenuNode=null,t.translationGroupNode=null,t.qrCodeChildNodeMobile=null,t.qrCodeChildNodePC=null,t.qrParentNodePC=null,t.qrParentNodeMobile=null,t.shareContainerPC=null,t.loadingNode=null,t.numberOfPlayerLabel=null,t.commingPlayerLabel=null,t.partyIDEditBox=null,t.nextGameStartLabel=null,t.hostnextGameStartLabel=null,t.loadingIconCreateGame=null,t.loginRequireNode=null,t.createGameGroupLabelNode=null,t.editNameTagNode=null,t.parentofBubble=null,t.parentofEmoji=null,t.settingButtonNode=null,t.headerWaitingNode=null,t.avatarContainerNode=null,t.pcalertTextNode=null,t.sharinglinkLabel=null,t.orNode=null,t.copyButton=null,t.buttonClose=null,t.roomCodeLbls=[],t._isAbleCopy=!1,t._listPlayers=[],t._isShowQRCode=!1,t._timeDT=0,t._loginSocial=!1,t._avatarContainerWidgetTop=0,t._numOfComingPlayer=0,t._curUserEffect="",t}return r(t,e),t.prototype.start=function(){this.updateWidgetTarget(),this._avatarContainerWidgetTop=this.avatarContainerNode.getComponent(cc.Widget).top,u.NgcPartyRoomManager.inst.isPC()?(this.qrCodeChildNode=this.qrCodeChildNodePC,this.qrParentNode=this.qrParentNodePC):(this.qrCodeChildNode=this.qrCodeChildNodeMobile,this.qrParentNode=this.qrParentNodeMobile),this.qrCodeChildNode.active=!0,this.qrParentNode.active=!1,this.buttonClose.node.active=!1,this.applyShareConfig(),s.NgcAds.inst&&s.NgcAds.inst.isBannerShowing&&this.adsBannerAlign(!0),cc.sys.isMobile||cc.view.on("canvas-resize",this.onResized,this)},t.prototype.applyShareConfig=function(){u.NgcPartyRoomManager.inst.isPC()&&(this.shareContainerPC.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainerPC.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainerPC.getChildByName("email").active=this.checkShareConfig("email"))},t.prototype.checkShareConfig=function(e){return!h.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||h.NgcBuildConfig.services.ShareMe[e]},t.prototype.updateWidgetTarget=function(){var e=cc.find("Canvas");if(e){var t=this.avatarContainerNode.getComponent(cc.Widget);cc.sys.isMobile||(this.avatarContainerNode.width=Math.min(.85*e.width,1120)),t.target=e,t.top=h.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height+20+p.default.inst.navBarIconNode.height,t.updateAlignment();var o=this.loadingNode.getComponent(cc.Widget);o.target=e,o.updateAlignment()}},t.prototype.reset=function(){this._listPlayers.forEach(function(e){e.node.destroy()}),this._listPlayers=[],this.enableStartButton(!1,!1),this.createGameMenuNode.opacity=255,this.nextGameStartLabel.node.active=!1,this._timeDT=0,this.resetButtonCreateGame(),this.visibleEditNameTag(!1)},t.prototype.addUser=function(e,t){var o=cc.instantiate(this.playerPrefab);o.parent=this.playerPanelNode,o.setScale(cc.view.getFrameSize().height/cc.winSize.height);var n=o.getComponent(l.NgcPartyPlayerItem);n&&n.setInfo(e,t),this._listPlayers.push(n);for(var r=0,a=this._listPlayers.length-1;a>0;a--)this._listPlayers[a].node.setSiblingIndex(r),r++;this.updateNumberOfPlayer(this._listPlayers.length),this.updateHostInfor()},t.prototype.removeUser=function(e){for(var t in this._listPlayers){var o=this._listPlayers[t];if(e.netID==o.netID){this._listPlayers[t].node.destroy(),delete this._listPlayers[t],this._listPlayers.splice(parseInt(t),1),this.updateHostInfor();break}}this.updateNumberOfPlayer(this._listPlayers.length),this.showIncomingPlayer(this._numOfComingPlayer,!0)},t.prototype.enableStartButton=function(e,t){t?(this.buttonStartNode.getComponent(cc.Button).enabled=e,this.buttonStartNode.active=!0,this.buttonStartNode.opacity=e?255:125):this.buttonStartNode.active=e},t.prototype.updateHostInfor=function(e){if(u.NgcPartyRoomManager.inst.isHost()){var t=this._listPlayers.length>=u.NgcPartyRoomManager.inst.builder().minPlayer&&c.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(t,!0),this.nextGameStartLabel.node.active=!1}else this.showWaitingHostLabel(),this.enableStartButton(!1,!1);e&&this.updatePlayerInfo(e)},t.prototype.updatePlayerInfo=function(e){for(var t in this._listPlayers)if(e.netID==this._listPlayers[t].netID){this._listPlayers[t].setInfo(e);break}if(c.NgcPartyRoom.inst.isHost()){var o=this._listPlayers.length>=u.NgcPartyRoomManager.inst.builder().minPlayer&&c.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(o,!0)}},t.prototype.addQRCode=function(e){u.NgcPartyRoomManager.inst.isPC()?this.qrCodeSpritePC.spriteFrame=e:this.qrCodeSpriteMobile.spriteFrame=e},t.prototype.onClose=function(){this.reset()},t.prototype.onShow=function(){},t.prototype.switchMenuScreen=function(e){switch(this._currentMenuNode?this._currentMenuNode.active=!1:(this.watingRoomMenuNode.active=!1,this.createGameMenuNode.active=!1),e){case u.PARTY_MENU_SCREEN.CREATE_GAME_MENU:this.createGameMenuNode.active=!0,this._currentMenuNode=this.createGameMenuNode,this.visibleLoginRequire(!this._loginSocial);break;case u.PARTY_MENU_SCREEN.WATING_ROOM_MENU:this.visibleLoadingIcon(!1),this.watingRoomMenuNode.active=!0,this._currentMenuNode=this.watingRoomMenuNode,u.NgcPartyRoomManager.inst.isHost()?this.translation():(this.updateQRCodePosition(),this.visibleEditNameTag(!0)),this.updateRoomCode();break;case u.PARTY_MENU_SCREEN.IDLE_MENU:}this._curScreen=e},t.prototype.updateRoomCode=function(){var e=""+u.NgcPartyRoomManager.inst.getRoomCode();this.roomCodeLbls.forEach(function(t){t&&(t.string=e)})},t.prototype.showWaitingHostLabel=function(){u.NgcPartyRoomManager.inst.isHost()||(this.nextGameStartLabel.node.active=!0,this.nextGameStartLabel.string=i.NgcLocalizedManager.t("PWF_WAITING_HOST_START").text)},t.prototype.startGameCountDown=function(e,t){u.NgcPartyRoomManager.inst.isHost()?(this.hostnextGameStartLabel.node.active=e,this.nextGameStartLabel.node.active=!1,e&&(this.hostnextGameStartLabel.string=i.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t)):(this.nextGameStartLabel.node.active=e,this.hostnextGameStartLabel.node.active=!1,e?this.nextGameStartLabel.string=i.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t:this.showWaitingHostLabel())},t.prototype.showLoading=function(e){this.loadingNode.active=e},t.prototype.updateNumberOfPlayer=function(e){i.NgcLocalizedManager.setTextKey(this.numberOfPlayerLabel,"PWF_JOINED_PARAM",[e,u.NgcPartyRoomManager.inst.builder().maxPlayer])},t.prototype.translation=function(){var e=this;u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0)),this.translationGroupNode.opacity=0,this.buttonInviteNode.opacity=0;var t=this.qrParentNode.height;this.qrParentNode.scaleY=this.buttonCreateGameNode.height/t,this.qrParentNode.active=!0,this.qrParentNode.opacity=255,this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position)).y,this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonCreateGameNode.parent.convertToWorldSpaceAR(this.buttonCreateGameNode.position)),this.qrCodeChildNode.opacity=0,this._isShowQRCode=!0,this.scheduleOnce(function(){var t=e.qrParentNode.parent.convertToNodeSpaceAR(e.buttonInviteNode.parent.convertToWorldSpaceAR(e.buttonInviteNode.position)).y;cc.tween(e.qrParentNode).to(.2,{y:t},{easing:function(e){return e*e}}).start()}),cc.tween(this.qrParentNode).to(.3,{scaleY:1,scaleX:1},{easing:function(e){return e*e}}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start();var t=cc.sequence(cc.scaleTo(.08,1.015),cc.scaleTo(.08,.985),cc.scaleTo(.08,1));e.qrCodeChildNode.scale=1,e.qrCodeChildNode.runAction(t),cc.tween()}).start(),cc.tween(this.translationGroupNode).to(.3,{opacity:255},{easing:function(e){return e*e}}).call(function(){e.buttonInviteNode.opacity=255}).start(),this.showClickCopiedText()},t.prototype.onCloseQRCode=function(){this._isShowQRCode&&this.onQRCodeButtonEvent()},t.prototype.onQRCodeButtonEvent=function(){var e=this;if(this.updateQRCodePosition(),this.buttonInviteNode.active=!1,this._isShowQRCode){this._isShowQRCode=!1;var t=this.buttonInviteNode.height,o=this.buttonInviteNode.width,n=t/this.qrParentNode.height,r=o/this.qrParentNode.width;cc.tween(this.qrCodeChildNode).to(.2,{opacity:0},{easing:"quintIn"}).start(),cc.tween(this.qrParentNode).to(.24,{scaleY:n-.01,scaleX:r-.01},{easing:"quintIn"}).to(.08,{scaleY:n+.01,scaleX:r+.01},{easing:"quintIn"}).to(.08,{scaleY:n,scaleX:r},{easing:"quintIn"}).call(function(){e.qrParentNode.active=!1,e.buttonInviteNode.active=!0}).start()}else u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0)),this.showClickCopiedText(),this._isShowQRCode=!0,this.qrParentNode.active=!0,cc.tween(this.qrParentNode).to(.24,{scaleY:1.01,scaleX:1.01},{easing:"quintIn"}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start()}).to(.08,{scaleY:.99,scaleX:.99},{easing:"quintIn"}).to(.08,{scaleY:1,scaleX:1},{easing:"quintIn"}).call(function(){}).start(),cc.tween(this.qrParentNode).to(.2,{opacity:255},{easing:"quintIn"}).start()},t.prototype.updateQRCodePosition=function(){this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position))},t.prototype.visibleLoadingIcon=function(e){this.loadingIconCreateGame.active=e,this.createGameGroupLabelNode.active=!e},t.prototype.onCreateButtonClick=function(){this.visibleLoadingIcon(!0),this.buttonCreateGameNode.getComponent(cc.Button).enabled=!1,this.buttonCreateGameNode.opacity=200,cc.tween(this.headerCreateGameNode).to(.2,{opacity:0}).start()},t.prototype.resetButtonCreateGame=function(){this.buttonCreateGameNode.getComponent(cc.Button).enabled=!0,this.buttonCreateGameNode.opacity=255,this.headerCreateGameNode.opacity=255,this.visibleLoadingIcon(!1)},t.prototype.showIncomingPlayer=function(e,t){void 0===t&&(t=!0);var o=this._listPlayers.length<u.NgcPartyRoomManager.inst.builder().maxPlayer;this._numOfComingPlayer=e,t&&o?(this.commingPlayerLabel.node.active=!0,this.commingPlayerLabel.string=0!=e?e+" "+i.NgcLocalizedManager.t("PWF_PLAYER_COMMING").text:i.NgcLocalizedManager.t("PWF_WAITING_FOR_PLAYER").text):this.commingPlayerLabel.node.active=!1},t.prototype.visibleLoginRequire=function(e){this.loginRequireNode.active=e&&c.NgcPartyRoom.isLoginMandatory()},t.prototype.visibleEditNameTag=function(e){var t=this,o=p.default.inst.navBarIconNode;if(e&&o){var n=d.Utils.getWorldPos(o),r=cc.v2(this.editNameTagNode.width/2,n.y-o.height/2-this.editNameTagNode.height/2);d.Utils.setWorldPos(this.editNameTagNode,r),this.editNameTagNode.opacity=0,this.editNameTagNode.active=!0,cc.tween(this.editNameTagNode).to(.3,{opacity:255}).call(function(){t.scheduleOnce(function(){cc.tween(t.editNameTagNode).to(.3,{opacity:0}).call(function(){t.editNameTagNode.active=!1,t.editNameTagNode.opacity=255}).start()},3)}).start()}else this.editNameTagNode.active=e},t.prototype.setLoginStatus=function(e){this._loginSocial=e,this.visibleLoginRequire(!this._loginSocial)},t.prototype.onSettingClick=function(e){this.commingSoonEffect(e.target)},t.prototype.onMicrophoneClick=function(e){cc.log(e.target),this.commingSoonEffect(e.target)},t.prototype.commingSoonEffect=function(e){var t=e.getComponentInChildren(cc.Animation);t&&t.play()},t.prototype.getPosEmojiForPlayerById=function(e){for(var t=cc.v3(0,0),o=0,n=this._listPlayers;o<n.length;o++){var r=n[o];r.netID==e&&(t=r.getWorldPos(),this.updateAvatarEffect(e))}return t.addSelf(v),t},t.prototype.updateAvatarEffect=function(e){if(this._curUserEffect!=e){this._curUserEffect=e;var t=this.findUserByID(e);t&&(t.node.setSiblingIndex(0),t.enableEffect(!1))}},t.prototype.alignWhenHasAds=function(e){if(e?(this.settingButtonNode.getComponent(cc.Widget).top=150,this.headerWaitingNode.getComponent(cc.Widget).top=100,this.buttonClose.getComponent(cc.Widget).top=100):(this.settingButtonNode.getComponent(cc.Widget).top=70,this.headerWaitingNode.getComponent(cc.Widget).top=20,this.buttonClose.getComponent(cc.Widget).top=20),this.settingButtonNode.getComponent(cc.Widget).updateAlignment(),this.headerWaitingNode.getComponent(cc.Widget).updateAlignment(),this.buttonClose.getComponent(cc.Widget).updateAlignment(),!cc.sys.isMobile){if(e)this.avatarContainerNode.getComponent(cc.Widget).top=this._avatarContainerWidgetTop;else{var t=this.avatarContainerNode.getComponent(cc.Widget).top;this.avatarContainerNode.getComponent(cc.Widget).top=t-110}this.avatarContainerNode.getComponent(cc.Widget).updateAlignment()}},t.prototype.adsBannerAlign=function(){this.node.getComponent(cc.Widget).top=0,this.playerPanelNode.getComponent(cc.Layout).paddingTop},t.prototype.findUserIndex=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return t;return 0},t.prototype.findUserByID=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return this._listPlayers[t];return null},t.prototype.update=function(e){this._curScreen==u.PARTY_MENU_SCREEN.WATING_ROOM_MENU&&(this._timeDT+=e),this.updateMovePWFButtons()},t.prototype.updateMovePWFButtons=function(){cc.sys.isMobile&&g.NgcEmotesManager.inst&&g.NgcEmotesManager.inst.currentEmotesUIInst&&(g.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp?this.buttonStartNode.hideByEmoji||(this.buttonStartNode.hideByEmoji=!0,cc.tween(this.buttonStartNode).to(.15,{opacity:0}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:0}).start()):this.buttonStartNode.hideByEmoji&&(this.buttonStartNode.hideByEmoji=!1,cc.tween(this.buttonStartNode).to(.15,{opacity:255}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:255}).start()))},t.prototype.onEditBoxChange=function(e){cc.log("Text change,te",e),u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0))},t.prototype.showClickCopiedText=function(){var e=this;if(u.NgcPartyRoomManager.inst.isPC()){var t=u.NgcPartyRoomManager.inst.isAbleCopy();this.orNode.active=!t,this.copyButton.active=t,t&&(this.pcalertTextNode.opacity=255,this.scheduleOnce(function(){cc.tween(e.pcalertTextNode).to(.3,{opacity:0}).start()},3))}},t.prototype.setShareUrl=function(e){if(this.sharinglinkLabel.node.active=!0,this.sharinglinkLabel.node.getComponent(cc.EditBox).string=e,!u.NgcPartyRoomManager.inst.isAbleCopy()){var t=this.sharinglinkLabel.node.getComponent(cc.EditBox);this.scheduleOnce(function(){try{t.focus(),t._impl._elem.select(),cc.log("cp",t)}catch(e){cc.warn(e)}},.5)}},t.prototype.onResized=function(){this.updateWidgetTarget()},a([_(cc.Prefab)],t.prototype,"playerPrefab",void 0),a([_(cc.Node)],t.prototype,"playerPanelNode",void 0),a([_(cc.Node)],t.prototype,"buttonStartNode",void 0),a([_(cc.Node)],t.prototype,"buttonCreateGameNode",void 0),a([_(cc.Node)],t.prototype,"buttonJoinGameNode",void 0),a([_(cc.Node)],t.prototype,"roomCodeNode",void 0),a([_(cc.Label)],t.prototype,"roomCodeLbl",void 0),a([_(cc.Node)],t.prototype,"headerCreateGameNode",void 0),a([_(cc.Node)],t.prototype,"buttonInviteNode",void 0),a([_(cc.Sprite)],t.prototype,"qrCodeSpriteMobile",void 0),a([_(cc.Sprite)],t.prototype,"qrCodeSpritePC",void 0),a([_(cc.Node)],t.prototype,"createGameMenuNode",void 0),a([_(cc.Node)],t.prototype,"watingRoomMenuNode",void 0),a([_(cc.Node)],t.prototype,"translationGroupNode",void 0),a([_(cc.Node)],t.prototype,"qrCodeChildNodeMobile",void 0),a([_(cc.Node)],t.prototype,"qrCodeChildNodePC",void 0),a([_(cc.Node)],t.prototype,"qrParentNodePC",void 0),a([_(cc.Node)],t.prototype,"qrParentNodeMobile",void 0),a([_(cc.Node)],t.prototype,"shareContainerPC",void 0),a([_(cc.Node)],t.prototype,"loadingNode",void 0),a([_(cc.Label)],t.prototype,"numberOfPlayerLabel",void 0),a([_(cc.Label)],t.prototype,"commingPlayerLabel",void 0),a([_(cc.EditBox)],t.prototype,"partyIDEditBox",void 0),a([_(f.NgcLabelLocalized)],t.prototype,"nextGameStartLabel",void 0),a([_(cc.Label)],t.prototype,"hostnextGameStartLabel",void 0),a([_(cc.Node)],t.prototype,"loadingIconCreateGame",void 0),a([_(cc.Node)],t.prototype,"loginRequireNode",void 0),a([_(cc.Node)],t.prototype,"createGameGroupLabelNode",void 0),a([_(cc.Node)],t.prototype,"editNameTagNode",void 0),a([_(cc.Node)],t.prototype,"parentofBubble",void 0),a([_(cc.Node)],t.prototype,"parentofEmoji",void 0),a([_(cc.Node)],t.prototype,"settingButtonNode",void 0),a([_(cc.Node)],t.prototype,"headerWaitingNode",void 0),a([_(cc.Node)],t.prototype,"avatarContainerNode",void 0),a([_(cc.Node)],t.prototype,"pcalertTextNode",void 0),a([_(cc.Label)],t.prototype,"sharinglinkLabel",void 0),a([_(cc.Node)],t.prototype,"orNode",void 0),a([_(cc.Node)],t.prototype,"copyButton",void 0),a([_(cc.Button)],t.prototype,"buttonClose",void 0),a([_(cc.Label)],t.prototype,"roomCodeLbls",void 0),a([y],t)}(cc.Component);o.NgcPartyRoomUI=S,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem":"PartyPlayerItem","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","./PartyRoomManager":"PartyRoomManager"}],PartyRoom_impl_DouyinSrv:[function(e,t,o){"use strict";cc._RF.push(t,"85986vVR71DyLIedacy1Ihy","PartyRoom_impl_DouyinSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._getInviteLink=function(e){return void 0===e&&(e=!1),"http://game.js/search?"+"partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress)},t}(e("./PartyRoom_impl_GameServerSrv").default);o.default=a,cc._RF.pop()},{"./PartyRoom_impl_GameServerSrv":"PartyRoom_impl_GameServerSrv"}],PartyRoom_impl_GameServerSrv:[function(e,t,o){"use strict";cc._RF.push(t,"f0130FOqWZM+7gGwlejhsUt","PartyRoom_impl_GameServerSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../Core/Utils"),c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/Network/NgcNetClient"),u=e("../../GameFramework/Scripts/Network/NgcNetClientRefactor"),p=e("../Platform/Platform"),d=e("./PartyRoom"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv initialized")})},t.prototype._getName=function(){return"PartyRoom"},t.prototype._getPartyID=function(){return this._curPartyID},t.prototype._getPartyName=function(){return this._curPartyName},t.prototype._getGameID=function(){return this._curGameID},t.prototype._isHost=function(){return this._Host},t.prototype._getServerAdress=function(){this._serverAdress},t.prototype._requestJoinParty=function(e,t,o,n,r,a,i,s){this._isAbleToRecieveMessage=!0,this._curNetID=n;var p=this.clientMsg_RequestJoinParty(e,t,o,n,r,a,i,s);cc.log("@Party _requestJoinParty",p),c.NgcBuildConfig.useNgcServer?u.NgcNetClientRefactor.inst.send(JSON.stringify(p)):l.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(p))},t.prototype._sendMessageToParty=function(e,t,o){if(this._isValid(e)){var n=this.ClientMsg_SendMessageToParty(e,t,o);cc.log("@Party _sendMessageToParty",n),c.NgcBuildConfig.useNgcServer?u.NgcNetClientRefactor.inst.send(JSON.stringify(n)):l.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(n))}else cc.warn("@Party PartyID is null, you are not in any room")},t.prototype._requestLeaveParty=function(e,t){this._isAbleToRecieveMessage=!1;var o=e||this._curPartyID,n=t||null;this._sendMessageToParty(o,d.PARTY_REQUEST_TYPE.LEAVE_PARTY,n),this._reset()},t.prototype._requestReadyToPlay=function(e){this._sendMessageToParty(e,d.PARTY_REQUEST_TYPE.CHANGE_PLAYER_STATUS,{status:"Ready"})},t.prototype._setAllPartyCallBack=function(e,t,o){this._onPartyMessageCB=e,this._onPlayerJoinCB=t,this._onPlayerQuitCB=o},t.prototype._updateMessage=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,a,s,c=this;return i(this,function(){if(cc.log("@Party serverMess",e),e.message==d.MessageType.ServerPartyStatus){if(!this._isAbleToRecieveMessage)return cc.warn("@Party Youre leaving party but still got message from others, should avoid to recieve it"),[2];if(!this._onPartyMessageCB||!this._onPlayerJoinCB||!this._onPlayerQuitCB)return cc.warn("@Party Missing callback functions, please call setAllPartyCallBack before using"),[2];if(this._removeRequestCommingStatus(),cc.log("@Party ServerPartyStatus",e),!e.partyID)return this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,d.PARTY_ROOM_STATE.UNAVAILABLE),[2];this._curPartyID=e.partyID,t=e.partyParameters,o=e.playerList,n="",r=!1,this._Host=this._isLocalPlayerHost(o),t&&(this._curPartyName=t.name,this._curGameID=t.gameID,this._curGamePass=t.gamePass,n=t.currentState,""==this._serverAdress&&(this._serverAdress=t.serverUrl,t.partyUrl&&(a={partyUrl:t.partyUrl},this._shortenLink=t.partyUrl,!this._shortenLink||this._shortenLink.startsWith("http://")&&this._shortenLink.startsWith("https://")||(this._shortenLink="https://"+this._shortenLink),this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED,a))),this._curPartyState!=n&&(this._curPartyState=n,this._curPartyState==d.PARTY_ROOM_STATE.START?r=!0:this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,this._curPartyState)),null!=t.playerInComing&&this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING,t.playerInComing)),o&&(s=!1,this._curPlayers.forEach(function(e,t){c._isPlayerQuit(e.netID,o)&&(e.isHost&&(s=!0),c._curPlayers.splice(t,1),c._onPlayerQuitCB(e))}),o.forEach(function(e){if(c._isExistPlayer(e.netID)){var t=c._findPlayerByNet(e.netID);s&&e.isHost&&t&&(t.isHost=!0,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE,t)),t.status!=e.status&&(t.status=e.status,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS,t)),t.playerName==e.playerName&&c._deepEqual(t.payload,e.payload)||(t.playerName=e.playerName,t.payload=e.payload,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR,t))}else{var o={netID:e.netID,playerName:e.playerName,isHost:e.isHost,status:e.status,payload:e.payload};c._curPlayers.push(o),c._onPlayerJoinCB(o)}})),r&&this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_GAME_START,t)}return[2]})})},t.prototype._isLocalPlayerHost=function(e){console.log("current net id",this._curNetID);for(var t=0,o=e;t<o.length;t++){var n=o[t];if(n.netID==this._curNetID)return n.isHost}return!1},t.prototype._isExistPlayer=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++)if(o[t].netID==e)return!0;return!1},t.prototype._isPlayerQuit=function(e,t){for(var o=0,n=t;o<n.length;o++)if(n[o].netID==e)return!1;return!0},t.prototype._findPlayerByNet=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++){var n=o[t];if(n.netID==e)return n}return null},t.prototype._getInviteLink=function(e){if(e&&""!=this._shortenLink)return this._shortenLink;var t=p.NgcPlatform.inst.getPartyLinkBase(),o=this._clearInvalidUrlParameter(t);return o.includes("?")?o+"&partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress):o+"?partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress)},t.prototype._getClientUrl=function(){var e=p.NgcPlatform.inst.getPartyLinkBase();return this._clearInvalidUrlParameter(e)},t.prototype._isValid=function(e){return null!=e&&""!=e},t.prototype._isPlayersReady=function(){for(var e=0,t=this._curPlayers;e<t.length;e++)if(t[e].status==d.PARTY_PLAYER_STATUS.NOTREADY)return!1;return!0},t.prototype._getAllPlayers=function(){return this._curPlayers},t.prototype._reset=function(){this._Host=!1,this._curGameID="",this._curGamePass="",this._curPlayers=[],this._curNetID="",this._curPartyID="",this._serverAdress=""},t.prototype._removeRequestCommingStatus=function(){cc.sys.localStorage.removeItem(d.SAVE_KEY.PARTY_KEY)},t.prototype._shortenURL=function(e){return a(this,void 0,Promise,function(){var t;return i(this,function(){return t={url:e},[2,s.Utils.postHttp(d.SHORTEN_SERVICE_URL,JSON.stringify(t))]})})},t.prototype._getRoomCodeInfo=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){s.Utils.getHttp(d.SHORTEN_SERVICE_URL+"/short/"+e,{},function(e,n){e&&cc.log(e),t=JSON.parse(n),o(null)})})];case 1:return o.sent(),[2,t]}})})},t}(d.NgcPartyRoom);o.default=f,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../Platform/Platform":"Platform","./PartyRoom":"PartyRoom"}],PartyRoom:[function(e,t,o){"use strict";cc._RF.push(t,"2e4618MAfZFgaxhX4qrpUGE","PartyRoom");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoom=o.SHORTEN_SERVICE_URL=o.SAVE_KEY=o.INVITE_METHOD=o.URL_PARAMETER=o.MessageType=o.PARTY_REQUEST_TYPE=o.PARTY_ROOM_STATE=o.PARTY_PLAYER_STATUS=o.PARTY_ROOM_MESSAGE=void 0;var a,i=e("../../SDK/Nano/NanoSrv"),s=e("../Platform/Platform"),c=e("../Service");(function(e){e[e.ON_ROOM_CREATED=0]="ON_ROOM_CREATED",e[e.ON_ROOM_STATE_CHANGE=1]="ON_ROOM_STATE_CHANGE",e[e.ON_GAME_START=2]="ON_GAME_START",e[e.ON_HOST_CHANGE=3]="ON_HOST_CHANGE",e[e.ON_PLAYER_CHANGE_STATUS=4]="ON_PLAYER_CHANGE_STATUS",e[e.ON_PLAYER_CHANGE_INFOR=5]="ON_PLAYER_CHANGE_INFOR",e[e.ON_PLAYER_COMMING=6]="ON_PLAYER_COMMING"})(o.PARTY_ROOM_MESSAGE||(o.PARTY_ROOM_MESSAGE={})),function(e){e.READY="Ready",e.NOTREADY="notReady"}(o.PARTY_PLAYER_STATUS||(o.PARTY_PLAYER_STATUS={})),function(e){e.RECRUITING="Recruiting",e.PLAYING="Playing",e.FULL="full",e.UNAVAILABLE="unavailable",e.START="Start"}(o.PARTY_ROOM_STATE||(o.PARTY_ROOM_STATE={})),function(e){e.START_GAME_PARTY="startGameParty",e.CHANGE_PLAYER_STATUS="changePlayerStatus",e.LEAVE_PARTY="leaveParty",e.CHANGE_INFOR="changeInfo"}(a=o.PARTY_REQUEST_TYPE||(o.PARTY_REQUEST_TYPE={})),o.MessageType={ClientRequestJoinParty:"ClientMsg_RequestJoinParty",ClientSendMessageToParty:"ClientMsg_SendMessageToParty",ServerPartyStatus:"ServerMessage_PartyStatus"},o.URL_PARAMETER={SERVER_URL:"serverURL",PARTY_ID:"partyID",METHOD:"method"},o.INVITE_METHOD={QR_CODE:"qrcode",IN_GAME:"in-game",SOCIAL:"social",SHARE_LINK:"link",HOST:"host"},o.SAVE_KEY={PARTY_KEY:"PARTY_KEY",TIME_REQUEST:"TIME_REQUEST"},o.SHORTEN_SERVICE_URL="https://party.nano.ubisoft.com";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curPartyID="",t._curPartyState="",t._curPartyName="",t._curGameID="",t._curGamePass="",t._curPlayers=[],t._isRuningRequest=!1,t._curNetID="",t._Host=!1,t._serverAdress="",t._totalCommingPlayers=0,t._shortenLink="",t._isAbleToRecieveMessage=!1,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.isLoginMandatory=function(){var e=i.default.inst.getCurGameInfo().gameParams,t=e&&e.PWF_Mandatory_Login||{},o=s.NgcPlatform.inst.getName().toLowerCase();return!(!t||!t[o])},t.prototype.getName=function(){return this._getName()},t.prototype.getServerAdress=function(){return this._getServerAdress()},t.prototype.getPartyID=function(){return this._getPartyID()},t.prototype.getPartyName=function(){return this._getPartyName()},t.prototype.getGameID=function(){return this._getGameID()},t.prototype.isHost=function(){return this._isHost()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.requestJoinParty=function(e,t,o,n,r,a,i,s){return this._requestJoinParty(e,t,o,n,r,a,i,s)},t.prototype.sendMessageToParty=function(e,t,o){return this._sendMessageToParty(e,t,o)},t.prototype.requestStartParty=function(e,t){return this._sendMessageToParty(e,a.START_GAME_PARTY,t)},t.prototype.requestReadyToPlay=function(e){return this._requestReadyToPlay(e)},t.prototype.requestLeaveParty=function(e,t){return this._requestLeaveParty(e,t)},t.prototype.setAllPartyCallBack=function(e,t,o){this._setAllPartyCallBack(e,t,o)},t.prototype.updateMessage=function(e){this._updateMessage(e)},t.prototype.getInviteLink=function(e){return void 0===e&&(e=!1),this._getInviteLink(e)},t.prototype.getClientUrl=function(){return this._getClientUrl()},t.prototype.isPlayersReady=function(){return this._isPlayersReady()},t.prototype.reset=function(){this._reset()},t.prototype.getAllPlayers=function(){return this._getAllPlayers()},t.prototype.findPlayerByNet=function(e){return this._findPlayerByNet(e)},t.isPlayerInvited=function(){if(!s.NgcPlatform.isOfflineMode()){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID);if(cc.log("serverURL",e),cc.log("partyId",n),e&&n)return!0}return!1},t.getURLParameter=function(e,t){void 0===t&&(t=null);var o=s.NgcPlatform.inst.getPartyLinkBase();t&&(o=t),console.log("url",o);var n=new URL(o).search;if(null==n||""==n){var r=o.indexOf("?");r>=0&&(n=o.substring(r,o.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},t.sendIamComingStatus=function(){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID),r=cc.sys.localStorage.getItem(o.SAVE_KEY.PARTY_KEY),a=cc.sys.localStorage.getItem(o.SAVE_KEY.TIME_REQUEST),i=!0;if(null!=a)try{i=Date.now()-parseInt(a)>15e3}catch(p){cc.warn(p)}if(null==r||r!=n||i){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&s.status>=200&&s.status<400){var e=s.responseText;console.log(e)}};var c=new URL(e),l=e.substring(e.lastIndexOf("/")+1);cc.log("serverInstanceID",l);var u="https://"+c.hostname+":8080/"+l+"/party/"+n;cc.log("@Parrty ",u),s.open("GET",u,!0),s.send(),cc.sys.localStorage.setItem(o.SAVE_KEY.PARTY_KEY,n),cc.sys.localStorage.setItem(o.SAVE_KEY.TIME_REQUEST,Date.now())}},t.prototype._deepEqual=function(e,t){var o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(var r=0,a=o;r<a.length;r++){var i=a[r],s=e[i],c=t[i],l=this._isObject(s)&&this._isObject(c);if(l&&!this._deepEqual(s,c)||!l&&s!==c)return!1}return!0},t.prototype._isObject=function(e){return null!=e&&"object"==typeof e},t.prototype._clearInvalidUrlParameter=function(e){e.includes("#goog_rewarded")&&(e=e.replace("#goog_rewarded",""));var t=new URL(e);return t.searchParams.get("partyID")&&t.searchParams.delete("partyID"),t.searchParams.get("serverURL")&&t.searchParams.delete("serverURL"),t.searchParams.get("method")&&t.searchParams.delete("method"),t.searchParams.get("A2HS")&&t.searchParams.delete("A2HS"),t.href},t.prototype.clientMsg_RequestJoinParty=function(e,t,n,r,a,i,s,c){return{message:o.MessageType.ClientRequestJoinParty,partyID:e,partyName:t,playerName:n,netID:r,clientUrl:a,minPlayers:i,maxPlayers:s,payload:c||""}},t.prototype.ClientMsg_SendMessageToParty=function(e,t,n){return{message:o.MessageType.ClientSendMessageToParty,partyID:e,type:t,payload:n}},t.prototype.shortenURL=function(e){return this._shortenURL(e)},t.prototype.getRoomCodeInfo=function(e){return this._getRoomCodeInfo(e)},t.srvInstances=[],t.inst=null,t.services=[],t}(c.NgcService);o.NgcPartyRoom=l,cc._RF.pop()},{"../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],PersitNodeManager:[function(e,t,o){"use strict";cc._RF.push(t,"4faa1CEwBNBl4Fc+p3vbOqU","PersitNodeManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,cc.game.addPersistRootNode(this.node)},t.inst=null,o=a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],PickupItem:[function(e,t,o){"use strict";cc._RF.push(t,"2a5aapkiKdFJ7Kg0z5shsfz","PickupItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},a([c(cc.Label)],t.prototype,"label",void 0),a([c],t.prototype,"text",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Platform_impl_GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"a227d+2VLlI9KNKksr/Ma6U","Platform_impl_GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameFramework/Scripts/BuildConfig"),s=e("./Platform"),c=e("./Platform_impl_WebBase"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv initialized")})},t.prototype._onStartGame=function(){},t.prototype._onEndGame=function(){},t.prototype._getName=function(){return"GameDistribution"},t.prototype._isSupportBridgeSocial=function(){return!1},t.prototype._checkWebLoginData=function(){},t.prototype._getPlatformID=function(){return s.PlatformID.GameDistribution},t.prototype._onGameLoadingStart=function(){},t.prototype._onGameLoadingFinish=function(){},t.prototype._onPostMessage=function(e,t,o){window.parent.postMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){var e=null;try{if((e=window.top.location).href)return window.location!=e?document.referrer?document.referrer:e.href:document.location.href}catch(t){}return i.NgcBuildConfig.gameClientURL},a([u],t)}(c.NgcPlatform_impl_WebBase));o.default=p,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","./Platform":"Platform","./Platform_impl_WebBase":"Platform_impl_WebBase"}],Platform_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"c7f31rymNZG6qRIC70v7Yd6","Platform_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../GameFramework/Scripts/BuildConfig"),s=e("./Platform"),c=e("./Platform_impl_WebBase"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._isSupportBridgeSocial=function(){return window.location!==window.parent.location},t.prototype._preInit=function(){return new Promise(function(e){e("NgcPlatform_impl_NanoSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("NgcPlatform_impl_NanoSrv initialized")})},t.prototype._onStartGame=function(){},t.prototype._onEndGame=function(){},t.prototype._getName=function(){return"Nano"},t.prototype._getPlatformID=function(){return s.PlatformID.Nano},t.prototype._onGameLoadingStart=function(){},t.prototype._onGameLoadingFinish=function(){},t.prototype._onPostMessage=function(e,t,o){s.NgcPlatform.isRunFromApp()?window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(e):window.parent.postMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){var e=null;try{if((e=window.top.location).href)return window.location!=e?document.referrer?document.referrer:e.href:document.location.href}catch(t){}return i.NgcBuildConfig.gameClientURL},a([u],t)}(c.NgcPlatform_impl_WebBase));o.default=p,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","./Platform":"Platform","./Platform_impl_WebBase":"Platform_impl_WebBase"}],Platform_impl_NativeOSBase:[function(e,t,o){"use strict";cc._RF.push(t,"fd375utg6BAUbS0PfNlPz0W","Platform_impl_NativeOSBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPlatform_impl_NativeOSBase=void 0;var i=e("./Platform"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype._onSocialLogOutFromGame=function(){cc.log("Not support for NativeOSBase yet")},t.prototype._isSupportBridgeSocial=function(){return!1},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype._checkWebLoginData=function(){cc.log("Not support for NativeOSBase yet")},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish()},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},a([c],t)}(i.NgcPlatform));o.NgcPlatform_impl_NativeOSBase=l,cc._RF.pop()},{"./Platform":"Platform"}],Platform_impl_SocialBase:[function(e,t,o){"use strict";cc._RF.push(t,"5ee50j0ZWFCAJUt/LJbQ1MM","Platform_impl_SocialBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NGCPlatform_impl_SocialBase=void 0;var i=e("../../GameFramework/Scripts/BuildConfig"),s=e("./Platform"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype._onSocialLogOutFromGame=function(){cc.log("Not support for SocialBase yet")},t.prototype._isSupportBridgeSocial=function(){return!1},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype._checkWebLoginData=function(){cc.log("Not support for SocialBase yet")},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish()},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){var e=null;try{if((e=window.top.location).href)return window.location!=e?document.referrer?document.referrer:e.href:document.location.href}catch(t){}return i.NgcBuildConfig.gameClientURL},a([l],t)}(s.NgcPlatform));o.NGCPlatform_impl_SocialBase=u,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","./Platform":"Platform"}],Platform_impl_WebBase:[function(e,t,o){"use strict";cc._RF.push(t,"791a368Qr5FNKYyWl/PtxSY","Platform_impl_WebBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPlatform_impl_WebBase=void 0;var i=e("../../Core/Utils"),s=e("../../CrossFeatures/NavBar/Script/NavBarConflictDialog"),c=e("../../CrossFeatures/NavBar/Script/NavBarManager"),l=e("../../CrossFeatures/PartyRoom/Script/QRCodeGenerator"),u=e("../../GameFramework/Scripts/BuildConfig"),p=e("../../GameFramework/Scripts/Localized/LocalizedManager"),d=e("../../GameFramework/Scripts/NgcMain"),f=e("../../GameFramework/Scripts/NgcUserInfo"),h=e("../../GameFramework/Scripts/ProfanityCheck"),g=e("../../SDK/Nano/NanoSrv"),m=e("../../SDK/Uplay/UplaySrv"),y=e("../Leaderboard/Leaderboard"),_=e("../Social/Social"),v=e("../Telemetry/Telemetry"),S=e("./Platform"),b=cc._decorator,N=b.ccclass,P=(b.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype._onSocialLogInFromHost=function(e){if(window.loadingGame)f.default.nanoLoginData=e;else if(this.isCallbackFromHost=!0,console.log("BridgeSocial webSocialLoginSuccess socialInfo = "+JSON.stringify(e)),e.hasOwnProperty("platform"))switch(e.platform){case"facebook":f.default.socialId=e.socialId,f.default.facebookAccessToken=e.facebookAccessToken||e.socialToken,this.requestGameLoginToSocial(_.SocialType.Facebook);break;case"ubiconnect":case"uplay":m.default.inst.userData.nameOnPlatform=e.name,m.default.inst.userData.avatarDesktop=e.avatarDesktop,m.default.inst.userData.avatarMobile=e.avatarMobile,m.default.inst.userData.userId=e.socialId,m.default.inst.loginFromHost=!0,this.requestGameLoginToSocial(_.SocialType.Uplay);break;default:console.log("A unrecognize Platform detected")}else console.log("Platform not FOUND")},t.prototype.requestGameLoginToSocial=function(e){_.NgcSocial.inst=_.NgcSocial.getSrvInstance(e),_.NgcSocial.inst.login(function(t,o){var n;if(t)cc.error("Social Login: ",t);else{"Conflict"===o?d.NgcMain.inst.resolveSocialConflict(null===(n=c.NgcNavBarManager.inst)||void 0===n?void 0:n.invokeOnSocialCallBack.bind(c.NgcNavBarManager.inst)):(c.NgcNavBarManager.inst.updateListEffectBtn(),c.NgcNavBarManager.inst.setNavBarInfo(),y.NgcLeaderboard.inst.clearCacheRequestData(),c.NgcNavBarManager.inst.invokeOnSocialCallBack(null,"login"));var r=(e===_.SocialType.Facebook?"fb:":"")+_.NgcSocial.inst.getSocialID();v.NgcTelemetry.inst.LogEvent_LoginSuccess(r,{Name:_.NgcSocial.inst.getFormatName(),AvatarUrl:_.NgcSocial.inst.getProfilePictureUrl(),FriendList:_.NgcSocial.inst.getFriendsData()})}})},t.prototype._onSocialLogInFromGame=function(){if(console.log("@@@@@ _onSocialLogInFromGame"),!this.isCallbackFromHost){var e={};e.avatarDesktop=f.default.avatarUrl,e.avatarMobile=f.default.avatarUrl,e.id=f.default.socialId,e.facebookAccessToken=f.default.facebookAccessToken,e.platform=_.NgcSocial.inst.getName().toLowerCase(),e.name=f.default.localUserName,f.default.setAccountLinkData({platform:e.platform});var t={GAME_SOCIAL_LOGIN_SUCCESS:e};if(S.NgcPlatform.isRunAsIframeOnNano()){var o=JSON.stringify(t);console.log("@@@@@ _onSocialLogInFromGame msg ",o),S.NgcPlatform.inst&&S.NgcPlatform.inst.onPostMessage(o,"*")}}},t.prototype._onSocialLogOutFromHost=function(){this.isCallbackFromHost=!0,f.default.nanoLoginData=null,console.log("webSocialLogoutSuccess"),_.NgcSocial.inst&&g.default.inst?_.NgcSocial.inst.checkLoginStatus().finally(function(){g.default.inst.resetUserID().finally(function(){var e,t;null===(e=d.NgcMain.inst)||void 0===e||e.createFakeName();try{_.NgcSocial.inst.logout()}catch(o){console.warn(o)}_.NgcSocial.inst.onLogoutSuccesCallback&&_.NgcSocial.inst.onLogoutSuccesCallback(),s.NavBarConflicttDialog.staticHide(),null===(t=c.NgcNavBarManager.inst)||void 0===t||t.invokeOnSocialCallBack(null,"logout")})}):console.log("User already log out")},t.prototype._onSocialLogOutFromGame=function(){if(!this.isCallbackFromHost&&S.NgcPlatform.isRunAsIframeOnNano()){var e=JSON.stringify({GAME_SOCIAL_LOGOUT_SUCCESS:!0});S.NgcPlatform.inst&&S.NgcPlatform.inst.onPostMessage(e,"*")}},t.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},t.prototype._initBrigdeSocial=function(){cc.log("init SocialBridge WEB BASEE"),this.isBrigdeSocialInitialized||(window.isLoginPopUpOpen=function(){return!!_.NgcSocial.inst&&_.NgcSocial.inst.isLoginPopUpOpen()},window.addEventListener("message",function(e){var t=null;try{t=JSON.parse(e.data)}catch(n){t=null}if(t){if(console.log("[BridgeSocial] event.data = "+e.data),t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_INFO))console.log("[BridgeSocial] WEB_SOCIAL_INFO = "+t.WEB_SOCIAL_INFO);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGIN_SUCCESS))S.NgcPlatform.inst.onSocialLogInFromHost(t.WEB_SOCIAL_LOGIN_SUCCESS);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGOUT_SUCCESS))S.NgcPlatform.inst.onSocialLogOutFromHost();else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_A2HS_RESULT))c.NgcNavBarManager.inst.checkA2HSResult(t.WEB_A2HS_RESULT);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_LANGUAGE_CODE)){var o=t.WEB_LANGUAGE_CODE;f.default.curLanguage=o,p.NgcLocalizedManager.setLanguage(o),v.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:o})}}else console.log("[BridgeSocial] parse JSON false")},!1),this.isBrigdeSocialInitialized=!0)},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype._checkLoginData=function(){if(f.default.nanoLoginData){var e=f.default.nanoLoginData;f.default.nanoLoginData=null,this._onSocialLogInFromHost(e)}},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.requestWebLoginButtonStatus=function(e){this.onPostMessage(JSON.stringify({REQUEST_WEB_LOGIN_BUTTON:e?"enabled":"disabled"}),"*")},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish(),this.requestWebLoginButtonStatus(!0)},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){var e=null;try{if((e=window.top.location).href)return window.location!=e?document.referrer?document.referrer:e.href:document.location.href}catch(t){}return u.NgcBuildConfig.gameClientURL},t.prototype._isWebLoginPopupOpen=function(){return new Promise(function(e){S.NgcPlatform.inst.onPostMessage(JSON.stringify({GET_WEB_LOGIN_POPUP_OPEN_INFO:!0}),"*"),window.addEventListener("message",function(t){try{var o=!1,n=JSON.parse(t.data);n.hasOwnProperty("GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK")&&(o=n.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK),e(o)}catch(r){e(!1)}},!0)})},t.prototype._genQRCode=function(e,t){l.NgcQRCodeGenerator.genQRCode(e,t)},t.prototype._profanityCheck=function(e){return new Promise(function(t){var o={text:e};i.Utils.getHttp(h.NgcProfanityCheck.checkURL,o,function(e,o){var n={status:null,reasons:null};e||!o?(n.status=!1,n.reasons=e):(n=JSON.parse(o).report)||(n={status:null,reasons:null}),t(n)})})},a([N],t)}(S.NgcPlatform));o.NgcPlatform_impl_WebBase=P,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../CrossFeatures/PartyRoom/Script/QRCodeGenerator":"QRCodeGenerator","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../SDK/Nano/NanoSrv":"NanoSrv","../../SDK/Uplay/UplaySrv":"UplaySrv","../Leaderboard/Leaderboard":"Leaderboard","../Social/Social":"Social","../Telemetry/Telemetry":"Telemetry","./Platform":"Platform"}],Platform:[function(e,t,o){"use strict";cc._RF.push(t,"71f4205U3xM9ol2JsQDmi/r","Platform");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPlatform=o.BRIGDE_SOCIAL_INFO=o.PlatformID=void 0;var i=e("crypto-js"),s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../Service"),l=cc._decorator,u=l.ccclass;l.property,function(e){e[e.Nano=0]="Nano",e[e.Poki=1]="Poki",e[e.Android=2]="Android",e[e.IOs=3]="IOs",e[e.Douyin=4]="Douyin",e[e.GameDistribution=5]="GameDistribution",e[e.HUZ=6]="HUZ"}(o.PlatformID||(o.PlatformID={})),function(e){e.WEB_SOCIAL_INFO="WEB_SOCIAL_INFO",e.WEB_SOCIAL_LOGIN_SUCCESS="WEB_SOCIAL_LOGIN_SUCCESS",e.WEB_SOCIAL_LOGOUT_SUCCESS="WEB_SOCIAL_LOGOUT_SUCCESS",e.WEB_A2HS_RESULT="WEB_A2HS_RESULT",e.GET_WEB_LOGIN_DATA_CALLBACK="GET_WEB_LOGIN_DATA_CALLBACK",e.GET_GAME_LOGIN_POPUP_OPEN_INFO="GET_GAME_LOGIN_POPUP_OPEN_INFO",e.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK="GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK",e.WEB_LANGUAGE_CODE="WEB_LANGUAGE_CODE"}(o.BRIGDE_SOCIAL_INFO||(o.BRIGDE_SOCIAL_INFO={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBrigdeSocialEnable=!1,t.isBrigdeSocialInitialized=!1,t.isCallbackFromHost=!1,t.isLogoutFromGame=!1,t}var o;return r(t,e),o=t,t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},t.prototype.initBrigdeSocial=function(){return cc.log("init SocialBridge @@@@@@@@@@@@@@@@@@"),this._initBrigdeSocial()},t.prototype.onSocialLogInFromHost=function(e){this._onSocialLogInFromHost(e)},t.prototype.onSocialLogOutFromHost=function(){this._onSocialLogOutFromHost()},t.prototype.onSocialLogInFromGame=function(){this._onSocialLogInFromGame()},t.prototype.onSocialLogOutFromGame=function(){this._onSocialLogOutFromGame()},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){var t=this;return new Promise(function(o){t._init(e).then(function(e){t.isSupportBridgeSocial()&&t.initBrigdeSocial(),o(e)})})},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish()},t.prototype.requestWebLoginButtonStatus=function(){},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},t.prototype.checkLoginData=function(){this._checkLoginData()},t.prototype.getPartyLinkBase=function(){return this._getPartyLinkBase()},t.prototype.isWebLoginPopupOpen=function(){return this._isWebLoginPopupOpen()},t.prototype.genQRCode=function(e,t){return this._genQRCode(e,t)},t.prototype.profanityCheck=function(e){return this._profanityCheck(e)},t.prototype.useOwnSharingMethod=function(){return!1},t.prototype.isSocketMessageUsingArrayBuffer=function(){return!1},t.isOfflineMode=function(){return s.NgcBuildConfig.offlineMode},t.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},t.getLocationHref=function(){return o.isValidOrigin()?window.top.location.href:location.href},t.isRunAsIframeOnNano=function(){try{return!(!window.top.location.href||!window.top.location.href.includes("nano.ubisoft.com")||window.top.location.href===window.location.href)}catch(e){return!1}},t.isRunFromApp=function(){return window.location.href.includes("runningPlatform=nanoApp")},t.getLoginDataFromURL=function(){var e=null;if(location.search.slice(1).split("&").forEach(function(t){t.match(/loginData=(.+)/i)&&(e=RegExp.$1)}),e){var t=i.AES.decrypt(e,i.SHA256(o.LOGIN_DATA_SECRET_KEY).toString(i.enc.Base64)).toString(i.enc.Utf8);return JSON.parse(t)}return null},t.srvInstances=[],t.inst=null,t.LOGIN_DATA_SECRET_KEY="LOGIN_DATA_123321",o=a([u],t)}(c.NgcService);o.NgcPlatform=p,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../Service":"Service","crypto-js":41}],PlayerAnim:[function(e,t,o){"use strict";cc._RF.push(t,"4ff18Fpb9FE4bafxytwm1ck","PlayerAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../BlendAnimBase"),s=e("../../NanoGameCore/Core/Utils"),c=e("./PlayerSkinMgr"),l=e("../Main"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["Idle"],t.runAnims=["Run"],t.deadAnims=["Death"],t.winAnims=["Win"],t.reviveAnims=["Revive","Revive2"],t.curSkin=null,t.curAnim="",t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.allAnims=[this.idleAnims,this.runAnims],e.prototype.onLoad.call(this)},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.getAllSkinNames=function(){return c.default.listHeroes},t.chooseRandomSkin=function(){return s.Utils.randomArr(o.getAllSkinNames())},t.chooseRandomBotSkin=function(){var e=l.Main.inst.listDisplayHeroes;return s.Utils.randomArr(e)},t.prototype.setAlpha=function(e){this.node.opacity=e},t.prototype.getAlpha=function(){return this.node.opacity},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.run=function(){this.curAnim!=this.runAnims[0]&&(this.curAnim=this.runAnims[0],this.skeleton.setAnimation(0,this.curAnim,!0))},t.prototype.idle=function(){this.curAnim!=this.idleAnims[0]&&(this.curAnim=this.idleAnims[0],this.skeleton.setAnimation(0,this.curAnim,!0))},t.prototype.die=function(e){var t=this;this.curAnim!=this.deadAnims[0]?(this.curAnim=this.deadAnims[0],e&&this.skeleton.setCompleteListener(function(){e(),t.skeleton.setCompleteListener(null)}),this.skeleton.setAnimation(0,this.curAnim,!1)):e&&e()},t.prototype.win=function(){this.curAnim!=this.winAnims[0]&&(this.curAnim=this.winAnims[0],this.skeleton.setAnimation(0,this.curAnim,!0))},t.prototype.revive=function(e){var t=this;this.reviveAnims.includes(this.curAnim)||(this.curAnim=s.Utils.randomArr(this.reviveAnims),this.skeleton.timeScale=2,this.skeleton.setCompleteListener(function(){e&&e(),t.skeleton.timeScale=1,t.skeleton.setCompleteListener(null)}),this.skeleton.setAnimation(0,this.curAnim,!0))},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(){this.queuedSkin&&("string"==typeof this.queuedSkin?this.setSkinByName(this.queuedSkin):this.queuedSkin,this.curSkin=this.queuedSkin,this.queuedSkin=null)},t.xPositionLeft=10,t.xPositionRight=-6,o=a([p],t)}(i.default));o.default=d,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../BlendAnimBase":"BlendAnimBase","../Main":"Main","./PlayerSkinMgr":"PlayerSkinMgr"}],PlayerAudio:[function(e,t,o){"use strict";cc._RF.push(t,"2923f3mJt9JjryuAyEsguOZ","PlayerAudio");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../SoundManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.thrustLoopID=-1,t.thrustLoopPct=0,t.thrusting=!1,t}var o;return r(t,e),o=t,t.prototype.startThrust=function(){this.thrusting=!0},t.prototype.endThrust=function(){this.thrusting=!1},t.prototype.workThrust=function(e){this.thrusting?(this.thrustLoopPct+=e/o.THRUST_RAMP_UP_TIME_SEC,this.thrustLoopPct>1&&(this.thrustLoopPct=1),i.SoundManager.inst.setVolume(this.thrustLoopID,this.thrustLoopPct)):(this.thrustLoopPct-=e/o.THRUST_RAMP_UP_TIME_SEC,this.thrustLoopPct<0&&(this.thrustLoopPct=0),i.SoundManager.inst.setVolume(this.thrustLoopID,this.thrustLoopPct))},t.prototype.start=function(){},t.prototype.update=function(e){this.workThrust(e)},t.THRUST_RAMP_UP_TIME_SEC=.15,o=a([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../SoundManager":"SoundManager"}],PlayerController_Bot:[function(e,t,o){"use strict";cc._RF.push(t,"e3e3ckPhBJEgYd336UmRi9D","PlayerController_Bot");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerController_Bot=void 0;var i,s=e("./PlayerController"),c=e("../Game"),l=e("../Maps/MapManager"),u=e("../GameObjects/GameObjectBase"),p=e("../../NanoGameCore/Core/Utils"),d=e("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),f=e("../TuningData"),h=e("../UserInfo"),g=cc._decorator,m=g.ccclass;g.property,function(e){e[e.None=0]="None",e[e.DestroyOtherPlayer=1]="DestroyOtherPlayer",e[e.GetToLocation=2]="GetToLocation",e[e.GetPowerup=3]="GetPowerup"}(i||(i={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextPos=[],t._curGoal=i.None,t.goalStartTime=0,t.g_tp_TargetPlayer=null,t.g_tp_TargetPlayerNetID="",t.g_gp_TargetItem=null,t.g_gtl_TargetLoc={x:0,y:0},t.g_gtl_Timeout=0,t.isFleeing=!1,t.flee_target={x:-1,y:-1},t.finishFleeTime=0,t.flee_start={x:-1,y:-1},t.flee_minDist=-1,t.lastMapPos={x:-1,y:-1},t.samePosTime=0,t.aiParameters={minDecisionInterval:1.3,maxDecisionInterval:2.5,bombDetectRadius:3,enemyDetectRadius:3,powerDetectRadius:2,blockDetectRadius:5},t.pickAGoalInQueue=!1,t.decisionTimer=0,t.wanderHistory=new Map,t.cnt=0,t.frameCnt=0,t.pathFinds=0,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"curGoal",{get:function(){return this._curGoal},set:function(e){this._curGoal=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decisionInterval",{get:function(){return Math.random()*(this.aiParameters.maxDecisionInterval-this.aiParameters.minDecisionInterval)+this.aiParameters.minDecisionInterval},enumerable:!1,configurable:!0}),t.prototype.start=function(){e.prototype.start.call(this),this.setState(s.PlayerState.Idle),this.aiParameters=this.getAiParam(this.curBotBrainClass),this.aiParameters?cc.log("Tuning data found for class: "+p.Utils.enumToString(s.E_BRAIN_CLASS_TYPE,this.curBotBrainClass)):cc.log("Can't find brain parameters in tuning data."),h.UserInfo.alreadyFTUE||(this.aiParameters.bombDetectRadius=o.FTUE_bombDetectRadius,this.aiParameters.enemyDetectRadius=o.FTUE_enemyDetectRadius,this.aiParameters.powerDetectRadius=o.FTUE_powerDetectRadius,this.aiParameters.blockDetectRadius=o.FTUE_blockDetectRadius),cc.log("Decision interval = "+this.decisionInterval),this.decisionTimer=this.decisionInterval},t.prototype.resetGoalTime=function(){this.goalStartTime=Date.now()},t.prototype.setGoalDestroyPlayer=function(e){e.isDead()?cc.log("Trying to set  goal to target dead player!"):(this.resetGoalTime(),this.curGoal=i.DestroyOtherPlayer,this.g_tp_TargetPlayer=e,this.g_tp_TargetPlayerNetID=e.netID)},t.prototype.setGoalGetToLocation=function(e,t){this.resetGoalTime(),this.curGoal=i.GetToLocation,this.g_gtl_TargetLoc=e,this.g_gtl_Timeout=t;var o=l.default.inst.pathFinder.findPathForPlayer(this,this.g_gtl_TargetLoc.x,this.g_gtl_TargetLoc.y,!0);o?this.setPathFromAStar(o):console.log("**Trying to set an in accessible goal")},t.prototype.pickAGoal=function(){var e=this.findNearestPlayer();if(e)this.setGoalDestroyPlayer(e);else if(null!=(t=this.pickASpotToWanderTo()))this.logWander(t.x,t.y),this.setGoalGetToLocation(t,d.NgcNetUtils.RandomRange(3,10)),this.nextPos=[];else var t=this.pickASpotToWanderTo()},t.prototype.queuePickAGoal=function(){this.pickAGoalInQueue||(c.default.inst.botPickAGoalQueue.push(this),this.pickAGoalInQueue=!0)},t.prototype.firePickAGoal=function(){this.pickAGoalInQueue=!1,this.pickAGoal()},t.prototype.canWanderTo=function(e,t){var o=e+","+t;return!(this.wanderHistory.has(o)&&Date.now()/1e3-this.wanderHistory.get(o)<10)},t.prototype.logWander=function(e,t){var o=e+","+t;this.wanderHistory.set(o,Date.now()/1e3)},t.prototype.pickASpotToWanderTo=function(){var e=this,t=[],o=[];l.default.inst.concentricSearch(this.posInMap,1,this.aiParameters.powerDetectRadius,function(n,r,a){return e.canWanderTo(n,r)&&u.default.isNavigable(a)&&e.isPosSafe({x:n,y:r})&&(u.default.isTypePower(a)?t.push({x:n,y:r}):o.push({x:n,y:r})),!0});for(var n=0;n<t.length;n++){var r=t[n];if(l.default.inst.pathFinder.findPathForPlayer(this,r.x,r.y,!0))return r}for(n=o.length-1;n>=0;n--){var a=o[n];if(l.default.inst.pathFinder.findPathForPlayer(this,a.x,a.y,!0))return a}return null},t.prototype.manhattanDistToPlayer=function(e){var t,o;return Math.abs(this.posInMap.x-(null===(t=e.posInMap)||void 0===t?void 0:t.x))+Math.abs(this.posInMap.y-(null===(o=e.posInMap)||void 0===o?void 0:o.y))},t.prototype.canBomb=function(e){if(this.manhattanDistToPlayer(e)>3)return!1;if(l.default.inst.comparePosInMap(this.posInMap,e.posInMap))return!0;var t=l.default.inst.pathFinder.findPathForPlayer(this,e.posInMap.x,e.posInMap.y,!0);return!!(t&&t.length<3)},t.prototype.hasPath=function(){return this.nextPos&&this.nextPos.length>0},t.prototype.flee=function(){var e=this,t=null,o={x:-1,y:-1};this.flee_minDist=2,l.default.inst.concentricSearch(this.posInMap,2,2,function(n,r){if(e.isPosSafe({x:n,y:r})){var a=l.default.inst.pathFinder.findPathForPlayer(e,n,r,!1);if(a)return t=a,o={x:n,y:r},!1}return!0}),t&&(this.isFleeing=!0,this.flee_target=o,this.flee_start=this.posInMap,this.finishFleeTime=Date.now()/1e3+d.NgcNetUtils.RandomRange(3.5,4.25),this.setPathFromAStar(t))},t.prototype.isCurPathStillSafe=function(){for(var e=0;e<this.nextPos.length;e++){var t=this.nextPos[e];if(!this.isPosSafe(t))return!1}return!0},t.prototype.workFlee=function(){if(Math.abs(this.flee_start.x-this.posInMap.x)+Math.abs(this.flee_start.y-this.posInMap.y)>=this.flee_minDist&&this.isPosSafe(this.posInMap)&&(this.curDirection=s.E_MOVE_DIRECTION.Idle),this.canMakeADecision()){if(!this.isCurPathStillSafe())return this.flee(),void this.decide();this.finishFleeTime<Date.now()/1e3&&(this.isFleeing=!1,this.nextPos=[],this.decide())}if(this.curDirection==s.E_MOVE_DIRECTION.Idle&&!this.isPosSafe(this.posInMap))return this.flee(),void this.decide()},t.prototype.workGoal_DestroyPlayer=function(){var e=this.g_tp_TargetPlayer;if(cc.isValid(e,!0)||(this.g_tp_TargetPlayer=c.default.inst.findPlayerByNetID(this.g_tp_TargetPlayerNetID),e=this.g_tp_TargetPlayer),null!==e){if(this.canMakeADecision()&&e.isDead())return this.queuePickAGoal(),void this.decide();if(this.canMakeADecision()&&this.canBomb(e))return this.plantBomb(),this.flee(),void this.decide();if(this.canMakeADecision()&&!this.isPosSafe(this.posInMap))return this.flee(),void this.decide();if(!this.hasPath()){var t=l.default.inst.pathFinder.findPathForPlayer(this,e.posInMap.x,e.posInMap.y,!0);t&&this.setPathFromAStar(t)}if(this.nextPos.length>0){var o=this.nextPos[0];if(l.default.inst.getBoard(o.x,o.y)==u.GameObjectType.Block_Soft)return this.decide(),void this.plantBomb()}}else console.error("Why are we in destroy player mode but no target player assigned")},t.prototype.atPos=function(e){return e.x==this.posInMap.x&&e.y==this.posInMap.y},t.prototype.atPosXY=function(e,t){return e==this.posInMap.x&&t==this.posInMap.y},t.prototype.workGoal_GetToLocation=function(){var e=this.atPos(this.g_gtl_TargetLoc);if(e&&(this.curDirection=s.E_MOVE_DIRECTION.Idle),this.canMakeADecision()){if(e)return this.queuePickAGoal(),void this.decide();if(this.timeInCurState>this.g_gtl_Timeout)return void(this.curGoal=i.None);if(!this.isPosSafe(this.posInMap))return void this.flee()}if(!this.hasPath()&&!e){var t=l.default.inst.pathFinder.findPathForPlayer(this,this.g_gtl_TargetLoc.x,this.g_gtl_TargetLoc.y,!0);t&&this.setPathFromAStar(t)}if(this.nextPos.length>0){var o=this.nextPos[0];if(l.default.inst.getBoard(o.x,o.y)==u.GameObjectType.Block_Soft)return this.plantBomb(),this.flee(),void this.decide()}},t.prototype.workGoal_GetPowerup=function(){},t.prototype.workGoal=function(e){switch(this.curGoal){case i.DestroyOtherPlayer:this.workGoal_DestroyPlayer(e);break;case i.GetPowerup:this.workGoal_GetPowerup(e);break;case i.GetToLocation:this.workGoal_GetToLocation(e)}},t.prototype.setPathFromAStar=function(e){var t=this;this.nextPos=[],e.forEach(function(e){var o=e;t.nextPos.push({x:o.x,y:o.y})}),this.moveToNextPos()},t.prototype.update=function(t){c.default.inst.gameState!==c.GameState.AddingPlayers&&c.default.inst.gameState!==c.GameState.None&&c.default.inst.gameState!==c.GameState.GameOver&&(e.prototype.update.call(this,t),this.isDead()||(this.frameCnt++,this.posInMap.x==this.lastMapPos.x&&this.posInMap.y==this.lastMapPos.y?this.samePosTime+=t:this.samePosTime=0,this.lastMapPos.x=this.posInMap.x,this.lastMapPos.y=this.posInMap.y,this.decisionTimer-=t,this.isFleeing?this.workFlee(t):(this.canMakeADecision()&&this.curGoal==i.None&&this.queuePickAGoal(),this.workGoal(t))))},t.prototype.canMakeADecision=function(){return this.decisionTimer<=0},t.prototype.decide=function(){return!(this.decisionTimer>0||(this.decisionTimer=this.decisionInterval,0))},t.prototype.findNearestPlayer=function(){var e=this,t=null,o=Number.MAX_VALUE;return c.default.inst.players.forEach(function(n){if(n.netID!=e.netID&&!n.isDead()){var r=e.tilesDistanceToPos(n.posInMap);r>e.aiParameters.enemyDetectRadius||r<o&&(o=r,t=n)}}),t},t.prototype.isTouchingBlockOfType=function(e){var t=this.posInMap.x,o=this.posInMap.y;return t>0&&l.default.inst.getBoard(t-1,o)==e||t<l.default.inst.mapInfo.numColumn-1&&l.default.inst.getBoard(t+1,o)==e||o>0&&l.default.inst.getBoard(t,o-1)==e||o<l.default.inst.mapInfo.numRow-1&&l.default.inst.getBoard(t,o+1)==e},t.prototype.isRemote=function(){return!1},t.prototype.isLocalHuman=function(){return!1},t.prototype.isLocallyControlledBot=function(){return!0},t.prototype.isRemoteControlledBot=function(){return!1},t.prototype.updatePosInMap=function(){var e=Math.round(this.node.x/l.default.inst.mapInfo.sizeOfTile.x),t=Math.round(this.node.y/l.default.inst.mapInfo.sizeOfTile.y),o=!1;if(e!=this.posInMap.x||t!=this.posInMap.y){o=!0,this.posInMap=cc.v2(e,t);var n=l.default.inst.getBoard(e,t);if(u.default.isTypePower(n)&&this.collectPowerUpItem(),this.nextPos.length>0&&e==this.nextPos[0].x&&t==this.nextPos[0].y)if(this.nextPos.shift(),this.nextPos.length>0)this.moveToNextPos();else switch(this.curState){case s.PlayerState.MoveDown:this.node.y/l.default.inst.mapInfo.sizeOfTile.y<t&&(this.curDirection=s.E_MOVE_DIRECTION.Idle);break;case s.PlayerState.MoveUp:this.node.y/l.default.inst.mapInfo.sizeOfTile.y>t&&(this.curDirection=s.E_MOVE_DIRECTION.Idle);break;case s.PlayerState.MoveLeft:this.node.x/l.default.inst.mapInfo.sizeOfTile.x<e&&(this.curDirection=s.E_MOVE_DIRECTION.Idle);break;case s.PlayerState.MoveRight:this.node.x/l.default.inst.mapInfo.sizeOfTile.x>e&&(this.curDirection=s.E_MOVE_DIRECTION.Idle)}}return o},t.prototype.workState_Idle=function(e){var t=this.posInMap.x*l.default.inst.mapInfo.sizeOfTile.x,o=this.posInMap.y*l.default.inst.mapInfo.sizeOfTile.y;this.node.x!=t||this.node.y!=o?(this.animations[this.curPlayerAnimDirection].run(),this.node.y>this.posInMap.y*l.default.inst.mapInfo.sizeOfTile.y?this.node.y=Math.max(o,this.node.y-e*this.data.curSpeed):this.node.y<this.posInMap.y*l.default.inst.mapInfo.sizeOfTile.y?this.node.y=Math.min(o,this.node.y+e*this.data.curSpeed):this.node.x>this.posInMap.x*l.default.inst.mapInfo.sizeOfTile.x?this.node.x=Math.max(t,this.node.x-e*this.data.curSpeed):this.node.x<this.posInMap.x*l.default.inst.mapInfo.sizeOfTile.x&&(this.node.x=Math.min(t,this.node.x+e*this.data.curSpeed))):this.animations[this.curPlayerAnimDirection].idle()},t.prototype.findNextPos=function(){},t.prototype.findSafePos=function(){},t.prototype.canSeeGameObjectFromDist=function(e,t){return!(e==u.GameObjectType.Bomb&&t>this.aiParameters.bombDetectRadius||u.default.isTypePower(e)&&t>this.aiParameters.powerDetectRadius||u.default.isTypeBlock(e)&&t>this.aiParameters.blockDetectRadius)},t.prototype.isPosSafe=function(e){var t=this.tilesDistanceToPos(e);return!(c.default.inst.isTileDangerous(e)||l.default.inst.isDangerous(e.x,e.y)||l.default.inst.getBoard(e.x,e.y)==u.GameObjectType.Bomb&&t<this.aiParameters.bombDetectRadius)},t.prototype.moveToNextPos=function(){if(this.nextPos.length>0){if(this.nextPos[0].x==this.posInMap.x&&this.nextPos[0].y==this.posInMap.y)return this.nextPos.shift(),void this.moveToNextPos();this.nextPos[0].x>this.posInMap.x?this.curDirection=s.E_MOVE_DIRECTION.Right:this.nextPos[0].x<this.posInMap.x?this.curDirection=s.E_MOVE_DIRECTION.Left:this.nextPos[0].y>this.posInMap.y?this.curDirection=s.E_MOVE_DIRECTION.Up:this.nextPos[0].y<this.posInMap.y&&(this.curDirection=s.E_MOVE_DIRECTION.Down)}},t.prototype.getAiParam=function(e){switch(void 0===e&&(e=s.E_BRAIN_CLASS_TYPE.Normal),e){case s.E_BRAIN_CLASS_TYPE.Normal:return f.default.inst.params.bot.brainClass_Normal;case s.E_BRAIN_CLASS_TYPE.Smart:return f.default.inst.params.bot.brainClass_Smart;case s.E_BRAIN_CLASS_TYPE.Collector:return f.default.inst.params.bot.brainClass_Collector;case s.E_BRAIN_CLASS_TYPE.Dumb:return f.default.inst.params.bot.brainClass_Dumb;default:return f.default.inst.params.bot.brainClass_Normal}},t.prototype.setRandBotBrain=function(){if(f.default.inst){var e=f.default.inst.params.botBrainClassSpawnRate,t=e.collectorWeight+e.dumbWeight+e.normalWeight+e.smartWeight,o=p.Utils.randomFromTo(0,t);o<e.normalWeight?this.curBotBrainClass=s.E_BRAIN_CLASS_TYPE.Normal:o<e.smartWeight+e.normalWeight?this.curBotBrainClass=s.E_BRAIN_CLASS_TYPE.Smart:o<e.collectorWeight+e.smartWeight+e.normalWeight?this.curBotBrainClass=s.E_BRAIN_CLASS_TYPE.Collector:this.curBotBrainClass=o<t?s.E_BRAIN_CLASS_TYPE.Dumb:s.E_BRAIN_CLASS_TYPE.Normal}else this.curBotBrainClass=s.E_BRAIN_CLASS_TYPE.Normal},t.FTUE_bombDetectRadius=1,t.FTUE_enemyDetectRadius=0,t.FTUE_powerDetectRadius=5,t.FTUE_blockDetectRadius=10,o=a([m],t)}(s.PlayerController);o.PlayerController_Bot=y,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../Game":"Game","../GameObjects/GameObjectBase":"GameObjectBase","../Maps/MapManager":"MapManager","../TuningData":"TuningData","../UserInfo":"UserInfo","./PlayerController":"PlayerController"}],PlayerController_Remote:[function(e,t,o){"use strict";cc._RF.push(t,"16e65AEckpG5KwGwH9WeCDD","PlayerController_Remote");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerController_Remote=void 0;var i=e("../Game"),s=e("../Maps/MapManager"),c=e("../Network/ImprovedNetClient"),l=e("./PlayerController"),u=e("./PlayerController_Bot"),p=e("./PlayerData"),d=e("../Utils/ConstConfig"),f=cc._decorator,h=f.ccclass,g=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextPos=[],t.lastUpdate={},t.lastMsgTime=Date.now(),t.lastStateMsgID=-1,t.minDistanceToTeleport=200,t.extrapolateDuration=.1,t.isMovingToExtrapolatePos=!1,t.bomsStateAfterExtrapolate=null,t.targetPos=null,t.serverTimeOfLastReceivedPos=0,t.calcSpeed=0,t.usingTestInterp=!0,t.isBotMode=!1,t}return r(t,e),t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.convertToLocalBot=function(){var e=this,t=this.node;t.removeComponent(this),t.addComponent(u.PlayerController_Bot);var o=t.getComponent(u.PlayerController_Bot);return o.nameLabel=this.nameLabel,o.animations=this.animations,o.countryFlagSprite=this.countryFlagSprite,o.powerUpBackVFX=this.powerUpBackVFX,o.powerUpFrontVFX=this.powerUpFrontVFX,o.pwUpCollectingPrefab=this.pwUpCollectingPrefab,o.pwDownCollectingPrefab=this.pwDownCollectingPrefab,o.startPointIndex=this.startPointIndex,o.assignNetID(this.netID),o.posInMap=this.posInMap,o.setData(this.data),o.isHuman=!1,o.setRandBotBrain(),o.animations.forEach(function(e){e.getSkeleton(),e.queueSkin(o.data.skin)}),o.countryCode=this.countryCode,o.curDirection=l.E_MOVE_DIRECTION.Idle,o.getSkin()===d.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER&&(o.punkRiderVfxHandler=this.punkRiderVfxHandler),i.default.inst.bombs.forEach(function(t){t.playerOwner==e&&(t.playerOwner=o)}),this.destroy(),o},t.prototype.setup=function(){e.prototype.setup.call(this)},t.prototype.updateFromNetStateData=function(e){var t=e.timeChangeState-this.serverTimeOfLastReceivedPos;this.nextPos=[],this.directionAfterExtrapolate=e.curDirection,this.speedAfterExtrapolate=e.curSpeed,this.stateAfterExtrapolate=e.curState;var o=this.targetPos;if(this.targetPos=e.position,this.serverTimeOfLastReceivedPos=e.timeChangeState,o){var n=new cc.Vec2(this.targetPos.x-o.x,this.targetPos.y-o.y).mag();this.calcSpeed=n/t}if(this.data.fromUint8Array(e.data),!this.usingTestInterp){var r=(this.extrapolateDuration+(c.default.inst.getCurrentGameServerTime()-e.timeChangeState)/1e3)*e.curSpeed;[l.PlayerState.Idle,l.PlayerState.Dead,l.PlayerState.Die].indexOf(e.curState)>=0&&(r=0),e.curState!=l.PlayerState.Dead&&e.curState!=l.PlayerState.Die||console.log("Got a dead or die"),this.posAfterExtrapolate=this.getExtrapolatePos(new cc.Vec2(e.position.x,e.position.y),r,e.curState);var a=s.default.inst.getPosInMap(this.posAfterExtrapolate);if(a.x==this.posInMap.x&&a.y==this.posInMap.y)this.moveToExtrapolatePos();else{var i=s.default.inst.pathFinder.findPathForPlayer(this,a.x,a.y,!1);if(i){var u=Math.abs(this.posAfterExtrapolate.x-this.node.x)+Math.abs(this.posAfterExtrapolate.y-this.node.y);this.data.curSpeed=u/this.extrapolateDuration;var d=p.default.SPEED_DEFAULT+p.default.SPEED_PER_UPGRADE*(this.data.speedUpdateMax-1);this.data.curSpeed=Math.min(d,this.data.curSpeed),this.setPathFromAStar(i)}else this.teleportTo(this.posAfterExtrapolate),this.applyStateAfterExtrapolate()}}},t.prototype.reconcileBombs=function(){},t.prototype.getExtrapolatePos=function(e,t,o){var n=e,r=s.default.inst.getPosInMap(e);switch(o){case l.PlayerState.MoveDown:for(;r.y>s.default.inst.getPosInMap(cc.v2(n.x,n.y-t)).y;){if(!this.posInMapCanMove(cc.v2(r.x,r.y-1))){t=Math.min(0,t);break}r.y-=1,t-=s.default.inst.mapInfo.sizeOfTile.y,n.y-=s.default.inst.mapInfo.sizeOfTile.y}n.y-=t;break;case l.PlayerState.MoveUp:for(;r.y<s.default.inst.getPosInMap(cc.v2(n.x,n.y+t)).y;){if(!this.posInMapCanMove(cc.v2(r.x,r.y+1))){t=Math.min(0,t);break}r.y+=1,t-=s.default.inst.mapInfo.sizeOfTile.y,n.y+=s.default.inst.mapInfo.sizeOfTile.y}n.y+=t;break;case l.PlayerState.MoveLeft:for(;r.x>s.default.inst.getPosInMap(cc.v2(n.x-t,n.y)).x;){if(!this.posInMapCanMove(cc.v2(r.x-1,r.y))){t=Math.min(0,t);break}r.x-=1,t-=s.default.inst.mapInfo.sizeOfTile.x,n.x-=s.default.inst.mapInfo.sizeOfTile.x}n.x-=t;break;case l.PlayerState.MoveRight:for(;r.x<s.default.inst.getPosInMap(cc.v2(n.x+t,n.y)).x;){if(!this.posInMapCanMove(cc.v2(r.x+1,r.y))){t=Math.min(0,t);break}r.x+=1,t-=s.default.inst.mapInfo.sizeOfTile.x,n.x+=s.default.inst.mapInfo.sizeOfTile.x}n.x+=t}return n},t.prototype.setPathFromAStar=function(e){var t=this;this.nextPos=[],e.forEach(function(e){var o=e;t.nextPos.push({x:o.x,y:o.y})}),this.moveToNextPos()},t.prototype.moveToNextPos=function(){if(this.nextPos.length>0){if(this.nextPos[0].x==this.posInMap.x&&this.nextPos[0].y==this.posInMap.y)return this.nextPos.shift(),void this.moveToNextPos();this.nextPos[0].x>this.posInMap.x?this.curDirection=l.E_MOVE_DIRECTION.Right:this.nextPos[0].x<this.posInMap.x?this.curDirection=l.E_MOVE_DIRECTION.Left:this.nextPos[0].y>this.posInMap.y?this.curDirection=l.E_MOVE_DIRECTION.Up:this.nextPos[0].y<this.posInMap.y&&(this.curDirection=l.E_MOVE_DIRECTION.Down)}},t.prototype.getUnitMoveDir=function(e){switch(e){case l.E_MOVE_DIRECTION.Down:return new cc.Vec2(0,-1);case l.E_MOVE_DIRECTION.Up:return new cc.Vec2(0,1);case l.E_MOVE_DIRECTION.Left:return new cc.Vec2(-1,0);case l.E_MOVE_DIRECTION.Right:return new cc.Vec2(1,0);case l.E_MOVE_DIRECTION.Idle:return new cc.Vec2(0,0);default:return cc.Vec2.ZERO}},t.prototype.testUpdate=function(e){if(this.targetPos)if(this.stateAfterExtrapolate!=l.PlayerState.Die)if(this.stateAfterExtrapolate!=l.PlayerState.Dead){var t=this.getUnitMoveDir(this.directionAfterExtrapolate),o=new cc.Vec2(0*t.x*this.calcSpeed*1e3,0*t.y*this.calcSpeed*1e3),n=new cc.Vec2(this.targetPos.x+o.x,this.targetPos.y+o.y),r=new cc.Vec2(n.x-this.node.x,n.y-this.node.y);if(0!=r.x||0!=r.y){var a=r.mag(),i=cc.Vec2.ZERO,s=cc.Vec2.ZERO;if(0==(s=cc.Vec2.normalize(s,r)).x||0==s.y){var c=this.data.curSpeed*e;c>a&&(c=a),i=s.mul(c)}else r.x>r.y?(i.x=0,i.y=r.y):(i.y=0,i.x=r.x),console.log("Turn corner TPT. FrameDelta = "+i.x+","+i.y);this.updatePosition(i),this.updatePosInMap(),this.reconcileBombs()}else this.animations[this.curPlayerAnimDirection].idle()}else this.setState(l.PlayerState.Dead);else this.setState(l.PlayerState.Die)},t.prototype.updatePosInMap=function(){var t,o=this,n=e.prototype.updatePosInMap.call(this);if(n){if(this.nextPos.length>0&&this.posInMap.x==this.nextPos[0].x&&this.posInMap.y==this.nextPos[0].y)if(this.nextPos.shift(),this.nextPos.length>0)this.moveToNextPos();else{var r=(Math.abs(this.node.x-this.posAfterExtrapolate.x)+Math.abs(this.node.y-this.posAfterExtrapolate.y))/this.data.curSpeed;this.moveToExtrapolatePos(r)}null===(t=this.bomsStateAfterExtrapolate)||void 0===t||t.forEach(function(e){s.default.inst.getBoard(e.posX,e.posY)!=e.type&&o.posInMap.x==e.posX&&o.posInMap.y==e.posY&&(o.data.rangeOfBomb=e.range,o.plantBomb(e))})}return n},t.prototype.applyStateAfterExtrapolate=function(){var e,t=this;this.curDirection=this.directionAfterExtrapolate,this.data.curSpeed=this.speedAfterExtrapolate,this.stateAfterExtrapolate!=l.PlayerState.Dead&&this.stateAfterExtrapolate!=l.PlayerState.Die||console.log("Setting state Dead/Die"),this.setState(this.stateAfterExtrapolate),null===(e=this.bomsStateAfterExtrapolate)||void 0===e||e.forEach(function(e){s.default.inst.getBoard(e.posX,e.posY)!=e.type&&(t.data.rangeOfBomb=e.range,t.plantBomb(e))})},t.prototype.teleportToPos=function(e){this.node.setPosition(e)},t.prototype.moveToExtrapolatePos=function(e){var t=this;void 0===e&&(e=this.extrapolateDuration),[l.PlayerState.PreRevive,l.PlayerState.Revive,l.PlayerState.Die,l.PlayerState.Dead].includes(this.stateAfterExtrapolate)||this.setState(l.PlayerState.Interpolating);var o=this.posAfterExtrapolate.x-this.node.x,n=this.posAfterExtrapolate.y-this.node.y;o<1&&n<1?this.applyStateAfterExtrapolate():(Math.abs(o)>Math.abs(n)?this.curPlayerAnimDirection=o>0?l.PlayerAnimDirection.Right:l.PlayerAnimDirection.Left:this.curPlayerAnimDirection=n>0?l.PlayerAnimDirection.Back:l.PlayerAnimDirection.Front,this.animations[this.curPlayerAnimDirection].run(),cc.tween(this.node).to(e,{x:this.posAfterExtrapolate.x,y:this.posAfterExtrapolate.y}).call(function(){t.applyStateAfterExtrapolate()}).start())},t.prototype.update=function(t){this.usingTestInterp&&this.testUpdate(t),this.isMovingToExtrapolatePos||e.prototype.update.call(this,t)},t.prototype.isRemote=function(){return!this.isBotMode},t.prototype.isLocalHuman=function(){return!1},t.prototype.isLocallyControlledBot=function(){return!!this.isBotMode},t.prototype.isRemoteControlledBot=function(){return!this.isBotMode&&this.netID.includes(":")},a([h],t)}(l.PlayerController));o.PlayerController_Remote=g,cc._RF.pop()},{"../Game":"Game","../Maps/MapManager":"MapManager","../Network/ImprovedNetClient":"ImprovedNetClient","../Utils/ConstConfig":"ConstConfig","./PlayerController":"PlayerController","./PlayerController_Bot":"PlayerController_Bot","./PlayerData":"PlayerData"}],PlayerController:[function(e,t,o){"use strict";cc._RF.push(t,"4d510XggR1Ptq2zvYga138E","PlayerController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerController=o.E_BRAIN_CLASS_TYPE=o.PlayerAnimDirection=o.E_MOVE_DIRECTION=o.PlayerState=void 0;var c,l,u,p,d=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),f=e("../GameCamera"),h=e("../Main"),g=e("./PlayerAnim"),m=e("../CharacterControllerBase"),y=e("../GameObjects/GameObjectBase"),_=e("../Maps/MapManager"),v=e("../Game"),S=e("../GameObjects/Bomb"),b=e("../UI/GameUI/GameUI"),N=e("../Input"),P=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),I=e("../GameObjects/PowerUpItem"),C=e("../Tutorial/Tutorial"),w=e("./PowerCollecting"),O=e("../MaterialMgr"),T=e("../Utils/ConstConfig"),E=e("../../NanoGameCore/Core/Utils"),M=e("../Debug/GameScreenDebugUI"),D=e("./PlayerSkinMgr"),R=e("./PlayerData"),B=e("../SoundManager"),A=e("../OffscreenDisableRender"),k=e("../Tracking/TrackingManager"),L=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),G=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),F=e("../Dialog/VideoRewardDialog/VictoryDialog"),j=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),U=e("../Maps/ThemeManager"),x=e("./PlayerInfoTag"),H=e("../Network/ImprovedNetClient"),V=e("../../NanoGameCore/Services/Platform/Platform"),z=e("../GameObjects/GameObjMgr"),W=cc._decorator,K=W.ccclass,Y=W.property;(function(e){e[e.PreInit=0]="PreInit",e[e.Idle=1]="Idle",e[e.MoveUp=2]="MoveUp",e[e.MoveDown=3]="MoveDown",e[e.MoveLeft=4]="MoveLeft",e[e.MoveRight=5]="MoveRight",e[e.MoveUpLeft=6]="MoveUpLeft",e[e.MoveUpRight=7]="MoveUpRight",e[e.MoveDownLeft=8]="MoveDownLeft",e[e.MoveDownRight=9]="MoveDownRight",e[e.Stunned=10]="Stunned",e[e.Die=11]="Die",e[e.Dead=12]="Dead",e[e.Etrapolating=13]="Etrapolating",e[e.Interpolating=14]="Interpolating",e[e.Revive=15]="Revive",e[e.PreRevive=16]="PreRevive",e[e.Winning=17]="Winning"})(c=o.PlayerState||(o.PlayerState={})),function(e){e[e.Idle=0]="Idle",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right",e[e.UpLeft=5]="UpLeft",e[e.UpRight=6]="UpRight",e[e.DownLeft=7]="DownLeft",e[e.DownRight=8]="DownRight"}(l=o.E_MOVE_DIRECTION||(o.E_MOVE_DIRECTION={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Front=2]="Front",e[e.Back=3]="Back"}(u=o.PlayerAnimDirection||(o.PlayerAnimDirection={})),function(e){e[e.Normal=0]="Normal",e[e.Smart=1]="Smart",e[e.Collector=2]="Collector",e[e.Dumb=3]="Dumb"}(p=o.E_BRAIN_CLASS_TYPE||(o.E_BRAIN_CLASS_TYPE={}));var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.animations=[],t.countryFlagSprite=null,t.powerUpBackVFX=null,t.powerUpFrontVFX=null,t.pwUpCollectingPrefab=null,t.pwDownCollectingPrefab=null,t.pwNegCollectingPrefab=null,t.playerInfoTag=null,t.punkRiderVfxHandler=null,t.avatarUrl=null,t.invicibleTime=0,t.curState=c.PreInit,t._curPlayerAnimDirection=u.Left,t.timeInCurState=0,t.playerID=-1,t.startPointIndex=-1,t.params=null,t.isConnected=!0,t.curBotBrainClass=p.Normal,t.ignoreInput=!1,t.audio=null,t.netID=null,t.causeOfDeath="",t.lastWorldPos=cc.v2(0,0),t.distanceOffThruster=0,t.posInMap=cc.v2(0,0),t.prePosInMap=cc.v2(0,0),t.preMoved=l.Idle,t.playerStunAnimNode=null,t.spawnPowerUpWeight=0,t._plantBombAtPos=cc.v2(0,0),t._standOnPlantBombPos=!1,t._isActiveBombPass=!1,t._curDirection=l.Idle,t.evadeTimeRemaining=0,t.evadeUp=!1,t.extraGravityTimeRemaining=0,t.isHuman=!0,t.remotePlayersGetHurtByMe=[],t.powerUpSpawningPath=[cc.v2(0,0),cc.v2(-1,0),cc.v2(1,0),cc.v2(0,1),cc.v2(0,-1),cc.v2(1,1),cc.v2(-1,1),cc.v2(-1,-1),cc.v2(1,-1),cc.v2(-2,0),cc.v2(2,0),cc.v2(0,2),cc.v2(0,-2),cc.v2(-2,1),cc.v2(2,1),cc.v2(-1,2),cc.v2(1,2),cc.v2(-2,-1),cc.v2(2,-1),cc.v2(-1,-2),cc.v2(1,-2),cc.v2(-3,0),cc.v2(3,0),cc.v2(0,3),cc.v2(0,-3)],t.explosionPlayerOwner=null,t._slowNegTime=0,t}var o;return r(t,e),o=t,t.prototype.isRealHuman=function(){return this.isHuman},t.prototype.isFinishGameplay=function(){return this.isDead()},Object.defineProperty(t.prototype,"curPlayerAnimDirection",{get:function(){return this._curPlayerAnimDirection},set:function(e){var t=this;this._curPlayerAnimDirection!==e&&(this._curPlayerAnimDirection=e,this.animations.forEach(function(e,o){var n;e.node.opacity=o==t._curPlayerAnimDirection?255:0,null===(n=t.punkRiderVfxHandler)||void 0===n||n.setSmokeVfxPosByAnimDirection(t._curPlayerAnimDirection)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLeader",{get:function(){return this._isLeader},set:function(e){this._isLeader!==e&&(this._isLeader=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curDirection",{get:function(){return this._curDirection},set:function(e){if(this._curDirection!=e&&!this.cannotMove())switch(this._curDirection=e,this._curDirection){case l.Idle:this.setState(c.Idle);break;case l.Up:this.setState(c.MoveUp);break;case l.Down:this.setState(c.MoveDown);break;case l.Left:this.setState(c.MoveLeft);break;case l.Right:this.setState(c.MoveRight);break;case l.UpLeft:this.setState(c.MoveUpLeft);break;case l.UpRight:this.setState(c.MoveUpRight);break;case l.DownLeft:this.setState(c.MoveDownLeft);break;case l.DownRight:this.setState(c.MoveDownRight)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countryCode",{get:function(){return this._countryCode},set:function(e){this._countryCode=e,this.countryFlagSprite.spriteFrame=d.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this._countryCode)},enumerable:!1,configurable:!0}),t.prototype.getAnimation=function(){return this.animations[this.curPlayerAnimDirection]?this.animations[this.curPlayerAnimDirection]:(this.animations[this.curPlayerAnimDirection]=this.node.getComponentInChildren(g.default),this.animations[this.curPlayerAnimDirection])},t.prototype.onLoad=function(){this.animations[this.curPlayerAnimDirection]=this.node.getComponentInChildren(g.default),this.initObjectPools()},t.prototype.initObjectPools=function(){this.isLocalHuman()&&(o.pwUpCollectingPool.put(cc.instantiate(this.pwUpCollectingPrefab)),o.pwDownCollectingPool.put(cc.instantiate(this.pwDownCollectingPrefab)))},t.prototype.assignNetID=function(e){this.netID=e},t.prototype.getSkin=function(){return this.animations[this.curPlayerAnimDirection].getSkin()},t.prototype.isAlive=function(){return!this.isDead()},t.prototype.getName=function(){return this.nameLabel.string},t.prototype.setCauseOfDeath=function(e){this.causeOfDeath=e},t.CreatePlayer=function(e){var t,n=!1,r=!1,a=!1;if(V.NgcPlatform.isOfflineMode())r=!(n=e.isBot),a=!0,t=n?z.GameObjMgr.inst.getBot():z.GameObjMgr.inst.getLocalPlayer();else{var i,s=e.netID.split(":"),c="";i=s.shift()===H.default.inst.clientID;var l=s.shift();"-"===l?n=!0:c=s.length>0?s.shift():l,a=i&&n,(r=i&&c===H.default.inst.localPlayerID)?(t=z.GameObjMgr.inst.getLocalPlayer(),o.nextStartPointIndex=0):a?(cc.log("Create Bot Player"),t=z.GameObjMgr.inst.getBot()):t=z.GameObjMgr.inst.getRemotePlayer()}var u=t.getComponent(o);u.isLocallyControlledBot()&&u.setRandBotBrain();var d=e.skin;u.isLocalHuman()&&(d=D.default.inst.getCurHero()),d||(cc.error("SKIN not FOUND, set to default skin "+D.default.listHeroes[0]),d=D.default.listHeroes[0]),u._data=new R.default(u),u.data.skin=d,u.animations.forEach(function(e){e.getSkeleton(),e.queueSkin(d)}),u.assignNetID(e.netID);var f=e.name.split("|");u.countryCode=f[f.length-1];var h=cc.Color.RED;return n?(h=cc.Color.WHITE,P.NgcBuildConfig.enabledDebugMode&&!a&&(h=cc.Color.CYAN)):r&&(h=cc.Color.YELLOW),P.NgcBuildConfig.enabledDebugMode&&(e.name+="("+u.startPointIndex+")",u.isLocallyControlledBot()&&(e.name+="("+E.Utils.enumToString(p,u.curBotBrainClass).charAt(0)+")")),u.setNameLabel(e.name.slice(0,e.name.indexOf("|")),h),u.isHuman=!n,u.setup(),u},t.prototype.setup=function(){e.prototype.setup.call(this)},t.prototype.setData=function(e){this._data=e},t.prototype.getNetID=function(){return this.netID},t.prototype.getCountryFlag=function(){return this.countryFlagSprite.spriteFrame},t.prototype.isLead=function(){return this.isLeader},t.prototype.setNameLabel=function(e,t){this.nameLabel.string=e,t&&(this.nameLabel.node.color=t)},t.prototype.getCurStateData=function(){var e=this.data.curHp;if(this.isLocalHuman()&&L.default.inst){var t=!L.default.inst.isOfferAccepted()||L.default.inst.isReviveDialogShowing()||this.curState===c.Revive||this.invicibleTime>0;e<=0&&t&&(e=1)}return{netID:this.netID,posInMap:this.posInMap.x<<8|this.posInMap.y,position:this.node.getPosition(),curState:this.curState,curSpeed:this.data.curSpeed,skin:this.data.skin,timeChangeState:H.default.inst.getCurrentGameServerTime(),data:this.data.toUint8Array(),curDirection:this.curDirection}},t.prototype.workState_Revive=function(e){void 0===e&&(e=0)},t.prototype.updatePosition=function(e){0==e.x&&0==e.y||(Math.abs(e.x)>Math.abs(e.y)?e.x>0?this.curPlayerAnimDirection=u.Right:this.curPlayerAnimDirection=u.Left:e.y>0?this.curPlayerAnimDirection=u.Back:this.curPlayerAnimDirection=u.Front,this.animations[this.curPlayerAnimDirection].run(),this.node.x+=e.x,this.node.y+=e.y)},t.prototype.workState_Stunned=function(){},t.prototype.workState_MoveUp=function(e){var t=cc.v2(0,0),o=this.posInMap.x*_.default.inst.mapInfo.sizeOfTile.x,n=this.posInMap.y*_.default.inst.mapInfo.sizeOfTile.y;if(o>this.node.x?this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1))?t.x=Math.min(this.data.curSpeed*e,o-this.node.x):this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y+1))&&this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y))&&(t.x=Math.max(-this.data.curSpeed*e,o-_.default.inst.mapInfo.sizeOfTile.x-this.node.x)):o<this.node.x?this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1))?t.x=Math.max(-this.data.curSpeed*e,o-this.node.x):this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y+1))&&this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y))&&(t.x=Math.min(this.data.curSpeed*e,o+_.default.inst.mapInfo.sizeOfTile.x-this.node.x)):(this.node.y<n||this.canMoveToNextPos(l.Up))&&(t.y=this.data.curSpeed*e),0==t.x&&0==t.y&&(this.curPlayerAnimDirection=u.Back,this.animations[this.curPlayerAnimDirection].run()),0!==t.y){var r=cc.v2(this.node.x+t.x,this.node.y+t.y),a=_.default.inst.getPosInMap(r);!_.default.inst.comparePosInMap(a,this.posInMap)&&this.getObjectsBlockMoving().includes(_.default.inst.getBoard(a.x,a.y))&&(t.y=0)}if(Math.abs(t.y)>_.default.inst.mapInfo.sizeOfTile.y){var i=this.getMaxPosPlayerCanMove(l.Up);if(i&&(r=cc.v2(this.node.x,this.node.y+t.y),_.default.inst.getPosInMap(r).y>i.y)){var s=_.default.inst.getNodePosFromPosInMap(i);t.y=s.y-this.node.y}}B.SoundManager.inst.playWalkingLoopSound(!0),this.updatePosition(t),this.updatePosInMap()},t.prototype.workState_MoveDown=function(e){var t=cc.v2(0,0),o=this.posInMap.x*_.default.inst.mapInfo.sizeOfTile.x,n=this.posInMap.y*_.default.inst.mapInfo.sizeOfTile.y;if(o>this.node.x?this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1))?t.x=Math.min(this.data.curSpeed*e,o-this.node.x):this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y-1))&&this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y))&&(t.x=Math.max(-this.data.curSpeed*e,o-_.default.inst.mapInfo.sizeOfTile.x-this.node.x)):o<this.node.x?this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1))?t.x=Math.max(-this.data.curSpeed*e,o-this.node.x):this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y-1))&&this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y))&&(t.x=Math.min(this.data.curSpeed*e,o+_.default.inst.mapInfo.sizeOfTile.x-this.node.x)):(this.node.y>n||this.canMoveToNextPos(l.Down))&&(t.y=-this.data.curSpeed*e),0==t.x&&0==t.y&&(this.curPlayerAnimDirection=u.Front,this.animations[this.curPlayerAnimDirection].run()),0!==t.y){var r=cc.v2(this.node.x+t.x,this.node.y+t.y),a=_.default.inst.getPosInMap(r);!_.default.inst.comparePosInMap(a,this.posInMap)&&this.getObjectsBlockMoving().includes(_.default.inst.getBoard(a.x,a.y))&&(t.y=0)}if(Math.abs(t.y)>_.default.inst.mapInfo.sizeOfTile.y){var i=this.getMaxPosPlayerCanMove(l.Down);if(i&&(r=cc.v2(this.node.x,this.node.y+t.y),_.default.inst.getPosInMap(r).y<i.y)){var s=_.default.inst.getNodePosFromPosInMap(i);t.y=s.y-this.node.y}}B.SoundManager.inst.playWalkingLoopSound(!0),this.updatePosition(t),this.updatePosInMap()},t.prototype.workState_MoveLeft=function(e){var t=cc.v2(0,0),o=this.posInMap.x*_.default.inst.mapInfo.sizeOfTile.x,n=this.posInMap.y*_.default.inst.mapInfo.sizeOfTile.y;if(n>this.node.y?this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y))?t.y=Math.min(this.data.curSpeed*e,n-this.node.y):this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y-1))&&this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1))&&(t.y=Math.max(-this.data.curSpeed*e,n-_.default.inst.mapInfo.sizeOfTile.y-this.node.y)):n<this.node.y?this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y))?t.y=Math.max(-this.data.curSpeed*e,n-this.node.y):this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y+1))&&this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1))&&(t.y=Math.min(this.data.curSpeed*e,n+_.default.inst.mapInfo.sizeOfTile.y-this.node.y)):(this.node.x>o||this.canMoveToNextPos(l.Left))&&(t.x=-this.data.curSpeed*e),0==t.x&&0==t.y&&(this.curPlayerAnimDirection=u.Left,this.animations[this.curPlayerAnimDirection].run()),0!==t.x){var r=cc.v2(this.node.x+t.x,this.node.y+t.y),a=_.default.inst.getPosInMap(r);!_.default.inst.comparePosInMap(a,this.posInMap)&&this.getObjectsBlockMoving().includes(_.default.inst.getBoard(a.x,a.y))&&(t.x=0)}if(Math.abs(t.x)>_.default.inst.mapInfo.sizeOfTile.x){var i=this.getMaxPosPlayerCanMove(l.Left);if(i&&(r=cc.v2(this.node.x+t.x,this.node.y),_.default.inst.getPosInMap(r).x<i.x)){var s=_.default.inst.getNodePosFromPosInMap(i);t.x=s.x-this.node.x}}B.SoundManager.inst.playWalkingLoopSound(!0),this.updatePosition(t),this.updatePosInMap()},t.prototype.workState_MoveRight=function(e){var t=cc.v2(0,0),o=this.posInMap.x*_.default.inst.mapInfo.sizeOfTile.x,n=this.posInMap.y*_.default.inst.mapInfo.sizeOfTile.y;if(n>this.node.y?this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y))?t.y=Math.min(this.data.curSpeed*e,n-this.node.y):this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y-1))&&this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1))&&(t.y=Math.max(-this.data.curSpeed*e,n-_.default.inst.mapInfo.sizeOfTile.y-this.node.y)):n<this.node.y?this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y))?t.y=Math.max(-this.data.curSpeed*e,n-this.node.y):this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y+1))&&this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1))&&(t.y=Math.min(this.data.curSpeed*e,n+_.default.inst.mapInfo.sizeOfTile.y-this.node.y)):(this.node.x<o||this.canMoveToNextPos(l.Right))&&(t.x=this.data.curSpeed*e),0==t.x&&0==t.y&&(this.curPlayerAnimDirection=u.Right,this.animations[this.curPlayerAnimDirection].run()),0!==t.x){var r=cc.v2(this.node.x+t.x,this.node.y+t.y),a=_.default.inst.getPosInMap(r);!_.default.inst.comparePosInMap(a,this.posInMap)&&this.getObjectsBlockMoving().includes(_.default.inst.getBoard(a.x,a.y))&&(t.x=0)}if(Math.abs(t.x)>_.default.inst.mapInfo.sizeOfTile.x){var i=this.getMaxPosPlayerCanMove(l.Right);if(i&&(r=cc.v2(this.node.x+t.x,this.node.y),_.default.inst.getPosInMap(r).x>i.x)){var s=_.default.inst.getNodePosFromPosInMap(i);t.x=s.x-this.node.x}}B.SoundManager.inst.playWalkingLoopSound(!0),this.updatePosition(t),this.updatePosInMap()},t.prototype.workState_MoveUpLeft=function(e){var t=this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y)),o=this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1));t&&o?this.preMoved==l.Up?this.workState_MoveLeft(e):this.preMoved==l.Left?this.workState_MoveUp(e):Math.abs(N.default.inst.finger.x)>Math.abs(N.default.inst.finger.y)?this.workState_MoveLeft(e):this.workState_MoveUp(e):t?this.workState_MoveLeft(e):o?this.workState_MoveUp(e):this.moveToCenterOfTile(e)},t.prototype.workState_MoveUpRight=function(e){var t=this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y)),o=this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y+1));t&&o?this.preMoved==l.Up?this.workState_MoveRight(e):this.preMoved==l.Right?this.workState_MoveUp(e):Math.abs(N.default.inst.finger.x)>Math.abs(N.default.inst.finger.y)?this.workState_MoveRight(e):this.workState_MoveUp(e):t?this.workState_MoveRight(e):o?this.workState_MoveUp(e):this.moveToCenterOfTile(e)},t.prototype.workState_MoveDownLeft=function(e){var t=this.posInMapCanMove(cc.v2(this.posInMap.x-1,this.posInMap.y)),o=this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1));t&&o?this.preMoved==l.Down?this.workState_MoveLeft(e):this.preMoved==l.Left?this.workState_MoveDown(e):Math.abs(N.default.inst.finger.x)>Math.abs(N.default.inst.finger.y)?this.workState_MoveLeft(e):this.workState_MoveDown(e):t?this.workState_MoveLeft(e):o?this.workState_MoveDown(e):this.moveToCenterOfTile(e)},t.prototype.workState_MoveDownRight=function(e){var t=this.posInMapCanMove(cc.v2(this.posInMap.x+1,this.posInMap.y)),o=this.posInMapCanMove(cc.v2(this.posInMap.x,this.posInMap.y-1));t&&o?this.preMoved==l.Down?this.workState_MoveRight(e):this.preMoved==l.Left?this.workState_MoveDown(e):Math.abs(N.default.inst.finger.x)>Math.abs(N.default.inst.finger.y)?this.workState_MoveRight(e):this.workState_MoveDown(e):t?this.workState_MoveRight(e):o?this.workState_MoveDown(e):this.moveToCenterOfTile(e)},t.prototype.moveToCenterOfTile=function(e){var t=this.posInMap.x*_.default.inst.mapInfo.sizeOfTile.x,o=this.posInMap.y*_.default.inst.mapInfo.sizeOfTile.y;Math.abs(t-this.node.x)>Math.abs(o-this.node.y)?t-this.node.x>0?(this.node.x+=Math.min(this.data.curSpeed*e,t-this.node.x),this.curPlayerAnimDirection=u.Right):t-this.node.x<0&&(this.node.x+=Math.max(-this.data.curSpeed*e,t-this.node.x),this.curPlayerAnimDirection=u.Left):o-this.node.y>0?(this.node.y+=Math.min(this.data.curSpeed*e,o-this.node.y),this.curPlayerAnimDirection=u.Back):o-this.node.y<0&&(this.node.y+=Math.max(-this.data.curSpeed*e,o-this.node.y),this.curPlayerAnimDirection=u.Front),B.SoundManager.inst.playWalkingLoopSound(!0),this.animations[this.curPlayerAnimDirection].run()},t.prototype.workState_Idle=function(){this.updatePosInMap(),B.SoundManager.inst.playWalkingLoopSound(!1)},t.prototype.canMoveToNextPos=function(e){var t={x:0,y:0};switch(e){case l.Up:t={x:this.posInMap.x,y:this.posInMap.y+1};break;case l.Down:t={x:this.posInMap.x,y:this.posInMap.y-1};break;case l.Left:t={x:this.posInMap.x-1,y:this.posInMap.y};break;case l.Right:t={x:this.posInMap.x+1,y:this.posInMap.y}}return!(t.x<0||t.x>=_.default.inst.mapInfo.numColumn||t.y<0||t.y>=_.default.inst.mapInfo.numRow||this.getObjectsBlockMoving().indexOf(_.default.inst.getBoard(t.x,t.y))>=0)},t.prototype.updatePosInMap=function(){var e=_.default.inst.getPosInMap(cc.v2(this.node.x,this.node.y)),t=_.default.inst.getBoard(e.x,e.y),o=!1;return y.default.isTypePower(t)&&this.collectPowerUpItem(),e.x==this.posInMap.x&&e.y==this.posInMap.y||(o=!0,this.prePosInMap=this.posInMap,this.posInMap=e,this.isLocalHuman()&&(!this._standOnPlantBombPos||this.posInMap.x===this._plantBombAtPos.x&&this.posInMap.y===this._plantBombAtPos.y||(this._standOnPlantBombPos=!1),t===y.GameObjectType.Bomb?this._standOnPlantBombPos||this._isActiveBombPass||(B.SoundManager.inst.playSoundWithClip(B.SoundManager.inst.PlayerPassBombClip,.7),this._isActiveBombPass=!0):this._isActiveBombPass=!1),this.posInMap.x>this.prePosInMap.x?this.preMoved=l.Right:this.posInMap.x<this.prePosInMap.x?this.preMoved=l.Left:this.posInMap.y>this.prePosInMap.y?this.preMoved=l.Up:this.posInMap.y<this.prePosInMap.y&&(this.preMoved=l.Down)),o},t.prototype.collectPowerUpItem=function(){var e=this;(this.isLocallyControlledBot()||this.isLocalHuman())&&_.default.inst.getMapBoardComponentsByPosInMap(this.posInMap).forEach(function(t){t instanceof I.default&&t.requestCollect(e)})},t.prototype.workState_Dead=function(){},t.prototype.workState_Die=function(){},t.prototype.isDead=function(){return this.curState==c.Die||this.curState==c.Dead},t.prototype.applyBasicVerticalAndForwardMovement=function(){var e=this.getWorldPosition();this.setWorldPosition(e)},t.prototype.setInvincibleTime=function(e){this.invicibleTime=e},t.prototype.timeToEnableThruster=function(){},t.prototype.rearEnd=function(){},t.prototype.collideWithPlayer=function(){},t.prototype.hitHazard=function(){},t.prototype.exitHazard=function(){},t.prototype.setState=function(e){var t,n,r,a=this;if(this.isLocalHuman()&&h.Main.inst.devLocalPlayerInvincible,this.invicibleTime,e!=this.curState){switch(this.curState){case c.Die:e!=c.Dead&&console.warn("How can we go from die to anything but dead");break;case c.Dead:return void console.warn("How can we go from dead to anything?")}switch(this.curState=e,this.isLocalHuman()&&([c.MoveUp,c.MoveDown,c.MoveLeft,c.MoveRight,c.MoveDownLeft,c.MoveDownRight,c.MoveUpLeft,c.MoveDownRight].includes(e)?B.SoundManager.inst.playPlayerWalkingSound():B.SoundManager.inst.stopPlayerWalkingSound()),e){case c.Winning:B.SoundManager.inst.playSoundWithClip(B.SoundManager.inst.VictoryClip,.7);break;case c.PreRevive:null===(t=this.punkRiderVfxHandler)||void 0===t||t.disableSmokeVfx(),this.getAnimation().die(),this.initPlayerStunAnim(),N.default.inst.reset(),B.SoundManager.inst.playSound(B.SoundManager.inst.AudioClips.PlayerStunnedClip,.7);break;case c.Revive:if(this.isLocalHuman()&&(null===(n=k.default.inst)||void 0===n||n.onPlayerRevived(v.default.inst.totalTime,v.default.gameMode,U.default.inst.curThemeType,v.default.inst.getNumPlayersAlive(),this.data,v.default.inst.fps)),this.destroyPlayerStunAnim(),cc.tween(this.node).set({opacity:50}).to(T.ConstConfig.PARAMS.REVIVE.REVIVE_INVINCIBLE_DURATION,{opacity:255}).start(),this.isLocalHuman()&&H.default.inst.sendLocalPlayerGameState(),this.isRemote()){var i=o.localPlayer.remotePlayersGetHurtByMe.indexOf(this.netID);i>=0&&o.localPlayer.remotePlayersGetHurtByMe.splice(i,1)}this.getAnimation().revive(function(){var e;a.setInvincibleTime(T.ConstConfig.PARAMS.REVIVE.REVIVE_INVINCIBLE_DURATION),a.setState(c.Idle),null===(e=a.punkRiderVfxHandler)||void 0===e||e.enableSmokeVfx()});break;case c.Dead:this.onPlayerDead();break;case c.Idle:this.animations[this.curPlayerAnimDirection].idle();break;case c.Die:P.NgcBuildConfig.enabledDebugMode&&M.default.inst.UpdateNumberOfPlayerDie(),null===(r=this.punkRiderVfxHandler)||void 0===r||r.disableSmokeVfx(),this.animations[this.curPlayerAnimDirection].getComponent(A.default).renderComponent.enabled=!0,this.animations[this.curPlayerAnimDirection].getComponent(A.default).enabled=!1,this.animations[this.curPlayerAnimDirection].die(function(){a.setState(c.Dead),P.NgcBuildConfig.enabledDebugMode&&M.default.inst.UpdateNumberOfPlayerDead()}),this.animations[this.curPlayerAnimDirection].node.color=cc.Color.RED;break;case c.Stunned:case c.MoveLeft:case c.MoveRight:case c.MoveUp:case c.MoveDown:case c.MoveUpLeft:case c.MoveUpRight:case c.MoveDownLeft:case c.MoveDownRight:}this.timeInCurState=0}},t.prototype.collisionWithExplosion=function(e){if(this.isRemote()&&this.isConnected)return e.playerOwner.isLocalHuman()&&e.playerOwner.remotePlayersGetHurtByMe.indexOf(this.netID)<0&&e.playerOwner.remotePlayersGetHurtByMe.push(this.netID),cc.tween(this.getAnimation().node).delay(.2).to(0,{color:cc.Color.RED}).to(1,{color:cc.Color.WHITE},{easing:"sineOut"}).start(),this.data.curHp>1&&(this.invicibleTime=o.INVI_TIMER,cc.tween(this.node).set({opacity:170}).delay(o.INVI_TIMER).set({opacity:255}).start()),!1;if(this.isLocalHuman()&&!this.canCollideWithExplosion())return!1;if(this.data.curHp--,this.isLocalHuman()&&B.SoundManager.inst.playSoundWithClip(B.SoundManager.inst.PlayerLoseLifeClip,.7),this.data.curHp>0)cc.tween(this.getAnimation().node).to(0,{color:cc.Color.RED}).to(1,{color:cc.Color.WHITE},{easing:"sineOut"}).start(),this.invicibleTime=o.INVI_TIMER,cc.tween(this.node).set({opacity:170}).delay(o.INVI_TIMER).set({opacity:255}).start();else{if(this.data.deadCause=e.playerOwner==this?R.DeadCause.Suicide:R.DeadCause.Killed,this.isLocalHuman()&&L.default.inst&&L.default.inst.canRevive(v.default.inst.getNumPlayersAlive(),this.data.curKill)&&!L.default.inst.isOfferAccepted())return cc.tween(this.getAnimation().node).to(0,{color:cc.Color.RED}).to(1,{color:cc.Color.WHITE},{easing:"sineOut"}).start(),this.data.curHp=1,this.setState(c.PreRevive),v.default.inst.showReviveDialog(),this.setRefuseReviveInfo(e.playerOwner),!1;this.setState(c.Die),e.playerOwner!==this&&(e.playerOwner.data.curKill++,e.playerOwner.isLocalHuman()&&(b.default.inst.killAndLiveBoard.setKillNum(e.playerOwner.data.curKill),B.SoundManager.inst.playSound(B.SoundManager.inst.AudioClips.PlayerKillClip,.7)))}return this.data.curHp<=0},t.prototype.collideWithBorder=function(){cc.tween(this.node).to(.5,{scale:0}).start(),this.data.deadCause=R.DeadCause.Shrinking,this.setState(c.Die)},t.prototype.teleportTo=function(e){this.stopAllMotion(),this.setWorldPosition(e)},t.prototype.stopAllMotion=function(){},t.prototype.reset=function(){},t.prototype.start=function(){this.reset(),this._canBeSpectated=!0,this.isLocalHuman()&&(o.localPlayer=this,f.default.inst.setTarget(this,cc.sys.isMobile?f.default.ZOOM_RATIO_MOBILE:f.default.ZOOM_RATIO_PC,!0),o.localPlayerInFTUE&&(this.data.curHp=2),v.default.inst.applyUserBooster())},t.prototype.isRemote=function(){return!1},t.prototype.isLocalHuman=function(){return!0},t.prototype.isLocallyControlledBot=function(){return!1},t.prototype.isRemoteControlledBot=function(){return!1},t.prototype.updateFromNetStateData=function(){console.error("Why are we here? Local player should not be getting this.  OVERRIDE ME")},t.prototype.update=function(e){if(!v.default.inst.isPaused()){switch(this.lastWorldPos=this.getWorldPosition(),this.timeInCurState+=e,this.invicibleTime>0&&(this.invicibleTime-=e),this.updateNegativeEffectTime(e),this.curState){case c.Winning:case c.PreRevive:break;case c.Revive:this.workState_Revive(e);break;case c.Idle:this.workState_Idle(e);break;case c.Stunned:this.workState_Stunned(e);break;case c.Die:this.workState_Die(e);break;case c.Dead:this.workState_Dead(e);break;case c.MoveUp:this.workState_MoveUp(e);break;case c.MoveDown:this.workState_MoveDown(e);break;case c.MoveLeft:this.workState_MoveLeft(e);break;case c.MoveRight:this.workState_MoveRight(e);break;case c.MoveUpLeft:this.workState_MoveUpLeft(e);break;case c.MoveUpRight:this.workState_MoveUpRight(e);break;case c.MoveDownLeft:this.workState_MoveDownLeft(e);break;case c.MoveDownRight:this.workState_MoveDownRight(e)}this.isLocalHuman()&&_.default.inst.ArrowDirectionNode.setPosition(this.node.getPosition())}},t.prototype.setWorldPosition=function(t){e.prototype.setWorldPosition.call(this,t)},t.prototype.plantBomb=function(e){var t,o;if(v.default.inst.gameState!=v.GameState.AddingPlayers&&!(this.curState==c.Die||this.curState==c.Dead||this.curState===c.Winning||this.curState===c.PreRevive||this.isLocalHuman()&&v.default.inst.startingTutorial&&(null===(t=v.default.inst.tutorialHandler)||void 0===t?void 0:t.getTutorialCurTurn())===C.E_TUTORIAL_TURN.FIRST_MOVE)){var n=this.posInMap;if(_.default.inst.getObjectTypeByPosInMap(n)!==y.GameObjectType.Bomb){var r=H.default.inst.getCurrentGameServerTime(),a=this.data.curBombType,i=this.data.rangeOfBomb;(a=this.hasOneSpecialBombTypeInList()?S.E_BOMB_TYPE.Normal:this.data.curBombType)===S.E_BOMB_TYPE.Dangerous?i=Math.min(this.data.rangeOfBomb,S.default.DANGEROUS_BOMB_MAX_LENGTH):a===S.E_BOMB_TYPE.Power&&(i=this.data.maxFireRange),e&&(r=e.timePlanted,n=cc.v2(e.posX,e.posY),a=e.type),![y.GameObjectType.Block_Hard,y.GameObjectType.Block_Soft,y.GameObjectType.Block_Border].includes(_.default.inst.getBoard(this.posInMap.x,this.posInMap.y))&&this.data.curBombPlanted<this.data.curBombNum&&(this.isLocalHuman()&&(this._plantBombAtPos=n,this._standOnPlantBombPos=!0),_.default.inst.spawnBomb(this,a,i,n,r)),v.default.inst.startingTutorial&&(null===(o=v.default.inst.tutorialHandler)||void 0===o?void 0:o.getTutorialCurTurn())===C.E_TUTORIAL_TURN.PLANT_BOMB&&v.default.inst.tutorialHandler.startTutorialTurn(C.E_TUTORIAL_TURN.MOVE_SAFER)}}},t.prototype.hasOneSpecialBombTypeInList=function(){var e=[S.E_BOMB_TYPE.Dangerous,S.E_BOMB_TYPE.Power];return void 0!==this.data.curBombs.find(function(t){return e.includes(t.type)})},t.prototype.testChangeDirection=function(){},t.prototype.onPlayerDead=function(){var e,t,n,r=this;if(this.data.deadCause===R.DeadCause.Shrinking&&k.default.inst.playerDiedByShrink++,this.isRemote()&&this.data.deadCause!==R.DeadCause.Shrinking){var a=o.localPlayer.remotePlayersGetHurtByMe.indexOf(this.netID);a>=0&&(o.localPlayer.data.curKill++,o.localPlayer.remotePlayersGetHurtByMe.splice(a,1),b.default.inst.killAndLiveBoard.setKillNum(o.localPlayer.data.curKill))}var l=v.default.inst.getNumPlayersAlive();this.data.curRank=l+1,this.isLocalHuman()&&(null===(e=k.default.inst)||void 0===e||e.onPlayerDead(v.default.inst.totalTime,v.default.gameMode,U.default.inst.curThemeType,v.default.inst.getNumPlayersAlive(),this.data,v.default.inst.fps),B.SoundManager.inst.playSound(B.SoundManager.inst.AudioClips.PlayerDeathClip,.7));var u=1===l&&!o.localPlayer.isDead();u&&(o.localPlayer.data.curRank=1),v.default.inst.gameState!==v.GameState.GameOver&&v.default.inst.gameState!==v.GameState.Spectating&&(this.isLocalHuman()||u)&&(null===(t=o.localPlayer)||void 0===t?void 0:t.curState)!==c.Winning&&(v.default.inst.onGameHasResult(u,o.localPlayer.data),new Promise(function(e){return i(r,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return u?(o.localPlayer.setState(c.Winning),[4,j.NgcDialogManager.createDialog(F.default.dialogType,F.default.urlPrefab,F.default.bundleName)]):[3,2];case 1:return(t=n.sent()).getComponent(F.default).init(function(){e()}),t.getComponent(F.default).show(),[3,3];case 2:e(),n.label=3;case 3:return[2]}})})}).then(function(){v.default.inst.gameOver()})),b.default.inst.killAndLiveBoard.setLiveNum(l),v.default.inst.onSomePlayersHasKill(),P.NgcBuildConfig.enabledDebugMode&&M.default.inst.updateNumberOfBotInfo(),this.node.emit("PlayerDead"),this.destroyPlayerStunAnim(),this.initPlayerNotReviveAnim(),this.generatePowerUpItem(),this._canBeSpectated=!1,v.default.inst.gameState===v.GameState.Spectating&&l<=1&&(v.default.inst.setState(v.GameState.GameOver),null===(n=G.NgcSpectatorManager.inst)||void 0===n||n.stopSpectator()),this.node.active=!1},t.prototype.tilesDistanceToPos=function(e){var t=e.x-this.posInMap.x,o=e.y-this.posInMap.y;return Math.sqrt(t*t+o*o)},t.prototype.canSeeGameObjectFromDist=function(){return!0},t.prototype.generatePowerUpItem=function(){for(var e,t,o=[{type:y.GameObjectType.PU_Bomb_Pass,num:this.data.passBomb?1:0},{type:y.GameObjectType.PU_Bomb_Pierce,num:this.data.curBombType===S.E_BOMB_TYPE.Pierce?1:0},{type:y.GameObjectType.PU_Bomb_Danger,num:this.data.curBombType===S.E_BOMB_TYPE.Dangerous?1:0},{type:y.GameObjectType.PU_Bomb_Power,num:this.data.curBombType===S.E_BOMB_TYPE.Power?1:0},{type:y.GameObjectType.PU_Bomb_Range,num:this.data.rangeOfBomb-1},{type:y.GameObjectType.PU_Bomb_Number,num:this.data.curBombNum-1},{type:y.GameObjectType.PU_Mov_Speed,num:this.data.amountSpeedUpdate-1}].sort(function(e,t){return e.num<t.num?-1:e.num>t.num?1:0}),n=cc.v2(this.posInMap.x,this.posInMap.y),r=0;r<this.powerUpSpawningPath.length;r++){var a=this.powerUpSpawningPath[r],i=n.add(a);if(e=i.x,t=i.y,_.default.inst.isValidCell(e,t)&&_.default.inst.getBoard(e,t)===y.GameObjectType.Empty){var s=o.find(function(e){return e.num>0});if(!s)break;s.num--,_.default.inst.getBoard(i.x,i.y)===y.GameObjectType.Empty&&_.default.inst.spawnPowerUpItem(s.type,i.x,i.y,this.node.getPosition())}}},t.prototype.playPowerVFX=function(e,t,n){var r,a,i=n===I.E_POWER_STATUS.PowerUp?0:1,s=this.powerUpFrontVFX.getClips()[i],c=s.duration/s.speed,l=O.default.inst.powerUpVFXMaterial,u=o.CHAR_GRADIENT_COLOR_POWER_UP,p=B.SoundManager.inst.AudioClips.PowerUpClip;switch(n){case I.E_POWER_STATUS.Negative:l=O.default.inst.powerNegVFXMaterial,u=o.CHAR_GRADIENT_COLOR_POWER_NEGATIVE,p=B.SoundManager.inst.AudioClips.PowerDownClip;break;case I.E_POWER_STATUS.PowerUp:l=O.default.inst.powerUpVFXMaterial,u=o.CHAR_GRADIENT_COLOR_POWER_UP,p=B.SoundManager.inst.AudioClips.PowerUpClip;break;case I.E_POWER_STATUS.PowerDown:l=O.default.inst.powerDownVFXMaterial,u=o.CHAR_GRADIENT_COLOR_POWER_DOWN,p=B.SoundManager.inst.AudioClips.PowerDownClip}null===(r=this.powerUpBackVFX.getComponentInChildren(cc.Sprite))||void 0===r||r.setMaterial(0,l),null===(a=this.powerUpFrontVFX.getComponentInChildren(cc.Sprite))||void 0===a||a.setMaterial(0,l),this.powerUpBackVFX.play(this.powerUpBackVFX.getClips()[i].name),this.powerUpFrontVFX.play(this.powerUpFrontVFX.getClips()[i].name),cc.tween(this.getAnimation().node).set({color:u}).delay(c).set({color:cc.Color.WHITE}).start();var d=w.default.getANode(n);d.getComponent(w.default).setup(this.node.position,e,t),d.getComponent(w.default).startAnim(),B.SoundManager.inst.playSound(p,.7)},t.prototype.comparePosInMap=function(e,t){return e.x===t.x&&e.y===t.y},t.prototype.onRemainingBombsChanged=function(e,t){void 0===t&&(t=!1),this.isLocalHuman()&&v.default.inst.onLocalPlayerRemainingBombChanged(e,t)},t.prototype.getMaxPosPlayerCanMove=function(e){var t=void 0;switch(e){case l.Up:for(var n=1;n<=o.MAX_TILES_PLAYER_CAN_MOVE;n++){var r=cc.v2(this.posInMap.x,this.posInMap.y+n),a=_.default.inst.getBoard(r.x,r.y);if(this.getObjectsBlockMoving().includes(a)){t=cc.v2(this.posInMap.x,this.posInMap.y+n-1);break}}break;case l.Down:for(n=1;n<=o.MAX_TILES_PLAYER_CAN_MOVE;n++)if(r=cc.v2(this.posInMap.x,this.posInMap.y-n),a=_.default.inst.getBoard(r.x,r.y),this.getObjectsBlockMoving().includes(a)){t=cc.v2(this.posInMap.x,this.posInMap.y-n+1);break}break;case l.Left:for(n=1;n<=o.MAX_TILES_PLAYER_CAN_MOVE;n++)if(r=cc.v2(this.posInMap.x-n,this.posInMap.y),a=_.default.inst.getBoard(r.x,r.y),this.getObjectsBlockMoving().includes(a)){t=cc.v2(this.posInMap.x-n+1,this.posInMap.y);break}break;case l.Right:for(n=1;n<=o.MAX_TILES_PLAYER_CAN_MOVE;n++)if(r=cc.v2(this.posInMap.x+n,this.posInMap.y),a=_.default.inst.getBoard(r.x,r.y),this.getObjectsBlockMoving().includes(a)){t=cc.v2(this.posInMap.x+n-1,this.posInMap.y);break}}return t},t.prototype.playerRefuseRevive=function(){this.explosionPlayerOwner&&this.explosionPlayerOwner!==this&&this.explosionPlayerOwner!==this&&this.explosionPlayerOwner.data.curKill++,this.data.curHp=0,this.setState(c.Die)},t.prototype.setRefuseReviveInfo=function(e){this.explosionPlayerOwner=e},t.prototype.isReviving=function(){return this.curState===c.Revive||this.curState===c.PreRevive},t.prototype.cannotMove=function(){return[c.Dead,c.Die,c.PreRevive,c.Stunned,c.Winning,c.Revive].includes(this.curState)},t.prototype.getAiParam=function(){cc.error("This getAiParam Func should call on BOT")},t.prototype.setRandBotBrain=function(){cc.error("This setRandBotBrain Func should call on BOT")},t.prototype.initPlayerStunAnim=function(){var e=o.playerStunAnimPool.get();e||(e=cc.instantiate(_.default.inst.playerStunAnimPrefab)),this.playerStunAnimNode=e,this.playerStunAnimNode.parent=_.default.inst.PlayerEffectNode,E.Utils.setWorldPos(this.playerStunAnimNode,E.Utils.getWorldPos(this.node).add(o.PLAYER_STUN_ANIM_OFFSET))},t.prototype.destroyPlayerStunAnim=function(){this.playerStunAnimNode&&this.playerStunAnimNode.isValid&&o.playerStunAnimPool.put(this.playerStunAnimNode)},t.prototype.initPlayerNotReviveAnim=function(e){var t=o.playerNotReviveAnimPool.get();t||(t=cc.instantiate(_.default.inst.playerNotReviveAnimPrefab)),t.parent=_.default.inst.PlayerEffectNode,E.Utils.setWorldPos(t,E.Utils.getWorldPos(this.node).add(o.PLAYER_NOT_REVIVE_ANIM_OFFSET));var n=t.getComponent(cc.Animation);n.play(),n.once(cc.Animation.EventType.FINISHED,function(){e&&e(),o.playerNotReviveAnimPool.put(t)})},t.prototype.onTakeNegativeEffect=function(e){switch(e){case R.E_NEGATIVE_EFFECT.Slow:this._slowNegTime=o.SLOW_NEGATIVE_DURATION,this.isLocalHuman()&&this.startNegativeProgress()}},t.prototype.updateNegativeEffectTime=function(e){this.data.curNegativeEffect===R.E_NEGATIVE_EFFECT.Slow&&(this._slowNegTime-=e,this._slowNegTime<=0&&(this._slowNegTime=0,this.data.curNegativeEffect=R.E_NEGATIVE_EFFECT.None,this.isLocalHuman()&&this.stopNegativeProgress()),this.isLocalHuman()&&this.updateNegativeProgress())},t.prototype.getTotalScore=function(){return cc.log("Method not implement"),0},t.prototype.canCollideWithExplosion=function(){return this.curState!==c.Revive&&this.curState!==c.PreRevive&&this.curState!==c.Winning&&!h.Main.inst.devLocalPlayerInvincible&&this.invicibleTime<=0},t.prototype.getObjectsBlockMoving=function(){var e=[y.GameObjectType.Block_Hard,y.GameObjectType.Block_Soft,y.GameObjectType.Block_Border];return this.data.passBomb||e.push(y.GameObjectType.Bomb),e},t.prototype.posInMapCanMove=function(e){return!(e.x<0||e.y<0||e.x>=_.default.inst.mapInfo.numColumn||e.y>=_.default.inst.mapInfo.numRow||this.getObjectsBlockMoving().includes(_.default.inst.getObjectTypeByPosInMap(e)))},t.prototype.startNegativeProgress=function(){v.default.inst.negativeTimingProgress.node.active=!0,v.default.inst.negativeTimingProgress.progress=1},t.prototype.stopNegativeProgress=function(){v.default.inst.negativeTimingProgress.node.active=!1},t.prototype.updateNegativeProgress=function(){v.default.inst.negativeTimingProgress.progress=this._slowNegTime/o.SLOW_NEGATIVE_DURATION,E.Utils.setWorldPos(v.default.inst.negativeTimingProgress.node,E.Utils.getWorldPos(this.node).add(o.NEG_POS_OFFSET))},t.pwUpCollectingPool=new cc.NodePool("pwUpCollecting"),t.pwDownCollectingPool=new cc.NodePool("pwDownCollecting"),t.pwNegCollectingPool=new cc.NodePool("pwNegCollecting"),t.playerStunAnimPool=new cc.NodePool("playerStunAnimPool"),t.playerNotReviveAnimPool=new cc.NodePool("playerNotReviveAnimPool"),t.nextStartPointIndex=0,t.MAX_TILES_PLAYER_CAN_MOVE=10,t.INVI_TIMER=1,t.localPlayerInFTUE=!1,t.nextPlayerID=0,t.MOV_SPEED_SLOW_NEGATIVE=90,t.SLOW_NEGATIVE_DURATION=5,t.localPlayer=null,t.CHAR_GRADIENT_COLOR_POWER_UP=cc.Color.WHITE.fromHEX("#FFD600"),t.CHAR_GRADIENT_COLOR_POWER_DOWN=cc.Color.RED,t.CHAR_GRADIENT_COLOR_POWER_NEGATIVE=cc.Color.WHITE.fromHEX("#7e00ff"),t.PLAYER_STUN_ANIM_OFFSET=cc.v2(0,125),t.PLAYER_NOT_REVIVE_ANIM_OFFSET=cc.v2(0,50),t.NEG_POS_OFFSET=cc.v2(-126,181),a([Y(cc.Label)],t.prototype,"nameLabel",void 0),a([Y({type:[g.default],tooltip:"0 = Left; 1 = Right; 2 = Front; 3 = Back"})],t.prototype,"animations",void 0),a([Y(cc.Sprite)],t.prototype,"countryFlagSprite",void 0),a([Y(cc.Animation)],t.prototype,"powerUpBackVFX",void 0),a([Y(cc.Animation)],t.prototype,"powerUpFrontVFX",void 0),a([Y(cc.Prefab)],t.prototype,"pwUpCollectingPrefab",void 0),a([Y(cc.Prefab)],t.prototype,"pwDownCollectingPrefab",void 0),a([Y(cc.Prefab)],t.prototype,"pwNegCollectingPrefab",void 0),a([Y(x.default)],t.prototype,"playerInfoTag",void 0),o=a([K],t)}(m.default);o.PlayerController=q,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/Services/Platform/Platform":"Platform","../CharacterControllerBase":"CharacterControllerBase","../Debug/GameScreenDebugUI":"GameScreenDebugUI","../Dialog/VideoRewardDialog/VictoryDialog":"VictoryDialog","../Game":"Game","../GameCamera":"GameCamera","../GameObjects/Bomb":"Bomb","../GameObjects/GameObjMgr":"GameObjMgr","../GameObjects/GameObjectBase":"GameObjectBase","../GameObjects/PowerUpItem":"PowerUpItem","../Input":"Input","../Main":"Main","../Maps/MapManager":"MapManager","../Maps/ThemeManager":"ThemeManager","../MaterialMgr":"MaterialMgr","../Network/ImprovedNetClient":"ImprovedNetClient","../OffscreenDisableRender":"OffscreenDisableRender","../SoundManager":"SoundManager","../Tracking/TrackingManager":"TrackingManager","../Tutorial/Tutorial":"Tutorial","../UI/GameUI/GameUI":"GameUI","../Utils/ConstConfig":"ConstConfig","./PlayerAnim":"PlayerAnim","./PlayerData":"PlayerData","./PlayerInfoTag":"PlayerInfoTag","./PlayerSkinMgr":"PlayerSkinMgr","./PowerCollecting":"PowerCollecting"}],PlayerData:[function(e,t,o){"use strict";cc._RF.push(t,"4a260MO6WdDkYEC7IJ5xSTh","PlayerData"),Object.defineProperty(o,"__esModule",{value:!0}),o.E_NEGATIVE_EFFECT=o.DeadCause=void 0;var n,r,a=e("../GameModeDataBase"),i=e("../GameObjects/Bomb"),s=e("../TypeDefs"),c=e("../UI/GameUI/GameUI"),l=e("./CharacterUpgradesMgr"),u=e("./PlayerController"),p=e("./PlayerSkinMgr");(function(e){e[e.Alive=0]="Alive",e[e.Killed=1]="Killed",e[e.Suicide=2]="Suicide",e[e.Bombrain=3]="Bombrain",e[e.Shrinking=4]="Shrinking"})(n=o.DeadCause||(o.DeadCause={})),function(e){e[e.None=0]="None",e[e.Slow=1]="Slow"}(r=o.E_NEGATIVE_EFFECT||(o.E_NEGATIVE_EFFECT={}));var d=function(){function e(t){this._curBombPlanted=0,this.curBombs=[],this.rangeOfBomb=1,this.passBomb=!1,this._amountSpeedUpdate=1,this._curNegativeEffect=r.None,this._curSpeed=e.SPEED_DEFAULT,this.deadCause=n.Alive,this._playerRef=t,this.reset(e.ACTIVE_GAME_MODE)}return Object.defineProperty(e.prototype,"curHp",{get:function(){return this._curHp},set:function(e){0==e&&this._playerRef.invicibleTime>0&&(e=1),this._curHp=Math.min(e,this.maxHP),this._playerRef.isLocalHuman()&&c.default.inst.heartBoard.setHeart(this._curHp)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curBombNum",{get:function(){return this._curBombNum},set:function(e){var t=e>this._curBombNum;this._curBombNum=e,this._playerRef.onRemainingBombsChanged(this.curRemainingBomb,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curBombPlanted",{get:function(){return this._curBombPlanted},set:function(e){this._curBombPlanted=e,this._playerRef.onRemainingBombsChanged(this.curRemainingBomb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curRemainingBomb",{get:function(){return this.curBombNum-this.curBombPlanted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amountSpeedUpdate",{get:function(){return this._amountSpeedUpdate},set:function(t){this._amountSpeedUpdate=cc.misc.clampf(t,1,this.speedUpdateMax),this.curSpeed=e.SPEED_DEFAULT+(this._amountSpeedUpdate-1)*e.SPEED_PER_UPGRADE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curNegativeEffect",{get:function(){return this._curNegativeEffect},set:function(e){this._playerRef.onTakeNegativeEffect(e),this._curNegativeEffect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curSpeed",{get:function(){return this._curNegativeEffect===r.Slow?u.PlayerController.MOV_SPEED_SLOW_NEGATIVE:this._curSpeed},set:function(e){this._curSpeed=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(t){var o=a.default.getGameModeData(t);this.skin="",this.level=0,this.maxHP=e.MAX_HEALTH,this.maxBomb=e.BOMB_MAX_UPGRADE,this.speedUpdateMax=e.SPEED_MAX_UPGRADE,this.maxFireRange=e.FIRE_MAX_UPGRADE,this.curSpeed=300,this.curBombType=i.E_BOMB_TYPE.Normal,this.curKill=0,this.curRank=0,this.deadCause=n.Alive,this.curNegativeEffect=r.None,this.curHp=o.startingHP,this.amountSpeedUpdate=o.startingSpeed,this.rangeOfBomb=o.startingFire,this.curBombNum=o.startingBomb,this.startingPos=cc.v2(0,0),this.totalHeartCollected=0,this.totalBombUpCollected=0,this.totalFireUpCollected=0,this.totalFireDownCollected=0,this.totalSpeedUpCollected=0,this.totalSpeedDownCollected=0,this.totalBombPierceCollected=0,this.totalBombPowerCollected=0,this._playerRef.isLocalHuman()&&this.applyHeroUpgrade()},e.prototype.toUint8Array=function(){return new Uint8Array([this.curHp,(65280&this.curSpeed)>>>16,255&this.curSpeed,this.amountSpeedUpdate,this.curBombNum,this.curBombPlanted,this.curBombType,this.rangeOfBomb,this.curKill,this.curRank,this.deadCause,this.passBomb?1:0])},e.prototype.fromUint8Array=function(e){this.curHp=e[0],this.curSpeed=e[1]<<16|e[2],this.amountSpeedUpdate=e[3],this.curBombNum=e[4],this.curBombPlanted=e[5],this.curBombType=e[6],this.rangeOfBomb=e[7],this.curKill=e[8],this.curRank=e[9],this.deadCause=e[10],this.passBomb=1==e[11]},e.prototype.applyHeroUpgrade=function(){for(var e=p.default.inst.getCurHero(),t=p.default.inst.getHeroUpgradeSlot(e),o=l.default.inst.getHeroUpgradeDataStatus(e),n=1;n<=t;n++){var r=o[n];if(r&&n==r.slot)switch(r.value1){case l.E_UPGRADE_VALUE_1.speed_up:this.amountSpeedUpdate+=r.value2;break;case l.E_UPGRADE_VALUE_1.bomb_up:this.curBombNum+=r.value2;break;case l.E_UPGRADE_VALUE_1.bomb_pass:this.passBomb=!0;break;case l.E_UPGRADE_VALUE_1.max_bomb:this.maxBomb+=r.value2;break;case l.E_UPGRADE_VALUE_1.mine_bomb:break;case l.E_UPGRADE_VALUE_1.fire_up:this.rangeOfBomb+=r.value2;break;case l.E_UPGRADE_VALUE_1.dangerous_bomb:this.curBombType=i.E_BOMB_TYPE.Dangerous;break;case l.E_UPGRADE_VALUE_1.max_fire:this.maxFireRange+=r.value2;case l.E_UPGRADE_VALUE_1.max_health:this.maxHP+=r.value2;break;case l.E_UPGRADE_VALUE_1.power_bomb:this.curBombType=i.E_BOMB_TYPE.Power;break;case l.E_UPGRADE_VALUE_1.pierce_bomb:this.curBombType=i.E_BOMB_TYPE.Pierce;break;case l.E_UPGRADE_VALUE_1.max_speed:this.speedUpdateMax+=r.value2;break;case l.E_UPGRADE_VALUE_1.rubber_bomb:}}},e.SPEED_DEFAULT=300,e.MAX_HEALTH=2,e.BOMB_MAX_UPGRADE=7,e.FIRE_MAX_UPGRADE=7,e.SPEED_MAX_UPGRADE=7,e.SPEED_PER_UPGRADE=15,e.ACTIVE_GAME_MODE=s.GameMode.ClassicBattleRoyale,e}();o.default=d,cc._RF.pop()},{"../GameModeDataBase":"GameModeDataBase","../GameObjects/Bomb":"Bomb","../TypeDefs":"TypeDefs","../UI/GameUI/GameUI":"GameUI","./CharacterUpgradesMgr":"CharacterUpgradesMgr","./PlayerController":"PlayerController","./PlayerSkinMgr":"PlayerSkinMgr"}],PlayerInfoTag:[function(e,t,o){"use strict";cc._RF.push(t,"d5b67E9mzFC775WiejoEEfJ","PlayerInfoTag");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/MapManager"),s=e("../UI/MapUI/MapUI"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNode=null,t.par=null,t.backgroundNode=null,t.flagSprite=null,t.nameLabel=null,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this._originBgPos=this.backgroundNode.position,this._originFlagPos=this.flagSprite.node.position,this._originNamePos=this.nameLabel.node.position;var t=i.default.inst.UINode.getComponent(s.default);t?(this.backgroundNode.parent=t.playerInfoTag_BgNode,this.flagSprite.node.parent=t.playerInfoTag_FlagNode,this.nameLabel.node.parent=t.playerInfoTag_NameNode):cc.log("No mapUI!"),this.playerNode.on(cc.Node.EventType.POSITION_CHANGED,function(){e.onPlayerPosChanged(e.playerNode.position)}),this.playerNode.on("PlayerDead",function(){e.onPlayerDead()})},t.prototype.onDestroy=function(){var e;null===(e=this.playerNode)||void 0===e||e.off(cc.Node.EventType.POSITION_CHANGED),this.backgroundNode.destroy(),this.flagSprite.node.destroy(),this.nameLabel.node.destroy()},t.prototype.onPlayerPosChanged=function(e){var t=e.add(this.par.position);this.backgroundNode.position=t.add(this._originBgPos),this.flagSprite.node.position=t.add(this._originFlagPos),this.nameLabel.node.position=t.add(this._originNamePos),this.backgroundNode.zIndex=this.flagSprite.node.zIndex=this.nameLabel.node.zIndex=-e.y},t.prototype.onPlayerDead=function(){this.destroy()},a([u(cc.Node)],t.prototype,"playerNode",void 0),a([u(cc.Node)],t.prototype,"par",void 0),a([u(cc.Node)],t.prototype,"backgroundNode",void 0),a([u(cc.Sprite)],t.prototype,"flagSprite",void 0),a([u(cc.Label)],t.prototype,"nameLabel",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Maps/MapManager":"MapManager","../UI/MapUI/MapUI":"MapUI"}],PlayerMagnetCircle:[function(e,t,o){"use strict";cc._RF.push(t,"f75e8m+VZpK35Iy2uWyuKgY","PlayerMagnetCircle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Game"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNode=null,t.cirCleCollider=null,t}return r(t,e),t.prototype.onLoad=function(){this.cirCleCollider.radius=i.default.inst.playerParameters.magnetCircleRadius},a([l(cc.Node)],t.prototype,"playerNode",void 0),a([l(cc.CircleCollider)],t.prototype,"cirCleCollider",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Game":"Game"}],PlayerParameters:[function(e,t,o){"use strict";cc._RF.push(t,"8a1d5abta9MuLjUOjMjW169","PlayerParameters");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../TuningData"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forwardSpeed_Flying=100,t.forwardSpeed_Running=75,t.forwardSpeed_Landing_TreadmillForward=150,t.forwardSpeed_Landing_TreadmillBackward=30,t.forwardSpeed_Turbo=800,t.turboTime=.5,t.forwardSpeed_Falling=75,t.gravity=100,t.maxVerticalSpeed=1e3,t.baseThrust=2e3,t.maxFallSpeed=200,t.magnetCircleRadius=300,t.magnetTime=5,t.shieldBoosterTime=5,t.verticalVelocityBounce=50,t.bounceBurn_ExtraGravityMultiplier=3,t.bounceBurn_ExtraGravityTimeSec=.5,t.percentSlowDownWhenStomped=.5,t.timeSlowDownWhenStomped=.5,t.timeInvincibleWhenTurboDone=2,t}return r(t,e),t.prototype.start=function(){this.updateParamsFromTuningData()},t.prototype.updateParamsFromTuningData=function(){i.default.inst.getGameParameters()},t.prototype.update=function(){},a([l],t.prototype,"forwardSpeed_Flying",void 0),a([l],t.prototype,"forwardSpeed_Running",void 0),a([l],t.prototype,"forwardSpeed_Landing_TreadmillForward",void 0),a([l],t.prototype,"forwardSpeed_Landing_TreadmillBackward",void 0),a([l],t.prototype,"forwardSpeed_Turbo",void 0),a([l],t.prototype,"turboTime",void 0),a([l],t.prototype,"forwardSpeed_Falling",void 0),a([l],t.prototype,"gravity",void 0),a([l],t.prototype,"maxVerticalSpeed",void 0),a([l],t.prototype,"baseThrust",void 0),a([l],t.prototype,"maxFallSpeed",void 0),a([l],t.prototype,"magnetCircleRadius",void 0),a([l],t.prototype,"magnetTime",void 0),a([l],t.prototype,"shieldBoosterTime",void 0),a([l],t.prototype,"verticalVelocityBounce",void 0),a([l],t.prototype,"bounceBurn_ExtraGravityMultiplier",void 0),a([l],t.prototype,"bounceBurn_ExtraGravityTimeSec",void 0),a([l],t.prototype,"percentSlowDownWhenStomped",void 0),a([l],t.prototype,"timeSlowDownWhenStomped",void 0),a([l],t.prototype,"timeInvincibleWhenTurboDone",void 0),a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../TuningData":"TuningData"}],PlayerSkinMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2631eTtZg1FUqDCJJikiEbS","PlayerSkinMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NanoGameCore/Services/Inventory/Inventory"),r=e("../UserInfo"),a=e("../Utils/ConstConfig"),i=function(){function e(){this._heroes=[],this._curHero="",this._heroesUpgrade={},this._heroes=r.UserInfo.playerSkinData.heroes,this._curHero=r.UserInfo.playerSkinData.curHero}return Object.defineProperty(e,"heroSkinLocalizedNameMap",{get:function(){return e._heroSkinLocalizedNameMap||(e._heroSkinLocalizedNameMap=new Map([[a.ConstConfig.INVENTORY.ITEM_ID.AURORA,"ASB_CHARA_AURORA"],[a.ConstConfig.INVENTORY.ITEM_ID.EZIO,"ASB_CHARA_EZIO"],[a.ConstConfig.INVENTORY.ITEM_ID.NOMAD,"ASB_CHARA_NOMAD"],[a.ConstConfig.INVENTORY.ITEM_ID.FENYX,"ASB_CHARA_FENYX"],[a.ConstConfig.INVENTORY.ITEM_ID.GRANDMA,"ASB_CHARA_GRANNY"],[a.ConstConfig.INVENTORY.ITEM_ID.PANDA,"ASB_CHARA_PANDA"],[a.ConstConfig.INVENTORY.ITEM_ID.RAYMAN,"ASB_CHARA_RAYMAN"],[a.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,"ASB_CHARA_FISHER"],[a.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,"ASB_CHARA_PRINCE"],[a.ConstConfig.INVENTORY.ITEM_ID.RABBID,"ASB_CHARA_RABBID"],[a.ConstConfig.INVENTORY.ITEM_ID.VAAS,"ASB_CHARA_VAAS"],[a.ConstConfig.INVENTORY.ITEM_ID.WRENCH,"ASB_CHARA_WRENCH"],[a.ConstConfig.INVENTORY.ITEM_ID.ANGEL,"ASB_CHARA_ANGEL"],[a.ConstConfig.INVENTORY.ITEM_ID.ANTON,"ASB_CHARA_ANTON"],[a.ConstConfig.INVENTORY.ITEM_ID.APOLLYON,"ASB_CHARA_APOLLYON"],[a.ConstConfig.INVENTORY.ITEM_ID.ASH,"ASB_CHARA_ASH"],[a.ConstConfig.INVENTORY.ITEM_ID.BUD,"ASB_CHARA_BUD"],[a.ConstConfig.INVENTORY.ITEM_ID.BAYEK,"ASB_CHARA_BAYEK"],[a.ConstConfig.INVENTORY.ITEM_ID.BODVAR,"ASB_CHARA_BODVAR"],[a.ConstConfig.INVENTORY.ITEM_ID.EIVOR,"ASB_CHARA_EIVOR"],[a.ConstConfig.INVENTORY.ITEM_ID.JADE,"ASB_CHARA_JADE"],[a.ConstConfig.INVENTORY.ITEM_ID.RABBIDHUNGRYSHARK,"ASB_CHARA_RABBIDSHARK"],[a.ConstConfig.INVENTORY.ITEM_ID.KNOX,"ASB_CHARA_KNOX"],[a.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER,"ASB_CHARA_PUNKRIDER"]])),e._heroSkinLocalizedNameMap},enumerable:!1,configurable:!0}),Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),e.prototype.unlockHero=function(t,o){var a;void 0===o&&(o=!1),this._heroes.includes(t)||(e.listHeroes.includes(t)?(this._heroes.push(t),r.UserInfo.playerSkinData=this.getPlayerSkinData(),o&&(null===(a=n.NgcInventory.inst)||void 0===a||a.addItem(t,1,function(e){e&&cc.error(e)}))):cc.error("Hero "+t+" is not FOUND"))},e.prototype.getPlayerSkinData=function(){return{heroes:this._heroes,curHero:this._curHero}},e.prototype.getUnlockedHeroes=function(){return this._heroes},e.prototype.setPlayerSkinData=function(e){this._heroes=e.heroes,this._curHero=e.curHero,r.UserInfo.playerSkinData=this.getPlayerSkinData()},e.prototype.setCurHero=function(t){this._heroes.includes(t)?(this._curHero=t,r.UserInfo.playerSkinData=this.getPlayerSkinData()):e.listHeroes.includes(t)?cc.error("Hero "+t+" is not UNLOCK"):cc.error("Hero "+t+" is not FOUND")},e.prototype.getCurHero=function(){return this._curHero||(this._heroes.length>0?this._curHero=this._heroes[0]:(this.unlockHero(a.ConstConfig.INVENTORY.ITEM_ID.EZIO,!0),this.setCurHero(a.ConstConfig.INVENTORY.ITEM_ID.EZIO),cc.error("getCurHero not FOUND"))),this._curHero},e.getSkinLocalizedName=function(t){return e.heroSkinLocalizedNameMap.get(t)},Object.defineProperty(e,"listHeroes",{get:function(){return e._listHeroes||(e._listHeroes=[a.ConstConfig.INVENTORY.ITEM_ID.AURORA,a.ConstConfig.INVENTORY.ITEM_ID.EZIO,a.ConstConfig.INVENTORY.ITEM_ID.FENYX,a.ConstConfig.INVENTORY.ITEM_ID.NOMAD,a.ConstConfig.INVENTORY.ITEM_ID.PANDA,a.ConstConfig.INVENTORY.ITEM_ID.RABBID,a.ConstConfig.INVENTORY.ITEM_ID.RAYMAN,a.ConstConfig.INVENTORY.ITEM_ID.SAM_FISHER,a.ConstConfig.INVENTORY.ITEM_ID.THE_PRINCE,a.ConstConfig.INVENTORY.ITEM_ID.VAAS,a.ConstConfig.INVENTORY.ITEM_ID.WRENCH,a.ConstConfig.INVENTORY.ITEM_ID.GRANDMA,a.ConstConfig.INVENTORY.ITEM_ID.ANGEL,a.ConstConfig.INVENTORY.ITEM_ID.ANTON,a.ConstConfig.INVENTORY.ITEM_ID.APOLLYON,a.ConstConfig.INVENTORY.ITEM_ID.ASH,a.ConstConfig.INVENTORY.ITEM_ID.BUD,a.ConstConfig.INVENTORY.ITEM_ID.BAYEK,a.ConstConfig.INVENTORY.ITEM_ID.BODVAR,a.ConstConfig.INVENTORY.ITEM_ID.EIVOR,a.ConstConfig.INVENTORY.ITEM_ID.JADE,a.ConstConfig.INVENTORY.ITEM_ID.RABBIDHUNGRYSHARK,a.ConstConfig.INVENTORY.ITEM_ID.KNOX,a.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER]),e._listHeroes},enumerable:!1,configurable:!0}),e.prototype.setHeroUpgradeSlot=function(e,t){this._heroesUpgrade[e]=t},e.prototype.getHeroUpgradeSlot=function(e){return this._heroesUpgrade[e]||0},e.UNLOCK_ALL_HEROES=!1,e._heroSkinLocalizedNameMap=void 0,e._inst=null,e._listHeroes=void 0,e}();o.default=i,cc._RF.pop()},{"../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],PlayerWinVFXHandler:[function(e,t,o){"use strict";cc._RF.push(t,"7f025fiYRpGkoLxLFHCRlUA","PlayerWinVFXHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=e("../../NanoGameCore/Core/Utils"),c=cc._decorator,l=c.ccclass;c.property,function(e){e[e.init=0]="init",e[e.idle=1]="idle"}(i||(i={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._animation=null,t._initAnimName="",t._idleAnimName="",t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this._animation=this.node.getComponent(cc.Animation),this._animation&&(this._initAnimName=this._animation.getClips()[i.init].name,this._idleAnimName=this._animation.getClips()[i.idle].name)},t.prototype.setToTargetPos=function(e){var t=s.Utils.getWorldPos(e);t.addSelf(o.POSITION_OFFSET),s.Utils.setWorldPos(this.node,t)},t.prototype.playInitAnim=function(){this._animation.play(this._initAnimName),this._animation.once(cc.Animation.EventType.FINISHED,this.playIdleAnim,this)},t.prototype.playIdleAnim=function(){this._animation.play(this._idleAnimName)},t.POSITION_OFFSET=cc.v2(-11,-2),o=a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils"}],PoolNodesManager:[function(e,t,o){"use strict";cc._RF.push(t,"07155dP/pZGRJGjvpnDzLQQ","PoolNodesManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.PoolNodeId=void 0;var c,l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.ItemLeaderBoard=0]="ItemLeaderBoard",e[e.Star=1]="Star",e[e.Magnet=2]="Magnet",e[e.Turbo=3]="Turbo",e[e.Shield=4]="Shield",e[e.Missile=5]="Missile"})(c=o.PoolNodeId||(o.PoolNodeId={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemsLeaderboard=null,t.itemLeaderboardPrefab=null,t.star=null,t.starPrefab=null,t.magnet=null,t.magnetPrefab=null,t.turbo=null,t.turboPrefab=null,t.missile=null,t.missilePrefab=null,t.shield=null,t.shieldPrefab=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){return i(this,void 0,void 0,function(){var e,t;return s(this,function(){for(o.inst=this,this.star=new cc.NodePool,e=0;e<2;e++)(t=cc.instantiate(this.starPrefab)).parent=this.node,this.star.put(t);for(this.magnet=new cc.NodePool,e=0;e<2;e++)(t=cc.instantiate(this.magnetPrefab)).parent=this.node,this.magnet.put(t);for(this.turbo=new cc.NodePool,e=0;e<2;e++)(t=cc.instantiate(this.turboPrefab)).parent=this.node,this.turbo.put(t);for(this.missile=new cc.NodePool,e=0;e<2;e++)(t=cc.instantiate(this.missilePrefab)).parent=this.node,this.missile.put(t);for(this.shield=new cc.NodePool,e=0;e<2;e++)(t=cc.instantiate(this.shieldPrefab)).parent=this.node,this.shield.put(t);for(this.itemsLeaderboard=new cc.NodePool,e=0;e<32;e++)(t=cc.instantiate(this.itemLeaderboardPrefab)).parent=this.node,this.itemsLeaderboard.put(t);return[2]})})},t.prototype.getNodeFromPool=function(e){var t=null;switch(e){case c.ItemLeaderBoard:null==(t=this.itemsLeaderboard.get())&&(t=cc.instantiate(this.itemLeaderboardPrefab));break;case c.Star:null==(t=this.star.get())&&(t=cc.instantiate(this.starPrefab));break;case c.Magnet:null==(t=this.magnet.get())&&(t=cc.instantiate(this.magnetPrefab));break;case c.Turbo:null==(t=this.turbo.get())&&(t=cc.instantiate(this.turboPrefab));break;case c.Missile:null==(t=this.missile.get())&&(t=cc.instantiate(this.missilePrefab));break;case c.Shield:null==(t=this.shield.get())&&(t=cc.instantiate(this.shieldPrefab))}return t},t.prototype.putNodeToPool=function(e,t){var o=null;switch(e){case c.ItemLeaderBoard:o=this.itemsLeaderboard;break;case c.Star:o=this.star;break;case c.Turbo:o=this.turbo;break;case c.Magnet:o=this.magnet;break;case c.Shield:o=this.shield;break;case c.Missile:o=this.missile;break;default:o=new cc.NodePool}o.put(t)},t.inst=null,a([p(cc.Prefab)],t.prototype,"itemLeaderboardPrefab",void 0),a([p(cc.Prefab)],t.prototype,"starPrefab",void 0),a([p(cc.Prefab)],t.prototype,"magnetPrefab",void 0),a([p(cc.Prefab)],t.prototype,"turboPrefab",void 0),a([p(cc.Prefab)],t.prototype,"missilePrefab",void 0),a([p(cc.Prefab)],t.prototype,"shieldPrefab",void 0),o=a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{}],PopInPopOutAnim:[function(e,t,o){"use strict";cc._RF.push(t,"4a2f0ALXMFLvKWt37iZPux8","PopInPopOutAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeToSmall=0,t.timeToBig=0,t.timeToColor=0,t.lastColor=cc.Color.WHITE,t.scaleBig=0,t.scaleSmall=0,t._tween1=null,t._tween2=null,t._defaultScale=0,t._defaultColor=cc.Color.WHITE,t._curTimeToSmall=0,t._curTimeToBig=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this._defaultScale=this.node.scale,this._defaultColor=this.node.color,this._curTimeToBig=this.timeToBig,this._curTimeToSmall=this.timeToSmall,this._tween2=(new cc.Tween).to(this.timeToColor,{color:this.lastColor})},t.prototype.onEnable=function(){this.easingAnim(),this._tween2.clone(this.node).start()},t.prototype.easingAnim=function(){var e=this;this._tween1=cc.tween(this.node).to(this._curTimeToSmall,{scale:this.scaleSmall}).to(this._curTimeToBig,{scale:this.scaleBig}).call(function(){e._curTimeToSmall=e.easeInExpo(e._curTimeToSmall),e._curTimeToBig=e.easeInExpo(e._curTimeToBig),e.easingAnim()}).start()},t.prototype.easeInExpo=function(e){return Math.max(e*o.EASE_IN_TIME_POP,o.MIN_TIME_POP)},t.prototype.onDisable=function(){this._tween1.stop(),this._tween2.stop(),this.node.color=this._defaultColor,this.node.scale=this._defaultScale,this._curTimeToBig=this.timeToBig,this._curTimeToSmall=this.timeToSmall},t.MIN_TIME_POP=.07,t.EASE_IN_TIME_POP=.8,a([c(cc.Float)],t.prototype,"timeToSmall",void 0),a([c(cc.Float)],t.prototype,"timeToBig",void 0),a([c(cc.Float)],t.prototype,"timeToColor",void 0),a([c(cc.Color)],t.prototype,"lastColor",void 0),a([c(cc.Float)],t.prototype,"scaleBig",void 0),a([c(cc.Float)],t.prototype,"scaleSmall",void 0),o=a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PowerCollecting:[function(e,t,o){"use strict";cc._RF.push(t,"77551qN8dVBsJR7AeYgqTON","PowerCollecting");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../GameObjects/PowerUpItem"),s=e("../Maps/MapManager"),c=e("./PlayerController"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemStatus=i.E_POWER_STATUS.PowerUp,t.content=null,t.itemSprite=null,t.amount=null,t}return r(t,e),t.getANode=function(e){var t=c.PlayerController.pwUpCollectingPool,o=c.PlayerController.localPlayer.pwUpCollectingPrefab;switch(e){case i.E_POWER_STATUS.Negative:t=c.PlayerController.pwNegCollectingPool,o=c.PlayerController.localPlayer.pwNegCollectingPrefab;break;case i.E_POWER_STATUS.PowerUp:t=c.PlayerController.pwUpCollectingPool,o=c.PlayerController.localPlayer.pwUpCollectingPrefab;break;case i.E_POWER_STATUS.PowerDown:t=c.PlayerController.pwDownCollectingPool,o=c.PlayerController.localPlayer.pwDownCollectingPrefab}return t.size()>0?t.get():cc.instantiate(o)},t.prototype.start=function(){},t.prototype.update=function(){this.node.setPosition(c.PlayerController.localPlayer.node.position)},t.prototype.onDestroy=function(){},t.prototype.startAnim=function(){var e=this.content.getComponent(cc.Animation);e.once("finished",this.onAnimFinished,this),e.play()},t.prototype.onAnimFinished=function(){switch(this.itemStatus){case i.E_POWER_STATUS.Negative:c.PlayerController.pwNegCollectingPool.put(this.node);break;case i.E_POWER_STATUS.PowerUp:c.PlayerController.pwUpCollectingPool.put(this.node);break;case i.E_POWER_STATUS.PowerDown:c.PlayerController.pwDownCollectingPool.put(this.node)}},t.prototype.setup=function(e,t,o){this.node.parent=s.default.inst.UINode,this.itemSprite.spriteFrame=t,0===o.length?this.amount.node.active=!1:(this.amount.node.active=!0,this.amount.string=o)},a([p({type:cc.Enum(i.E_POWER_STATUS)})],t.prototype,"itemStatus",void 0),a([p(cc.Node)],t.prototype,"content",void 0),a([p(cc.Sprite)],t.prototype,"itemSprite",void 0),a([p(cc.Label)],t.prototype,"amount",void 0),a([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../GameObjects/PowerUpItem":"PowerUpItem","../Maps/MapManager":"MapManager","./PlayerController":"PlayerController"}],PowerUpItem:[function(e,t,o){"use strict";cc._RF.push(t,"7fc11fIcT9I4YJOgU6SqNw9","PowerUpItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_POWER_STATUS=void 0;var i,s,c=e("../Game"),l=e("../Maps/MapManager"),u=e("./Bomb"),p=e("./GameObjectBase"),d=e("../Tracking/TrackingManager"),f=e("../Maps/ThemeManager"),h=e("../GameSpriteFrameMgr"),g=e("../../NanoGameCore/Core/Utils"),m=e("../Player/PlayerData"),y=e("../Network/ImprovedNetClient"),_=e("../../NanoGameCore/Services/Platform/Platform"),v=e("./GameObjMgr");(function(e){e[e.None=0]="None",e[e.Jumping=1]="Jumping"})(i||(i={})),function(e){e[e.PowerUp=0]="PowerUp",e[e.PowerDown=1]="PowerDown",e[e.Negative=2]="Negative"}(s=o.E_POWER_STATUS||(o.E_POWER_STATUS={}));var S=cc._decorator,b=S.ccclass,N=S.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconSprite=null,t._startPos=cc.v2(),t._endPos=cc.v2(),t._targetVec=cc.v2(),t._distanceJump=0,t._curAngle=0,t._curCurveVec=cc.v2(),t._fixAngle=0,t._curJumpSpeed=1e3,t.curState=i.None,t.collectRequested=!1,t}var o;return r(t,e),o=t,t.prototype.init=function(e,t){this.objectType=e,this.posInMap=t,this.iconSprite.spriteFrame=h.default.inst.powerUpSFHandler.getSpriteFrameByObjectType(this.objectType),c.default.inst.powerUpItems.push(this),l.default.inst.addObjectToMapBoardComponents(this)},t.prototype.getID=function(){return this.posInMap.x+":"+this.posInMap.y+":"+this.objectType},t.findItemByID=function(e){for(var t=c.default.inst.powerUpItems.length,o=0;o<t;o++){var n=c.default.inst.powerUpItems[o];if(n.getID()==e)return n}return null},t.prototype.requestCollect=function(e){_.NgcPlatform.isOfflineMode()&&(this.collect(e),l.default.inst.setBoard(this.posInMap.x,this.posInMap.y,p.GameObjectType.Empty,!0)),this.collectRequested||(y.default.inst.claimUniqueItem(e.netID,this.getID(),"",l.default.posToUnit32(this.posInMap.x,this.posInMap.y)),this.collectRequested=!0)},t.prototype.collect=function(e){var t,n=o.getItemStatusByType(this.objectType),r="";switch(this.objectType){case p.GameObjectType.PU_Bomb_Range:e.data.rangeOfBomb=Math.min(e.data.rangeOfBomb+1,e.data.maxFireRange),e.isLocalHuman()&&e.data.totalFireUpCollected++,r+=e.data.rangeOfBomb+"/"+e.data.maxFireRange;break;case p.GameObjectType.PD_Bomb_Range:e.data.rangeOfBomb=Math.max(e.data.rangeOfBomb-1,1),r+=e.data.rangeOfBomb+"/"+e.data.maxFireRange;break;case p.GameObjectType.PU_Bomb_Number:e.data.curBombNum=Math.min(e.data.curBombNum+1,e.data.maxBomb),e.isLocalHuman()&&e.data.totalBombUpCollected++,r+=e.data.curBombNum+"/"+e.data.maxBomb;break;case p.GameObjectType.PD_Bomb_Number:e.data.curBombNum=Math.max(e.data.curBombNum-1,1),r+=e.data.curBombNum+"/"+e.data.maxBomb;break;case p.GameObjectType.PU_Mov_Speed:e.data.amountSpeedUpdate+=1,e.isLocalHuman()&&e.data.totalSpeedUpCollected++,r+=e.data.amountSpeedUpdate+"/"+e.data.maxFireRange;break;case p.GameObjectType.PD_Mov_Speed:e.data.amountSpeedUpdate-=1,r+=e.data.amountSpeedUpdate+"/"+e.data.maxFireRange;break;case p.GameObjectType.PU_Heart:e.data.curHp++,e.isLocalHuman()&&e.data.totalHeartCollected++,r+=e.data.curHp+"/"+e.data.maxHP;break;case p.GameObjectType.PU_Bomb_Pierce:e.isLocalHuman()&&e.data.totalBombPierceCollected++,e.data.curBombType=u.E_BOMB_TYPE.Pierce;break;case p.GameObjectType.NEG_Slow:e.data.curNegativeEffect=m.E_NEGATIVE_EFFECT.Slow;break;case p.GameObjectType.PU_Bomb_Pass:e.data.passBomb=!0;break;case p.GameObjectType.PU_Bomb_Danger:e.data.curBombType=u.E_BOMB_TYPE.Dangerous;break;case p.GameObjectType.PU_Bomb_Power:e.isLocalHuman()&&e.data.totalBombPowerCollected++,e.data.curBombType=u.E_BOMB_TYPE.Power}if(e.isLocalHuman())switch(e.playPowerVFX(this.iconSprite.spriteFrame,r,n),n){case s.PowerUp:null===(t=d.default.inst)||void 0===t||t.onPlayerCollect(this.objectType,c.default.inst.totalTime,c.default.gameMode,f.default.inst.curThemeType,c.default.inst.getNumHumanPlayersAlive(),e.data,c.default.inst.fps);break;case s.PowerDown:case s.Negative:}this.release()},t.prototype.collideWithExplosion=function(){this.release()},t.prototype.release=function(){cc.js.array.remove(c.default.inst.powerUpItems,this),l.default.inst.removeComponentInMapBoard(this),this.ownTween&&this.ownTween.stop(),v.GameObjMgr.inst.putPowerUpItem(this)},t.prototype.update=function(e){this.curState===i.Jumping&&this.workState_Jump(e)},t.prototype.initJump=function(e,t){this.node.setPosition(e),this._startPos=e,this._endPos=t,this._targetVec=this._endPos.sub(this._startPos).normalize(),this._distanceJump=this._endPos.sub(this._startPos).mag(),this.curState=i.Jumping,this._fixAngle=Math.random()>.5?o.ANGLE_TO_JUMP:-o.ANGLE_TO_JUMP,this._curAngle=this._fixAngle,this._curJumpSpeed=this.objectType===p.GameObjectType.NEG_Slow?o.NEG_JUMPING_SPEED:o.JUMPING_SPEED},t.prototype.workState_Jump=function(e){var t=this.node.getPosition();this._curCurveVec=this._targetVec.rotate(cc.misc.degreesToRadians(this._curAngle)).normalize();var o=this._targetVec.add(this._curCurveVec).normalize().mul(e*this._curJumpSpeed);this.node.setPosition(cc.v2(t.add(o))),this.node.getPosition().sub(this._startPos).mag()>=this._distanceJump?(this.node.setPosition(this._endPos),this.curState=i.None,l.default.inst.setBoard(this.posInMap.x,this.posInMap.y,this.objectType,!0)):this._curAngle=cc.misc.lerp(this._fixAngle,-this._fixAngle,this.node.getPosition().sub(this._startPos).mag()/this._distanceJump)},t.instantiate=function(){var e=v.GameObjMgr.inst.getPowerUpItem();e||(e=cc.instantiate(v.GameObjMgr.inst.powerUpItemPrefab));var t=e.getComponent(o);t.collectRequested=!1,t.renderComponent.node.color=cc.Color.WHITE;var n=e.getComponent(p.default);return n&&(n.renderComponent.enabled||(n.renderComponent.enabled=!0)),e},t.getItemTypeByWeight=function(e){var t=0;for(var n in o.powerUpWeightObjects)if(e<=(t+=o.powerUpWeightObjects[n]))return o.keyToType(n);for(var n in o.powerDownWeightObjects)if(e<=(t+=o.powerDownWeightObjects[n]))return o.keyToType(n);for(var n in o.negativeWeightObjects)if(e<=(t+=o.negativeWeightObjects[n]))return o.keyToType(n);return p.GameObjectType.Unknown},t.keyToType=function(e){switch(e){case"FIRE_UP_WEIGHT":return p.GameObjectType.PU_Bomb_Range;case"BOMB_UP_WEIGHT":return p.GameObjectType.PU_Bomb_Number;case"SPEED_UP_WEIGHT":return p.GameObjectType.PU_Mov_Speed;case"HEART_WEIGHT":return p.GameObjectType.PU_Heart;case"BOMB_PIERCE_WEIGHT":return p.GameObjectType.PU_Bomb_Pierce;case"FIRE_DOWN_WEIGHT":case"BOMB_DOWN_WEIGHT":return p.GameObjectType.PD_Bomb_Range;case"SPEED_DOWN_WEIGHT":return p.GameObjectType.PD_Mov_Speed;case"SLOW_NEGATIVE_WEIGHT":return p.GameObjectType.NEG_Slow;case"PASS_BOMB_WEIGHT":return p.GameObjectType.PU_Bomb_Pass;case"DANGEROUS_BOMB_WEIGHT":return p.GameObjectType.PU_Bomb_Danger;case"POWER_BOMB_WEIGHT":return p.GameObjectType.PU_Bomb_Power;default:return p.GameObjectType.Unknown}},t.getTotalNegativeWeight=function(){if(void 0===o._totalNegativeWeight)for(var e in o._totalNegativeWeight=0,o.negativeWeightObjects)o._totalNegativeWeight+=o.negativeWeightObjects[e];return o._totalNegativeWeight},t.getTotalPowerDOWNWeight=function(){if(void 0===o._totalPowerDOWNWeight)for(var e in o._totalPowerDOWNWeight=0,o.powerDownWeightObjects)o._totalPowerDOWNWeight+=o.powerDownWeightObjects[e];return o._totalPowerDOWNWeight},t.getTotalPowerUPWeight=function(){if(void 0===o._totalPowerUPWeight)for(var e in o._totalPowerUPWeight=0,this.powerUpWeightObjects)o._totalPowerUPWeight+=o.powerUpWeightObjects[e];return o._totalPowerUPWeight},t.getTotalWeight=function(){return o.getTotalPowerUPWeight()+o.getTotalPowerDOWNWeight()+o.getTotalNegativeWeight()},t.getItemStatusByType=function(e){switch(e){case p.GameObjectType.PU_Bomb_Number:case p.GameObjectType.PU_Bomb_Range:case p.GameObjectType.PU_Mov_Speed:case p.GameObjectType.PU_Heart:case p.GameObjectType.PU_Bomb_Pass:case p.GameObjectType.PU_Bomb_Danger:case p.GameObjectType.PU_Bomb_Power:case p.GameObjectType.PU_Bomb_Pierce:return s.PowerUp;case p.GameObjectType.PD_Bomb_Number:case p.GameObjectType.PD_Bomb_Range:case p.GameObjectType.PD_Mov_Speed:return s.PowerDown;case p.GameObjectType.NEG_Slow:return s.Negative;default:return cc.error("Type: "+g.Utils.enumToString(p.GameObjectType,e)+" not FOUND"),null}},t.ANGLE_TO_JUMP=45,t.JUMPING_SPEED=1e3,t.NEG_JUMPING_SPEED=500,t.FIRE_UP_WEIGHT=50,t.FIRE_DOWN_WEIGHT=3,t.BOMB_UP_WEIGHT=50,t.BOMB_DOWN_WEIGHT=3,t.SPEED_UP_WEIGHT=50,t.SPEED_DOWN_WEIGHT=3,t.HEART_WEIGHT=15,t.BOMB_PIERCE_WEIGHT=2,t.SLOW_NEGATIVE_WEIGHT=5,t.PASS_BOMB_WEIGHT=2,t.DANGEROUS_BOMB_WEIGHT=2,t.POWER_BOMB_WEIGHT=2,t.powerUpWeightObjects={FIRE_UP_WEIGHT:o.FIRE_UP_WEIGHT,BOMB_UP_WEIGHT:o.BOMB_UP_WEIGHT,SPEED_UP_WEIGHT:o.SPEED_UP_WEIGHT,HEART_WEIGHT:o.HEART_WEIGHT,BOMB_PIERCE_WEIGHT:o.BOMB_PIERCE_WEIGHT,PASS_BOMB_WEIGHT:o.PASS_BOMB_WEIGHT,DANGEROUS_BOMB_WEIGHT:o.DANGEROUS_BOMB_WEIGHT,POWER_BOMB_WEIGHT:o.POWER_BOMB_WEIGHT},t.powerDownWeightObjects={FIRE_DOWN_WEIGHT:o.FIRE_DOWN_WEIGHT,BOMB_DOWN_WEIGHT:o.BOMB_DOWN_WEIGHT,SPEED_DOWN_WEIGHT:o.SPEED_DOWN_WEIGHT},t.negativeWeightObjects={SLOW_NEGATIVE_WEIGHT:o.SLOW_NEGATIVE_WEIGHT},t._totalPowerUPWeight=void 0,t._totalPowerDOWNWeight=void 0,t._totalNegativeWeight=void 0,a([N(cc.Sprite)],t.prototype,"iconSprite",void 0),o=a([b],t)}(p.default);o.default=P,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Services/Platform/Platform":"Platform","../Game":"Game","../GameSpriteFrameMgr":"GameSpriteFrameMgr","../Maps/MapManager":"MapManager","../Maps/ThemeManager":"ThemeManager","../Network/ImprovedNetClient":"ImprovedNetClient","../Player/PlayerData":"PlayerData","../Tracking/TrackingManager":"TrackingManager","./Bomb":"Bomb","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],PowerUpSFHandler:[function(e,t,o){"use strict";cc._RF.push(t,"7339fW4BkdLpJDWJJPWLjxs","PowerUpSFHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../NanoGameCore/Core/Utils"),s=e("../GameObjects/GameObjectBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombPU_SF=null,t.rangePU_SF=null,t.rangePD_SF=null,t.bombPD_SF=null,t.speedPU_SF=null,t.speedPD_SF=null,t.heartPU_SF=null,t.bombPiercePU_SF=null,t.slowNegative_SF=null,t.passBombPU_SF=null,t.dangerousBombPU_SF=null,t.powerBombPU_SF=null,t.slowNEGPlayerStatus_SF=null,t}return r(t,e),t.prototype.onLoad=function(){this._powerUpSpriteFrameMap=new Map([[s.GameObjectType.PU_Bomb_Number,this.bombPU_SF],[s.GameObjectType.PD_Bomb_Number,this.bombPD_SF],[s.GameObjectType.PU_Bomb_Range,this.rangePU_SF],[s.GameObjectType.PD_Bomb_Range,this.rangePD_SF],[s.GameObjectType.PU_Mov_Speed,this.speedPU_SF],[s.GameObjectType.PD_Mov_Speed,this.speedPD_SF],[s.GameObjectType.PU_Heart,this.heartPU_SF],[s.GameObjectType.PU_Bomb_Pierce,this.bombPiercePU_SF],[s.GameObjectType.NEG_Slow,this.slowNegative_SF],[s.GameObjectType.PU_Bomb_Pass,this.passBombPU_SF],[s.GameObjectType.PU_Bomb_Danger,this.dangerousBombPU_SF],[s.GameObjectType.PU_Bomb_Power,this.powerBombPU_SF]])},t.prototype.getSpriteFrameByObjectType=function(e){return this._powerUpSpriteFrameMap.get(e)},t.prototype.getPlayerNEGStatusSF=function(e){switch(e){case s.GameObjectType.NEG_Slow:return this.slowNEGPlayerStatus_SF;default:return cc.error("Not power Negative. Type = "+i.Utils.enumToString(s.GameObjectType,e)),null}},a([u(cc.SpriteFrame)],t.prototype,"bombPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"rangePU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"rangePD_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"bombPD_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"speedPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"speedPD_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"heartPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"bombPiercePU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"slowNegative_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"passBombPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"dangerousBombPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"powerBombPU_SF",void 0),a([u(cc.SpriteFrame)],t.prototype,"slowNEGPlayerStatus_SF",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../GameObjects/GameObjectBase":"GameObjectBase"}],PrizeScreen:[function(e,t,o){"use strict";cc._RF.push(t,"ced1dn9EyNAroRLsQt/cXKe","PrizeScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.PrizeScreen=void 0;var c=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog"),u=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),d=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),f=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),h=cc._decorator,g=h.ccclass,m=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){cc.log("Init prize screen!")},t.prototype.onClickTicketPlusBtn=function(){return i(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return cc.sys.isMobile,e=l.default.RealPrizeBuyTicketDialog_Mobile,[4,c.NgcDialogManager.createDialog(l.default.dialogType,e,l.default.bundleName)];case 1:return t=n.sent(),console.log("onClickTicketPlusBtn dialog ",t),(o=t.getComponent(l.default)).init(),o.show(),[2]}})})},t.prototype.onActivate=function(){var e;p.NgcMain.setAppContext(p.AppContext.PrizeScreen),null===(e=u.default.inst)||void 0===e||e.hide(),f.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament")},t.prototype.onResume=function(){p.NgcMain.setAppContext(p.AppContext.PrizeScreen),f.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament")},a([g],t)}(d.default));o.PrizeScreen=m,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog":"RealPrizeBuyTicketDialog","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry"}],ProfanityCheck:[function(e,t,o){"use strict";cc._RF.push(t,"d0fabxR2mlBzpCGN+1bdOgD","ProfanityCheck");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcProfanityCheck=o.ProfanityResult=void 0;var a=e("../../../globals"),i=e("../../Services/Platform/Platform"),s=e("./BuildConfig");o.ProfanityResult=function(){};var c=function(){function e(){}return e.check=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return s.NgcBuildConfig.offlineMode?[2,new Promise(function(t){t({status:a.default.OfflineMode.ProfanityCheck(e),reasons:""})})]:(t={status:null,reasons:null},[4,i.NgcPlatform.inst.profanityCheck(e).then(function(e){t=e})]);case 1:return o.sent(),[2,t]}})})},e.checkURL="https://profanity.nano.ubisoft.com/filter/",e}();o.NgcProfanityCheck=c,cc._RF.pop()},{"../../../globals":"globals","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig"}],ProgressLookingPlayers:[function(e,t,o){"use strict";cc._RF.push(t,"a3c05qGALNMSJ/athPPgSH8","ProgressLookingPlayers");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../NanoGameCore/Core/Delegate"),s=e("../../NanoGameCore/Services/Platform/Platform"),c=e("../Game"),l=e("../Network/ImprovedNetClient"),u=e("../UI/GameUI/CountDown"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelPlayersNum=null,t.nodeProgress=null,t.progressBar=null,t.fireNodeForProgress=null,t.fire=null,t.progressStart=0,t.progressEnd=0,t.animExplosion=null,t.countDown=null,t.onPlayerAddedCB=function(e){this.labelPlayersNum.string=e.toString()}.bind(t),t.delegateOnLookingPlayersFinished=new i.default,t._timeFiringFuseTail=.5,t._progressDone=!1,t}return r(t,e),t.prototype.onLoad=function(){s.NgcPlatform.isOfflineMode()&&(this.nodeProgress.opacity=0),this.progressBar.progress=this.progressStart,this.labelPlayersNum.string="1",this.updateFire(),c.default.inst.delegateOnAPlayerAdded.add(this.onPlayerAddedCB)},t.prototype.start=function(){this.appearAnim(),this.fire.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Loop},t.prototype.update=function(e){if(!(null==c.default.inst.timeStartGame||c.default.inst.timeStartGame<0||this._progressDone)){var t=s.NgcPlatform.isOfflineMode()?Date.now():l.default.inst.getCurrentGameServerTime(),o=(c.default.inst.timeStartGame-t)/1e3;if(o<=0)this.onProgressDone();else{o<=3&&!this.countDown.countDownStarted&&this.countDown.countDown(3);var n=o-this._timeFiringFuseTail;if(n>0){n<e&&(n=e);var r=(this.progressEnd-this.progressBar.progress)*e/n;this.progressBar.progress+=r,this.updateFire()}}}},t.prototype.onDestroy=function(){c.default.inst.delegateOnAPlayerAdded.del(this.onPlayerAddedCB)},t.prototype.appearAnim=function(){this.node.opacity=0,this.node.scale=0;var e=cc.tween().to(.5,{opacity:255},{easing:"sineOut"}),t=cc.tween().to(.5,{scale:1},{easing:"sineOut"});cc.tween(this.node).parallel(e,t).start()},t.prototype.updateFire=function(){var e=360*(1-this.progressBar.progress);this.fireNodeForProgress.angle=e,this.fire.angle=-e},t.prototype.onProgressDone=function(){var e=this;this._progressDone=!0,this.animExplosion.once(cc.Animation.EventType.FINISHED,function(){e.destroy()}),this.animExplosion.play(),this.delegateOnLookingPlayersFinished.call()},a([f(cc.Label)],t.prototype,"labelPlayersNum",void 0),a([f(cc.Node)],t.prototype,"nodeProgress",void 0),a([f(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([f(cc.Node)],t.prototype,"fireNodeForProgress",void 0),a([f(cc.Node)],t.prototype,"fire",void 0),a([f(cc.Float)],t.prototype,"progressStart",void 0),a([f(cc.Float)],t.prototype,"progressEnd",void 0),a([f(cc.Animation)],t.prototype,"animExplosion",void 0),a([f(u.default)],t.prototype,"countDown",void 0),a([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../NanoGameCore/Core/Delegate":"Delegate","../../NanoGameCore/Services/Platform/Platform":"Platform","../Game":"Game","../Network/ImprovedNetClient":"ImprovedNetClient","../UI/GameUI/CountDown":"CountDown"}],Protocol:[function(e,t,o){"use strict";cc._RF.push(t,"df9bbMK59pKaq4NF53z17jI","Protocol"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetMessageType=o.Protocol=void 0;var n=e("protobufjs/minimal");(function(e){e[e.SERVER_INIT=0]="SERVER_INIT",e[e.JOIN_ROOM=1]="JOIN_ROOM",e[e.LEAVE_ROOM=2]="LEAVE_ROOM",e[e.PING=3]="PING",e[e.NGC_BROADCAST=4]="NGC_BROADCAST",e[e.OP_END=20]="OP_END"})(o.Protocol||(o.Protocol={})),o.GetMessageType=function(e){var t=-1;try{var o=n.Reader.create(e);o.uint32()>>>3==1&&(t=o.int32())}catch(r){console.log("Get message type error:",r)}return t},cc._RF.pop()},{"protobufjs/minimal":101}],PunkRiderPreviewVfxHandler:[function(e,t,o){"use strict";cc._RF.push(t,"391d5+xPD9AnZGKj9aBtsr1","PunkRiderPreviewVfxHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../NanoGameCore/Core/Utils"),s=e("../../../../Scripts/Utils/ConstConfig"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headBone=null,t}return r(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.update=function(){this._setSmokePos()},t.prototype.enableOrDisableSmokeBasedOnSkin=function(e){e===s.ConstConfig.INVENTORY.ITEM_ID.PUNKRIDER?this.node.active=!0:this.node.active=!1},t.prototype._setSmokePos=function(){i.Utils.setWorldPos(this.node,i.Utils.getWorldPos(this.headBone))},a([u(cc.Node)],t.prototype,"headBone",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../NanoGameCore/Core/Utils":"Utils","../../../../Scripts/Utils/ConstConfig":"ConstConfig"}],PunkRiderVfxHandler:[function(e,t,o){"use strict";cc._RF.push(t,"45e6eN3fmVHD6OVIRiK+hD2","PunkRiderVfxHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../NanoGameCore/Core/Utils"),s=e("../../../../Scripts/Player/PlayerController"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.smokeRight=null,t.smokeLeft=null,t.headBone=null,t.playerAnims=null,t._curPlayerAnimDirection=s.PlayerAnimDirection.Front,t}return r(t,e),t.prototype.update=function(){"Win"===this.playerAnims[2].curAnim?this._setSmokeVfxPos():this.node.setPosition(0,55),this._curPlayerAnimDirection===s.PlayerAnimDirection.Left?"Run"===this.playerAnims[0].curAnim?this.smokeRight.setPosition(43,-5):this.smokeRight.setPosition(31,0):this._curPlayerAnimDirection===s.PlayerAnimDirection.Right&&("Run"===this.playerAnims[1].curAnim?this.smokeLeft.setPosition(-43,-5):this.smokeLeft.setPosition(-32.5,0))},t.prototype.onLoad=function(){this._setSmokeVfxPos()},t.prototype.setSmokeVfxPosByAnimDirection=function(e){switch(this._reset(),this._curPlayerAnimDirection=e,e){case s.PlayerAnimDirection.Left:this.smokeLeft.active=!1,this.smokeRight.setPosition(31,0);break;case s.PlayerAnimDirection.Right:this.smokeRight.active=!1,this.smokeLeft.setPosition(-32.5,0);break;case s.PlayerAnimDirection.Front:this.smokeRight.setPosition(-12,0),this.smokeLeft.setPosition(15.5,0);break;case s.PlayerAnimDirection.Back:this.smokeLeft.setPosition(15.5,15),this.smokeRight.setPosition(-12,15)}},t.prototype.enableSmokeVfx=function(){this.node.active=!0},t.prototype.disableSmokeVfx=function(){this.node.active=!1},t.prototype._setSmokeVfxPos=function(){i.Utils.setWorldPos(this.node,i.Utils.getWorldPos(this.headBone))},t.prototype._reset=function(){this.smokeLeft.position.y=0,this.smokeRight.position.y=0,this.smokeLeft.active=!0,this.smokeRight.active=!0},a([u(cc.Node)],t.prototype,"smokeRight",void 0),a([u(cc.Node)],t.prototype,"smokeLeft",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../NanoGameCore/Core/Utils":"Utils","../../../../Scripts/Player/PlayerController":"PlayerController"}],PurchaseMethodAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"73f3dRB7b5LKIslBpzveGWU","PurchaseMethodAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodAchievement=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../Services/Inventory/Inventory"),l=e("./ItemStatus"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.titleOutLine=null,t._scalingAnim=null,t}return r(t,e),t.prototype.onLoad=function(){this._scalingAnim=cc.tween(this.title.node).repeatForever(cc.tween(this.title.node).to(.3,{scale:1.2}).to(.3,{scale:1}))},t.prototype.getType=function(){return s.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=this;c.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,a=n.count<r?n.count:r;t.title.string=a+"/"+r+" m",r==a?(t.title.node.color=new cc.Color(255,228,89),t.titleOutLine.enabled=!0,t._scalingAnim.start()):(t.title.node.color=new cc.Color(0,0,0),t.titleOutLine.enabled=!1,t._scalingAnim.stop())}})},a([d(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([d(cc.LabelOutline)],t.prototype,"titleOutLine",void 0),a([p],t)}(l.NgcItemStatus);o.NgcPurchaseMethodAchievement=f,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./ItemStatus":"ItemStatus"}],PurchaseMethodComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"e32cceV1cBAeolSiqcvW1lZ","PurchaseMethodComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodComingSoon=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"8e07fSs7XVCBKvMHMW+/lXI","PurchaseMethodCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCrownRoad=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"80bea1dzH1C0bloixOGRs1P","PurchaseMethodCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCurrency=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString(),this.price.node.opacity=s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<e.price.value?100:255,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency},a([p(cc.Label)],t.prototype,"price",void 0),a([p(cc.Node)],t.prototype,"coinIcon",void 0),a([p(cc.Node)],t.prototype,"startIcon",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./ItemStatus":"ItemStatus"}],PurchaseMethodDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"61ee01U7tpCu6+BrJ+rTOGs","PurchaseMethodDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodDailyReward=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodIAP:[function(e,t,o){"use strict";cc._RF.push(t,"5dd20iYYFpKwbcYRBUPbMUv","PurchaseMethodIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodIAP=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},a([u(cc.Label)],t.prototype,"price",void 0),a([l],t)}(s.NgcItemStatus);o.NgcPurchaseMethodIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"b9765dsFn1JSbBlOkBqxVvV","PurchaseMethodLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodLoginSocial=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},a([p(i.NgcLabelLocalized)],t.prototype,"title",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"346e4hPb0FMmKMxH5NrhNbi","PurchaseMethodWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodWatchAds=void 0;var i=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../Services/Inventory/Inventory"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return i.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(e){var t=this;s.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=n.count,a=e.price.value;t.steps.string=r+"/"+a}})},a([p(cc.Label)],t.prototype,"steps",void 0),a([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodWatchAds=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./ItemStatus":"ItemStatus"}],QRCodeGenerator:[function(e,t,o){"use strict";cc._RF.push(t,"ddda4YkunpGJowM2cva277W","QRCodeGenerator"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcQRCodeGenerator=void 0;var n=e("qrcode"),r=function(){function e(){}return e.getInst=function(){e.inst||(e.inst=new e)},e.genQRCodeDataURL=function(e,t){n.toDataURL(e,function(e,o){e?t(e,null):(console.log("@Party QRCode DataURI",o),t(null,o))})},e.genBase64ToSprite=function(e,t){var o=new Image;o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var n=new cc.SpriteFrame(e);t(n)}.bind(this),o.src=e},e.genQRCode=function(t,o){e.genQRCodeDataURL(t,function(t,n){t?cc.log("@party Can't create DATA URI",t):e.genBase64ToSprite(n,o)})},e}();o.NgcQRCodeGenerator=r,cc._RF.pop()},{qrcode:112}],ReScaleObject:[function(e,t,o){"use strict";cc._RF.push(t,"c8a59rkjftOq6a2gWZ4bnAz","ReScaleObject");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaulScreenSize=cc.v2(640,960),t.listObjects=[],t.currentScale=1,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.currentScale=this.node.scale,this.reScale(),cc.view.setResizeCallback(function(){e.reScale()})},t.prototype.reScale=function(){var e=this,t=Math.min(1,cc.winSize.width/cc.winSize.height*this.defaulScreenSize.y/this.defaulScreenSize.x);this.listObjects.forEach(function(o){o&&(o.scale*=t/e.currentScale)}),this.currentScale=t},a([c(cc.Vec2)],t.prototype,"defaulScreenSize",void 0),a([c(cc.Node)],t.prototype,"listObjects",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],RealPrizeBuyTicketDialog:[function(e,t,o){"use strict";cc._RF.push(t,"13d5dFsxQlB8bjE/YMat4Tr","RealPrizeBuyTicketDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Core/Utils"),s=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),c=e("./RealPrizeDialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._remainingTimeGetTicket=0,t._durationTimeGetTicket=0,t._startTimeCountdown=0,t._endTimeCountdown=0,t.progressBar=null,t.timeLabel=null,t.buyTicketContainer=null,t._callBackClose=null,t}var o;return r(t,e),o=t,t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this._remainingTimeGetTicket=19e3,this._durationTimeGetTicket=2e4,this._startTimeCountdown=Date.now()-(this._durationTimeGetTicket-this._remainingTimeGetTicket),this._endTimeCountdown=Date.now()+this._remainingTimeGetTicket},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.update=function(){var e=Math.max(0,Math.ceil((this._endTimeCountdown-Date.now())/1e3)),t=i.Utils.secondsToMinutesSeconds(e),o=Math.min(1,(Date.now()-this._startTimeCountdown)/this._durationTimeGetTicket);this.progressBar.progress=o,this.timeLabel.string=t[0]+"m"+t[1]+"s"},t.prototype.onClickBuyTicket=function(){this._showClaimRewardAnimation()},t.prototype._showClaimRewardAnimation=function(){var e=this;this.dialogUsingNode.active=!1,this.bgUsingNode.active=!1,s.default.inst.showRewardAnimation({itemID:"ticket",count:10},function(){setTimeout(function(){e.hide()},200)},!0)},t.RealPrizeBuyTicketDialog_Mobile="RealPrizeBuyTicketDialog_Mobile",t.RealPrizeBuyTicketDialog_PC="RealPrizeBuyTicketDialog_PC",t.dialogType="RealPrizeBuyTicketDialog",t.urlPrefab=cc.sys.isMobile?o.RealPrizeBuyTicketDialog_Mobile:o.RealPrizeBuyTicketDialog_PC,a([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([p(cc.Label)],t.prototype,"timeLabel",void 0),a([p(cc.Node)],t.prototype,"buyTicketContainer",void 0),a([u,d("NGC/RealPrize/RealPrizeBuyTicketDialog")],t)}(c.RealPrizeDialogBase);o.default=f,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","./RealPrizeDialogBase":"RealPrizeDialogBase"}],RealPrizeDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"17e14TiUAJAso3FUF75Vx1v","RealPrizeDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.RealPrizeDialogBase=void 0;var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_realprize",t.enqueStack=[],o=a([c],t)}(i.NgcDialogBase));o.RealPrizeDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],RealPrizeTicketProgressTimer:[function(e,t,o){"use strict";cc._RF.push(t,"103e6riQqNJZIWV8cGCTSkB","RealPrizeTicketProgressTimer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRealPrizeTicketProgressTimer=void 0;var i=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.iconTicketNode=null,t.timerLabel=null,t.glowEffectNode=null,t}return r(t,e),t.prototype.init=function(){this.timerLabel.updateLabelContentManually(0,0,4,30)},t.prototype.hideUIElements=function(){var e=this;this.node.children.forEach(function(t){t!==e.iconTicketNode&&(t.opacity=0)})},a([l(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([l(cc.Node)],t.prototype,"iconTicketNode",void 0),a([l(i.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),a([l(cc.Node)],t.prototype,"glowEffectNode",void 0),a([c],t)}(cc.Component);o.NgcRealPrizeTicketProgressTimer=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],ResizableComponent:[function(e,t,o){"use strict";cc._RF.push(t,"c06c4M2nZRKdqM2wBSMe4jj","ResizableComponent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ResizableComponent=o.BaseSize=void 0;var i=cc._decorator,s=i.ccclass,c=(i.property,function(){});o.BaseSize=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseSize=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Widget),t=this.node.getComponent(cc.Layout),o=this.node.getComponent(cc.Label);this.baseSize={width:this.node.width,height:this.node.height,x:this.node.x,y:this.node.y,leftAlign:e&&e.isAlignLeft?e.left:null,rightAlign:e&&e.isAlignRight?e.right:null,topAlign:e&&e.isAlignTop?e.top:null,bottomAlign:e&&e.isAlignBottom?e.bottom:null,spacingX:t&&t.type==cc.Layout.Type.HORIZONTAL?t.spacingX:null,spacingY:t&&t.type==cc.Layout.Type.VERTICAL?t.spacingY:null,fontSize:!!o&&o.fontSize,lineHeight:!!o&&o.lineHeight,scaleX:this.node.scaleX,scaleY:this.node.scaleY}},t.resizeNode=function(e,t){o.getResizableComponent(e).resize(t)},t.resizeNodeByWidth=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.width;n.resize(r)},t.resizeNodeByHeight=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.height;n.resize(r)},t.getResizableComponent=function(e){var t=e.getComponent(o);return t||(t=e.addComponent(o)),t},t.prototype.resize=function(e){var t=this.baseSize,n=this.node.getComponent(cc.Widget),r=this.node.getComponent(cc.Label),a=this.node.getComponent(cc.Layout),i=this.node.getComponent(sp.Skeleton);if(r||(a&&a.type==cc.Layout.Type.HORIZONTAL||(this.node.width=t.width*e),a&&a.type==cc.Layout.Type.VERTICAL||(this.node.height=t.height*e)),this.node.x=t.x*e,this.node.y=t.y*e,n&&this.resizeWidgetComponent(n,e),r&&(r.fontSize=t.fontSize*e,r.lineHeight=t.lineHeight*e),this.node.getComponent(cc.Sprite),t.designWidth&&t.designHeight){if(this.node.width!=t.designWidth*e){var s=t.designWidth*e/t.width;this.node.width=t.width*s,this.node.height=t.height*s}this.node.height>t.designHeight*e&&(s=t.designHeight*e/t.height,this.node.width=t.width*s,this.node.height=t.height*s)}a&&(t.spacingX&&(a.spacingX=t.spacingX*e),t.spacingY&&(a.spacingY=t.spacingY*e),a.updateLayout()),i&&(this.node.scaleX=t.scaleX*e,this.node.scaleY=t.scaleY*e),this.node.children.length>0&&this.node.children.forEach(function(t){return t.active&&o.resizeNode(t,e)})},t.prototype.resizeWidgetComponent=function(e,t){var o=this.baseSize;e.isAlignLeft&&(e.left=o.leftAlign*t),e.isAlignRight&&(e.right=o.rightAlign*t),e.isAlignTop&&(e.top=o.topAlign*t),e.isAlignBottom&&(e.bottom=o.bottomAlign*t),e.updateAlignment()},o=a([s],t)}(cc.Component);o.ResizableComponent=l,cc._RF.pop()},{}],ResultDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e0253Z+qVRNXbmPxXdBsaFz","ResultDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../NanoGameCore/Services/Inventory/Inventory"),l=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),u=e("../../UserInfo"),p=e("../../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI"),d=e("../../Game"),f=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),h=e("../../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager"),g=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),m=e("../../../NanoGameCore/Core/Utils"),y=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),_=e("../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager"),v=cc._decorator,S=v.ccclass,b=v.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resultLabel=null,t.rankLabel=null,t.killLabel=null,t.rewardGainLabel=null,t.rewardEffect=null,t._autoPlayAnim=!1,t._autoClose=!1,t}var o;return r(t,e),o=t,t.prototype.init=function(t){var o;e.prototype.init.call(this,function(){t&&t(),(d.default.inst.gameResult.isVictory||d.default.inst.getNumPlayersAlive()<=1)&&(d.default.inst.setState(d.GameState.GameOver),setTimeout(function(){var e;null===(e=h.NgcSpectatorManager.inst)||void 0===e||e.stopSpectator()},300))});var n=d.default.inst.gameResult,r=d.default.inst.gameReward,a=n.isVictory?"ASB_WIN":"ASB_LOSE";this.resultLabel.setLocalizedText(a),this.rankLabel.string="#"+n.playerRank.toString().padStart(2,"0"),this.killLabel.string=n.playerKill.toString(),this.rewardGainLabel.string=r.crown.count.toString(),this.rewardEffect.enabled=!1,this._autoPlayAnim=!0,this._autoClose=!0,u.UserInfo.curCrown+=r.crown.count,f.NgcBuildConfig.offlineMode||_.NgcGameModeManager.inst.addGameModePoint(r.crown.count),l.NgcLeaderboard.inst&&l.NgcLeaderboard.inst.uploadScore(u.UserInfo.curCrown),c.NgcInventory.inst.addItemList([r.crown],function(e){e&&cc.error("err: "+e)});var i=null===(o=this.dimBackground)||void 0===o?void 0:o.getComponent(cc.Widget);i&&(i.top=-f.NgcBuildConfig.services.Ads.bannerHeight)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.show=function(){this.checkShowBanner(s.NgcPointcuts.bannerResult),this._autoPlayAnim&&this.playRewardEffect(),e.prototype.show.call(this),g.NgcTelemetry.inst.LogEvent_EnterScreen(m.Utils.enumToString(y.AppContext,y.AppContext.Results))},t.prototype.playRewardEffect=function(e){var t=this;this.rewardEffect.enabled=!0,this.rewardEffect.setAnimation(0,o.COIN_ANIMATION_SIMPLE,!1),this.rewardEffect.setCompleteListener(function(){e&&e(),t.rewardEffect.setCompleteListener(null)})},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:}},t.urlPrefab="GameResources/Prefabs/Dialogs/VideoRewardDialog/ResultDialog",t.bundleName="resources",t.dialogType="ResultDialog",t.COIN_ANIMATION_SIMPLE="Coins_simple",t.COIN_ANIMATION_DOUBLE="Coins_double",a([b(i.NgcLabelLocalized)],t.prototype,"resultLabel",void 0),a([b(i.NgcLabelLocalized)],t.prototype,"rankLabel",void 0),a([b(i.NgcLabelLocalized)],t.prototype,"killLabel",void 0),a([b(i.NgcLabelLocalized)],t.prototype,"rewardGainLabel",void 0),a([b(sp.Skeleton)],t.prototype,"rewardEffect",void 0),o=a([S],t)}(p.NgcResultUI);o.default=N,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/SpectatorManager":"SpectatorManager","../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager":"GameModeManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Game":"Game","../../UserInfo":"UserInfo"}],ResultUI:[function(e,t,o){"use strict";cc._RF.push(t,"e3382SDYsVBzbezfadeDbqf","ResultUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcResultUI=void 0;var i=e("../../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.animationNumber=null,t._callBackWhenClose=null,t}return r(t,e),t.prototype.init=function(e){this._callBackWhenClose=e},t.prototype.show=function(){var t=this;setTimeout(function(){t.hide()},3e3),e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,this._callBackWhenClose)},t.urlPrefab="Result",t.bundleName="03_end_game_flow",t.dialogType="NgcResultUI",a([l(cc.Label)],t.prototype,"score",void 0),a([l(cc.Label)],t.prototype,"animationNumber",void 0),a([c],t)}(i.NgcDialogBase);o.NgcResultUI=u,cc._RF.pop()},{"../../../Dialogs/Script/DialogBase":"DialogBase"}],ReviveDialog:[function(e,t,o){"use strict";cc._RF.push(t,"602f1RyJYxJjaIregvzu5tM","ReviveDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../../globals"),l=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),u=e("../../../../GameFramework/Scripts/BuildConfig"),p=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),d=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),f=e("../../../../Services/Inventory/Inventory"),h=e("../../../../Services/Telemetry/Telemetry"),g=e("../../../Dialogs/Script/DialogBase"),m=e("../../../Dialogs/Script/NgcDialogManager"),y=e("./NgcRevive"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.acceptBtnNode=null,t.goldenAdsBg=null,t.normalAdsBg=null,t.adsIconNode=null,t.flashAnimNode=null,t.reviveAdsInfoLabelNode=null,t.rejectBtnNode=null,t.titleNode=null,t.reviveCenterNode=null,t.heartIcon=null,t.freeTagNode=null,t.noAdsPriceLayout=null,t._acceptReviveFunc=null,t._refuseReviveFunc=null,t._offerCountDownTime=5,t._isShow=!1,t._curCountDownTime=0,t}return r(t,e),t.prototype.onLoad=function(){this.acceptBtnNode.opacity=0,this.acceptBtnNode.active=!1,this.titleNode.opacity=0},t.prototype.init=function(e,t,o){var n=this;this.checkShowBanner(l.NgcPointcuts.bannerRevive),h.NgcTelemetry.inst.LogEvent_EnterScreen("Revive");var r=this.rejectBtnNode.getComponentInChildren(p.NgcLabelLocalized),a=d.NgcLocalizedManager.t(r.textKey).text;r.textKey=null,r.string=a.toLocaleUpperCase(),this._acceptReviveFunc=e,this._refuseReviveFunc=t,this.setCountDownTime(o),this._isShow=!0,u.NgcBuildConfig.offlineMode?this.adsIconNode.active=!1:(this.rejectBtnNode.active=!1,this.rejectBtnNode.opacity=0),this.refreshClaimButton(),this.titleNode.scale=0,this.titleNode.getComponent(cc.Widget).enabled=!1,this.acceptBtnNode.opacity=0;var i=this.reviveCenterNode.getChildByName("CircleBar"),s=i.scale;i.scale=0,i.opacity=0;var c=this.reviveCenterNode.getChildByName("name");c.opacity=0,cc.tween(i).to(.35,{scale:1.5,opacity:255},{easing:"quadOut"}).to(.1,{scale:s},{easing:"quadOut"}).call(function(){n.heartIcon.pulsingEffect=!0}).start(),cc.tween(c).delay(.5).to(.25,{opacity:255}).start(),cc.tween(this.titleNode).delay(.5).to(.25,{opacity:255,scale:1}).start(),cc.tween(this.acceptBtnNode).call(function(){return n.acceptBtnNode.active=!0}).delay(.5).to(.25,{opacity:255}).call(function(){n.acceptBtnNode.pulsingEffect=!0,cc.tween(n.rejectBtnNode).call(function(){return n.rejectBtnNode.active=!0}).delay(3).to(.25,{opacity:255}).start()}).start(),this.show()},t.prototype.refreshClaimButton=function(){if(y.default.inst.isFreeOfferAvailable())this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.freeTagNode.active=!0;else if(y.default.inst.notUsingAdToRevive()){this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.acceptBtnNode.getChildByName("label_Claim").getComponent(p.NgcLabelLocalized).horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.noAdsPriceLayout.active=!0;var e=this.noAdsPriceLayout.getComponentInChildren(cc.Sprite),t=this.noAdsPriceLayout.getComponentInChildren(cc.Label),o=f.NgcInventory.inst.objectTypeTable[y.REVIVE_NO_ADS_CURRENCY].picture;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){e.spriteFrame=o}),t.string=""+y.REVIVE_NO_ADS_CURRENCY_NUMBER,this.rejectBtnNode.opacity=255,cc.Tween.stopAllByTarget(this.rejectBtnNode)}},t.prototype.setCountDownTime=function(e){void 0===e&&(e=5),this._curCountDownTime=this._offerCountDownTime=e},t.prototype.acceptButtonOnClick=function(){return i(this,void 0,void 0,function(){var e,t,o,n,r,a,i=this;return s(this,function(s){switch(s.label){case 0:return e=function(){l.default.inst&&l.default.inst.hide(),i._acceptReviveFunc&&i._acceptReviveFunc(),h.NgcTelemetry.inst.LogEvent_PlayerRevived(),i.hide()},window.isAdsBlocked?[4,m.NgcDialogManager.showAdsReminderMsg(this.acceptBtnNode)]:[3,2];case 1:return s.sent(),[2];case 2:return y.default.inst.isFreeOfferAvailable()?(e(),[2]):y.default.inst.notUsingAdToRevive()?(o=(t=["",0])[0],n=t[1],u.NgcBuildConfig.offlineMode?(r=[c.default.OfflineMode.Config.ReviveCostType,c.default.OfflineMode.Config.ReviveCostPrice],o=r[0],n=r[1]):(a=[y.REVIVE_NO_ADS_CURRENCY,y.REVIVE_NO_ADS_CURRENCY_NUMBER],o=a[0],n=a[1]),f.NgcInventory.inst.getItemCount(o,function(t,r){if(!t&&r){if(r.count>=n)return void f.NgcInventory.inst.consumeItem(o,n,function(){e()});m.NgcDialogManager.showNotEnoughCurrencyMsg(i.acceptBtnNode)}}),[2]):(e(),[2])}})})},t.prototype.refuseButtonOnClick=function(){this._refuseReviveFunc&&this._refuseReviveFunc(),this.hide()},t.prototype.update=function(e){if(this.acceptBtnNode.pulsingEffect&&(this.acceptBtnNode.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this.heartIcon.pulsingEffect&&(this.heartIcon.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this._isShow&&255==this.reviveCenterNode.opacity){if(this._curCountDownTime<=0)return void this.refuseButtonOnClick();this._curCountDownTime-=e,this._curCountDownTime<0&&(this._curCountDownTime=0),this.progressBar.progress=this._curCountDownTime/this._offerCountDownTime}},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:}},t.urlPrefab="ReviveDialog",t.bundleName="02_dialog",t.dialogType="NgcReviveDialog",a([S(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([S(cc.Node)],t.prototype,"acceptBtnNode",void 0),a([S(cc.Node)],t.prototype,"goldenAdsBg",void 0),a([S(cc.Node)],t.prototype,"normalAdsBg",void 0),a([S(cc.Node)],t.prototype,"adsIconNode",void 0),a([S(cc.Node)],t.prototype,"flashAnimNode",void 0),a([S(cc.Node)],t.prototype,"reviveAdsInfoLabelNode",void 0),a([S(cc.Node)],t.prototype,"rejectBtnNode",void 0),a([S(cc.Node)],t.prototype,"titleNode",void 0),a([S(cc.Node)],t.prototype,"reviveCenterNode",void 0),a([S(cc.Node)],t.prototype,"heartIcon",void 0),a([S(cc.Node)],t.prototype,"freeTagNode",void 0),a([S(cc.Node)],t.prototype,"noAdsPriceLayout",void 0),a([v],t)}(g.NgcDialogBase);o.default=b,cc._RF.pop()},{"../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Inventory/Inventory":"Inventory","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NgcRevive":"NgcRevive"}],RewardClaimAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"61396okdyZLJIC8NVJj0S4W","RewardClaimAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRewardClaimAnimation=void 0;var c=e("../../../Services/Inventory/Inventory"),l=e("../../../GameFramework/Scripts/CONSTANTS"),u=e("../../TabBar/Script/TabBarManager"),p=e("../../../GameFramework/Scripts/NgcShopManager"),d=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),f=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),h=e("../../../../Scripts/Player/PlayerSkinMgr"),g=e("../../../../Scripts/Screens/StartScreen/StartMain"),m=cc._decorator,y=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardImageContainer=null,t.light=null,t.rewardImage=null,t.rewardSpine=null,t.quantity=null,t.skeleton=null,t.customTextLabel=null,t}return r(t,e),t.prototype.onLoad=function(){this.rewardSpine.active=!1,this.node.active=!1},t.prototype.loadRewardImage=function(e){return new Promise(function(t,o){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){!e&&n?t(n):e&&o(e)})})},t.prototype.loadRewardSpine=function(e){var t=this;return new Promise(function(o,n){cc.loader.loadRes(e,sp.SkeletonData,function(e,r){!e&&r?(t.skeleton.skeletonData=r,t.skeleton.premultipliedAlpha=!1,o(r)):e&&n(e)})})},t.prototype.showRewardImage=function(e){this.rewardImageContainer.active=!0,this.light.getComponent(cc.Animation).play("light_scale"),this.rewardImage.getComponent(cc.Sprite).spriteFrame=e,this.rewardImage.getComponent(cc.Animation).play("scale_up")},t.prototype.showRewardSpine=function(e,t){this.rewardSpine.active=!0;var o=this.skeleton.skeletonData.skeletonJson.skins[0].name,n=Object.keys(this.skeleton.skeletonData.skeletonJson.animations)[0],r=t||o,a=e||n;this.skeleton.setSkin(r),this.skeleton.setAnimation(0,a,!1)},t.prototype.moveRewardToShopBar=function(){var e=u.NgcTabBarManager.inst.worldPosOfShopTab(),t=this.rewardImage.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(e.x-t.x,e.y-t.y);cc.tween(this.rewardImage).to(.6,{x:this.rewardImage.x+o.x,y:this.rewardImage.y+o.y,scale:.2},{easing:"quartInOut"}).call(function(){return u.NgcTabBarManager.inst.playAnimationShopTabGetItem()}).start()},t.prototype.checkMoveRewardToShopBar=function(e,t,o){var n=this,r=o&&p.NgcShopManager.getInstance().includeItem(e)?700:0;this.moveRewardToShopBar(),setTimeout(function(){n.node.active=!1,t&&t(),h.default.listHeroes.includes(e)&&g.default.inst.onHeroUnlock(e)},r)},t.prototype.setCustomText=function(e){if(null!==e){var t=this.customTextLabel.node;f.NgcLocalizedManager.setTextKey(this.customTextLabel,e),t.active=!0,t.opacity=0,cc.tween(t).to(.25,{opacity:255}).start()}},t.prototype.showClaimRewardAnimation=function(e,t,o){var n;return void 0===t&&(t=function(){}),i(this,void 0,void 0,function(){var r,a,i,u,p,d,f,h,g=this;return s(this,function(s){switch(s.label){case 0:return this.node.active=!0,setTimeout(function(){return g.checkMoveRewardToShopBar(e.itemID,t,o)},1200),this.rewardImageContainer.active=!1,this.rewardSpine.active=!1,r=null===(n=c.NgcInventory.inst.objectTypeTable[e.itemID])||void 0===n?void 0:n.type,e.count>0&&r!==l.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE?(this.quantity.active=!0,this.quantity.getComponent(cc.Label).string="+"+e.count,this.quantity.getComponent(cc.Animation).play("scale_up")):this.quantity.active=!1,c.NgcInventory.inst.objectTypeTable[e.itemID]?(a=c.NgcInventory.inst.objectTypeTable[e.itemID].picture,i=c.NgcInventory.inst.objectTypeTable[e.itemID].rewardAnimation,u=c.NgcInventory.inst.objectTypeTable[e.itemID].rewardAnimationSkin,p=null,d=null,i&&(a=i),u&&(h=u.split(",").map(function(e){return e.trim()}),p=h[0],d=h[1]),a.includes(".png")?(a=a.replace("DailyReward","shop_items"),[4,this.loadRewardImage(a)]):[3,2]):[2];case 1:return(f=s.sent())instanceof cc.SpriteFrame&&this.showRewardImage(f),[3,4];case 2:return a.includes(".json")?[4,this.loadRewardSpine(a)]:[3,4];case 3:s.sent()instanceof sp.SkeletonData&&this.showRewardSpine(p,d),s.label=4;case 4:return[2]}})})},t.prototype.showClaimRewardAnimationForHeroUpgrade=function(e,t){return i(this,void 0,void 0,function(){var o,n=this;return s(this,function(){return o=cc.find("Canvas"),this.node.parent=o,this.node.active=!0,this.rewardImageContainer.active=!1,this.quantity.active=!0,this.quantity.getComponent(cc.Label).string=t,this.quantity.getComponent(cc.Animation).play("scale_up"),this.rewardSpine.active=!1,this.showRewardImage(e),setTimeout(function(){n.node.active=!1},1200),[2]})})},a([_(cc.Node)],t.prototype,"rewardImageContainer",void 0),a([_(cc.Node)],t.prototype,"light",void 0),a([_(cc.Node)],t.prototype,"rewardImage",void 0),a([_(cc.Node)],t.prototype,"rewardSpine",void 0),a([_(cc.Node)],t.prototype,"quantity",void 0),a([_(sp.Skeleton)],t.prototype,"skeleton",void 0),a([_(d.NgcLabelLocalized)],t.prototype,"customTextLabel",void 0),a([y],t)}(cc.Component);o.NgcRewardClaimAnimation=v,cc._RF.pop()},{"../../../../Scripts/Player/PlayerSkinMgr":"PlayerSkinMgr","../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../TabBar/Script/TabBarManager":"TabBarManager"}],RewardDialog:[function(e,t,o){"use strict";cc._RF.push(t,"18dd9FriURKM69yqf3IxzXL","RewardDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),l=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../../NanoGameCore/Services/Ads/Ads"),d=e("../../../NanoGameCore/Services/Inventory/Inventory"),f=e("./ResultDialog"),h=e("../../Game"),g=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),m=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),y=e("../../SoundManager"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoAdsBtn=null,t.iconVideo=null,t.claimNoAdsBtn=null,t.adsLabel=null,t.noAdsLabel=null,t._isAdsAvailable=!1,t._onCloseCB=null,t}var o;return r(t,e),o=t,t.prototype.init=function(e){var t,n=this,r=h.default.inst.gameResult,a=h.default.inst.gameReward;this.rankLabel.string="#"+r.playerRank.toString().padStart(2,"0"),this.killLabel.string=r.playerKill.toString(),this.rewardGainLabel.string=a.coin.count.toString(),this._onCloseCB=e,this.rewardEffect.enabled=!1,this._isAdsAvailable=!window.isAdsBlocked&&u.default.inst.hasAds(p.AdsType.VideoReward),c.NgcBuildConfig.offlineMode||p.NgcAds.inst.isFakeAdsPlatform()?(this.iconVideo.active=!1,this.claimNoAdsBtn.active=!1,m.NgcLocalizedManager.setTextKey(this.adsLabel,"ASB_CLAIM",[""])):this._isAdsAvailable?(m.NgcLocalizedManager.setTextKey(this.adsLabel,"ASB_CLAIM",["x"+o.rewardMultiplier]),this.claimNoAdsBtn.opacity=0,this.claimNoAdsBtn.getComponent(cc.Button).interactable=!1,setTimeout(function(){cc.tween(n.claimNoAdsBtn).to(1,{opacity:255}).call(function(){n.claimNoAdsBtn.getComponent(cc.Button).interactable=!0}).start()},2e3)):(this.iconVideo.opacity=0,m.NgcLocalizedManager.setTextKey(this.adsLabel,"ASB_CLAIM",[""]));var i=null===(t=this.dimBackground)||void 0===t?void 0:t.getComponent(cc.Widget);i&&(i.top=-c.NgcBuildConfig.services.Ads.bannerHeight)},t.prototype.playRewardEffect=function(e){var t=this;this.rewardEffect.enabled=!0,this.rewardEffect.setAnimation(0,f.default.COIN_ANIMATION_SIMPLE,!1),this.rewardEffect.setCompleteListener(function(){e&&e(),t.rewardEffect.setCompleteListener(null)})},t.prototype.show=function(){var e;g.NgcDialogBase.prototype.show.call(this),null===(e=u.default.inst)||void 0===e||e.hide()},t.prototype.claimOnClick=function(e,t){return i(this,void 0,void 0,function(){var e,n,r=this;return s(this,function(){return e=1==t||"true"==t,this.videoAdsBtn.active=!1,this.claimNoAdsBtn.active=!1,n=e?o.rewardMultiplier:1,(!this._isAdsAvailable||c.NgcBuildConfig.offlineMode||p.NgcAds.inst.isFakeAdsPlatform())&&(n=1),new Promise(function(e){if(1==n)e(n);else{var t=h.default.inst.gameReward;u.default.inst.showRewardVideo(u.NgcPointcuts.videoRewardDialog,t.coin.itemID,t.coin.count*n,null,function(t){e(t?n:1)})}}).then(function(e){var t=e,o=h.default.inst.gameReward;o.coin.count*=t,r.rewardGainLabel.string=o.coin.count.toString(),d.NgcInventory.inst.addItemList([o.coin],function(e){e&&cc.error("err: "+e)}),y.SoundManager.inst.playSoundWithClip(y.SoundManager.inst.CollectCoinClip,.7),r.playRewardEffect(function(){r.hide()})}),[2]})})},t.prototype.hide=function(){this._onCloseCB&&this._onCloseCB(),g.NgcDialogBase.prototype.hide.call(this)},t.urlPrefab="GameResources/Prefabs/Dialogs/VideoRewardDialog/RewardDialog",t.bundleName="resources",t.dialogType="RewardDialog",t.rewardMultiplier=2,a([S(cc.Node)],t.prototype,"videoAdsBtn",void 0),a([S(cc.Node)],t.prototype,"iconVideo",void 0),a([S(cc.Node)],t.prototype,"claimNoAdsBtn",void 0),a([S(l.NgcLabelLocalized)],t.prototype,"adsLabel",void 0),a([S(l.NgcLabelLocalized)],t.prototype,"noAdsLabel",void 0),o=a([v],t)}(f.default);o.default=b,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../Game":"Game","../../SoundManager":"SoundManager","./ResultDialog":"ResultDialog"}],RewardItem:[function(e,t,o){"use strict";cc._RF.push(t,"c11de1txXxFA7nX1tbs/q5p","RewardItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRewardItem=void 0;var i=e("../../../../Core/Utils"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),l=e("../../../../Services/Inventory/Inventory"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreBGSpriteframe=null,t.rewardBGSpriteframe=null,t.background=null,t.scoreTitleLabel=null,t.rewardIconSprite=null,t.scoreValueLabel=null,t.glowNode=null,t.lightEffectNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.glowNode||(this.glowNode=this.node.getChildByName("Glow")),this.lightEffectNode||(this.lightEffectNode=this.node.getChildByName("Light"))},t.prototype.rewardLayout=function(){return this.background.node.parent},t.prototype.playFancyAnimation=function(e){var t=this.rewardLayout(),o=this.glowNode;o.scale=0,o.active=!0;var n=this.lightEffectNode;n.scale=0,n.opacity=0,n.active=!0,t.scale=0;var r=this.scoreValueLabel.node;cc.tween(n).to(.5,{scale:1.75,opacity:255}).start(),cc.tween(t).to(.5,{scale:1.5},{easing:"quadInOut"}).delay(5/60).call(function(){cc.tween(n).to(.1,{scale:1,opacity:0},{easing:"backOut"}).start(),e&&e(),cc.tween(t).to(.1,{scale:.75},{easing:"quadOut"}).call(function(){cc.tween(t).to(.1,{scale:1},{easing:"quadInOut"}).start(),cc.tween(r).to(.1,{opacity:255}).start(),cc.tween(o).parallel(cc.tween().to(.5,{scale:1},{easing:"quadOut"}),cc.tween().delay(.3).to(.5,{opacity:0},{easing:"quadOut"})).start()}).start()}).start()},t.prototype.initScore=function(e,t,o,n,r){var a=this;if(void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=""),this.background.spriteFrame=this.scoreBGSpriteframe,this.background.type=cc.Sprite.Type.SLICED,this.background.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.rewardIconSprite.node.active=!1,c.NgcLocalizedManager.setTextKey(this.scoreTitleLabel,e),this.background.node.width=this.scoreTitleLabel.node.getContentSize().width+16,n){var s=this.scoreValueLabel.node.y,l=i.Utils.tweenNumber(0,t,1.25,function(e,n){n?(cc.tween(a.scoreValueLabel.node).to(.25,{scale:1}).start(),a.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString(),a.scoreValueLabel.node.y=s):(cc.director.getTotalFrames()%5==0&&(a.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString()),a.scoreValueLabel.node.y=s+Math.abs(7*Math.sin(Date.now()*Math.PI/160)))});return this.scheduleOnce(function(){l.start()},.5),l}return this.scoreValueLabel.string=(o?t>0?"+":"-":r)+Math.abs(t).toString(),null},t.prototype.initReward=function(e,t,o,n){var r=this;void 0===o&&(o=!1),void 0===n&&(n=1),this.background.spriteFrame=this.rewardBGSpriteframe,this.scoreTitleLabel.node.active=!1,this.scoreValueLabel.string=(o?t>=0?"+":"-":"")+Math.abs(t).toString();var a="default_sprite";try{a=l.NgcInventory.inst.objectTypeTable[e].picture}catch(i){console.warn(i)}cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){e||(r.rewardIconSprite.spriteFrame=t)}),this.rewardIconSprite.node.scale=n},a([d(cc.SpriteFrame)],t.prototype,"scoreBGSpriteframe",void 0),a([d(cc.SpriteFrame)],t.prototype,"rewardBGSpriteframe",void 0),a([d(cc.Sprite)],t.prototype,"background",void 0),a([d(s.NgcLabelLocalized)],t.prototype,"scoreTitleLabel",void 0),a([d(cc.Sprite)],t.prototype,"rewardIconSprite",void 0),a([d(s.NgcLabelLocalized)],t.prototype,"scoreValueLabel",void 0),a([d(cc.Node)],t.prototype,"glowNode",void 0),a([d(cc.Node)],t.prototype,"lightEffectNode",void 0),a([p],t)}(cc.Component);o.NgcRewardItem=f,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Inventory/Inventory":"Inventory"}],RewardUI:[function(e,t,o){"use strict";cc._RF.push(t,"e6a24w/gDVEz76+MwY1ayO5","RewardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEndGameRewardDialog=void 0;var l=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),f=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),h=e("../../../GameFramework/Scripts/NgcScreenManager"),g=e("../../../SDK/Nano/NanoSrv"),m=e("../../../Services/Inventory/Inventory"),y=e("../../../Services/Telemetry/Telemetry"),_=e("../../CrownRoad/Script/CrownRoadManager"),v=e("../../Dialogs/Script/DialogBase"),S=e("../../Dialogs/Script/MessageDialog/MessageDialog"),b=e("../../Dialogs/Script/NgcDialogManager"),N=e("../../RealPrize/Script/RealPrizeTicketProgressTimer"),P=e("../Result/Script/RewardItem"),I=cc._decorator,C=I.ccclass,w=I.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardLayoutNode=null,t.claimButton=null,t.claimAdsButton=null,t.retryButton=null,t.backToMainMenuButton=null,t.ticketUINode=null,t.ticketDailyLimitNode=null,t.rewardItemPrefab=null,t.confettiLeft=null,t.confettiRight=null,t._callBackWhenClose=null,t._retryFlowCallback=null,t.claimButtonClicked=!1,t._rewardAnimationQueues=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.claimButton.getComponent(cc.Button).interactable=!1,this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,this.claimButton.opacity=0,this.claimAdsButton.opacity=0,this.retryButton.opacity=0,this.backToMainMenuButton.opacity=0,this.ticketUINode.opacity=0,this.ticketUINode.scale=0},t.prototype.showConfetti=function(){var e=this;cc.tween(this.node).delay(.2).call(function(){e.confettiLeft.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()}),e.confettiRight.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).start()},t.prototype.claimButtonDelayTime=function(){return 1},t.prototype.backToMainMenuDelayTime=function(){return 1},t.prototype.init=function(e){var t=this;this.addRewardItems(),this.scheduleOnce(function(){cc.tween(t.ticketUINode).to(.25,{scale:1,opacity:255}).call(function(){t.checkShowTicketUI()}).start()},1),this.updateClaimAdsButton(),this._callBackWhenClose=e,o.canShowRetryButton()&&(this.claimAdsButton.active=!1,this.claimButton.active=!1,this.retryButton.active=!0,this.backToMainMenuButton.active=!0)},t.prototype.showButtons=function(){var e=this;o.canShowRetryButton()?cc.tween(this.retryButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.retryButton.getComponent(cc.Button).interactable=!0,cc.tween(e.backToMainMenuButton).delay(e.backToMainMenuDelayTime()).to(.5,{opacity:255}).call(function(){e.backToMainMenuButton.getComponent(cc.Button).interactable=!0}).start()}).start():(this.claimAdsButton.pulsingEffect=!0,cc.tween(this.claimAdsButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.claimAdsButton.getComponent(cc.Button).interactable=!0,cc.tween(e.claimButton).delay(e.claimButtonDelayTime()).to(.5,{opacity:255}).call(function(){e.claimButton.getComponent(cc.Button).interactable=!0}).start()}).start())},t.prototype.addRewardItems=function(){var e=this;o._endGameRewards.forEach(function(t){e.addRewardItem(t.itemID,t.count,!0)})},t.prototype.showTicketUI=function(){return!0},t.prototype.canShowDailyLimitMessage=function(){return!0},t.prototype.checkShowTicketUI=function(){var e=this;if(this.showTicketUI()){this.ticketUINode.getComponent(N.NgcRealPrizeTicketProgressTimer).init();var t=this.ticketUINode.getComponent(N.NgcRealPrizeTicketProgressTimer).glowEffectNode,n=this.ticketUINode.getComponent(N.NgcRealPrizeTicketProgressTimer).iconTicketNode;cc.tween(t).to(.2,{opacity:255,scale:.6}).call(function(){cc.tween(t).to(.2,{opacity:0,scale:.4}).start()}).start(),n.getComponent(cc.Widget).enabled=!1,cc.tween(n).to(.2,{scale:2.5}).call(function(){}).start(),this.scheduleOnce(function(){var t=n.position;o.addReward({itemID:"ticket",count:5});var r=e.addRewardItem("ticket",5,!1);r.node.scale=0,r.node.opacity=0,cc.tween(r.node).to(.5,{scale:1},{easing:"backOut"}).call(function(){e.rewardLayoutNode.getComponent(cc.Layout).enabled=!1,r.node.scale=0,r.node.opacity=255}).start(),e.rewardLayoutNode.getComponent(cc.Layout).updateLayout(),e.scheduleOnce(function(){r.node.scale=1,r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(e.showConfetti.bind(e))},.55),u.Utils.tweenNodeToNode(n,r.rewardIconSprite.node,cc.v2(-8,32),{scale:.75},.65,"quartInOut",!0).call(function(){cc.tween(n).to(.25,{opacity:0}).call(function(){n.x=t.x,n.y=t.y+50,n.scale=1.5,e.canShowDailyLimitMessage()?cc.tween(e.ticketUINode).to(.25,{opacity:0}).start():cc.tween(n).to(.25,{y:t.y,opacity:255},{easing:"quartInOut"}).start()}).start(),e.showButtons()}).start()},.4)}else this.ticketUINode.opacity=0,this.showButtons()},t.prototype.showDailyLimitMessage=function(){if(this.canShowDailyLimitMessage()){this.ticketUINode.getComponent(N.NgcRealPrizeTicketProgressTimer).hideUIElements(),this.ticketDailyLimitNode.active=!0,this.ticketDailyLimitNode.opacity=0,this.ticketDailyLimitNode.getComponent(cc.Widget).updateAlignment(),this.ticketDailyLimitNode.getComponent(cc.Widget).enabled=!1;var e=this.ticketDailyLimitNode.y;this.ticketDailyLimitNode.y-=20,cc.tween(this.ticketDailyLimitNode).to(.5,{opacity:255,y:e},{easing:"quartInOut"}).start()}},t.prototype.onClaimAdsButtonClick=function(){var e=this;this.claimReward(!0,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onClaimButtonClick=function(){var e=this;this.claimReward(!1,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onRetryButtonClick=function(){var e=this;o.retryFlowTriggered=!0,this.claimReward(!1,!0,function(){e.hide(e.onAfterClaim.bind(e,o.retryFlowCallback),!1)})},t.prototype.onAfterClaim=function(e){var t=this;h.default.inst.startFadeOut(.25,function(){t._callBackWhenClose&&t._callBackWhenClose(),e&&e(),setTimeout(function(){h.default.inst.startFadeIn(.25)},250),t.node.destroy()})},t.prototype.hideUIBeforeRewardAnimation=function(){var e=this;cc.Tween.stopAllByTarget(this.backToMainMenuButton),cc.Tween.stopAllByTarget(this.claimButton),this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.claimButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,cc.tween(this.ticketUINode).to(.25,{opacity:0}).start(),cc.tween(this.rewardLayoutNode).to(.25,{opacity:0}).start(),cc.tween(this.claimButton).to(.25,{opacity:0}).call(function(){e.claimButton.active=!1}).start(),cc.tween(this.claimAdsButton).to(.25,{opacity:0}).start(),cc.tween(this.retryButton).to(.25,{opacity:0}).start(),cc.tween(this.backToMainMenuButton).to(.25,{opacity:0}).start(),cc.tween(this.ticketDailyLimitNode).to(.25,{opacity:0}).start()},t.prototype.displayRewardAnimations=function(e){var t=this;this._rewardAnimationQueues||(this._rewardAnimationQueues=c(o._endGameRewards));var n=this._rewardAnimationQueues.shift();n?(o.deliveryRewardInst.showRewardAnimation(n,null,!1),this.scheduleOnce(function(){t.displayRewardAnimations(e)},1.5)):e()},t.prototype.setGameOverClickExtraParams=function(){y.NgcTelemetry.inst.setGameRoundOverClickedExtraParam({NGC:!0})},t.prototype.sendGameOverClickTracking=function(e){var t=e?1:0;y.NgcTelemetry.inst.LogEvent_GameRoundOverClicked({multiplierOffer:t,ticketEarnings:null,category:null})},t.prototype.claimReward=function(e,t,n){var r=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.claimButtonClicked){var a=o.currentMultiplier;if(e){if(window.isAdsBlocked)return void b.NgcDialogManager.showAdsReminderMsg(this.claimAdsButton);var c=o._endGameRewards.map(function(e){return e.itemID}),l=o._endGameRewards.map(function(e){return e.count});p.default.inst.showRewardVideo(p.NgcPointcuts.videoRewardDialog,c,l,null,function(t,c){return i(r,void 0,void 0,function(){var r,i;return s(this,function(s){switch(s.label){case 0:return t?[3,3]:0!==c?[3,2]:[4,b.NgcDialogManager.createDialog(S.NgcMessageDialog.dialogType,S.NgcMessageDialog.urlPrefab,S.NgcMessageDialog.bundleName)];case 1:r=s.sent(),(i=r.getComponent(S.NgcMessageDialog)).init("NGG_AD_NOT_READY"),i.show(null,this.claimAdsButton,null,null),s.label=2;case 2:return this.claimButtonClicked=!1,[2];case 3:return o._endGameRewards.forEach(function(e){return e.count*=a}),this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),this.sendGameOverClickTracking(e),[2]}})})})}else this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),this.sendGameOverClickTracking(e);this.claimButtonClicked=!0}},t.prototype.updateClaimAdsButton=function(){this.claimAdsButton.getComponentInChildren(d.NgcLabelLocalized).string=f.NgcLocalizedManager.t("DLR_CLAIM").text+" x"+o.currentMultiplier.toString()},t.prototype.updateRewardMultiplier=function(e,t){var n=o.rewardMultiplierData();o.currentMultiplier=e?n.defaultBenefitMultiplier:Math.min(o.currentMultiplier+n.incrementalMultiplier,n.maxBenefitMultiplier),o.uploadRewardMultiplierValue(o.currentMultiplier,t)},t.prototype.addRewardItem=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=1);var r=cc.instantiate(this.rewardItemPrefab).getComponent(P.NgcRewardItem);return r.initReward(e,t,!0,n),this.rewardLayoutNode.addChild(r.node),o&&(r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(this.showConfetti.bind(this))),r},t.prototype.show=function(){this.checkShowBanner(p.NgcPointcuts.bannerRewardVideo),e.prototype.show.call(this)},t.prototype.update=function(){this.claimAdsButton.pulsingEffect&&(this.claimAdsButton.scale=.98+.04*Math.sin(Date.now()*Math.PI/480))},t.claimRewards=function(){var e=o._nonDisplayEndGameRewards.concat(o._endGameRewards);m.NgcInventory.inst.addItemList(e,function(){}),_.default.isInitialized&&_.default.updateRank(_.default.playerRank,function(){_.default.crownRoadUIInst.downRank&&_.default.crownRoadUIInst.checkRefreshUI()})},t.clearRewards=function(){o._endGameRewards=[],o._nonDisplayEndGameRewards=[]},t.setRewards=function(e){o._endGameRewards=o._endGameRewards.concat(e.filter(function(e){return 0!=e.count}))},t.addReward=function(e){o._endGameRewards.push(e)},t.addNonDisplayReward=function(e){o._nonDisplayEndGameRewards.push(e)},t.endGameFlowConfig=function(){var e=g.default.inst&&g.default.inst.getCurGameInfo()&&g.default.inst.getCurGameInfo().gameParams||{};return o._endGameFlowConfig=e&&e.endGameFLow||{},o._endGameFlowConfig},t.canShowRetryButton=function(){return!l.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&o.retryFlowConditionFn&&o.retryFlowConditionFn()||!1},t.setRetryFlowCondition=function(e){o.retryFlowConditionFn=e},t.setRetryFlowCallback=function(e){o.retryFlowCallback=e},t.setNormalFlowCallback=function(e){o.normalFlowCallback=e},t.setSkipRewardScreenCondition=function(e){o.skipRewardScreenCondition=e},t.canSkipRewardScreen=function(){return o.skipRewardScreenCondition&&o.skipRewardScreenCondition()||!1},t.rewardMultiplierData=function(){var e=o.endGameFlowConfig(),t={rateToDisplayVideoBtn:e.rateToDisplayVideoBtn,defaultBenefitMultiplier:e.defaultBenefitMultiplier,incrementalMultiplier:e.incrementalMultiplier,maxBenefitMultiplier:e.maxBenefitMultiplier};return o._multiplierData=t||{rateToDisplayVideoBtn:1,defaultBenefitMultiplier:2,incrementalMultiplier:1,maxBenefitMultiplier:5},o._multiplierData},t.getRewardMultiplierValue=function(e){var t=this;void 0===e&&(e=null),g.default.inst.serviceGet("/playerdata",null,function(n,r){n||(o.currentMultiplier=Number(JSON.parse(r).data._rewardMultiplier)||t.rewardMultiplierData().defaultBenefitMultiplier,e&&e(o.currentMultiplier))})},t.uploadRewardMultiplierValue=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n={_rewardMultiplier:e};g.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e?console.log("Cannot update reward mutiplier"):(o.currentMultiplier=n._rewardMultiplier,t&&t(r))})},t.urlPrefab="Reward",t.bundleName="03_end_game_flow",t.dialogType="NgcEndGameRewardDialog",t.retryFlowTriggered=!1,t._endGameRewards=[],t._nonDisplayEndGameRewards=[],t._endGameFlowConfig=null,t._multiplierData=null,t.currentMultiplier=0,t.deliveryRewardInst=null,a([w(cc.Node)],t.prototype,"rewardLayoutNode",void 0),a([w(cc.Node)],t.prototype,"claimButton",void 0),a([w(cc.Node)],t.prototype,"claimAdsButton",void 0),a([w(cc.Node)],t.prototype,"retryButton",void 0),a([w(cc.Node)],t.prototype,"backToMainMenuButton",void 0),a([w(cc.Node)],t.prototype,"ticketUINode",void 0),a([w(cc.Node)],t.prototype,"ticketDailyLimitNode",void 0),a([w(cc.Prefab)],t.prototype,"rewardItemPrefab",void 0),a([w(cc.Node)],t.prototype,"confettiLeft",void 0),a([w(cc.Node)],t.prototype,"confettiRight",void 0),o=a([C],t)}(v.NgcDialogBase);o.NgcEndGameRewardDialog=O,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","../../CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../RealPrize/Script/RealPrizeTicketProgressTimer":"RealPrizeTicketProgressTimer","../Result/Script/RewardItem":"RewardItem"}],RightHUD:[function(e,t,o){"use strict";cc._RF.push(t,"65a3a2i8hpJeZbVnMj9xKjO","RightHUD");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._originPos=null,t}return r(t,e),t.prototype.onLoad=function(){this._originPos=this.node.position},t.prototype.hide=function(){this.node.setPosition(this._originPos.x+this.node.width,this._originPos.y)},t.prototype.fadeIn=function(e){var t=cc.tween().to(e,{position:this._originPos});cc.tween(this.node).then(t).start()},a([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],RouletteScreen:[function(e,t,o){"use strict";cc._RF.push(t,"78f6de1LPZHjaGQ/o1v0AZo","RouletteScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_ROULETTE_STATE=void 0;var i,s=e("../../../NanoGameCore/Core/Utils"),c=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),l=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),u=e("../../../NanoGameCore/Services/Ads/Ads"),p=e("../../Main"),d=e("../../Player/PlayerAnim"),f=e("../../Player/PlayerSkinMgr"),h=e("../../Player/PlayerWinVFXHandler"),g=e("../../Utils/ConstConfig"),m=e("../../Tracking/TrackingManager"),y=e("../PartyRoomScreen/PartyRoomManager"),_=e("../../UserInfo"),v=e("../../Player/PlayerController"),S=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),b=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),N=e("../../SoundManager"),P=e("../../ScreenManager"),I=e("../../GameSpriteFrameMgr"),C=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),w=e("../StartScreen/StartMain"),O=e("../../TypeDefs"),T=e("../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler"),E=e("../../Dialog/MatchLoadingDialog/MatchLoadingDialog"),M=cc._decorator,D=M.ccclass,R=M.property;(function(e){e[e.Roulette=0]="Roulette",e[e.UnlockNewHero=1]="UnlockNewHero"})(i=o.E_ROULETTE_STATE||(o.E_ROULETTE_STATE={}));var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerAnim=null,t.winVFX=null,t.smokeVfxPreviewHandler=null,t.backgroundRepeat=null,t.brandLogoSprite=null,t.characterNameLabel=null,t.fenyx_SF=null,t.AC2_SF=null,t.ACB_SF=null,t.BGAE_SF=null,t.COL_SF=null,t.FC3_SF=null,t.ghostRecon_SF=null,t.JD21_SF=null,t.POP_SF=null,t.rabbid_SF=null,t.raymanLegend_SF=null,t.TTC_SC_SF=null,t.UASB_SF=null,t.watchDog_SF=null,t.WDL_SF=null,t._indexSkin=0,t._maxTimeInterval=.5,t._curTimeInterval=.1,t._listUnlockableHeroes=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o._orderPage=P.E_PAGE_ORDER.StartMain,this._listUnlockableHeroes=[g.ConstConfig.INVENTORY.ITEM_ID.EZIO,g.ConstConfig.INVENTORY.ITEM_ID.FENYX,g.ConstConfig.INVENTORY.ITEM_ID.NOMAD,g.ConstConfig.INVENTORY.ITEM_ID.PANDA,g.ConstConfig.INVENTORY.ITEM_ID.RABBID]},t.prototype.start=function(){this.brandLogoSprite.node.opacity=0},t.prototype.onEnable=function(){var e,t,n=this;switch(o._curState){case i.Roulette:null===(e=m.default.inst)||void 0===e||e.onRouletteStart(),this.winVFX.node.active=!1,this.changeSkinByTimeAnim(function(){n.chosenCharAnim(),n.scheduleOnce(n.goToFTUEGamePlay.bind(n),4),localStorage.setItem("IS_ROULETTE_ENDED","1")});break;case i.UnlockNewHero:this.unlockedHeroAnim(o._unlockedHero),this.scheduleOnce(this.gotoMainMenu.bind(this),2)}N.SoundManager.inst.playSoundWithClip(N.SoundManager.inst.VictoryClip),null===(t=c.default.inst)||void 0===t||t.hide(c.NgcPointcuts.bannerLoading,u.AdsType.Banner),P.default.inst.hideTabBar()},t.prototype.onDisable=function(){var e;o._curState!==i.UnlockNewHero&&(null===(e=m.default.inst)||void 0===e||e.onRouletteEnd(f.default.inst.getCurHero()))},t.prototype.goToFTUEGamePlay=function(){y.NgcPartyRoomManager.mustGoToPartyRoom()?(p.Main.inst.setState(b.AppState.StartScreen),_.UserInfo.alreadyFTUE=!0):(v.PlayerController.localPlayerInFTUE=!0,w.default.inst.setGameModeData(O.GameMode.ClassicBattleRoyale),E.default.show(),p.Main.inst.setState(b.AppState.Game))},t.prototype.gotoMainMenu=function(){C.NgcNavBarManager.inst.showAllNavBar(!0),_.UserInfo.updateInventoryWithPlatform().then(function(){f.default.inst.setCurHero(o._unlockedHero),o._orderPage===P.E_PAGE_ORDER.Shop?P.default.inst.goToShopScreen():P.default.inst.goToStartScreen(),P.default.inst.showTabBar()})},t.prototype.changeSkinByTimeAnim=function(e){var t=this;new Promise(function(e){var o=function(){t.scheduleOnce(function(){t._curTimeInterval+=.02,t.playerAnim.setSkinByName(p.Main.inst.listDisplayHeroes[t._indexSkin]),t.brandLogoSprite.spriteFrame=t.getBrandLogo(p.Main.inst.listDisplayHeroes[t._indexSkin]),cc.tween(t.brandLogoSprite.node).to(1,{opacity:255}).start(),t.characterNameLabel.setLocalizedText(f.default.getSkinLocalizedName(p.Main.inst.listDisplayHeroes[t._indexSkin])),t._indexSkin++,t._indexSkin>=p.Main.inst.listDisplayHeroes.length&&(t._indexSkin=0),t._curTimeInterval<t._maxTimeInterval?o():e()},t._curTimeInterval)};o()}).then(function(){e&&e()})},t.prototype.chosenCharAnim=function(){var e=s.Utils.randomArr(this._listUnlockableHeroes);f.default.inst.unlockHero(e,!0),f.default.inst.setCurHero(e),this.playerAnim.skeleton.timeScale=1,this.playerAnim.setSkinByName(e),this.playerAnim.skeleton.setAnimation(0,this.playerAnim.winAnims[0],!0),this.winVFX.node.active=!0,this.characterNameLabel.setLocalizedText(f.default.getSkinLocalizedName(e)),this.brandLogoSprite.spriteFrame=this.getBrandLogo(e),cc.tween(this.brandLogoSprite.node).to(1,{opacity:255}).start(),_.UserInfo.alreadyFTUE=!0},t.prototype.unlockedHeroAnim=function(e){this.brandLogoSprite.node.opacity=0,this.playerAnim.skeleton.timeScale=1,this.playerAnim.setSkinByName(e),this.playerAnim.skeleton.setAnimation(0,this.playerAnim.winAnims[0],!0),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(e),this.winVFX.node.active=!0,this.winVFX.playIdleAnim(),this.characterNameLabel.setLocalizedText(f.default.getSkinLocalizedName(e)),this.brandLogoSprite.spriteFrame=this.getBrandLogo(e),cc.tween(this.brandLogoSprite.node).to(1,{opacity:255}).start()},t.prototype.getBrandLogo=function(e){return I.default.inst.brandLogoSFHandler.getBrandLogoByHero(e)},t.setState=function(e,t,n){void 0===e&&(e=i.Roulette),void 0===t&&(t=g.ConstConfig.INVENTORY.ITEM_ID.EZIO),void 0===n&&(n=P.E_PAGE_ORDER.StartMain),o._curState=e,o._unlockedHero=t,o._orderPage=n},t._curState=i.Roulette,t._unlockedHero="",t._orderPage=2,a([R(d.default)],t.prototype,"playerAnim",void 0),a([R(h.default)],t.prototype,"winVFX",void 0),a([R(T.default)],t.prototype,"smokeVfxPreviewHandler",void 0),a([R(cc.Node)],t.prototype,"backgroundRepeat",void 0),a([R(cc.Sprite)],t.prototype,"brandLogoSprite",void 0),a([R(S.NgcLabelLocalized)],t.prototype,"characterNameLabel",void 0),a([R(cc.SpriteFrame)],t.prototype,"fenyx_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"AC2_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"ACB_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"BGAE_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"COL_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"FC3_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"ghostRecon_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"JD21_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"POP_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"rabbid_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"raymanLegend_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"TTC_SC_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"UASB_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"watchDog_SF",void 0),a([R(cc.SpriteFrame)],t.prototype,"WDL_SF",void 0),o=a([D],t)}(l.default);o.default=B,cc._RF.pop()},{"../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler":"PunkRiderPreviewVfxHandler","../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../Dialog/MatchLoadingDialog/MatchLoadingDialog":"MatchLoadingDialog","../../GameSpriteFrameMgr":"GameSpriteFrameMgr","../../Main":"Main","../../Player/PlayerAnim":"PlayerAnim","../../Player/PlayerController":"PlayerController","../../Player/PlayerSkinMgr":"PlayerSkinMgr","../../Player/PlayerWinVFXHandler":"PlayerWinVFXHandler","../../ScreenManager":"ScreenManager","../../SoundManager":"SoundManager","../../Tracking/TrackingManager":"TrackingManager","../../TypeDefs":"TypeDefs","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../StartScreen/StartMain":"StartMain"}],SDK:[function(e,t,o){"use strict";cc._RF.push(t,"91ea395sUtJn4gFhiXWJjzT","SDK"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSDK=void 0;var n=function(){function e(){this.preInitialized=!1,this.initialized=!1,this.loggedIn=!1}return e.prototype.preInit=function(e){return this._preInit(e)},e.prototype.init=function(e){return this._init(e)},e.prototype.login=function(){var e=this;if(this.isLoggedIn())return new Promise(function(t){t(e.getName()+" already logged in")});var t=this._login();return t.then(function(){return e.loggedIn=!0}),t},e.prototype.logout=function(){var e=this,t=this._logout();return t.then(function(){return e.loggedIn=!1}),t},e.getCurTime=function(){return e.env&&e.env.hasOwnProperty("getCurTime")?e.env.getCurTime():Date.now()},e.env={},e}();o.NgcSDK=n,cc._RF.pop()},{}],ScanQRCodeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e3cc2vEtiBONYsdz9n71AHN","ScanQRCodeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcScanQRCodeDialog=void 0;var c=e("jsqr"),l=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../../Dialogs/Script/DialogBase"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoPlayer=null,t.resultLabel=null,t.errorDialog=null,t.video=null,t._stream=null,t._disableUpdate=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.originalDialogNode=this.dialogNode,this.originalDialogNode.active=!1,this.errorDialog.active=!1},t.prototype.tick=function(){if(!this._disableUpdate&&this.video.readyState===this.video.HAVE_ENOUGH_DATA){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.videoPlayer.node.width,e.height=this.videoPlayer.node.height,t.clearRect(0,0,e.width,e.height),t.drawImage(this.video,0,0,e.width,e.height);try{var o=t.getImageData(0,0,e.width,e.height),n=c.default(o.data,o.width,o.height,{inversionAttempts:"dontInvert"});n&&(this.resultLabel.string=n.data,this._onSuccessCallback(n.data),this.onClose())}catch(r){console.warn(r)}}},t.prototype.startQRScanner=function(){this.video||(this.video=document.getElementsByClassName("cocosVideo")[0]),this.video.srcObject=this._stream,this.video.play(),this.schedule(this.tick,1/o.SCAN_FPS)},t.prototype.init=function(e,t){return i(this,void 0,void 0,function(){return s(this,function(){return this._onSuccessCallback=t,this._stream=e,[2]})})},t.prototype.clearBeforeClose=function(){this.unschedule(this.tick);try{this.video.srcObject.getTracks().forEach(function(e){e.stop()})}catch(e){console.warn(e)}},t.prototype.onClose=function(){this._disableUpdate=!0,this.clearBeforeClose(),this.dialogUsingNode=null,this.hide()},t.prototype.onTryAgainBtnClick=function(){var e=this;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return i(e,void 0,void 0,function(){var e=this;return s(this,function(){return this._stream=t,this.originalDialogNode.active=!0,this.errorDialog.active=!1,this.dialogOpenType=null,this.scheduleOnce(function(){e.startQRScanner()},.25),[2]})})}).catch(function(){e.onClose()})},t.prototype.show=function(){this._stream?(this.dialogNode=this.originalDialogNode,this.dialogNode.active=!0,this.startQRScanner()):(this.dialogNode=this.errorDialog,this.dialogNode.active=!0)},t.prototype.rescale=function(){},t.urlPrefab="ScanQRCodeDialog",t.bundleName="02_dialog",t.dialogType="ScanQRCodeDialog",t.SCAN_FPS=15,a([f(cc.VideoPlayer)],t.prototype,"videoPlayer",void 0),a([f(l.NgcLabelLocalized)],t.prototype,"resultLabel",void 0),a([f(cc.Node)],t.prototype,"errorDialog",void 0),o=a([d],t)}(u.NgcDialogBase);o.NgcScanQRCodeDialog=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Dialogs/Script/DialogBase":"DialogBase",jsqr:99}],SceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"77a4fXSVCFOxppRl5CpeAc2","SceneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneManager=void 0;var i=e("../NanoGameCore/GameFramework/Scripts/NgcSceneManager"),s=e("./Game"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.getAllPlayer=function(){return s.default.inst.players},t.prototype._findPlayerByNetID=function(e){return s.default.inst.findPlayerByNetID(e)},t.prototype._findPlayerLead=function(){return s.default.inst.getPlayerBestKill()},t.prototype.onLoad=function(){o.inst?console.error("More than one scene manager!"):(o.inst=this,e.prototype.onLoad.call(this))},t.inst=null,o=a([l],t)}(i.NgcSceneManager));o.SceneManager=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","./Game":"Game"}],ScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0966BQ3JtLiqi/4Yw5n9c1","ScreenManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenIDs=o.E_PAGE_ORDER=void 0;var i=e("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),s=e("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),c=e("../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder"),l=e("./Screens/PartyRoomScreen/PartyRoomManager"),u=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),p=e("../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker"),d=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),f=e("../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),h=e("../NanoGameCore/Services/Telemetry/Telemetry"),g=e("./Screens/GameScreen/GameScreen"),m=e("./Main"),y=e("./Screens/StartScreen/StartMain"),_=e("./UserInfo"),v=e("../NanoGameCore/Services/Platform/Platform"),S=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),b=e("./Player/PlayerSkinMgr"),N=e("../NanoGameCore/SDK/Nano/NanoSrv"),P=e("./Network/ImprovedNetClient"),I=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),C=e("../NanoGameCore/Core/Utils"),w=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager");(function(e){e[e.Shop=0]="Shop",e[e.Leaderboard=1]="Leaderboard",e[e.StartMain=2]="StartMain",e[e.PWF=3]="PWF",e[e.ComingSoon=4]="ComingSoon"})(o.E_PAGE_ORDER||(o.E_PAGE_ORDER={})),function(e){e[e.StartScreen=0]="StartScreen",e[e.GameScreen=1]="GameScreen",e[e.LeaderBoardScreen=2]="LeaderBoardScreen",e[e.LeaderBoardScreenPC=3]="LeaderBoardScreenPC",e[e.RouletteScreen=4]="RouletteScreen",e[e.PWFScreen=5]="PWFScreen",e[e.PrizeScreen=6]="PrizeScreen",e[e.ShopScreen=7]="ShopScreen",e[e.ShopScreenPC=8]="ShopScreenPC"}(o.ScreenIDs||(o.ScreenIDs={}));var O=cc._decorator,T=O.ccclass,E=O.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentScreen=null,t.delayToGameScreen=.5,t.screenIDs=cc.Enum({StartScreen:0,GameScreen:1,LeaderBoardScreen:2,LeaderBoardScreenPC:3,RouletteScreen:4,PWFScreen:5,PrizeScreen:6,ShopScreen:7,ShopScreenPC:8}),t.gameFixUiCamera=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.inst?console.error("More than one ScreenManager instance"):(this.node.on("tapDown",this.onTapDown,this),this.node.on("tapUp",this.onTapUp,this),o.inst=this,f.default.inst=this,this.init())},t.prototype.init=function(t,o){void 0===t&&(t=!1),void 0===o&&(o=!0),e.prototype.init.call(this,t,o)},t.prototype.pageOrder=function(){var e=this,t=[this.screenIDs.ShopScreen,this.screenIDs.LeaderBoardScreen,this.screenIDs.StartScreen,this.screenIDs.PWFScreen,this.screenIDs.PrizeScreen];return I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.GameDistribution)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen,this.screenIDs.LeaderBoardScreen]),I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.Poki)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen,this.screenIDs.LeaderBoardScreen]),I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.HUZ)&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen]),I.NgcBuildConfig.offlineMode&&(t=[this.screenIDs.ShopScreen,this.screenIDs.StartScreen]),t.map(function(t){return cc.sys.isMobile?t:t===e.screenIDs.ShopScreen?e.screenIDs.ShopScreenPC:t===e.screenIDs.LeaderBoardScreen?e.screenIDs.LeaderBoardScreenPC:t})},t.prototype.screenPointcuts=function(){var t=e.prototype.screenPointcuts.call(this);return I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.GameDistribution)&&(t=[w.NgcPointcuts.bannerShop,w.NgcPointcuts.bannerMainMenu,w.NgcPointcuts.bannerLeaderboard]),I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.Poki)&&(t=[w.NgcPointcuts.bannerShop,w.NgcPointcuts.bannerMainMenu,w.NgcPointcuts.bannerLeaderboard]),I.NgcBuildConfig.buildPlatform===C.Utils.enumToString(v.PlatformID,v.PlatformID.HUZ)&&(t=[w.NgcPointcuts.bannerShop,w.NgcPointcuts.bannerMainMenu]),t},t.prototype.defaultPageOrder=function(){var e=this,t=[this.screenIDs.ShopScreen,this.screenIDs.LeaderBoardScreen,this.screenIDs.StartScreen,this.screenIDs.PWFScreen,this.screenIDs.PrizeScreen];return t.map(function(t){return cc.sys.isMobile?t:t===e.screenIDs.ShopScreen?e.screenIDs.ShopScreenPC:t===e.screenIDs.LeaderBoardScreen?e.screenIDs.LeaderBoardScreenPC:t})},t.prototype.gamePlayScreens=function(){return[this.screenIDs.GameScreen,this.screenIDs.RouletteScreen]},t.prototype.onBeforeInitPageview=function(){},t.prototype.onAfterInitPageview=function(){},t.prototype.disableAll=function(){},t.prototype.onTapDown=function(e){this.currentScreen&&this.currentScreen.onTapDown(e)},t.prototype.onTapUp=function(e){this.currentScreen&&this.currentScreen.onTapUp(e)},t.prototype.onKeyUp=function(e){this.currentScreen&&this.currentScreen.onKeyUp(e)},t.prototype.activateScreen=function(e){if(this.currentScreen){var t=0;e instanceof g.default&&(t=this.delayToGameScreen);var o=this.currentScreen;this.currentScreen=null,0==t?(y.default.inst.loadingNode.active=!1,o.activate(!1),o=null):this.scheduleOnce(function(){y.default.inst.loadingNode.active=!1,o.activate(!1),o=null},t)}e.activate(!0),this.currentScreen=e},t.prototype.goToStartScreen=function(e){var t;void 0===e&&(e=f.TransitionType.FadeIn),m.Main.inst.appState=d.AppState.StartScreen,this.switchScreen(this.screenIDs.StartScreen,e),null===(t=h.NgcTelemetry.inst)||void 0===t||t.LogEvent_EnterScreen(this.getScreenName(this.screenIDs.StartScreen)),s.NgcNavBarManager.inst.showAllNavBar(!0)},t.prototype.goToGameScreen=function(e){var t;void 0===e&&(e=f.TransitionType.FadeIn),m.Main.inst.appState=d.AppState.Game,s.NgcNavBarManager.inst.showAllNavBar(!1),v.NgcPlatform.inst&&v.NgcPlatform.inst.onStartGame(),this.switchScreen(this.screenIDs.GameScreen,e),null===(t=h.NgcTelemetry.inst)||void 0===t||t.LogEvent_EnterScreen(this.getScreenName(this.screenIDs.GameScreen))},t.prototype.goToShopScreen=function(e){void 0===e&&(e=f.TransitionType.FadeIn),m.Main.inst.appState=d.AppState.ShopScreen,this.switchScreen(cc.sys.isMobile?this.screenIDs.ShopScreen:this.screenIDs.ShopScreenPC,e)},t.prototype.afterGoToLeaderBoardScreen=function(){i.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard&&(i.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().refreshFilter(),i.NgcLeaderboardManager.inst.showLB(),i.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard=!1),i.NgcLeaderboardManager.inst.checkShowBanner()},t.prototype.goToLeaderBoardScreen=function(){m.Main.inst.appState=d.AppState.Leaderboard,s.NgcNavBarManager.inst.showAllNavBar(!1),cc.sys.isMobile?this.switchScreen(this.screenIDs.LeaderBoardScreen):this.switchScreen(this.screenIDs.LeaderBoardScreenPC),this.afterGoToLeaderBoardScreen()},t.prototype.beforeGoToPartyScreen=function(){s.NgcNavBarManager.inst.showAllNavBar(!0);var e=u.NgcCountryFlagsManager.localCountry,t=new c.NgcPartyInfoBuilder;t.setPlayerName(S.default.localUserName).setCountry(e).setMaxPlayer(100).setMinPlayer(2).setPlayerNetID(P.default.inst.clientID).setSkin(b.default.inst.getCurHero()).setAvatarURL(S.default.avatarUrl).setLoginSocial(S.default.isUserLogined()).setNewUser(0==_.UserInfo.bestScore).setTimeDelayNextGame(5).setPrivate(!0).setAllowBot(!0).setAutoStartGame(!1).setJoinPayload({}).setStartPayload({}).setUpdatePayloadFuncion(function(){}).setStartGameFuncion(function(){cc.log("Call starting game"),y.default.inst.loadingNode.active=!0,h.NgcTelemetry.inst.LogEvent_BeginTimer("RoomFillingTime"),h.NgcTelemetry.inst.LogEvent_StartGame(),p.NgcNetStatsTracker.inst.beginSession(),console.log("Player clicked start @ "+(new Date).getTime()),m.Main.inst.setState(d.AppState.Game)}).setOnSocialCallBack(function(){}).setOnMultiLoginFuntion(function(){var e=S.default.gameRunningSession;cc.log("#key",e),cc.log("#UserInfo.sessionKey",S.default.sessionKey),e==S.default.sessionKey?(N.default.inst.resetUserID().finally(function(){m.Main.resetData()}),cc.log("#Clear all save key because use different browser")):cc.log("#Do nothing because using the same browser")}),l.NgcPartyRoomManager.init(t)},t.prototype.afterGoToPartyScreen=function(){this.scheduleOnce(function(){s.NgcNavBarManager.inst.showAllNavBar(!0)},1)},t.prototype.goToPartyScreen=function(){m.Main.inst.appState=d.AppState.PartyScreen,this.beforeGoToPartyScreen(),this.switchScreen(this.screenIDs.PWFScreen),this.afterGoToPartyScreen()},t.prototype.start=function(){},t.prototype.getScreenName=function(e){switch(e){case o.inst.screenIDs.StartScreen:return"MainMenu";case o.inst.screenIDs.GameScreen:return"Gameplay";case o.inst.screenIDs.LeaderBoardScreen:case o.inst.screenIDs.LeaderBoardScreenPC:return"Leaderboard";case o.inst.screenIDs.RouletteScreen:return"Roulette";case o.inst.screenIDs.PWFScreen:return"PartyRoom";default:return cc.error("screenid: "+e+" not FOUND"),""}},t.prototype.goToRouttleScreen=function(e){var t;void 0===e&&(e=f.TransitionType.Immediately),this.switchScreen(this.screenIDs.RouletteScreen,e),null===(t=h.NgcTelemetry.inst)||void 0===t||t.LogEvent_EnterScreen(this.getScreenName(this.screenIDs.RouletteScreen)),s.NgcNavBarManager.inst.showAllNavBar(!1)},t.inst=null,a([E(cc.Camera)],t.prototype,"gameFixUiCamera",void 0),o=a([T],t)}(f.default);o.default=M,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder":"PartyInfoBuilder","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker":"NetStatsTracker","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","./Main":"Main","./Network/ImprovedNetClient":"ImprovedNetClient","./Player/PlayerSkinMgr":"PlayerSkinMgr","./Screens/GameScreen/GameScreen":"GameScreen","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./Screens/StartScreen/StartMain":"StartMain","./UserInfo":"UserInfo"}],SelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d5fc2/8PulKD7UUqF4h/TwW","SelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSelectLanguageDialog=void 0;var i=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../../GameFramework/Scripts/NgcUserInfo"),c=e("../../../../Services/Telemetry/Telemetry"),l=e("../DialogBase"),u=e("./ItemSelectLanguage"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e,i.NgcLocalizedManager.jsonData.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(u.NgcItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code==s.default.curLanguage,function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.codeItem==e.code})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){i.NgcLocalizedManager.setLanguage(e),c.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e})},t.prototype.show=function(){e.prototype.show.call(this),c.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),c.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.urlPrefab="SelectLanguage",t.bundleName="02_dialog",t.dialogType="NgcSelectLanguageDialog",a([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),a([f(cc.Node)],t.prototype,"content",void 0),a([d],t)}(l.NgcDialogBase);o.NgcSelectLanguageDialog=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../../Services/Telemetry/Telemetry":"Telemetry","../DialogBase":"DialogBase","./ItemSelectLanguage":"ItemSelectLanguage"}],ServicesMgr:[function(e,t,o){"use strict";cc._RF.push(t,"36911ir2JdLn76KzCFMz9Dm","ServicesMgr");var n=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcServicesMgr=void 0;var r=e("./Ads/Ads"),a=e("./DailyReward/DailyReward"),i=e("./GameShop/GameShop"),s=e("./Inventory/Inventory"),c=e("./Leaderboard/Leaderboard"),l=e("./Social/Social"),u=e("./Telemetry/Telemetry"),p=e("./Platform/Platform"),d=e("./PartyRoom/PartyRoom"),f=e("./Ads/Ads_impl_GameDistributionSrv"),h=e("./PartyRoom/PartyRoom_impl_GameServerSrv"),g=e("./Leaderboard/Leaderboard_impl_NanoSrv"),m=e("./GameShop/GameShop_impl_NanoSrv"),y=e("./Platform/Platform_impl_GameDistributionSrv"),_=e("./Inventory/Inventory_impl_NanoSrv"),v=e("./Social/Social_impl_UplaySrv"),S=e("./Telemetry/Telemetry_impl_NullSrv"),b=e("./DailyReward/DailyReward_impl_NanoSrv"),N=e("../SDK/Nano/NanoSrv"),P=e("../SDK/Uplay/UplaySrv"),I=e("../SDK/GameDistribution/GameDistributionSrv"),C=cc._decorator,w=C.ccclass,O=(C.property,function(){function e(){}var t;return t=e,e.preInit=function(e){if(t.isInitialized)return new Promise(function(e){e("Services are already pre-initialized.")});var o=[];return r.NgcAds.srvInstances.push(new f.default),r.NgcAds.inst=r.NgcAds.srvInstances[0],r.NgcAds.srvInstances.forEach(function(e){return t.allServices.push(e)}),d.NgcPartyRoom.srvInstances.push(new h.default),d.NgcPartyRoom.inst=d.NgcPartyRoom.srvInstances[0],d.NgcPartyRoom.srvInstances.forEach(function(e){return t.allServices.push(e)}),c.NgcLeaderboard.srvInstances.push(new g.default),c.NgcLeaderboard.inst=c.NgcLeaderboard.srvInstances[0],c.NgcLeaderboard.srvInstances.forEach(function(e){return t.allServices.push(e)}),i.NgcGameShop.srvInstances.push(new m.default),i.NgcGameShop.inst=i.NgcGameShop.srvInstances[0],i.NgcGameShop.srvInstances.forEach(function(e){return t.allServices.push(e)}),p.NgcPlatform.srvInstances.push(new y.default),p.NgcPlatform.inst=p.NgcPlatform.srvInstances[0],p.NgcPlatform.srvInstances.forEach(function(e){return t.allServices.push(e)}),s.NgcInventory.srvInstances.push(new _.default),s.NgcInventory.inst=s.NgcInventory.srvInstances[0],s.NgcInventory.srvInstances.forEach(function(e){return t.allServices.push(e)}),l.NgcSocial.srvInstances.push(new v.default),l.NgcSocial.inst=l.NgcSocial.srvInstances[0],l.NgcSocial.srvInstances.forEach(function(e){return t.allServices.push(e)}),u.NgcTelemetry.srvInstances.push(new S.default),u.NgcTelemetry.inst=u.NgcTelemetry.srvInstances[0],u.NgcTelemetry.srvInstances.forEach(function(e){return t.allServices.push(e)}),a.NgcDailyReward.srvInstances.push(new b.default),a.NgcDailyReward.inst=a.NgcDailyReward.srvInstances[0],a.NgcDailyReward.srvInstances.forEach(function(e){return t.allServices.push(e)}),o.push((new N.default).preInit(e)),o.push((new P.default).preInit(e)),o.push((new I.default).preInit(e)),t.allServices.forEach(function(t){o.push(t.preInit(e.services))}),new Promise(function(e,n){var r=Promise.all(o);r.then(function(o){t.isPreInitialized=!0,console.log(o),e()}),r.catch(function(e){cc.error(e),n()})})},e.initServices=function(e){var o=this;if(!t.isPreInitialized)return new Promise(function(e,t){cc.error("ServicesMgr: calling initServices before preInitServices"),t()});if(t.isInitialized)return new Promise(function(e){e("Services are already initialized.")});t.buildConfig=e;var n=[];return n.push(N.default.inst.init(e)),n.push(P.default.inst.init(e)),n.push(I.default.inst.init(e)),t.allServices.forEach(function(t){n.push(t.init(e.services))}),new Promise(function(e,t){var r=Promise.all(n);r.then(function(n){if(console.log(n),o.isInitialized=!0,p.NgcPlatform.isOfflineMode())o.isLoggedIn=!0,e();else{var r=o.loginSDKs();r.then(function(t){console.log(t),o.isLoggedIn=!0,e()}),r.catch(function(e){cc.error(e),t(e)})}}),r.catch(function(e){cc.error(e),t(e)})})},e.loginSDKs=function(){if(t.isLoggedIn)return new Promise(function(e){return e()});var e=[];return null!==N.default.inst&&e.push(N.default.inst.login()),Promise.all(e)},e.allServices=[],e.isPreInitialized=!1,e.isInitialized=!1,e.isLoggedIn=!1,e.buildConfig=null,t=n([w],e)}());o.NgcServicesMgr=O,cc._RF.pop()},{"../SDK/GameDistribution/GameDistributionSrv":"GameDistributionSrv","../SDK/Nano/NanoSrv":"NanoSrv","../SDK/Uplay/UplaySrv":"UplaySrv","./Ads/Ads":"Ads","./Ads/Ads_impl_GameDistributionSrv":"Ads_impl_GameDistributionSrv","./DailyReward/DailyReward":"DailyReward","./DailyReward/DailyReward_impl_NanoSrv":"DailyReward_impl_NanoSrv","./GameShop/GameShop":"GameShop","./GameShop/GameShop_impl_NanoSrv":"GameShop_impl_NanoSrv","./Inventory/Inventory":"Inventory","./Inventory/Inventory_impl_NanoSrv":"Inventory_impl_NanoSrv","./Leaderboard/Leaderboard":"Leaderboard","./Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","./PartyRoom/PartyRoom":"PartyRoom","./PartyRoom/PartyRoom_impl_GameServerSrv":"PartyRoom_impl_GameServerSrv","./Platform/Platform":"Platform","./Platform/Platform_impl_GameDistributionSrv":"Platform_impl_GameDistributionSrv","./Social/Social":"Social","./Social/Social_impl_UplaySrv":"Social_impl_UplaySrv","./Telemetry/Telemetry":"Telemetry","./Telemetry/Telemetry_impl_NullSrv":"Telemetry_impl_NullSrv"}],Service:[function(e,t,o){"use strict";cc._RF.push(t,"0da43ei9udE8YEO4PvAr1NR","Service"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcService=void 0;var n=cc._decorator,r=(n.ccclass,n.property,function(){});o.NgcService=r,cc._RF.pop()},{}],ShieldAnimHandler:[function(e,t,o){"use strict";cc._RF.push(t,"933b9m/Wz1H6ZuIHV0an4i4","ShieldAnimHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=e("../../NanoGameCore/Core/Utils"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.active=0]="active",e[e.broken=1]="broken"})(i||(i={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shieldAnim=null,t.brokenPos=null,t.textNode=null,t.textNotifyAnim=null,t.defaultPos=null,t._shieldState=null,t}return r(t,e),Object.defineProperty(t.prototype,"shieldState",{get:function(){return this._shieldState},set:function(e){switch(this._shieldState=e,e){case i.active:this.shieldAnim.setAnimation(0,"Down",!1),this.shieldAnim.timeScale=1,this.textNode.active=!1;break;case i.broken:this.shieldAnim.setAnimation(0,"Breaking",!1),this.textNode.active=!0,this.textNode.getComponent(cc.Animation).play(),this.shieldAnim.timeScale=.7}},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.shieldAnim.setStartListener(function(){e.animStart()}),this.shieldAnim.setCompleteListener(function(){e.animEnd()}),this.shieldState=i.active,this.shieldAnim.paused=!0},t.prototype.updateProgress=function(e){if(this.shieldState===i.active){var t=this.shieldAnim.getCurrent(0),o=t.animation,n=cc.misc.clampf(t.getAnimationTime()/o.duration,0,1)>e;this.shieldAnim.paused=n}},t.prototype.animStart=function(){this.shieldState===i.broken&&(s.Utils.setWorldPos(this.node,s.Utils.getWorldPos(this.brokenPos)),this.node.scale=1)},t.prototype.animEnd=function(){this.shieldState===i.active?(this.shieldState=i.broken,this.defaultPos=s.Utils.getWorldPos(this.node),this.shieldAnim.paused=!1):this.shieldState===i.broken&&(s.Utils.setWorldPos(this.node,this.defaultPos),this.node.scale=.3,this.textNotifyAnim.play())},t.prototype.reset=function(){this.shieldState=i.active,this.shieldAnim.paused=!0},a([u(sp.Skeleton)],t.prototype,"shieldAnim",void 0),a([u(cc.Node)],t.prototype,"brokenPos",void 0),a([u(cc.Node)],t.prototype,"textNode",void 0),a([u(cc.Animation)],t.prototype,"textNotifyAnim",void 0),a([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils"}],ShopScreen:[function(e,t,o){"use strict";cc._RF.push(t,"6c06asEhTBLjr6R92gTrPpI","ShopScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopScreen=void 0;var c=e("../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler"),l=e("../../../NanoGameCore/CrossFeatures/DailyReward/Script/RewardClaimAnimation"),u=e("../../../NanoGameCore/CrossFeatures/ItemShop/Script/ItemContainer"),p=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),d=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),h=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),g=e("../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager"),m=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),y=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),_=e("../../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),v=e("../../../NanoGameCore/Services/Ads/Ads"),S=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),b=e("../../Player/PlayerAnim"),N=e("../../Player/PlayerSkinMgr"),P=e("../../UserInfo"),I=e("../../Utils/ConstConfig"),C=e("./CharacterUpgradeUI"),w=cc._decorator,O=w.ccclass,T=w.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemContainerPrefab=null,t.rewardClaimAnimationPrefab=null,t.itemContainerParent=null,t.editBox=null,t.playerParent=null,t.player=null,t.punkRiderSmokePreviewHandler=null,t.coinNumber=null,t.skinName=null,t.charUpgradeUIPrefab=null,t.charUpgradeUIParent=null,t.debugNode=null,t.charUpgradeUI=null,t._itemContainer=null,t._shopManager=null,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(this.itemContainerPrefab);this.itemContainerParent.addChild(e),this._itemContainer=e.getComponent(u.ItemContainer);var t=cc.instantiate(this.rewardClaimAnimationPrefab);this.node.addChild(t);var o=t.getComponent(l.NgcRewardClaimAnimation);this._shopManager=_.NgcShopManager.getInstance(),this._shopManager.setUI(this._itemContainer),this._shopManager.registerCurrencyUpdate([I.ConstConfig.INVENTORY.ITEM_ID.COIN],this.onCurrencyUpdate.bind(this)),this._shopManager.registerItemPreviewCallback(this.onItemPreview_NGCExample.bind(this)),this._shopManager.registerItemEquipCallback(this.onItemEquip_NGCExample.bind(this)),this._shopManager.setUI(this._itemContainer);var n=cc.instantiate(this.charUpgradeUIPrefab);n.parent=this.charUpgradeUIParent,n.getComponent(cc.Widget).enabled=!0,this.charUpgradeUI=n.getComponent(C.default),this.charUpgradeUI.rewardClaimAnimation=o,this.charUpgradeUI.shopScreenRef=this,this.debugNode.active=f.NgcBuildConfig.enabledDebugMode,this.setSocialLoginCallback()},t.prototype.setSocialLoginCallback=function(){cc.systemEvent.on("refreshShop",this.onSocialCallBack.bind(this))},t.prototype.onSocialCallBack=function(e,t){return i(this,void 0,void 0,function(){var e=this;return s(this,function(){return"close"===t?[2]:(g.NgcItemInfoManager.getInstance().clearSaveEquippedItemList(),this._shopManager.IsInitialized&&this._shopManager.loadData(!0,function(){e.onAfterReloadShopDataAfterSocialCallback()}),[2])})})},t.prototype.onAfterReloadShopDataAfterSocialCallback=function(){P.UserInfo.onItemEquipListRefresh(this),this._shopManager.updateShop()},t.prototype.onActivate=function(){this._shopManager.IsInitialized&&this._shopManager.updateShop(),m.NgcMain.setAppContext(m.AppContext.ItemsShopScreen),S.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this.checkShowBanner(),this.updateCurrentEquippedHero(),this._itemContainer.resizeContent()},t.prototype.onResume=function(){var e;m.NgcMain.setAppContext(m.AppContext.ItemsShopScreen),S.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this._shopManager.IsInitialized&&this._shopManager.updateShop(),null===(e=this._shopManager)||void 0===e||e.resetItemClickCounter(),this.checkShowBanner(),this.updateCurrentEquippedHero(),this._itemContainer.resizeContent()},t.prototype.onEditBoxChanged=function(){console.log("Edit Box text = ",this.editBox.string);var e=parseInt(this.editBox.string);isNaN(e)||this._shopManager.setNumberOfItemInRow(e)},t.prototype.checkShowBanner=function(){var e,t;d.default.inst.isAdsPoincutAvailable(d.NgcPointcuts.bannerShop,v.AdsType.Banner)?null===(e=d.default.inst)||void 0===e||e.showBanner(d.NgcPointcuts.bannerShop):null===(t=d.default.inst)||void 0===t||t.hide()},t.prototype.onCurrencyUpdate=function(e){var t=e.find(function(e){return e.itemID===I.ConstConfig.INVENTORY.ITEM_ID.COIN});this.coinNumber.string=t.count.toString(),P.UserInfo.curCoin=t.count},t.prototype.onItemPreview_NGCExample=function(e){this.player.setSkinByName(e),this.punkRiderSmokePreviewHandler.enableOrDisableSmokeBasedOnSkin(e),this.skinName.setLocalizedText(N.default.getSkinLocalizedName(e)),this.charUpgradeUI.updateUI(e)},t.prototype.onItemEquip_NGCExample=function(e){this._shopManager.updateEquippedItemList([e]),N.default.inst.setCurHero(e),this.charUpgradeUI.updateUI(e)},t.prototype.updateCurrentEquippedHero=function(){var e=N.default.inst.getCurHero();this._shopManager.updateEquippedItemList([e]),this.player.setSkinByName(e),this.punkRiderSmokePreviewHandler.enableOrDisableSmokeBasedOnSkin(e),this.skinName.setLocalizedText(N.default.getSkinLocalizedName(e)),this.charUpgradeUI.updateUI(e)},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},t.prototype.handleBackKey=function(){p.NgcNavBarManager.inst&&p.NgcNavBarManager.inst.onQuitGame()},a([T(cc.Prefab)],t.prototype,"itemContainerPrefab",void 0),a([T(cc.Prefab)],t.prototype,"rewardClaimAnimationPrefab",void 0),a([T(cc.Node)],t.prototype,"itemContainerParent",void 0),a([T(cc.EditBox)],t.prototype,"editBox",void 0),a([T(cc.Node)],t.prototype,"playerParent",void 0),a([T(b.default)],t.prototype,"player",void 0),a([T(c.default)],t.prototype,"punkRiderSmokePreviewHandler",void 0),a([T(cc.Label)],t.prototype,"coinNumber",void 0),a([T(h.NgcLabelLocalized)],t.prototype,"skinName",void 0),a([T(cc.Prefab)],t.prototype,"charUpgradeUIPrefab",void 0),a([T(cc.Node)],t.prototype,"charUpgradeUIParent",void 0),a([T(cc.Node)],t.prototype,"debugNode",void 0),a([O],t)}(y.default);o.ShopScreen=E,cc._RF.pop()},{"../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler":"PunkRiderPreviewVfxHandler","../../../NanoGameCore/CrossFeatures/DailyReward/Script/RewardClaimAnimation":"RewardClaimAnimation","../../../NanoGameCore/CrossFeatures/ItemShop/Script/ItemContainer":"ItemContainer","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Player/PlayerAnim":"PlayerAnim","../../Player/PlayerSkinMgr":"PlayerSkinMgr","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","./CharacterUpgradeUI":"CharacterUpgradeUI"}],ShrinkingSmoke:[function(e,t,o){"use strict";cc._RF.push(t,"63997E8evJM2Yt09UlGmj5b","ShrinkingSmoke");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Maps/MapManager"),s=e("./GameObjectBase"),c=e("./GameObjMgr"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t}return r(t,e),t.instantiate=function(e){var t=c.GameObjMgr.inst.getShrinkingSmoke();t||(t=cc.instantiate(c.GameObjMgr.inst.shrinkingSmokePrefab));var o=t.getComponent(s.default);return o&&e?(o.posInMap=e,i.default.inst.addObjectToMapBoardComponents(o)):cc.log("ShrinkingSmoke instantiae without posInMap"),t},t.prototype.release=function(){var e;i.default.inst.removeComponentInMapBoard(this),(null===(e=this.renderComponent)||void 0===e?void 0:e.node.getNumberOfRunningActions())>0&&cc.Tween.stopAllByTarget(this.renderComponent.node),this.renderComponent.node.color=cc.Color.WHITE,c.GameObjMgr.inst.putShrinkingSmoke(this)},a([p(cc.Animation)],t.prototype,"animation",void 0),a([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../Maps/MapManager":"MapManager","./GameObjMgr":"GameObjMgr","./GameObjectBase":"GameObjectBase"}],SingleItemAsset:[function(e,t,o){"use strict";cc._RF.push(t,"72e39wQDbBDS4o+M2u8/WTL","SingleItemAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemAsset=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnlockedBrandNew=null,t.backgroundUnlockedUnselected=null,t.backgroundUnlockedSelected=null,t.backgroundLockedUnselected=null,t.backgroundLockedSelected=null,t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),a([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedBrandNew",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedUnselected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedSelected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundLockedUnselected",void 0),a([c(cc.SpriteFrame)],t.prototype,"backgroundLockedSelected",void 0),a([c(cc.Animation)],t.prototype,"flashAnimation",void 0),a([s],t)}(cc.Component);o.SingleItemAsset=l,cc._RF.pop()},{}],SingleItemType1:[function(e,t,o){"use strict";cc._RF.push(t,"268d8fPIVNHB4NOtq+3G3mO","SingleItemType1");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType1=void 0;var i=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type1"},a([c],t)}(i.SingleItem));o.SingleItemType1=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType2:[function(e,t,o){"use strict";cc._RF.push(t,"ce75cAOLatG8rzXR2HAnP5U","SingleItemType2");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType2=void 0;var i=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type2"},a([c],t)}(i.SingleItem));o.SingleItemType2=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType3:[function(e,t,o){"use strict";cc._RF.push(t,"f31famkdhFIIKA7ux9JlWqS","SingleItemType3");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType3=void 0;var i=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type3"},a([c],t)}(i.SingleItem));o.SingleItemType3=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItem:[function(e,t,o){"use strict";cc._RF.push(t,"58916PnGttEgadq51DTd0fj","SingleItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItem=void 0;var i=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../AssetComponent/SingleItemAsset"),u=e("../ItemStatus/ItemStatus"),p=e("./ItemShop"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.itemInfoLayout=null,t.itemPicture=null,t.itemName=null,t.purchaseMethodParent=null,t._singleItemAsset=null,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._singleItemAsset=this.node.getComponent(l.SingleItemAsset),this.initItemPictureDesignSize(),this.initItemInfoLayoutDesignPosition()},t.prototype.initItemPictureDesignSize=function(){var e=i.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.designWidth=this.itemPicture.node.width,e.baseSize.designHeight=this.itemPicture.node.height)},t.prototype.initItemInfoLayoutDesignPosition=function(){if(this.itemInfoLayout){var e=i.ResizableComponent.getResizableComponent(this.itemInfoLayout);e.baseSize.designX=this.itemInfoLayout.x,e.baseSize.designY=this.itemInfoLayout.y}},t.prototype.childUpdateInfo=function(){this.updateBackground(),this.updateSpriteFrame(),this.updateItemName(),this.updatePurchaseMethodType()},t.prototype.childSelect=function(){this.updateBackground()},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground(),this.checkRemoveBrandNewItem()},t.prototype.updateNormalBackground=function(){this.ItemInfo.isBought?this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundUnlockedSelected:this._singleItemAsset.backgroundUnlockedUnselected:this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundLockedSelected:this._singleItemAsset.backgroundLockedUnselected},t.prototype.updateBrandNewBackground=function(){var e=this.ItemInfo.isBrandNew&&0==this._isSelected;e&&(this.background.spriteFrame=this._singleItemAsset.backgroundUnlockedBrandNew),this._singleItemAsset.EnableFlash=e},t.prototype.checkRemoveBrandNewItem=function(){this.ItemInfo.isBrandNew&&this._isSelected&&c.NgcShopManager.getInstance().removeBrandItem(this.ItemInfo.itemID)},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateSpriteFrame=function(){this.itemPicture.spriteFrame=this.ItemInfo.spriteFrame;var e=i.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.width=this.itemPicture.node.width,e.baseSize.height=this.itemPicture.node.height)},t.prototype.updateItemName=function(){this.itemName.setLocalizedText(this.ItemInfo.itemName),this.itemName.node.active=this.ItemInfo.isShowName},t.prototype.updatePurchaseMethodType=function(){if(u.NgcItemStatus.updateItemStatusForNode(this.purchaseMethodParent,this._itemInfo),this.itemInfoLayout){var e=i.ResizableComponent.getResizableComponent(this.itemInfoLayout);1==this.ItemInfo.isBought?(e.baseSize.x=0,e.baseSize.y=0):(e.baseSize.x=e.baseSize.designX,e.baseSize.y=e.baseSize.designY)}},t.prototype.getDisplayType=function(){return"type0"},a([h(cc.Sprite)],t.prototype,"background",void 0),a([h(cc.Node)],t.prototype,"itemInfoLayout",void 0),a([h(cc.Sprite)],t.prototype,"itemPicture",void 0),a([h(s.NgcLabelLocalized)],t.prototype,"itemName",void 0),a([h(cc.Node)],t.prototype,"purchaseMethodParent",void 0),a([f],t)}(p.ItemShop);o.SingleItem=g,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/SingleItemAsset":"SingleItemAsset","../ItemStatus/ItemStatus":"ItemStatus","./ItemShop":"ItemShop"}],Social_impl_FacebookSrv:[function(e,t,o){"use strict";cc._RF.push(t,"d85ceqLwJRC9Kvjt8CuH8PV","Social_impl_FacebookSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../SDK/Facebook/FacebookSrv"),c=e("./Social"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("Social_impl_Facebook pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Social_impl_Facebook initialized")})},t.prototype._getName=function(){return"Facebook"},t.prototype._login=function(e){var t=this;void 0===e&&(e=null),s.default.inst.login().then(function(o){e(null,o),t.onLoginSuccesCallback&&t.onLoginSuccesCallback()}).catch(function(t){e(t,null)})},t.prototype._logout=function(e){var t=this;void 0===e&&(e=null),s.default.inst.logout().then(function(o){e&&e(null,o),t.onLogoutSuccesCallback&&t.onLogoutSuccesCallback()}).catch(function(t){e&&e(t,null)})},t.prototype._reLogin=function(){s.default.inst.reLogin()},t.prototype._share=function(e){void 0===e&&(e=null)},t.prototype._invite=function(e){void 0===e&&(e=null)},t.prototype._getConflictedData=function(){return s.default.inst.getDataConflict()},t.prototype._fetchInfoWithAccessToken=function(e,t){return s.default.inst.fetchInfoWithAccessToken(e,t)},t.prototype._sendFriendListToServer=function(){s.default.inst.sendFriendListToServer()},t.prototype._checkLoginStatus=function(){return s.default.inst.checkLoginStatus()},t.prototype._getFullName=function(){return s.default.inst.getFullName()},t.prototype._getFormatName=function(){return s.default.inst.getFormatName()},t.prototype._getProfilePictureUrl=function(){return s.default.inst.getProfilePictureUrl()},t.prototype._sendNameToServer=function(){s.default.inst.sendNameToServer()},t.prototype._sendAvatarToServer=function(){s.default.inst.sendAvatarToServer()},t.prototype._forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.default.inst.forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype._getSocialID=function(){return s.default.inst.getFacebookId()},t.prototype._isConnected=function(){return s.default.inst.isConnected()},t.prototype._getFriendsData=function(){return s.default.inst.getFriendsData()},t.prototype._getSocialType=function(){return c.SocialType.Facebook},t.prototype._isLoginPopUpOpen=function(){return s.default.inst.isLoginPopUpOpen},t}(c.NgcSocial);o.default=l,cc._RF.pop()},{"../../SDK/Facebook/FacebookSrv":"FacebookSrv","./Social":"Social"}],Social_impl_UplaySrv:[function(e,t,o){"use strict";cc._RF.push(t,"c8609kr4txALqRCjoYD3m0a","Social_impl_UplaySrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../SDK/Uplay/UplaySrv"),c=e("./Social"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("Social_impl_UplaySrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Social_impl_UplaySrv initialized")})},t.prototype._getName=function(){return"Uplay"},t.prototype._login=function(e){var t=this;void 0===e&&(e=null),s.default.inst.login().then(function(o){console.log("##_login resolve"),e(null,o),t.onLoginSuccesCallback&&t.onLoginSuccesCallback()}).catch(function(t){console.log("##_login reject"),e(t,null)})},t.prototype._logout=function(e){var t=this;void 0===e&&(e=null),s.default.inst.logout().then(function(t){e&&e(null,t)}).catch(function(t){e&&e(t,null)}).finally(function(){t.onLogoutSuccesCallback&&t.onLogoutSuccesCallback()})},t.prototype._reLogin=function(){s.default.inst.reLogin()},t.prototype._share=function(e){void 0===e&&(e=null)},t.prototype._invite=function(e){void 0===e&&(e=null)},t.prototype._getConflictedData=function(){return s.default.inst.getDataConflict()},t.prototype._fetchInfoWithAccessToken=function(e,t){return s.default.inst.fetchInfoWithAccessToken(e,t)},t.prototype._sendFriendListToServer=function(){s.default.inst.sendFriendListToServer()},t.prototype._checkLoginStatus=function(){return s.default.inst.checkLoginStatus()},t.prototype._getFullName=function(){return s.default.inst.getFullName()},t.prototype._getFormatName=function(){return s.default.inst.getFormatName()},t.prototype._getProfilePictureUrl=function(){return s.default.inst.getProfilePictureUrl()},t.prototype._sendNameToServer=function(){s.default.inst.sendNameToServer()},t.prototype._sendAvatarToServer=function(){s.default.inst.sendAvatarToServer()},t.prototype._forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.default.inst.forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype._getSocialID=function(){return s.default.inst.getUplayId()},t.prototype._isConnected=function(){return s.default.inst.isConnected()},t.prototype._getFriendsData=function(){return s.default.inst.getFriendsData()},t.prototype._getSocialType=function(){return c.SocialType.Uplay},t.prototype._isLoginPopUpOpen=function(){return s.default.inst.isLoginPopUpOpen()},t}(c.NgcSocial);o.default=l,cc._RF.pop()},{"../../SDK/Uplay/UplaySrv":"UplaySrv","./Social":"Social"}],Social:[function(e,t,o){"use strict";cc._RF.push(t,"22639UmKzZO2LK0uwhPjAe1","Social");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSocial=o.SocialType=void 0;var s=e("../Service");(function(e){e[e.None=-1]="None",e[e.Facebook=0]="Facebook",e[e.Uplay=1]="Uplay",e[e.Douyin=2]="Douyin"})(o.SocialType||(o.SocialType={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLoginSuccesCallback=null,t.onLogoutSuccesCallback=null,t}return r(t,e),t.prototype.setOnLoginSuccesCallback=function(e){void 0===e&&(e=null),this.onLoginSuccesCallback=e},t.prototype.setOnLogoutSuccesCallback=function(e){void 0===e&&(e=null),this.onLogoutSuccesCallback=e},t.getSrvInstance=function(e){return t.srvInstances.find(function(t){return t.getSocialType()===e})},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.login=function(e){void 0===e&&(e=null),this._login(e)},t.prototype.logout=function(e){void 0===e&&(e=null),this._logout(e)},t.prototype.reLogin=function(e){void 0===e&&(e=null),this._reLogin(e)},t.prototype.share=function(e){void 0===e&&(e=null),this._share(e)},t.prototype.invite=function(e){void 0===e&&(e=null),this._invite(e)},t.prototype.getConflictedData=function(){return this._getConflictedData()},t.prototype.fetchInfoWithAccessToken=function(e,t){return void 0===t&&(t=null),this._fetchInfoWithAccessToken(e,t)},t.prototype.sendFriendListToServer=function(){this._sendFriendListToServer()},t.prototype.checkLoginStatus=function(){return this._checkLoginStatus()},t.prototype.getFullName=function(){return this._getFullName()},t.prototype.getFormatName=function(){return this._getFormatName()},t.prototype.getProfilePictureUrl=function(){return this._getProfilePictureUrl()},t.prototype.sendNameToServer=function(){this._sendNameToServer()},t.prototype.sendAvatarToServer=function(){this._sendAvatarToServer()},t.prototype.forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this._forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype.getSocialID=function(){return this._getSocialID()},t.prototype.isConnected=function(){return this._isConnected()},t.prototype.getFriendsData=function(){return this._getFriendsData()},t.prototype.getSocialType=function(){return this._getSocialType()},t.prototype.isLoginPopUpOpen=function(){return this._isLoginPopUpOpen()},t.srvInstances=[],t.inst=null,t.services=[],t}(s.NgcService);o.NgcSocial=c,cc._RF.pop()},{"../Service":"Service"}],SoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"80d7ayxQOtK/qL9HLUa8l+4","SoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundManager=void 0;var i=e("../NanoGameCore/GameFramework/Scripts/NgcSoundManager"),s=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),c=e("./Main"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicChannel=null,t.inGameMusicClip=null,t.ShrinkingMusicClip=null,t.BombExplosionClip=null,t.PlayerDeathClip=null,t.PlayerStunnedClip=null,t.PlayerKillClip=null,t.PlayerReviveClip=null,t.PowerUpClip=null,t.PowerDownClip=null,t.MapTimerAlarmClip=null,t.MapShrinkClip=null,t.AsbIntroClip=null,t.VictoryClip=null,t.PlayerWalkingClip=null,t.CollectCoinClip=null,t.PlayerLoseLifeClip=null,t.PlayerPassBombClip=null,t.AudioClips=cc.Enum({BombExplosionClip:0,PlayerDeathClip:1,PlayerStunnedClip:2,PlayerKillClip:3,PlayerReviveClip:4,PowerUpClip:5,PowerDownClip:6,MapTimerAlarmClip:7,MapShrinkClip:8,AsbIntroClip:9,VictoryClip:10,PlayerWalkingClip:11,CollectCoinClip:12,PlayerLoseLife:13,PlayerPassBombClip:14}),t._curMusicVolume=0,t.walkingSoundId=void 0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Too many Sound Managers"):(o.inst=this,e.prototype.onLoad.call(this))},t.prototype.start=function(){c.Main.inst.onAppVisibleDelegate.add(this.onAppVisible),c.Main.inst.onAppHiddendDelegate.add(this.onAppHidden)},t.prototype.playStartScreenMusic=function(){this.stopMusic(),s.default.musicOff||(cc.audioEngine.playMusic(this.startScreenMusicClip,!0),cc.audioEngine.setMusicVolume(c.Main.inst.inBackground?0:.05),this._curMusicVolume=.05)},t.prototype.playGameMusic=function(){this.stopMusic(),s.default.musicOff||(cc.audioEngine.playMusic(this.inGameMusicClip,!0),cc.audioEngine.setMusicVolume(c.Main.inst.inBackground?0:.02),this._curMusicVolume=.02)},t.prototype.playShrinkingMusic=function(){this.stopMusic(),s.default.musicOff||(cc.audioEngine.playMusic(this.ShrinkingMusicClip,!0),cc.audioEngine.setMusicVolume(c.Main.inst.inBackground?0:.05),this._curMusicVolume=.05)},t.prototype.playWalkingLoopSound=function(){},t.prototype.playSound=function(t,o,n){c.Main.inst.inBackground||e.prototype.playSound.call(this,t,o,n)},t.prototype.playPlayerWalkingSound=function(){this.walkingSoundId||(this.walkingSoundId=o.inst.playSoundWithClip(o.inst.PlayerWalkingClip,.7,!0))},t.prototype.stopPlayerWalkingSound=function(){this.walkingSoundId&&(o.inst.stopSound(this.walkingSoundId),this.walkingSoundId=void 0)},t.prototype.onAppVisible=function(){cc.audioEngine.setMusicVolume(o.inst._curMusicVolume)},t.prototype.onAppHidden=function(){cc.audioEngine.setMusicVolume(0)},t.inst=null,a([p({type:cc.AudioClip})],t.prototype,"inGameMusicClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"ShrinkingMusicClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"BombExplosionClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerDeathClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerStunnedClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerKillClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerReviveClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PowerUpClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PowerDownClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"MapTimerAlarmClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"MapShrinkClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"AsbIntroClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"VictoryClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerWalkingClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"CollectCoinClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerLoseLifeClip",void 0),a([p({type:cc.AudioClip})],t.prototype,"PlayerPassBombClip",void 0),o=a([u],t)}(i.NgcSoundManager);o.SoundManager=d,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","./Main":"Main"}],SpectatorItem:[function(e,t,o){"use strict";cc._RF.push(t,"265f4M+PcJDnoss3W+PahIM","SpectatorItem"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpectatorItem=o.SpectatorTag=void 0;var n=cc._decorator;n.ccclass,n.property,function(e){e[e.FRIEND=0]="FRIEND",e[e.ELIMINATED=1]="ELIMINATED",e[e.LEADER=2]="LEADER",e[e.NONE=3]="NONE"}(o.SpectatorTag||(o.SpectatorTag={}));var r=function(){function e(e,t,o,n){this._netID=e,this._tag=t,this._pName=o,this._pFlag=n,cc.log("Init item with netID "+this._netID+" tag: "+this._tag+" name "+this._pName+" Flag "+this._pFlag)}return e.prototype.start=function(){},e}();o.NgcSpectatorItem=r,cc._RF.pop()},{}],SpectatorManager:[function(e,t,o){"use strict";cc._RF.push(t,"4a7dek/0qBK1b0TYL0O02Dg","SpectatorManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpectatorManager=void 0;var i=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),s=e("../../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),c=e("../../../../GameFramework/Scripts/NgcGame"),l=e("../../../../GameFramework/Scripts/NgcMain"),u=e("../../../../GameFramework/Scripts/NgcSceneManager"),p=e("../../../../Services/Platform/Platform"),d=e("../../../../Services/Telemetry/Telemetry"),f=e("../../../Dialogs/Script/DialogBase"),h=e("../../../Emojis/Script/EmotesManager"),g=e("./SpectatorItem"),m=cc._decorator,y=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pTag=null,t.pName=null,t.overlay=null,t.totalViewers=null,t.totalViewingYou=null,t.pFlag=null,t.leadCrown=null,t.hideSpectator=null,t.showSpectator=null,t.disabledSpectator=null,t.spectatedYou=null,t.emojiParent=null,t.bubbleParent=null,t.hudUIs=[],t.eliminated=null,t.targetStillAlive=!0,t.nViewers=0,t.youViewers=0,t.currDisplayIdx=0,t.listViewer={},t.SPECTATOR_BROADCAST_MESSAGE_TYPE="send_spectator",t.spectatorStarted=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,this.spectatorList=[],this.listViewer={},this.initSwipeGesture()},t.prototype.onDestroy=function(){s.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE)},t.prototype.initSwipeGesture=function(){this.overlay.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGesture,this),this.overlay.active=!1},t.prototype.detectSwipeGesture=function(e){e.stopPropagation();var t=e.getStartLocation(),o=e.getLocation().x-t.x;o<0?this.swipeLeft():o>0&&this.swipeRight()},t.prototype.swipeLeft=function(){this.prevView()},t.prototype.swipeRight=function(){this.nextView()},t.prototype.reset=function(){this.spectatorList=[],this.listViewer={},this.hideAllSpectatorUI(),s.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE),o.inst=null,cc.log("reset Spectator Mode")},t.prototype.getIndexFromNetID=function(e){return this.spectatorList?this.spectatorList.findIndex(function(t){return t._netID==e}):-1},t.prototype.getSpecatorFromNetID=function(e){var t=this.getIndexFromNetID(e);return-1==t?null:this.spectatorList[t]},t.prototype.hideAllSpectatorUI=function(){this.showSpectator.active=!1,this.hideSpectator.active=!1,this.spectatedYou.active=!1,this.disabledSpectator.active=!1},t.prototype.enabledSpectator=function(){cc.log("enabledSpectator"),this.hideSpectator.active=this.isAvailable(),this.showSpectator.active=!1,this.spectatedYou.active=!1,this.targetStillAlive=!1,this.disabledSpectator.active=!this.isAvailable()&&l.NgcMain.getAppContext()!=l.AppContext.Gameplay},t.prototype.onKeyDown=function(e){if(this.spectatorStarted)switch(e.keyCode){case cc.macro.KEY.a:this.prevView();break;case cc.macro.KEY.d:this.nextView();break;case cc.macro.KEY.left:this.prevView();break;case cc.macro.KEY.right:this.nextView()}},t.prototype.stopSpectator=function(){this.spectatorStarted=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),cc.log("stopSpectator"),this.overlay.active=!1,this.hideSpectator.active=this.isAvailable(),this.showSpectator.active=!1,this.spectatedYou.active=!1,this.disabledSpectator.active=!this.isAvailable()&&l.NgcMain.getAppContext()!=l.AppContext.Gameplay,this.showHudUI(!0),this.sendSpectator(!1),h.NgcEmotesManager.inst.allowScrollView(!1),d.NgcTelemetry.inst.LogEvent_ExitScreen("SpectatorScreen"),l.NgcMain.popAppContext(),this.reset(),c.NgcGame.inst.node.emit("stopSpectator"),this.hide(function(){c.NgcGame.inst.showVideoReward()})},t.prototype.showHudUI=function(e){null!=this.hudUIs&&this.hudUIs.forEach(function(t){t&&(t.active=e)})},t.prototype.startSpectator=function(){this.isAvailable()?(cc.log("startSpectator"),this.checkShowBanner(i.NgcPointcuts.bannerSpectator),this.overlay.active=!0,this.overlay.opacity=0,this.hideSpectator.active=!1,this.showSpectator.active=!0,this.spectatedYou.active=!1,this.showHudUI(!1),h.NgcEmotesManager.inst.setParentForEmojisAndBubble(this.emojiParent,this.bubbleParent),h.NgcEmotesManager.inst.allowScrollView(!0),d.NgcTelemetry.inst.LogEvent_EnterScreen("SpectatorScreen"),l.NgcMain.pushAppContext(l.AppContext.Spectator),c.NgcGame.inst.node.emit("startSpectator"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),this.spectatorStarted=!0):this.stopSpectator()},t.prototype.getIndexSpecatorLeaderTag=function(){return this.spectatorList.findIndex(function(e){return e._tag==g.SpectatorTag.LEADER})},t.prototype.addSpectatorList=function(){var e=this;u.NgcSceneManager.inst.getAllPlayer().forEach(function(t){t._canBeSpectated&&e.addSpectatorItem(!1,t.getNetID(),t.getName(),t.getCountryFlag()),t._isLeader&&e.setSpectatorLeader(t.getNetID()),e.addSetterForPlayer(t)})},t.prototype.addSpectatorItem=function(e,t,o,n){var r=e?g.SpectatorTag.FRIEND:g.SpectatorTag.NONE,a=new g.NgcSpectatorItem(t,r,o,n);this.spectatorList.push(a)},t.prototype.setSpectatorLeader=function(e){this.updateSpectatorTag(e,g.SpectatorTag.LEADER),this.lastLeaderNetID!=e&&(this.removeLeaderByNetID(this.lastLeaderNetID),this.currDisplayNetID==e&&this.updateSpectatorUI(),this.lastLeaderNetID=e)},t.prototype.removeLeaderByNetID=function(e){if(e==this.lastLeaderNetID&&null!=this.lastLeaderNetID){var t=this.getSpecatorFromNetID(e);t&&(t._tag=g.SpectatorTag.NONE,this.currDisplayNetID==this.lastLeaderNetID&&this.updateSpectatorUI(),this.lastLeaderNetID=null)}},t.prototype.addSetterForPlayer=function(e){var t=this,o=e;o.__defineSetter__("_canBeSpectated",function(n){0==n?t.removeSpectatorNetID(e.getNetID()):t.addSpectatorItem(!1,e.getNetID(),e.getName(),e.getCountryFlag()),o._canBeSpectatedValue=n}),o.__defineGetter__("_canBeSpectated",function(){return o._canBeSpectatedValue}),o.__defineSetter__("_isLeader",function(n){n?t.setSpectatorLeader(e.getNetID()):t.removeLeaderByNetID(e.getNetID()),o._isLeaderValue=n}),o.__defineGetter__("_isLeader",function(){return o._isLeaderValue})},t.prototype.setSpectatorEliminated=function(e){this.updateSpectatorTag(e,g.SpectatorTag.ELIMINATED)},t.prototype.updateSpectatorTag=function(e,t){var o=this.getSpecatorFromNetID(e);o&&(o._tag=t)},t.prototype.removeSpectatorNetID=function(e){var t=this,o=this.getIndexFromNetID(e);-1!=o&&(this.spectatorList.splice(o,1),0==this.spectatorList.length?this.scheduleOnce(function(){t.stopSpectator()},1):this.currDisplayNetID==e&&(this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator()))},t.prototype.isAvailable=function(){return this.spectatorList&&this.spectatorList.length>0},t.prototype.sortPriority=function(){this.spectatorList=this.spectatorList.sort(function(e,t){return t._tag-e._tag}),console.log("After sort = ",this.spectatorList)},t.prototype.startView=function(){this.addSpectatorList(),this.isAvailable()&&(this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator())},t.prototype.prevView=function(){this.currDisplayIdx--,this.currDisplayIdx<0&&(this.currDisplayIdx=this.spectatorList.length-1),this.updateNewSpectator()},t.prototype.nextView=function(){this.currDisplayIdx++,this.currDisplayIdx>=this.spectatorList.length&&(this.currDisplayIdx=0),this.updateNewSpectator()},t.prototype.updateNewSpectator=function(){this.spectatorList&&(this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,c.NgcGame.inst.node.emit("changeSpectatorTarget",this.currDisplayNetID),this.lastDisplayNetID!=this.currDisplayNetID&&(this.sendSpectator(!0),this.lastDisplayNetID=this.currDisplayNetID,this.updateSpectatorUI()))},t.prototype.getLabelFromTag=function(e){var t="";switch(e){case g.SpectatorTag.NONE:t="NORMAL PLAYER";break;case g.SpectatorTag.FRIEND:t="YOUR FRIEND";break;case g.SpectatorTag.ELIMINATED:t="ELIMINATED YOU";break;case g.SpectatorTag.LEADER:t="LEAD PLAYER"}return t},t.prototype.updateSpectatorUI=function(){var e=this.getSpecatorFromNetID(this.currDisplayNetID);e&&(cc.log("Update UI for "+e._pName),this.pName.string=e._pName,this.pFlag.spriteFrame=e._pFlag,this.leadCrown.node.active=e._tag==g.SpectatorTag.LEADER)},t.prototype.updateTotalViewers=function(){this.totalViewers.string=this.nViewers.toString()},t.prototype.sendSpectator=function(e){if(!p.NgcPlatform.isOfflineMode()){var t=s.NgcNetClientRefactor.inst.getCombinedNetID();e&&(cc.log("netID :",t),cc.log("this.currDisplayNetID :",this.currDisplayNetID),cc.log(" "));var o={isJoin:e,playerNetID:t,spectatingNetID:this.currDisplayNetID,time:(new Date).getTime()};s.NgcNetClientRefactor.inst.sendNgcBroadcast(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,o,"")}},t.prototype.handleBroadcastMessageSpectator_Refactor=function(e){var t=s.NgcNetClientRefactor.inst.localPlayerID,o=JSON.parse(e.payload);cc.log(o),o.isJoin?this.listViewer[s.NgcNetClientRefactor.DetachClientID(o.playerNetID)]=s.NgcNetClientRefactor.DetachPlayerID(o.spectatingNetID):delete this.listViewer[s.NgcNetClientRefactor.DetachClientID(o.playerNetID)];var n=Object.keys(this.listViewer).length;this.nViewers!=n&&n>0&&(this.nViewers=n,this.updateTotalViewers());for(var r=Object.keys(this.listViewer),a=0,i=0;i<r.length;i++){var c=r[i];this.listViewer[c]==t&&a++}a!=this.youViewers&&(this.disabledSpectator.active=this.spectatedYou.active=0!=a&&this.targetStillAlive,this.youViewers=a,this.totalViewingYou.string=""+a)},t.prototype.start=function(){this.hideAllSpectatorUI(),p.NgcPlatform.isOfflineMode()||s.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageSpectator_Refactor.bind(this))},t.prototype.onNextButtonClicked=function(){this.stopSpectator()},t.urlPrefab="Spectator",t.bundleName="03_end_game_flow",t.dialogType="NgcSpectatorManager",t.inst=null,a([_(cc.Label)],t.prototype,"pTag",void 0),a([_(cc.Label)],t.prototype,"pName",void 0),a([_(cc.Node)],t.prototype,"overlay",void 0),a([_(cc.Label)],t.prototype,"totalViewers",void 0),a([_(cc.Label)],t.prototype,"totalViewingYou",void 0),a([_(cc.Sprite)],t.prototype,"pFlag",void 0),a([_(cc.Sprite)],t.prototype,"leadCrown",void 0),a([_(cc.Node)],t.prototype,"hideSpectator",void 0),a([_(cc.Node)],t.prototype,"showSpectator",void 0),a([_(cc.Node)],t.prototype,"disabledSpectator",void 0),a([_(cc.Node)],t.prototype,"spectatedYou",void 0),a([_(cc.Node)],t.prototype,"emojiParent",void 0),a([_(cc.Node)],t.prototype,"bubbleParent",void 0),a([_({type:[cc.Node]})],t.prototype,"hudUIs",void 0),a([_(cc.Node)],t.prototype,"eliminated",void 0),o=a([y],t)}(f.NgcDialogBase);o.NgcSpectatorManager=v,cc._RF.pop()},{"../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../../GameFramework/Scripts/NgcSceneManager":"NgcSceneManager","../../../../Services/Platform/Platform":"Platform","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Emojis/Script/EmotesManager":"EmotesManager","./SpectatorItem":"SpectatorItem"}],SpriteLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"69db4hD6xFJLoKeiZ8sgJWq","SpriteLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpriteLocalized=void 0;var i=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._keyStr="SPRITE_FRAME_KEY",t}return r(t,e),Object.defineProperty(t.prototype,"spriteFrameKey",{get:function(){return this._keyStr},set:function(e){this._keyStr=e,i.NgcLocalizedManager.getSpriteFrame(e)&&this.spriteFrame&&(this.spriteFrame=i.NgcLocalizedManager.getSpriteFrame(e))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){i.NgcLocalizedManager.spriteLocalizeds.push(this),this.spriteFrameKey=this.spriteFrameKey},a([l],t.prototype,"_keyStr",void 0),a([l({tooltip:"Enter SPRITE_FRAME_KEY key here"})],t.prototype,"spriteFrameKey",null),a([c],t)}(cc.Sprite);o.NgcSpriteLocalized=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],StartInputHandler:[function(e,t,o){"use strict";cc._RF.push(t,"4ecb4RprwFKU7erSElwzl18","StartInputHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return r(t,e),t.prototype.start=function(){},a([c(cc.Label)],t.prototype,"label",void 0),a([c],t.prototype,"text",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],StartMain:[function(e,t,o){"use strict";cc._RF.push(t,"319f9Fy9wlM9J6LRzS/945k","StartMain");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager"),l=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),u=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),p=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),d=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),f=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),h=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),g=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),m=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),y=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),_=e("../../../NanoGameCore/Services/Ads/Ads"),v=e("../../../NanoGameCore/Services/ServicesMgr"),S=e("../../Player/PlayerAnim"),b=e("../../Player/PlayerSkinMgr"),N=e("../../ScreenManager"),P=e("../../SoundManager"),I=e("../../UI/DigitCountUp"),C=e("../../UserInfo"),w=e("../PartyRoomScreen/PartyRoomManager"),O=e("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),T=e("../../../NanoGameCore/Core/Delegate"),E=e("../RouletteScreen/RouletteScreen"),M=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),D=e("../../Main"),R=e("../../../NanoGameCore/Services/Platform/Platform"),B=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),A=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),k=e("../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager"),L=e("../../Player/CharacterUpgradesMgr"),G=e("../../Network/ImprovedNetClient"),F=e("../../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),j=e("../../../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager"),U=e("../../../NanoGameCore/Services/Inventory/Inventory"),x=e("../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager"),H=e("../../../NanoGameCore/Core/Utils"),V=e("../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager"),z=e("../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager"),W=e("../../TypeDefs"),K=e("../../Maps/MapManager"),Y=e("../../GameModeDataBase"),q=e("../../Player/PlayerData"),J=e("../../Game"),X=e("../../Maps/MapInfo"),Q=e("../../GameObjects/Block"),Z=e("../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler"),$=e("../../GameObjects/GameObjMgr"),ee=e("../../Dialog/MatchLoadingDialog/MatchLoadingDialog"),te=cc._decorator,oe=te.ccclass,ne=te.property,re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameLogo=null,t.playerNameBox=null,t.playerAnim=null,t.connectingToNetwork=null,t.loadingNode=null,t.coinCountUp=null,t.playerName=null,t.playerSkinName=null,t.crownNumber=null,t.debugBtn=null,t.luckyboosterParent=null,t.luckyBoosterPrefab=null,t.boosterStatusUI=null,t.logoutSpriteFramce=null,t.smokeVfxPreviewHandler=null,t.onHeroUnlockDelegate=new T.default,t._curCoin=0,t._curHeroDisplay="",t._shouldGoToPartyRoom=!1,t._canPressSpace=!1,t._boosterStatusUITween=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"curCoin",{get:function(){return this._curCoin},set:function(e){e!=this._curCoin&&(this.coinCountUp.countFrom(this._curCoin,e,.5),this._curCoin=e)},enumerable:!1,configurable:!0}),t.prototype.start=function(){return i(this,void 0,void 0,function(){return s(this,function(){return null!=o.inst?(console.error("More than one StartMain inst created"),[2]):(o.inst=this,C.UserInfo.isFirstTimeClicked=!1,this.onStartMainMenu(),[2])})})},t.prototype.onResume=function(){this._canPressSpace=!0,R.NgcPlatform.isOfflineMode()||G.default.inst.isConnected()||G.default.inst.startConnectionCycle(),R.NgcPlatform.inst&&R.NgcPlatform.inst.onPostMessage({EnterMainMenu:!0},"*"),this.onActivate(),B.NgcTelemetry.inst.LogEvent_EnterScreen("MainMenu"),this.checkShowBanner(),this.scheduleOnce(function(){z.NgcGameModeManager.inst.checkForGameModeUnlocking()},.5),R.NgcPlatform.inst.requestWebLoginButtonStatus(!0)},t.prototype.onStartMainMenu=function(){var e,t;if(v.NgcServicesMgr.isInitialized&&cc.systemEvent.on("socialInteraction",this.onSocialCallBack.bind(this)),D.Main.setOnSocialCallBack(this.onSocialCallBack.bind(this)),o.inst&&o.inst.updateNameBox(),D.Main.inst.userNameIsValid()||D.Main.inst.createFakeName(),N.default.inst.navBarIconNode){var n=new cc.Component.EventHandler;n.target=this.node,n.component="StartMain",n.handler="onNavBarButtonClick",null===(e=N.default.inst.navBarIconNode.getComponent(cc.Button))||void 0===e||e.clickEvents.push(n)}this.crownNumber.string=C.UserInfo.curCrown.toString()+" ",R.NgcPlatform.isOfflineMode()||null===(t=p.NgcNavBarManager.inst)||void 0===t||t.updateRemote(),this.onHeroUnlockDelegate.add(this.switchToUnlockedHeroScreen),L.default.inst.init().then(function(){cc.log("CharacterUpgradeMgr init OK")},function(){cc.log("CharacterUpgradeMgr init ERR")}),this._canPressSpace=!0},t.prototype.onDeactivate=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onPause=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onActivate=function(){var e;console.log("StartMain::onActivate()",cc.view.getCanvasSize()),j.NgcLuckyBoosterManager.getInstance().AvailableBooster="",cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this._canPressSpace=!0,D.Main.setAppContext(M.AppContext.MainMenu),v.NgcServicesMgr.isInitialized&&(C.UserInfo.updateInventoryWithPlatform().then(function(){}),w.NgcPartyRoomManager.mustGoToPartyRoom()||(null===(e=w.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())?(this._shouldGoToPartyRoom=!0,this.loadingNode.active=!0):c.NgcDailyRewardManager.inst.checkReward()),R.NgcPlatform.inst.checkLoginData(),this.playerName.string=y.default.localUserName,this.checkShowBanner(),P.SoundManager.inst.playStartScreenMusic(),A.default.inst.showTabBar(),z.NgcGameModeManager.inst.setPlayButtonClickCallback(this.playerClickedStart.bind(this)),z.NgcGameModeManager.inst.setModeButtonClickCallback(this.playerClickedGameMode.bind(this)),cc.systemEvent.on("refreshNameBox",this.updateNameBox,this),$.GameObjMgr.inst.initPlayerPools()},t.prototype.onLoad=function(){this.debugBtn.node.active=d.NgcBuildConfig.enabledDebugMode,F.NgcShopManager.getInstance().loadData(!0,function(){}),this.createLuckyBooster(),V.default.init(),ee.default.load(),this.checkShowBanner()},t.prototype.displayLogoutNoticeDialog=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return console.log("displayLogoutNoticeDialog"),[4,l.NgcDialogManager.createDialog(u.NgcNoticeDialog.dialogType,u.NgcNoticeDialog.urlPrefab,u.NgcNoticeDialog.bundleName)];case 1:return e.sent().getComponent(u.NgcNoticeDialog).init(h.NgcLocalizedManager.t("NTM_ERROR").text,h.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){y.default.resetWhenLoggedInFromAnotherPlace(function(){C.UserInfo.resetPrivateData()})},o.inst.logoutSpriteFramce),[2]}})})},t.prototype.createLuckyBooster=function(){this.luckyboosterParent.addChild(cc.instantiate(this.luckyBoosterPrefab))},t.prototype.playerClickedStart=function(e,t,o){var n,r,a;void 0===o&&(o=!0),o&&this.setGameModeData(W.GameMode.ClassicBattleRoyale),null===(n=g.default.inst)||void 0===n||n.hide(g.NgcPointcuts.bannerMainMenu),ee.default.show(),(null===(r=g.default.inst)||void 0===r?void 0:r.isAdsPoincutAvailable(g.NgcPointcuts.interPreGame,_.AdsType.Interstitial))?null===(a=g.default.inst)||void 0===a||a.showInterstitial(g.NgcPointcuts.interPreGame,function(){},function(){D.Main.inst.appState!==M.AppState.Game&&D.Main.inst.setState(M.AppState.Game)}):D.Main.inst.appState!==M.AppState.Game&&D.Main.inst.setState(M.AppState.Game),R.NgcPlatform.inst.requestWebLoginButtonStatus(!1),C.UserInfo.isFirstTimeClicked=!0,this._canPressSpace=!1},t.prototype.playerClickedGameMode=function(e){switch(e){case H.Utils.enumToString(W.GameMode,W.GameMode.Inferno):this.setGameModeData(W.GameMode.Inferno);break;case H.Utils.enumToString(W.GameMode,W.GameMode.FullPower):this.setGameModeData(W.GameMode.FullPower);break;case H.Utils.enumToString(W.GameMode,W.GameMode.MiniMini):this.setGameModeData(W.GameMode.MiniMini);break;case H.Utils.enumToString(W.GameMode,W.GameMode.Panic):this.setGameModeData(W.GameMode.Panic);break;default:this.setGameModeData(W.GameMode.ClassicBattleRoyale)}this.playerClickedStart(null,null,!1)},t.prototype.setGameModeData=function(e){var t=Y.default.getGameModeData(e);J.default.gameMode=e,J.default.MATCH_DURATION=t.matchDuration,J.default.EXTRA_DURATION=t.extraDuration,K.default.NUM_PLAYER=t.numPlayer,K.default.PLAYER_DISTANCE_X=t.playerDistanceX,K.default.PLAYER_DISTANCE_Y=t.playerDistanceY,K.default.MAX_PLAYER_X=t.maxPlayerX,K.default.HAS_HARD_BLOCK=t.hasHardBlock,X.default.SOFT_BLOCK_DENSITY=t.softBlockDensity,Q.default.ITEM_DENSITY=t.itemDensity,q.default.ACTIVE_GAME_MODE=e},t.prototype.onKeyDown=function(e){switch(cc.log("%cSpace bar pressed, Can press spacebar: "+this._canPressSpace,"color: blue"),e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey();break;case cc.macro.KEY.space:this._canPressSpace&&this.playerClickedStart()}},t.prototype.handleBackKey=function(){p.NgcNavBarManager.inst&&p.NgcNavBarManager.inst.onQuitGame()},t.prototype.updateNameBox=function(){o.inst.playerNameBox.active=!y.default.changedName&&!y.default.isUserLogined(),this.playerName.string=y.default.localUserName},t.prototype.updateUserInfo=function(){},t.prototype.onSocialCallBack=function(e,t){"login"===t?this.onLoginSocialSuccess():"logout"===t&&this.onLogoutSocialSuccess()},t.prototype.onLoginSocialSuccess=function(){this.updateUserInfo(),this.playerAnim.setSkinByName(b.default.inst.getCurHero()),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(b.default.inst.getCurHero())},t.prototype.onLogoutSocialSuccess=function(){this.updateUserInfo(),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(b.default.inst.getCurHero())},t.prototype.previewStartupPlatform=function(){return i(this,void 0,Promise,function(){var e=this;return s(this,function(){return[2,new Promise(function(t,o){v.NgcServicesMgr.preInit(d.NgcBuildConfig).then(function(){var o=v.NgcServicesMgr.initServices(d.NgcBuildConfig);o.then(function(e){console.log("Services Initialization finished: ",e),v.NgcServicesMgr.isInitialized=!0,D.Main.onPlatformInitCompleted().finally(function(){t()})}),o.catch(function(t){return i(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return cc.error("Failed to startup platform services: ",t),t&&t.toString().includes("not match")&&C.UserInfo.resetPrivateData(),[4,l.NgcDialogManager.createDialog(u.NgcNoticeDialog.dialogType,u.NgcNoticeDialog.urlPrefab,u.NgcNoticeDialog.bundleName)];case 1:return e.sent().getComponent(u.NgcNoticeDialog).init(h.NgcLocalizedManager.t("ERROR").text,h.NgcLocalizedManager.t("NTM_NETWORK_DISCONNECTED").text,function(){location.reload()},null),[2]}})})})},function(){o()})})]})})},t.prototype.onNavBarButtonClick=function(){p.NgcNavBarManager.inst.curState,p.NavBarState.Hide},t.prototype.onPlayerNameBoxClick=function(){p.NgcNavBarManager.inst&&p.NgcNavBarManager.inst.editOnClick()},t.prototype.debugOnclick=function(){return i(this,void 0,void 0,function(){return s(this,function(){return[2]})})},t.prototype.update=function(){var e=this;!d.NgcBuildConfig.offlineMode&&G.default.inst.isConnected()&&v.NgcServicesMgr.isInitialized&&this._shouldGoToPartyRoom&&h.NgcLocalizedManager.jsonData.length>0&&null!=O.NgcCountryFlagsManager.localCountry&&(this._shouldGoToPartyRoom=!1,this.loadingNode.active=!0,this.scheduleOnce(function(){e.loadingNode.active=!1,N.default.inst.goToPartyScreen()},3))},t.prototype.onUnlockHeroStart=function(){this.loadingNode.active=!0},t.prototype.onUnlockHeroStop=function(){this.loadingNode.active=!1},t.prototype.onHeroUnlock=function(e){this.onHeroUnlockDelegate.call(e)},t.prototype.switchToUnlockedHeroScreen=function(e){var t=N.default.inst.menuPageview.getCurrentPageIndex();E.default.setState(E.E_ROULETTE_STATE.UnlockNewHero,e,t),D.Main.inst.setState(M.AppState.Roulette),o.inst.onUnlockHeroStop()},t.prototype.onClickHeroDisplay=function(){k.NgcTabBarManager.inst.selectTab(k.NgcTabBarManager.inst.tabs[N.E_PAGE_ORDER.Shop])},t.prototype.debugHeroes=function(){if(d.NgcBuildConfig.enabledDebugMode){var e=b.default.inst.getCurHero(),t=b.default.listHeroes.indexOf(e);++t>=b.default.listHeroes.length&&(t=0),b.default.inst.unlockHero(b.default.listHeroes[t]),b.default.inst.setCurHero(b.default.listHeroes[t]),this._curHeroDisplay=b.default.inst.getCurHero(),this.playerAnim.setSkinByName(this._curHeroDisplay),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(this._curHeroDisplay),this.playerSkinName.setLocalizedText(b.default.getSkinLocalizedName(this._curHeroDisplay))}},t.prototype.updateCurrentHeroDisplay=function(){this._curHeroDisplay=b.default.inst.getCurHero(),this.playerAnim.setSkinByName(this._curHeroDisplay),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(this._curHeroDisplay),this.playerSkinName.setLocalizedText(b.default.getSkinLocalizedName(this._curHeroDisplay))},t.prototype.checkShowBanner=function(){var e,t;g.default.inst.isAdsPoincutAvailable(g.NgcPointcuts.bannerMainMenu,_.AdsType.Banner)?(null===(e=g.default.inst)||void 0===e||e.showBanner(g.NgcPointcuts.bannerMainMenu),this.gameLogo.active=!1):(null===(t=g.default.inst)||void 0===t||t.hide(),this.gameLogo.active=!0)},t.prototype.checkBoosterStatusUI=function(){var e=this,t=!!x.NgcItemInfoManager.getInstance().ItemSpriteFrameList,n=function(){var o=U.NgcInventory.inst.objectTypeTable[H.Utils.enumToString(C.boosterType,C.UserInfo.curBooster)].picture,a=x.NgcItemInfoManager.getInstance().getItemSpriteFrame(o);r.getComponent(cc.Sprite).spriteFrame=a,r.opacity=0,r.active=!0,e._boosterStatusUITween.start(),t||x.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(n)},r=o.inst.boosterStatusUI;this._boosterStatusUITween=cc.tween(r).repeatForever(cc.tween().to(.5,{opacity:255}).to(.575,{opacity:0})),C.UserInfo.curBooster?t?n():x.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(n):(this._boosterStatusUITween.stop(),r.opacity=0,r.active=!1,r.getComponent(cc.Sprite).spriteFrame=null)},t.inst=null,t.canShowBanner=!0,a([ne(cc.Node)],t.prototype,"gameLogo",void 0),a([ne(cc.Node)],t.prototype,"playerNameBox",void 0),a([ne(S.default)],t.prototype,"playerAnim",void 0),a([ne(cc.Label)],t.prototype,"connectingToNetwork",void 0),a([ne(cc.Node)],t.prototype,"loadingNode",void 0),a([ne(I.default)],t.prototype,"coinCountUp",void 0),a([ne(f.NgcLabelLocalized)],t.prototype,"playerName",void 0),a([ne(f.NgcLabelLocalized)],t.prototype,"playerSkinName",void 0),a([ne(f.NgcLabelLocalized)],t.prototype,"crownNumber",void 0),a([ne(cc.Button)],t.prototype,"debugBtn",void 0),a([ne(cc.Node)],t.prototype,"luckyboosterParent",void 0),a([ne(cc.Prefab)],t.prototype,"luckyBoosterPrefab",void 0),a([ne(cc.Node)],t.prototype,"boosterStatusUI",void 0),a([ne(cc.SpriteFrame)],t.prototype,"logoutSpriteFramce",void 0),a([ne(Z.default)],t.prototype,"smokeVfxPreviewHandler",void 0),o=a([oe],t)}(m.default);o.default=re,cc._RF.pop()},{"../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler":"PunkRiderPreviewVfxHandler","../../../NanoGameCore/Core/Delegate":"Delegate","../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../../NanoGameCore/CrossFeatures/GameMode/Script/GameModeManager":"GameModeManager","../../../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/TabBar/Script/TabBarManager":"TabBarManager","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Dialog/MatchLoadingDialog/MatchLoadingDialog":"MatchLoadingDialog","../../Game":"Game","../../GameModeDataBase":"GameModeDataBase","../../GameObjects/Block":"Block","../../GameObjects/GameObjMgr":"GameObjMgr","../../Main":"Main","../../Maps/MapInfo":"MapInfo","../../Maps/MapManager":"MapManager","../../Network/ImprovedNetClient":"ImprovedNetClient","../../Player/CharacterUpgradesMgr":"CharacterUpgradesMgr","../../Player/PlayerAnim":"PlayerAnim","../../Player/PlayerData":"PlayerData","../../Player/PlayerSkinMgr":"PlayerSkinMgr","../../ScreenManager":"ScreenManager","../../SoundManager":"SoundManager","../../TypeDefs":"TypeDefs","../../UI/DigitCountUp":"DigitCountUp","../../UserInfo":"UserInfo","../PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../RouletteScreen/RouletteScreen":"RouletteScreen"}],TabBarManager:[function(e,t,o){"use strict";cc._RF.push(t,"5a9ddvqEbRPW4GlSabF1v4P","TabBarManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabBarManager=o.TAB=o.SWIPE_MODE=void 0;var i,s,c=cc._decorator,l=c.ccclass,u=c.property,p=e("../../../../Scripts/Main"),d=e("../../../../Scripts/ScreenManager"),f=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),h=e("../../../Core/Utils"),g=e("../../../GameFramework/Scripts/BuildConfig"),m=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),y=e("../../../GameFramework/Scripts/NgcMain"),_=e("../../../GameFramework/Scripts/NgcScreenManager"),v=e("../../../GameFramework/Scripts/NgcShopManager"),S=e("../../../Services/Platform/Platform"),b=e("../../Dialogs/Script/MessageDialog/MessageDialog"),N=e("../../Dialogs/Script/NgcDialogManager"),P=e("../../NavBar/Script/NavBarManager"),I=e("./TabButton");(function(e){e[e.TAB_BAR=0]="TAB_BAR",e[e.SWIPE_SCREEN=1]="SWIPE_SCREEN"})(i=o.SWIPE_MODE||(o.SWIPE_MODE={})),function(e){e.Shop="Shop",e.Leaderboard="Leaderboard",e.MainMenu="MainMenu",e.PartyWithFriends="PWF",e.RealPrize="Prize"}(s=o.TAB||(o.TAB={}));var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabs=[],t.selectedBG=null,t.selectedHighlightBG=null,t.selectedIconYOffset=6,t.defaultIconScale=.7,t.selectedIconScale=1,t.tweenDuration=.1,t.loadingNode=null,t.delayTimeForLoadingAnimation=.5,t._selectedIndex=0,t.selectedWidth=0,t.tabByName={},t._childSwipe=!1,t._forceSwitchTab=!1,t._tabButtonDisabled=!1,t._swipeMode=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;o.inst=this,_.default.inst.setTabBar(this),this.tabs.forEach(function(t){e.tabByName[t.name]=t;var o=t.getComponent(I.NgcTabButton).tabIcon;o.originalY=o.y,t.oldParent=t.parent,t.parent=null}),this.applyPlatformCheck(),this.selectedWidth=this.selectedBG.width,this.node.opacity=0},t.prototype.applyPlatformCheck=function(){var e=this,t=[s.Shop,s.Leaderboard,s.MainMenu,s.PartyWithFriends,s.RealPrize];return g.NgcBuildConfig.buildPlatform===h.Utils.enumToString(S.PlatformID,S.PlatformID.GameDistribution)&&(t=[s.Shop,s.MainMenu,s.Leaderboard]),"POKI"===g.NgcBuildConfig.buildPlatform&&(t=[s.Shop,s.MainMenu,s.Leaderboard]),g.NgcBuildConfig.buildPlatform===h.Utils.enumToString(S.PlatformID,S.PlatformID.HUZ)&&(t=[s.Shop,s.MainMenu]),g.NgcBuildConfig.offlineMode&&(t=[s.Shop,s.MainMenu]),this.tabs=[],t.forEach(function(t){var o=e.tabByName[t];o.parent=o.oldParent,e.tabs.push(o)}),this.tabs},t.prototype.initSwipe=function(){var e=_.default.inst.MainScreenWidget.node,t=new cc.Node("Swipe Layer");t.width=e.width,t.height=e.height,t.parent=e,t.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGestureEnd,this,!0),t._touchListener.swallowTouches=!1},t.prototype.swipeDeadZone=function(){return cc.sys.isMobile?100:250},t.prototype.swipeDelayTime=function(){return 50},t.prototype.setChildSwipe=function(){this._childSwipe=!0},t.prototype.detectSwipeGestureEnd=function(e){var t=this;this._childSwipe=!1,setTimeout(function(){if(!t._childSwipe){var o=e.getStartLocation(),n=e.getLocation(),r=n.x-o.x,a=n.y-o.y;if(!(Math.abs(a)>Math.abs(r))){var i=t.swipeDeadZone();r<-i?(e.stopPropagation(),t.swipeRight()):r>i&&(e.stopPropagation(),t.swipeLeft())}}},this.swipeDelayTime())},t.prototype.swipeLeft=function(){this.moveLeft()},t.prototype.swipeRight=function(){this.moveRight()},t.prototype.start=function(){this.init()},t.prototype.init=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this)},t.prototype.updatePlacement=function(e,t){var o=this;void 0===e&&(e=0),void 0===t&&(t=!1);var n=Math.min(cc.winSize.width,768),r=n/(this.tabs.length-1+1.5),a=1.5*r;this.selectedBG.width=a,this.selectedHighlightBG.active=!0,this.selectedHighlightBG.width=a,this.selectedBG.active=!0,this.selectedHighlightBG.active=!1,this.tabs.forEach(function(i,s){var c=i.getComponent(I.NgcTabButton),l=i.getComponent(I.NgcTabButton).tabIcon,u=i.getComponent(I.NgcTabButton).tabLabel,p=c.isHighLight();u.getComponent(m.NgcLabelLocalized).enableWrapText=!1,u.getComponent(m.NgcLabelLocalized).verticalAlign=cc.Label.VerticalAlign.CENTER,u.y=-20;var d=s*r+a/2-n/2;s!==e?(p&&setTimeout(function(){c.tabHighlight.active=!0,c.tabHighlight.width=r,c.tabHighlight.opacity=255},55),t?(cc.tween(i).to(o.tweenDuration,{width:r}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY,scale:o.defaultIconScale}).start(),cc.tween(u).to(o.tweenDuration,{opacity:0}).start()):(u.opacity=0,i.width=r,l.y=l.originalY,l.scale=o.defaultIconScale,c.tabHighlight.width=r)):t?(p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=0,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d,opacity:0},{easing:"cubicInOut"}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedHighlightBG.opacity=255,o.selectedBG.active=!1,cc.tween(c.tabHighlight).to(o.tweenDuration,{opacity:0}).start()}).start()):(o.selectedBG.active=!0,o.selectedBG.opacity=255,o.selectedHighlightBG.x=d,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedBG.active=!0,cc.tween(c.tabHighlight).to(o.tweenDuration,{opacity:0}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{opacity:255}).start()}).start()),cc.tween(i).to(o.tweenDuration,{width:a}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY+o.selectedIconYOffset,scale:o.selectedIconScale}).start(),cc.tween(u).delay(.05).to(o.tweenDuration,{x:0,opacity:255},{easing:"cubicInOut"}).start(),cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).start()):(u.opacity=255,l.y=l.originalY+o.selectedIconYOffset,l.scale=o.selectedIconScale,i.width=a,i.getComponent(I.NgcTabButton).tabIcon.getComponent(cc.Widget).updateAlignment(),o.selectedBG.x=d,o.selectedHighlightBG.x=d,o.selectedBG.opacity=255,p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=255,c.tabHighlight.opacity=0,o.selectedBG.active=!1):(o.selectedHighlightBG.active=!1,o.selectedHighlightBG.opacity=0,o.selectedBG.active=!0))}),this._selectedIndex=e},t.prototype.selectedTab=function(){return this.tabs[this._selectedIndex].name},t.prototype.isLoadingAnimationRequired=function(e){return e>=this.delayTimeForLoadingAnimation},t.prototype.updateTabButtons=function(e){void 0===e&&(e=!1),this.updatePlacement(this._selectedIndex,e)},t.prototype.forceSwitchTab=function(){this._forceSwitchTab=!0},t.prototype.disableTabButtons=function(){this._tabButtonDisabled=!0,_.default.inst.disablePageviewSwipe()},t.prototype.enableTabButtons=function(){this._tabButtonDisabled=!1,_.default.inst.enablePageviewSwipe()},t.prototype.canSwitchToOtherTab=function(e){return!this._tabButtonDisabled&&(!!this._forceSwitchTab||!!_.default.inst.tabBarIsActive&&!_.default.inst.isSwitching&&d.default.inst.canSwitchToOtherScreen()&&!e.getComponent(I.NgcTabButton).disabled)},t.prototype.isComingSoon=function(e){return e.getComponent(I.NgcTabButton).disabled},t.prototype.onKeyDown=function(e){if(!N.NgcDialogManager.hasPopUpShowing())switch(e.keyCode){case cc.macro.KEY.a:this.moveLeft();break;case cc.macro.KEY.d:this.moveRight();break;case cc.macro.KEY.left:this.moveLeft();break;case cc.macro.KEY.right:this.moveRight()}},t.prototype.moveLeft=function(){var e=Math.max(this._selectedIndex-1,0);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.moveRight=function(){var e=Math.min(this._selectedIndex+1,this.tabs.length-1);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.onSelectTab=function(e){this.selectTab(e.target)},t.prototype.selectTabByIndex=function(e){var t=this.tabs[e];this.selectTab(t)},t.prototype.selectTab=function(e){var t=this;e&&(P.NgcNavBarManager.inst.curState===P.NavBarState.Show?(P.NgcNavBarManager.inst.curState=P.NavBarState.Hide,this.scheduleOnce(function(){t.processSwitchTab(e)},.65)):this.processSwitchTab(e))},t.prototype.clearAfterSwitchCallback=function(){this._onAfterSwitchCallback&&(this.unschedule(this._onAfterSwitchCallback),this._onAfterSwitchCallback=null)},t.prototype.processSwitchTab=function(e){var t=this;if(this.canSwitchToOtherTab(e)){_.default.inst.enablePageviewSwipe(),this.node.opacity=255,this.clearAfterSwitchCallback();var o=this._forceSwitchTab;if(this._swipeMode=this._forceSwitchTab?i.SWIPE_SCREEN:i.TAB_BAR,o||(_.default.inst._scrollToPageDisabled=!1,_.default.inst.clearPageTurningCallback()),this._forceSwitchTab=!1,this.tabs.indexOf(e)!==this._selectedIndex){var n=this.tabs[this._selectedIndex].getComponent(I.NgcTabButton),r=e.getComponent(I.NgcTabButton),a=r.onBeforeSwitchEvent,s=r.onAfterSwitchEvent,c=r.activeScreenID();this._switchScreen=function(){a&&a.emit([]),-1!==c&&(_.default.inst.showAllScreens(),_.default.inst.switchScreen(c,t.transitionType(),function(){s&&(t._onAfterSwitchCallback=function(){s.emit([])},t.scheduleOnce(t._onAfterSwitchCallback,.15)),o||_.default.inst.onPageTurning(null,!1)})),t._swipeMode=null},n&&n.onLeaveEvent&&n.onLeaveEvent.handler&&n.onLeaveEvent.emit([]),n&&n.exitPromptRequire||this._switchScreen()}}else if(this.isComingSoon(e)){var l=this;this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),N.NgcDialogManager.createDialog(b.NgcMessageDialog.dialogType,b.NgcMessageDialog.urlPrefab,b.NgcMessageDialog.bundleName).then(function(e){var t=e.getComponent(b.NgcMessageDialog);t.init("NGG_Coming_Soon"),l.messageDialog=t.node})}},t.prototype.transitionType=function(){return _.TransitionType.Slide},t.prototype.processSwitchToNextScreen=function(){this._switchScreen&&this._switchScreen()},t.prototype.updateTabPlacementByScreenID=function(e,t){void 0===t&&(t=!1);var o=this.getTabButtonIndexByScreenID(e);this.updatePlacement(o,t)},t.prototype.switchScreenDelayByScreenID=function(e){var t=this.getTabButtonIndexByScreenID(e);return this.tabs[t].getComponent(I.NgcTabButton).switchScreenDelay},t.prototype.getSlideDirection=function(e){if(-1===this._selectedIndex)return-1;var t=this.tabs[this._selectedIndex].getComponent(I.NgcTabButton).activeScreenID(),o=this.getTabButtonIndexByScreenID(t);return this.getTabButtonIndexByScreenID(e)>o?1:-1},t.prototype.getTabButtonIndexByScreenID=function(e){return this.tabs.map(function(e){return e.getComponent(I.NgcTabButton).activeScreenID()}).indexOf(e)},t.prototype.onAfterGoToStartScreen=function(){P.NgcNavBarManager.inst.showAllNavBar(!0)},t.prototype.isShopTabHighlight=function(e){return e.value=v.NgcShopManager.getInstance().HasBrandNewItem,e.value},t.prototype.worldPosOfShopTab=function(){return this.tabs[0].convertToWorldSpaceAR(cc.v2(0,0))},t.prototype.playAnimationShopTabGetItem=function(){var e=this.tabs[0].getComponent(I.NgcTabButton).tabIcon;cc.tween(e).to(.35,{scale:2.5*e.scale},{easing:"backOut"}).to(.35,{scale:e.scale},{easing:"backOut"}).start()},t.prototype.onBeforeGoToShop=function(){},t.prototype.onAfterGoToShop=function(){},t.prototype.onBeforeGoToLeaderBoard=function(){},t.prototype.onAfterGoToLeaderboard=function(){d.default.inst.afterGoToLeaderBoardScreen()},t.prototype.onBeforeGoToPWF=function(){p.Main.inst.appState=y.AppState.PartyScreen,d.default.inst.beforeGoToPartyScreen()},t.prototype.onAfterGoToPWF=function(){d.default.inst.afterGoToPartyScreen()},t.prototype.onLeavePWF=function(){var e=this,t=p.Main.inst.appState;p.Main.inst.appState=y.AppState.StartScreen,f.NgcPartyRoomManager.inst.canExitWithoutPrompt()?this.processSwitchToNextScreen():f.NgcPartyRoomManager.inst.showExitDialog(function(o){if(o)e.processSwitchToNextScreen();else{if(e._swipeMode===i.SWIPE_SCREEN){var n=_.default.inst.getPageIndexByScreenID(d.ScreenIDs.PWFScreen);_.default.inst.getScreenByPageId(n).node.parent.opacity=255,_.default.inst.menuPageview.scrollToPage(n,.5)}p.Main.inst.appState=t}},!1)},t.prototype.onBeforeGoToRealPrize=function(){},t.prototype.onAfterGoToRealPrize=function(){},t.prototype.isRealPrizeTabHighlight=function(e){return e.value=!1,e.value},t.inst=null,a([u({type:[cc.Node]})],t.prototype,"tabs",void 0),a([u(cc.Node)],t.prototype,"selectedBG",void 0),a([u(cc.Node)],t.prototype,"selectedHighlightBG",void 0),a([u],t.prototype,"selectedIconYOffset",void 0),a([u],t.prototype,"defaultIconScale",void 0),a([u],t.prototype,"selectedIconScale",void 0),a([u],t.prototype,"tweenDuration",void 0),a([u(cc.Node)],t.prototype,"loadingNode",void 0),a([u],t.prototype,"delayTimeForLoadingAnimation",void 0),o=a([l],t)}(cc.Component);o.NgcTabBarManager=C,cc._RF.pop()},{"../../../../Scripts/Main":"Main","../../../../Scripts/ScreenManager":"ScreenManager","../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./TabButton":"TabButton"}],TabButton:[function(e,t,o){"use strict";cc._RF.push(t,"cd99b+qZsxJ2I1BwtUMUQU+","TabButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabButton=void 0;var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabLabel=null,t.tabIcon=null,t.tabHighlight=null,t.disabled=!1,t.screenID=-1,t.mobileScreenID=-1,t.switchScreenDelay=.1,t.highlightEvent=new cc.Component.EventHandler,t.onBeforeSwitchEvent=new cc.Component.EventHandler,t.onAfterSwitchEvent=new cc.Component.EventHandler,t.onLeaveEvent=new cc.Component.EventHandler,t.exitPromptRequire=!1,t}return r(t,e),t.prototype.activeScreenID=function(){return cc.sys.isMobile&&-1!==this.mobileScreenID?this.mobileScreenID:this.screenID},t.prototype.isHighLight=function(){if(this.highlightEvent&&this.highlightEvent.handler){var e={};if(this.highlightEvent.emit([e]),e.value)return!0}return!1},a([c(cc.Node)],t.prototype,"tabLabel",void 0),a([c(cc.Node)],t.prototype,"tabIcon",void 0),a([c(cc.Node)],t.prototype,"tabHighlight",void 0),a([c],t.prototype,"disabled",void 0),a([c],t.prototype,"screenID",void 0),a([c],t.prototype,"mobileScreenID",void 0),a([c],t.prototype,"switchScreenDelay",void 0),a([c(cc.Component.EventHandler)],t.prototype,"highlightEvent",void 0),a([c(cc.Component.EventHandler)],t.prototype,"onBeforeSwitchEvent",void 0),a([c(cc.Component.EventHandler)],t.prototype,"onAfterSwitchEvent",void 0),a([c(cc.Component.EventHandler)],t.prototype,"onLeaveEvent",void 0),a([c],t.prototype,"exitPromptRequire",void 0),a([s],t)}(cc.Component);o.NgcTabButton=l,cc._RF.pop()},{}],TechMessageAndroidWebview:[function(e,t,o){"use strict";cc._RF.push(t,"b0d2cdjExZNU58RlGh1NZB0","TechMessageAndroidWebview");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../Core/Utils"),l=e("../../../GameFramework/Scripts/BuildConfig"),u=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),p=e("../../Dialogs/Script/DialogBase"),d=e("./TechMessages"),f=cc._decorator,h=f.ccclass,g=f.property,m=(f.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameURL=null,t._onCloseCallbackFn=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(e){this.gameURL.string=l.NgcBuildConfig.shortGameClientURL||l.NgcBuildConfig.gameClientURL,this._onCloseCallbackFn=e,this.show()},t.prototype.hide=function(){d.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),"function"==typeof this._onCloseCallbackFn&&this._onCloseCallbackFn(),e.prototype.hide.call(this)},t.prototype.copyLink=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return d.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),[4,c.Utils.copyToClipboard(this.gameURL.string)];case 1:return e.sent(),[2]}})})},t.urlPrefab="NgcTechMessageAndroidWebview",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageAndroidWebview",a([g(u.NgcLabelLocalized)],t.prototype,"gameURL",void 0),a([h],t)}(p.NgcDialogBase));o.default=m,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageFPS:[function(e,t,o){"use strict";cc._RF.push(t,"3fce4bkQmdP07yWp6ZSKpxb","TechMessageFPS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("FPS"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageFPS",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageFPS",a([l],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"12b5dS972ZOZ6H4NNdJ1/+L","TechMessageIdleDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("Idle"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageIdleDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageIdleDisconnect",a([l],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleFPSWarning:[function(e,t,o){"use strict";cc._RF.push(t,"6df17cCS/lIH5E9pQDnltfh","TechMessageIdleFPSWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.warningNode=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.warningNode).repeatForever(cc.tween(this.warningNode).to(.5,{opacity:125,scale:1}).to(.5,{opacity:255,scale:1.2})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageFPSWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageFPSWarning",a([l(cc.Node)],t.prototype,"warningNode",void 0),a([c],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageIdleWarningDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3dba0oA4IdBlYhMV0YwqZI0","TechMessageIdleWarningDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deviceType=[],t.deviceSprite=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.deviceSprite.node).repeatForever(cc.tween(this.deviceSprite.node).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.deviceSprite.spriteFrame=cc.sys.isMobile?this.deviceType[0]:this.deviceType[1],this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageIdleWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageIdleWarning",a([l(cc.SpriteFrame)],t.prototype,"deviceType",void 0),a([l(cc.Sprite)],t.prototype,"deviceSprite",void 0),a([c],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageLatencyDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"ceb71tkXplML5+Oap3/hEko","TechMessageLatencyDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("Ping"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageLatencyDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageLatencyDisconnect",a([l],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageLatencyWarning:[function(e,t,o){"use strict";cc._RF.push(t,"41d76W65MxKCZGJgAlKnbcg","TechMessageLatencyWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.networkNode=null,t._onCloseCallBackFn=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.networkNode).repeatForever(cc.tween(this.networkNode).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){"function"==typeof this._onCloseCallBackFn&&this._onCloseCallBackFn(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageLatencyWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageLatencyWarning",a([l(cc.Node)],t.prototype,"networkNode",void 0),a([c],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageNetworkDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"b3437suWnJJXKDuzYagI5CD","TechMessageNetworkDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.urlPrefab="NgcTechMessageNetworkDisconnect",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageNetworkDisconnect",a([c],t)}(i.NgcDialogBase));o.default=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageSupportBrowser:[function(e,t,o){"use strict";cc._RF.push(t,"c9adal2fhJIwIjxRhBaHLRz","TechMessageSupportBrowser");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedBrowser=[],t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(e){this.supportedBrowser.forEach(function(t,o){t.active=e.includes(o)}),this.show()},t.urlPrefab="NgcTechMessageSupportBrowser",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageSupportBrowser",a([l(cc.Node)],t.prototype,"supportedBrowser",void 0),a([c],t)}(i.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d640bxvHZlJJLfsEgE70/RV","TechMessagesDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=i.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.urlPrefab="TechMessagesDialog",t.bundleName="02_dialog",t.dialogType="NgcTechMessagesDialog",a([u(cc.Label)],t.prototype,"titleLabel",void 0),a([u(cc.Label)],t.prototype,"contentLabel",void 0),a([u(cc.Node)],t.prototype,"buttonNode",void 0),a([u(cc.Label)],t.prototype,"okLabel",void 0),a([u(cc.Sprite)],t.prototype,"icon",void 0),a([l],t)}(s.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesPortraitOnly:[function(e,t,o){"use strict";cc._RF.push(t,"442d9/hbExAqK8JCPdristV","TechMessagesPortraitOnly");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=i.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.hide=function(){e.prototype.hide.call(this,function(){},!1)},t.urlPrefab="TechMessagesPortraitOnly",t.bundleName="02_dialog",t.dialogType="NgcTechMessagesPortraitOnly",a([u(cc.Label)],t.prototype,"titleLabel",void 0),a([u(cc.Label)],t.prototype,"contentLabel",void 0),a([u(cc.Node)],t.prototype,"buttonNode",void 0),a([u(cc.Label)],t.prototype,"okLabel",void 0),a([u(cc.Sprite)],t.prototype,"icon",void 0),a([l],t)}(s.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessages:[function(e,t,o){"use strict";cc._RF.push(t,"3ade3/fBrlP3bCSYkjtcWsu","TechMessages");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TECH_MESSAGE=void 0;var l,u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/BuildConfig"),d=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),f=e("../../../GameFramework/Scripts/Network/NgcNetClient"),h=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),g=e("../../../GameFramework/Scripts/NgcGame"),m=e("../../../SDK/Nano/NanoSrv"),y=e("../../../Services/Platform/Platform"),_=e("../../../Services/Telemetry/Telemetry"),v=e("../../Dialogs/Script/NgcDialogManager"),S=e("./TechMessageAndroidWebview"),b=e("./TechMessageFPS"),N=e("./TechMessageIdleDisconnect"),P=e("./TechMessageIdleFPSWarning"),I=e("./TechMessageIdleWarningDialog"),C=e("./TechMessageLatencyDisconnect"),w=e("./TechMessageLatencyWarning"),O=e("./TechMessageNetworkDisconnect"),T=e("./TechMessagesDialog"),E=e("./TechMessagesPortraitOnly"),M=e("./TechMessageSupportBrowser"),D=cc._decorator,R=D.ccclass,B=D.property;(function(e){e.SERVER_MAINTENANCE_MESSAGE="SERVER_MAINTENANCE"})(l=o.TECH_MESSAGE||(o.TECH_MESSAGE={}));var A=u.BROWSER_TYPE.CHROME,k=u.BROWSER_TYPE.EDGE,L=u.BROWSER_TYPE.FIREFOX,G=u.BROWSER_TYPE.SAFARI,F=u.BROWSER_TYPE.SAMSUNG_INTERNET,j=u.BROWSER_TYPE.ANDROID_WEBVIEW,U=u.BROWSER_TYPE.SAFARI_IN_APP,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.iconNetworkBad=null,t.rotateDeviceToPlayPrefab=null,t.loadingPrefab=null,t.badConnectionPrefab=null,t.dialogTechMessagesPrefab=null,t.loadingNode=null,t.badConnectionNode=null,t._isServerMaintenanceShow=!1,t._isGameAlreadyIdle=!1,t._isGameAlreadyStart=!1,t._idleTime=5,t._kickTime=8,t._FPSAvgLimit=20,t._FPSAvgLimitDuration=3,t._FPSAvgWarningDuration=8,t._latencyAvgLimit=120,t._latencyAvgLimitDuration=3,t._latencyAvgWarningDuration=3,t.warningIdleTimeOut=null,t.idleKickTimeout=null,t.fpsWarningTimeout=null,t.fpsKickTimeout=null,t.dialogIdleWarning=null,t.dialogFPSWarning=null,t._forceGameDisconnectCB=null,t.trackingParams={},t.isReceivedTechMessageConfig=!1,t.isMarkedAsFPSKick=!1,t.isMarkAsLatencyKick=!1,t.latencyKickTimeoutID=null,t.latencyWarningTimeoutID=null,t.latencyWarningDialog=null,t._noNetworkDetection=!1,t._noNetworkDetectionTimer=0,t.rotationDeviceNode=null,t.isRotationDialogInited=!1,t.handleServerMaintenance=function(e){return s(t,void 0,void 0,function(){var t,o,n,r,a,i,s,l;return c(this,function(c){switch(c.label){case 0:return cc.log("TECH_MESSAGE handleServerMaintenance",e),this.isServerMaintenanceShow?[2,!1]:(this.isServerMaintenanceShow=!0,null===(l=g.NgcGame.inst)||void 0===l||l.pause(!0),t=T.default.dialogType,o=T.default.urlPrefab,n=T.default.bundleName,[4,v.NgcDialogManager.createDialog(t,o,n)]);case 1:return r=c.sent(),a=r.getComponent(T.default),i=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,s=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text,a.init(s,i,function(){return location.reload()},null),[2]}})})},t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isServerMaintenanceShow",{get:function(){return this._isServerMaintenanceShow},set:function(e){this._isServerMaintenanceShow=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(p.NgcBuildConfig.useNgcServer?h.NgcNetClientRefactor.inst.registerForBroadcastMessageType(l.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance):f.NgcNetClient.inst.registerForBroadcastMessageType(l.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance),o.inst=this,cc.sys.isMobile&&(this.onResized(),cc.view.on("canvas-resize",this.onResized.bind(this))))},t.prototype.setTrackingParams=function(e){e.currentPing&&(this.trackingParams.maxPing=this.trackingParams.maxPing||e.currentPing,this.trackingParams.minPing=this.trackingParams.minPing||e.currentPing,e.currentPing>this.trackingParams.maxPing&&(this.trackingParams.maxPing=e.currentPing),e.currentPing<this.trackingParams.minPing&&(this.trackingParams.minPing=e.currentPing)),e.currentFPS&&(this.trackingParams.maxFPS=this.trackingParams.maxFPS||e.currentFPS,this.trackingParams.minFPS=this.trackingParams.minFPS||e.currentFPS,e.currentFPS>this.trackingParams.maxFPS&&(this.trackingParams.maxFPS=e.currentFPS),e.currentFPS<this.trackingParams.minFPS&&(this.trackingParams.minFPS=e.currentFPS)),this.trackingParams=a(a({},this.trackingParams),e)},t.prototype.sendWarningTracking=function(e,t){_.NgcTelemetry.inst.LogEvent_GameTechWarning(a({checker:e,roundID:t},this.trackingParams))},t.prototype.sendMessageTracking=function(e){_.NgcTelemetry.inst.LogEvent_GameTechMessage(a({checker:e},this.trackingParams))},t.prototype.sendMessageRespondTracking=function(e){_.NgcTelemetry.inst.LogEvent_GameTechMessageRespond(a({checker:e},this.trackingParams))},t.prototype.onPlayerInput=function(){this._isGameAlreadyStart&&this.resetIdleAction()},t.prototype.clearIdleListener=function(){clearTimeout(this.warningIdleTimeOut),clearTimeout(this.idleKickTimeout),this.dialogIdleWarning&&(this.dialogIdleWarning.hide(),this.dialogIdleWarning=null)},t.prototype.resetIdleAction=function(){var e=this;p.NgcBuildConfig.offlineMode||(this.clearIdleListener(),this.warningIdleTimeOut=setTimeout(function(){s(e,void 0,void 0,function(){var e,t,o,n,r=this;return c(this,function(a){switch(a.label){case 0:return e=I.default.dialogType,t=I.default.urlPrefab,o=I.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n=a.sent(),this.dialogIdleWarning=n.getComponent(I.default),this.dialogIdleWarning.init(),this.sendWarningTracking("Idle",null),this._isGameAlreadyIdle=!0,clearTimeout(this.idleKickTimeout),this.idleKickTimeout=setTimeout(function(){r.dialogIdleWarning.hide(),r.dialogIdleWarning=null,"function"==typeof r._forceGameDisconnectCB&&r._forceGameDisconnectCB(),s(r,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return this.clearFPSListener(),this.sendMessageTracking("Idle"),e=N.default.dialogType,t=N.default.urlPrefab,o=N.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(N.default).init(),[2]}})})},1e3*(this._kickTime-this._idleTime)),[2]}})})},1e3*this._idleTime))},t.prototype.onGamePlayStart=function(){this.isReceivedTechMessageConfig||this.parseTechConfig(),this._isGameAlreadyStart=!0,this.resetIdleAction()},t.prototype.onGameplayOver=function(){this._isGameAlreadyStart=!1,this.clearIdleListener(),this.clearFPSListener(),this.clearLatencyListener()},t.prototype.parseTechConfig=function(){this.isReceivedTechMessageConfig=!0;var e=m.default.inst.getCurGameInfo().gameParams.techMessage||{};e&&(this._FPSAvgLimit=e.FPSAvgLimit,this._FPSAvgLimitDuration=e.FPSObservedPeriod,this._FPSAvgWarningDuration=e.FPSWarningTime,this._idleTime=e.idleDetectionWarning,this._kickTime=e.idleDetectionKick,this._latencyAvgLimit=e.pingAvgLimit,this._latencyAvgWarningDuration=e.warningTime,this._latencyAvgLimitDuration=e.pingObservedPeriod,console.log("@@@ parseTechConfig ",e))},t.prototype.setForceGameDisconnect=function(e){void 0===e&&(e=function(){}),this._forceGameDisconnectCB=function(){"function"==typeof e&&e(),p.NgcBuildConfig.useNgcServer?h.NgcNetClientRefactor.inst.isConnected()&&h.NgcNetClientRefactor.inst.sendLeaveGameMessage():f.NgcNetClient.inst.isConnected()&&f.NgcNetClient.inst.exitGame()}},t.prototype.isGameAlreadyIdle=function(){return this._isGameAlreadyIdle},t.prototype.clearFPSListener=function(){clearTimeout(this.fpsKickTimeout),clearTimeout(this.fpsWarningTimeout),this.dialogFPSWarning&&(this.dialogFPSWarning.hide(),this.dialogFPSWarning=null)},t.prototype.onMeansureFPS=function(e){var t=this;p.NgcBuildConfig.offlineMode||this._isGameAlreadyStart&&(this.isMarkedAsFPSKick||(e>=this._FPSAvgLimit?this.clearFPSListener():this.fpsWarningTimeout||(this.fpsWarningTimeout=setTimeout(function(){s(t,void 0,void 0,function(){var e,t,o,n,r=this;return c(this,function(a){switch(a.label){case 0:return e=P.default.dialogType,t=P.default.urlPrefab,o=P.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n=a.sent(),this.dialogFPSWarning=n.getComponent(P.default),this.dialogFPSWarning.init(),this.sendWarningTracking("FPS",null),clearTimeout(this.fpsKickTimeout),this.fpsKickTimeout=setTimeout(function(){r.isMarkedAsFPSKick=!0,r.dialogFPSWarning.hide(),r.dialogFPSWarning=null,"function"==typeof r._forceGameDisconnectCB&&r._forceGameDisconnectCB(),s(r,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return this.clearFPSListener(),this.clearIdleListener(),this.clearLatencyListener(),this.sendMessageTracking("FPS"),e=b.default.dialogType,t=b.default.urlPrefab,o=b.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(b.default).init(),[2]}})})},1e3*this._FPSAvgWarningDuration),[2]}})})},1e3*this._FPSAvgLimitDuration))))},t.prototype.clearLatencyListener=function(){clearTimeout(this.latencyKickTimeoutID),clearTimeout(this.latencyWarningTimeoutID),this.latencyKickTimeoutID=null,this.latencyWarningTimeoutID=null,this.latencyWarningDialog&&(this.latencyWarningDialog.hide(),this.latencyWarningDialog=null)},t.prototype.onMeasureLatency=function(e){var t=this;p.NgcBuildConfig.offlineMode||!this._isGameAlreadyStart||(cc.log("@@@@ TechMessages > onMeasureLatency: latency =",e),this.isMarkAsLatencyKick)||(e<=this._latencyAvgLimit?this.clearLatencyListener():this.latencyWarningTimeoutID||(this.latencyWarningTimeoutID=setTimeout(function(){return s(t,void 0,void 0,function(){var e,t,o,n,r=this;return c(this,function(a){switch(a.label){case 0:return e=w.default.dialogType,t=w.default.urlPrefab,o=w.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n=a.sent(),this.latencyWarningDialog=n.getComponent(w.default),this.latencyWarningDialog.init(),this.sendWarningTracking("Ping",null),clearTimeout(this.latencyKickTimeoutID),this.latencyKickTimeoutID=setTimeout(function(){return s(r,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return this.isMarkAsLatencyKick=!0,this.latencyWarningDialog.hide(),this.latencyWarningDialog=null,"function"==typeof this._forceGameDisconnectCB&&this._forceGameDisconnectCB(),this.clearFPSListener(),this.clearIdleListener(),this.sendMessageTracking("Ping"),e=C.default.dialogType,t=C.default.urlPrefab,o=C.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(C.default).init(),[2]}})})},1e3*this._latencyAvgWarningDuration),[2]}})})},1e3*this._latencyAvgLimitDuration)))},t.prototype.onResized=function(){var e=cc.view.getFrameSize();e.width>e.height?this.showRotateDevice(!0):this.showRotateDevice(!1)},t.prototype.lateUpdate=function(e){if(!o.showedDisconnectPopup&&(u.Utils.isNetWorkAvailable()||p.NgcBuildConfig.offlineMode?this._noNetworkDetection=!1:this._noNetworkDetection?(this._noNetworkDetectionTimer+=e,this._noNetworkDetectionTimer>=o.MAX_NETWORK_CHECK_DURATION&&o.showNetworkDisconnect()):(this._noNetworkDetectionTimer=0,this._noNetworkDetection=!0),cc.sys.isMobile&&this.rotationDeviceNode&&this.rotationDeviceNode.active)){var t=cc.view.getFrameSize();t.width>t.height?this.showRotateDevice(!0):this.showRotateDevice(!1)}},t.prototype.showRotateDevice=function(e){return s(this,void 0,void 0,function(){var t,n,r,a,i,s;return c(this,function(c){switch(c.label){case 0:return t=navigator.userAgent,n=t.includes("iPad"),t.includes("FB_IAB/Orca-Android")&&!t.includes("Mobile Safari/")||n&&u.Utils.getBrowserType()===U?[2]:this.rotationDeviceNode?(e&&this.rotationDeviceNode.setSiblingIndex(o.ZORDER_ROTATE_DEVICE),this.rotationDeviceNode.active=e,[2]):!e||this.isRotationDialogInited?[3,2]:(this.isRotationDialogInited=!0,r=E.default.dialogType,a=E.default.urlPrefab,i=E.default.bundleName,s=this,[4,v.NgcDialogManager.createDialog(r,a,i)]);case 1:s.rotationDeviceNode=c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.checkServerMaintenanceAndShowPopup=function(){var e,t=m.default.inst.getCurGameInfo();if(this.isServerMaintenanceShow||!t)return!1;var o=t.message;if(o&&o.type===l.SERVER_MAINTENANCE_MESSAGE){null===(e=g.NgcGame.inst)||void 0===e||e.pause(!0),this.isServerMaintenanceShow=!0;var n=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,r=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text;return s(this,void 0,void 0,function(){var e,t,o;return c(this,function(a){switch(a.label){case 0:return e=T.default.dialogType,t=T.default.urlPrefab,o=T.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return a.sent().getComponent(T.default).init(r,n,function(){return location.reload()},null),[2]}})}),!0}return!1},t.checkAndShowUnSupportedBrowser=function(){if(y.NgcPlatform.isRunFromApp())return!0;if(o._isShowingUnSupportedBrowser)return!1;var e=u.Utils.getOSType(),t=u.Utils.getBrowserType(),n=o.browserSupportedList[e],r=!1;if((n.includes(t)||cc.sys.isNative)&&(r=!0),(navigator.userAgent.match(/coc_coc/)||navigator.userAgent.match(/Opera|OPR\//))&&(r=!1),navigator.userAgent.match(/Iphone/)&&navigator.userAgent.match(/Mobile/)&&(r=!0),!r){o._isShowingUnSupportedBrowser=!0,s(this,void 0,void 0,function(){var e,t,o;return c(this,function(r){switch(r.label){case 0:return e=M.default.dialogType,t=M.default.urlPrefab,o=M.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return r.sent().getComponent(M.default).init(n),[2]}})});var a=t===j||t===U;_.NgcTelemetry.inst.LogEvent_GameTechMessageUnsupported({osType:e,osVersion:cc.sys.osVersion,browserType:t,browserVersion:cc.sys.browserVersion,checker:a})}return r},t.showWarningLoginWithAndroidWebview=function(){return u.Utils.getOSType()===u.OS_TYPE.ANDROID&&u.Utils.getBrowserType()===j&&(o._isShowingWarningWebView||(o._isShowingWarningWebView=!0,s(this,void 0,void 0,function(){var e,t,n;return c(this,function(r){switch(r.label){case 0:return e=S.default.dialogType,t=S.default.urlPrefab,n=S.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,n)];case 1:return r.sent().getComponent(S.default).init(function(){o._isShowingWarningWebView=!1}),[2]}})})),!0)},t.showWarningLoginWithWebview=function(){var e=u.Utils.getBrowserType();return(e===j||e===U)&&(o._isShowingWarningWebView||(o._isShowingWarningWebView=!0,s(this,void 0,void 0,function(){var e,t,n;return c(this,function(r){switch(r.label){case 0:return e=S.default.dialogType,t=S.default.urlPrefab,n=S.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,n)];case 1:return r.sent().getComponent(S.default).init(function(){o._isShowingWarningWebView=!1}),[2]}})})),!0)},t.showNetworkDisconnect=function(){o.showedDisconnectPopup||(p.NgcBuildConfig.offlineMode&&u.Utils.reloadPage(),o.showedDisconnectPopup=!0,s(this,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return e=O.default.dialogType,t=O.default.urlPrefab,o=O.default.bundleName,[4,v.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(O.default).init(),[2]}})}))},t.inst=null,t.CONNECT_RETRY_MAX_COUNT=15,t.LATENCY_BAD_CONNECTION=1e3,t.LATENCY_WEAK_CONNECTION=5e3,t.MATCHMAKING_TIME_OUT=1e4,t.ZORDER_SERVER_MAINTENANCE=100,t.ZORDER_ROTATE_DEVICE=200,t._isShowingUnSupportedBrowser=!1,t._isShowingWarningWebView=!1,t.showedDisconnectPopup=!1,t.MAX_NETWORK_CHECK_DURATION=3,t.browserSupportedList=[[A,k],[A,L,k],[A,F,j,k],[G,A,U,k],[G,A,L,k]],i([B(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),i([B(cc.SpriteFrame)],t.prototype,"iconNetworkBad",void 0),i([B(cc.Prefab)],t.prototype,"rotateDeviceToPlayPrefab",void 0),i([B(cc.Prefab)],t.prototype,"loadingPrefab",void 0),i([B(cc.Prefab)],t.prototype,"badConnectionPrefab",void 0),i([B(cc.Prefab)],t.prototype,"dialogTechMessagesPrefab",void 0),o=i([R],t)}(cc.Component);o.default=x,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./TechMessageAndroidWebview":"TechMessageAndroidWebview","./TechMessageFPS":"TechMessageFPS","./TechMessageIdleDisconnect":"TechMessageIdleDisconnect","./TechMessageIdleFPSWarning":"TechMessageIdleFPSWarning","./TechMessageIdleWarningDialog":"TechMessageIdleWarningDialog","./TechMessageLatencyDisconnect":"TechMessageLatencyDisconnect","./TechMessageLatencyWarning":"TechMessageLatencyWarning","./TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","./TechMessageSupportBrowser":"TechMessageSupportBrowser","./TechMessagesDialog":"TechMessagesDialog","./TechMessagesPortraitOnly":"TechMessagesPortraitOnly"}],Telemetry_impl_FirebaseSrv:[function(e,t,o){"use strict";cc._RF.push(t,"c41c3lpPCRA2rC6bGna0YVT","Telemetry_impl_FirebaseSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../Scripts/Main"),s=e("../../GameFramework/Scripts/NgcMain"),c=e("../../Core/Utils"),l=e("../Ads/Ads"),u=e("../Platform/Platform"),p=e("./Telemetry"),d=e("../../GameFramework/Scripts/NgcUserInfo"),f=e("../../CrossFeatures/GameMode/Script/GameModeManager"),h=e("../../CrossFeatures/EndGameFlow/Reward/RewardUI"),g=e("../../GameFramework/Scripts/BuildConfig"),m=e("../../CrossFeatures/CrownRoad/Script/CrownRoadManager"),y=e("../../GameFramework/Scripts/NgcGame"),_=e("../Inventory/Inventory"),v=e("../Social/Social"),S=cc._decorator,b=S.ccclass,N=S.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameQueueStartExParams=null,t.gameRoundStartExParams=null,t.gameRoundOverExParams=null,t.gameRoundOverClickedExParams=null,t.roundQueueStartTimestamp=null,t.timeStamp_gameOver=null,t.timeStamp_gameOverClicked=null,t.lastScreenName=null,t.visitCounter={},t.currentScreenCategory=null,t.adsTimeStamps={},t.joinCreateRoomTimestamp=null,t.lastRoomID=null,t.techMessageTimestamp=null,t.onboardDailyVideoEndTimeStamp=null,t.loginData=null,t.firebaseConfig={},t.firebaseApp=null,t.firebaseAnalytics=null,t.firebasePerformance=null,t.firebaseRemoteConfig=null,t}var o;return r(t,e),o=t,t.prototype.getFirebaseRemoteConfig=function(){return this.firebaseRemoteConfig},t.prototype.firebaseLogEvent=function(e,t){if(!this.isPlatformBlocked()&&this.isLoggedIn()&&(this.isActive||this.isMandatoryEvent(e))){t||(t={});var o=this.addContext(t),n={};if(this.isActive)n=o,n=this.addExtraParams(e,n);else{var r=this;Object.keys(o).forEach(function(e){r.isMandatoryParam(e)&&(n[e]=o[e])})}this.firebaseAnalytics.logEvent(e,n),console.log("FIREBASE LOG: "+e+" "+JSON.stringify(n))}},t.prototype.addContext=function(e){var t,o,n,r,a;e.playerId=d.default.userIdKey?d.default.userIdKey:"null",e.sessionToken=d.default.sessionKey?d.default.sessionKey:"null",e.clientTimestamp||(e.clientTimestamp=Date.now()),e.gameVersion=window.versionInfo.gameVersion,e.deploymentEnvironment=window.versionInfo.deploymentEnvironment,e.sessionTime=window.funnel?Date.now()-window.funnel.startTime:"null",e||(e.context=s.AppContext[i.Main.appContext]);var c=p.NgcTelemetry.gameImportantInfos;if(e.coinBalance="null",e.itemCount="null",e.crownBalance="null",e.totalRoundCount="null",e.ticketBalance="null",e.playerType="null",c)try{e.coinBalance=null!==(o=null===(t=_.NgcInventory.inst.ownedItems[c.coinBalanceID])||void 0===t?void 0:t.count)&&void 0!==o?o:0;var l=0;for(var u in _.NgcInventory.inst.ownedItems){var f=_.NgcInventory.inst.objectTypeTable[u].category;f&&c.itemCategories.indexOf(f)>=0&&(l+=1)}e.itemCount=l,e.crownBalance=null!==(r=null===(n=m.default.crownRoadData)||void 0===n?void 0:n.crownRank)&&void 0!==r?r:0,e.totalRoundCount=null!==(a=d.default.totalRoundCount)&&void 0!==a?a:"null",e.playerType="Uplay"===v.NgcSocial.inst.getName()?"Ubisoft":v.NgcSocial.inst.getName()}catch(h){console.warn(h)}return e},t.prototype.LogEvent_ReportNetStats=function(e){this.firebaseLogEvent("NetStats",e),console.log("Log NetStats: "+JSON.stringify(e))},t.prototype.LogEvent_GameOverData=function(e){this.firebaseLogEvent("game_over",e)},t.prototype.LogEvent_CustomEvent=function(e,t){e&&this.firebaseLogEvent(e,t)},t.prototype.LogEvent_EnterShop=function(){this.firebaseLogEvent("EnterShop")},t.prototype.LogEvent_PurchaseItem=function(e){this.firebaseLogEvent("player_purchase",e)},t.prototype.LogEvent_CollectPurchaseItem=function(e){this.firebaseLogEvent("player_purchaseCollect",e)},t.prototype.LogEvent_ShopItemViewed=function(e){this.firebaseLogEvent("player_shopItemViewed",e)},t.prototype.setGameQueueStartExtraParam=function(e){this.gameQueueStartExParams=e},t.prototype.setGameRoundStartExtraParam=function(e){this.gameRoundStartExParams=e},t.prototype.setGameRoundOverExtraParam=function(e){this.gameRoundOverExParams=e},t.prototype.setGameRoundOverClickedExtraParam=function(e){this.gameRoundOverClickedExParams=e},t.prototype.LogEvent_GameQueueStart=function(e){e=e||{},this.gameQueueStartExParams&&Object.assign(e,this.gameQueueStartExParams),e.roundID=y.NgcGame.roundID||"null",e.ticketConsumed="null",e.tleID="null",e.tleType="null",e.luckyDraw="null",e.crownRank=m.default.inst.crownRank,e.gameMode=f.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("game_queueStart",e),this.roundQueueStartTimestamp=Date.now()},t.prototype.LogEvent_GameRoundStart=function(e){e=e||{},this.gameRoundStartExParams&&Object.assign(e,this.gameRoundStartExParams),e.roundID=y.NgcGame.roundID||"null",e.tleID="null",e.crownRank=m.default.inst.crownRank,e.gameMode=f.NgcGameModeManager.inst.selectedModeId,e.checker=h.NgcEndGameRewardDialog.retryFlowTriggered,this.firebaseLogEvent("game_roundStart",e),h.NgcEndGameRewardDialog.retryFlowTriggered=!1},t.prototype.LogEvent_GameRoundOver=function(e){var t,o;e=e||{},this.gameRoundOverExParams&&Object.assign(e,this.gameRoundOverExParams),e.roundID=y.NgcGame.roundID||"null",e.gameMode=f.NgcGameModeManager.inst.selectedModeId||"null",e.ticketConsumed=e.ticketConsumed||"null",e.tleID=e.tleID||"null",e.tleType=e.tleType||"null",e.luckyDraw=e.luckyDraw||"null",e.crownRank=null!==(t=e.crownRank)&&void 0!==t?t:"null",e.crownEarnings=null!==(o=e.crownEarnings)&&void 0!==o?o:"null",e["crownResult "]=e.crownResult||"null",this.firebaseLogEvent("game_roundOver",e),this.timeStamp_gameOver=Date.now()},t.prototype.LogEvent_GameRoundOverClicked=function(e){var t,o;e=e||{},this.gameRoundOverClickedExParams&&Object.assign(e,this.gameRoundOverClickedExParams),e.roundID=y.NgcGame.roundID||"null",e.crownRank=m.default.inst.crownRank,e.tleID=e.tleID||"null",e.ticketEarnings=null!==(t=e.ticketEarnings)&&void 0!==t?t:"null",e.multiplierOffer=null!==(o=e.multiplierOffer)&&void 0!==o?o:"null",e.category=e.category||"null",e.gameMode=f.NgcGameModeManager.inst.selectedModeId,this.firebaseLogEvent("game_roundOverClicked",e),this.timeStamp_gameOverClicked=Date.now(),this.LogEvent_OnboardingGameRoundOverClicked(e)},t.prototype.LogEvent_PlayerCrownRewardCollect=function(e){var t,o;(e=e||{}).crownRank=m.default.inst.crownRank,e.itemRewardID=null!==(t=e.itemRewardID)&&void 0!==t?t:"null",e.itemRewardValue=null!==(o=e.itemRewardValue)&&void 0!==o?o:"null",this.firebaseLogEvent("player_crownRewardCollect",e)},t.prototype.LogEvent_PlayerDied=function(e){(e=e||{}).roundID=y.NgcGame.roundID||"null",e.gameMode=f.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("player_died",e)},t.prototype.LogEvent_PlayerRevived=function(e){(e=e||{}).roundID=y.NgcGame.roundID||"null",e.gameMode=f.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("player_revived",e)},t.prototype.LogEvent_LuckyboosterClicked=function(e){this.firebaseLogEvent("player_luckyboosterClicked",{checker:e})},t.prototype.LogEvent_LuckyboosterCollected=function(e,t,o){this.firebaseLogEvent("player_luckyboosterCollected",{itemRewardID:e,itemRewardValue:t,totalRoundCount:o})},t.prototype.LogEvent_PlayerClickedStartGame=function(e){this.firebaseLogEvent("player_click_start_game",e)},t.prototype.LogEvent_ReportLoadingStep=function(e,t){this.firebaseLogEvent(e,{step_name:t})},t.prototype.LogEvent_SpectatorMode=function(e){e?this.firebaseLogEvent("EnterSpectatorMode"):this.firebaseLogEvent("ExitSpectatorMode")},t.prototype.LogEvent_StartGame=function(){this.firebaseLogEvent("player_click_start_game")},t.prototype.LogEvent_EnterScreen=function(e){var t;this.visitCounter[e]=this.visitCounter[e]||0,this.visitCounter[e]+=1;var o={};o.context=e,o.crownRank=(null===(t=m.default.inst)||void 0===t?void 0:t.crownRank)||"null",o.source=this.lastScreenName||"null",o.category=this.currentScreenCategory||"null",o.count=this.visitCounter[e],o.checker=d.default.visitedScreens.screenName?1:0,this.firebaseLogEvent("player_enterScreen",o),d.default.addVisitedScreen(e),this.lastScreenName=e},t.prototype.setScreenCategory=function(e){this.currentScreenCategory=e},t.prototype.LogEvent_ExitScreen=function(e){this.firebaseLogEvent("exit_screen",{context:e})},t.prototype.LogEvent_SettingInformation=function(e){this.firebaseLogEvent("game_settingsChanged",e)},t.prototype.LogEvent_LanguageChanged=function(e){this.firebaseLogEvent("languageChanged_info",e)},t.prototype.LogEvent_ReportOrigin=function(e){this.firebaseLogEvent("Origin",{origin:e})},t.prototype.LogEvent_ReportTiming=function(e,t){this.firebaseLogEvent(e,{time:t})},t.prototype.LogEvent_SendEmoji=function(e){var t={emoteID:e,context:c.Utils.enumToString(s.AppContext,i.Main.getAppContext())},o=y.NgcGame.roundID;"PartyRoom"===t.context&&(o=null),t.roundID=o||"null",t.roundTime=o?Date.now()-this.roundQueueStartTimestamp:"null",this.firebaseLogEvent("player_emoteUsed",t)},t.prototype.LogEvent_DailyLoginReward=function(e){this.firebaseLogEvent("player_dailyloginCollected",e)},t.prototype.LogEvent_InfoLeaderboard=function(e){this.firebaseLogEvent("game_leaderboardSwitched",e)},t.prototype.LogEvent_InitShare=function(){this.firebaseLogEvent("Initialization of Share action",{context:c.Utils.enumToString(s.AppContext,i.Main.getAppContext())})},t.prototype.LogEvent_ShareCompletion=function(e){this.firebaseLogEvent("Completion of Share action",{Channel:e,context:c.Utils.enumToString(s.AppContext,i.Main.getAppContext())})},t.prototype.LogEvent_GameAdsStart=function(e,t,o,n,r,a,i,s){this.firebaseLogEvent("game.ad.start",{nbAdsLtd:e,nbAdsSession:t,adIsAvailable:o,itemRewardID:n,itemRewardValue:r,adsProvider:a,adsType:c.Utils.enumToString(l.AdsType,i),isAdBlocked:window.isAdsBlocked?1:0,pointcutID:s,actualSec:Date.now()-this.adsTimeStamps.ads_request_start,gameCode:g.NgcBuildConfig.platformGameID,adUnitID:g.NgcBuildConfig.platformGameID+"_"+s}),this.adsTimeStamps.ads_start=Date.now()},t.prototype.LogEvent_GameAdsStop=function(e,t,o,n,r,a,i,s,u){void 0===u&&(u=!1),this.firebaseLogEvent("game.ad.stop",{itemRewardID:e,itemRewardValue:t,isLoaded:o,adsProvider:n,adsType:c.Utils.enumToString(l.AdsType,r),adViewingDuration:Math.round(a/1e3),maxReached:i,isAdBlocked:window.isAdsBlocked?1:0,isAdAborted:u?1:0,pointcutID:s,actualSec:Date.now()-this.adsTimeStamps.ads_start,totalSec:Date.now()-this.adsTimeStamps.ads_request_start,gameCode:g.NgcBuildConfig.platformGameID,adUnitID:g.NgcBuildConfig.platformGameID+"_"+s})},t.prototype.LogEvent_GameAdsRequest=function(e,t,o,n,r,a){this.firebaseLogEvent("game.ad.request",{adIsAvailable:e,itemRewardID:t,itemRewardValue:o,adsProvider:n,adsType:c.Utils.enumToString(l.AdsType,r),isAdBlocked:window.isAdsBlocked?1:0,pointcutID:a,gameCode:g.NgcBuildConfig.platformGameID,adUnitID:g.NgcBuildConfig.platformGameID+"_"+a}),this.adsTimeStamps.ads_request_start=Date.now()},t.prototype.LogEvent_ShareInit=function(e){this.firebaseLogEvent("share_init",{context:e})},t.prototype.LogEvent_ShareClick=function(e,t){this.firebaseLogEvent("share_click",{context:e,shareChannel:t})},t.prototype.LogEvent_ShareComplete=function(e,t){this.firebaseLogEvent("share_complete",{context:e,shareChannel:t})},t.prototype.LogEvent_LoginAttempt=function(e){this.firebaseLogEvent("login_attempt",{socialNetwork:e})},t.prototype.LogEvent_LoginSuccess=function(e,t){this.firebaseLogEvent("login_success",{id:e,name:t.Name,avatar:t.AvatarUrl})},t.prototype.LogEvent_MoreGameInit=function(e){this.firebaseLogEvent("more_game_init",{context:e})},t.prototype.LogEvent_BrandGameInit=function(e){this.firebaseLogEvent("brand_site_init",{context:e})},t.prototype.LogEvent_LikeUsInit=function(e){this.firebaseLogEvent("like_us_init",{context:e})},t.prototype.LogEvent_LikeUsSuccess=function(e){this.firebaseLogEvent("like_us_success",{likeUsSuccess:e})},t.prototype.LogEvent_AddToHomeInit=function(e){this.firebaseLogEvent("add_to_home_init",{context:e})},t.prototype.LogEvent_AddToHomeComplete=function(e){this.firebaseLogEvent("add_to_home_complete",{context:e})},t.prototype.LogEvent_NameEvent=function(e){var t={username:e};t.checker=d.default.changeNameLocation||"MainMenu",this.firebaseLogEvent("player_nameChanged",t)},t.prototype.LogEvent_GamePlayStart=function(){this.firebaseLogEvent("game_play_start",{clientTimestamp:Date.now()})},t.prototype.LogEvent_PlayerClickedCreatePartyRoom=function(e){this.joinCreateRoomTimestamp=Date.now(),this.lastRoomID=e.roomID||"null",this.firebaseLogEvent("player_partyroomCreated",e)},t.prototype.LogEvent_PlayerClickedStartPartyGame=function(e){e.totalSec=Date.now()-this.joinCreateRoomTimestamp,e.roundID=y.NgcGame.roundID||"null",this.firebaseLogEvent("game_partyroomStarted",e)},t.prototype.LogEvent_InvitePartyInit=function(e){this.firebaseLogEvent("invite_party_init",e)},t.prototype.LogEvent_JointRoom=function(e){this.joinCreateRoomTimestamp=Date.now(),this.lastRoomID=e.roomID||"null",this.firebaseLogEvent("player_partyroomJoined",e)},t.prototype.LogEvent_ReturnParty=function(e){this.firebaseLogEvent("return_party_room",e)},t.prototype.LogEvent_LeaveParty=function(e){(e=e||{}).roomID=this.lastRoomID||"null",e.totalSec=this.joinCreateRoomTimestamp?Date.now()-this.joinCreateRoomTimestamp:"null",this.firebaseLogEvent("game_partyroomClosed",e)},t.prototype.LogEvent_GameTechWarning=function(e){e.roundID=y.NgcGame.roundID||"null",e.roundTime=e.roundTime||Date.now()-this.roundQueueStartTimestamp,e.gameMode=f.NgcGameModeManager.inst.selectedModeId||"null",e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",this.firebaseLogEvent("game_techWarning",e)},t.prototype.LogEvent_GameTechMessage=function(e){e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",this.techMessageTimestamp=Date.now(),this.firebaseLogEvent("game_techMessage",e)},t.prototype.LogEvent_GameTechMessageRespond=function(e){e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",e.actualSec=this.techMessageTimestamp-Date.now(),this.firebaseLogEvent("game_techMessageRespond",e)},t.prototype.LogEvent_GameTechMessageUnsupported=function(e){e.osVersion=e.osVersion||"null",e.browserVersion=e.browserVersion||"null",this.firebaseLogEvent("game_techUnsupported",e)},t.prototype.LogEvent_OnboardingDailyloginCollected=function(e){var t="onboarding_dailyloginCollected";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOverClicked?Date.now()-this.timeStamp_gameOverClicked:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t),d.default.setOnBoardingEventFlags("onboarding_dailyVideoRequest"),d.default.setOnBoardingEventFlags("onboarding_dailyVideoStart"),d.default.setOnBoardingEventFlags("onboarding_dailyVideoEnd"))},t.prototype.LogEvent_OnboardingGameSpectatorEnd=function(e){var t="onboarding_gameSpectatorEnd";d.default.totalRoundCount>0||d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOver?Date.now()-this.timeStamp_gameOver:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingGameRoundOverClicked=function(e){var t="onboarding_gameOverClicked";d.default.totalRoundCount>0||d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOver?Date.now()-this.timeStamp_gameOver:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoRequest=function(e){var t="onboarding_dailyVideoRequest";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoStart=function(e){var t="onboarding_dailyVideoStart";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoEnd=function(e){var t="onboarding_dailyVideoEnd";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t),this.onboardDailyVideoEndTimeStamp=Date.now())},t.prototype.LogEvent_OnboardingPreR2InterRequest=function(e){var t="onboarding_preR2InterRequest";d.default.totalRoundCount<1||d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.onboardDailyVideoEndTimeStamp?Date.now()-this.onboardDailyVideoEndTimeStamp:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingPreR2InterStart=function(e){var t="onboarding_preR2InterStart";1===d.default.totalRoundCount&&(d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t)))},t.prototype.LogEvent_OnboardingPreR2InterEnd=function(e){var t="onboarding_preR2InterEnd";1===d.default.totalRoundCount&&(d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t)))},t.prototype.LogEvent_OnboardingClaim2xVideoRequest=function(e){var t="onboarding_claim2xVideoRequest";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOverClicked?Date.now()-this.timeStamp_gameOverClicked:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingClaim2xVideoStart=function(e){var t="onboarding_claim2xVideoStart";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingClaim2xVideoEnd=function(e){var t="onboarding_claim2xVideoEnd";d.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),d.default.setOnBoardingEventFlags(t))},t.prototype.markOnboardingClaim2xVideoEvents=function(){d.default.setOnBoardingEventFlags("onboarding_claim2xVideoRequest"),d.default.setOnBoardingEventFlags("onboarding_claim2xVideoStart"),d.default.setOnBoardingEventFlags("onboarding_claim2xVideoEnd")},t.prototype.isLoggedIn=function(){return null!=this.firebaseAnalytics},t.prototype.getTelemetrySystem=function(){return p.TelemetrySystem.Firebase},t.prototype.getName=function(){return"Firebase"},t.prototype._preInit=function(){if(window.hasOwnProperty("firebaseInfo"))console.log("Using firebase objects initialized in index.html "),this.firebaseApp=window.firebaseInfo.firebaseApp,this.firebaseAnalytics=window.firebaseInfo.firebaseAnalytics,this.firebasePerformance=window.firebaseInfo.firebasePerformance,this.firebaseRemoteConfig=window.firebaseInfo.firebaseRemoteConfig;else if(!u.NgcPlatform.isOfflineMode()){if(console.log("Initializing firebase in game code"),this.firebaseApp=firebase.initializeApp(o.CREDENTIALS),!this.firebaseApp)return console.error("Failed to initialize Firebase"),new Promise(function(e){e(!1)});if(this.firebaseAnalytics=firebase.analytics(),!this.firebaseAnalytics)return console.error("Failed to initialize firebase analytics"),new Promise(function(e){e(!1)});if(this.firebasePerformance=firebase.performance(),!this.firebasePerformance)return console.error("Failed to initialize firebase performance"),new Promise(function(e){e(!1)});if(this.firebaseRemoteConfig=firebase.remoteConfig(this.firebaseApp),!this.firebaseRemoteConfig)return console.error("Failed to initialize firebase remoteconfig"),new Promise(function(e){e(!1)});this.firebaseRemoteConfig.settings={minimumFetchIntervalMillis:3e5,fetchTimeoutMillis:6e4}}return new Promise(function(e){e("Telemetry_impl_Firebase pre-initialized")})},t.prototype._init=function(){return console.log("Firebase initialized OK"),this.initialized=!0,new Promise(function(e){e("Telemetry_impl_Firebase initialized")})},t.prototype._login=function(){throw new Error("Method not implemented.")},t.prototype._getParameter=function(e){var t=this;if(!u.NgcPlatform.isOfflineMode())return new Promise(function(o,n){t.firebaseRemoteConfig.settings.minimumFetchIntervalMillis=0,t.firebaseRemoteConfig.fetchAndActivate().then(function(){var n=t.firebaseRemoteConfig.getValue(e);o(n)}).catch(function(e){n(e)}).finally(function(){t.firebaseRemoteConfig.settings.minimumFetchIntervalMillis=36e5})})},t.prototype._setUserValue=function(){return new Promise(function(e){e(null)})},t.CREDENTIALS={apiKey:"AIzaSyC9t-O31qDlQTsBzKL8t2aAZvh1GDIBBs0",authDomain:"rabbidswildrace.firebaseapp.com",databaseURL:"https://rabbidswildrace.firebaseio.com",projectId:"rabbidswildrace",storageBucket:"rabbidswildrace.appspot.com",messagingSenderId:"446375324287",appId:"1:446375324287:web:e9f8d0653bd4d25166ed4a",measurementId:"G-EVCNP6GGY4"},a([N(cc.TextAsset)],t.prototype,"loginData",void 0),o=a([b],t)}(p.NgcTelemetry);o.default=P,cc._RF.pop()},{"../../../Scripts/Main":"Main","../../Core/Utils":"Utils","../../CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../../CrossFeatures/GameMode/Script/GameModeManager":"GameModeManager","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcGame":"NgcGame","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../Ads/Ads":"Ads","../Inventory/Inventory":"Inventory","../Platform/Platform":"Platform","../Social/Social":"Social","./Telemetry":"Telemetry"}],Telemetry_impl_NullSrv:[function(e,t,o){"use strict";cc._RF.push(t,"d49eeqzeypB3r+LSjKMYKS6","Telemetry_impl_NullSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Telemetry"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.isLoggedIn=function(){return!0},t.prototype.getTelemetrySystem=function(){return i.TelemetrySystem.Null},t.prototype.getName=function(){return"Null"},t.prototype._preInit=function(){return new Promise(function(e){return e()})},t.prototype._login=function(){return new Promise(function(e){return e()})},t.prototype._init=function(){return new Promise(function(e){return e()})},t.prototype.LogEvent_CustomEvent=function(){},t.prototype.LogEvent_StartGame=function(){},t.prototype.LogEvent_EnterShop=function(){},t.prototype.LogEvent_PurchaseItem=function(){},t.prototype.LogEvent_CollectPurchaseItem=function(){},t.prototype.LogEvent_ShopItemViewed=function(){},t.prototype.setGameQueueStartExtraParam=function(){},t.prototype.setGameRoundStartExtraParam=function(){},t.prototype.setGameRoundOverExtraParam=function(){},t.prototype.setGameRoundOverClickedExtraParam=function(){},t.prototype.LogEvent_GameQueueStart=function(){},t.prototype.LogEvent_GameRoundStart=function(){},t.prototype.LogEvent_GameRoundOver=function(){},t.prototype.LogEvent_GameRoundOverClicked=function(){},t.prototype.LogEvent_PlayerDied=function(){},t.prototype.LogEvent_PlayerRevived=function(){},t.prototype.LogEvent_PlayerCrownRewardCollect=function(){},t.prototype.LogEvent_LuckyboosterClicked=function(){},t.prototype.LogEvent_LuckyboosterCollected=function(){},t.prototype.LogEvent_ReportOrigin=function(){},t.prototype.LogEvent_GameOverData=function(){},t.prototype.LogEvent_ReportLoadingStep=function(){},t.prototype.LogEvent_ReportNetStats=function(){},t.prototype.LogEvent_SpectatorMode=function(){},t.prototype.LogEvent_EnterScreen=function(){},t.prototype.LogEvent_ExitScreen=function(){},t.prototype.LogEvent_SettingInformation=function(){},t.prototype.LogEvent_LanguageChanged=function(){},t.prototype.LogEvent_DailyLoginReward=function(){},t.prototype.LogEvent_InfoLeaderboard=function(){},t.prototype.LogEvent_InitShare=function(){},t.prototype.LogEvent_ShareCompletion=function(){},t.prototype.LogEvent_GameAdsStart=function(){},t.prototype.LogEvent_GameAdsStop=function(){},t.prototype.LogEvent_GameAdsRequest=function(){},t.prototype.LogEvent_PlayerClickedStartGame=function(){},t.prototype.LogEvent_ReportTiming=function(){},t.prototype.LogEvent_SendEmoji=function(){},t.prototype.LogEvent_ShareInit=function(){},t.prototype.LogEvent_ShareClick=function(){},t.prototype.LogEvent_ShareComplete=function(){},t.prototype.LogEvent_LoginAttempt=function(){},t.prototype.LogEvent_LoginSuccess=function(){},t.prototype.LogEvent_MoreGameInit=function(){},t.prototype.LogEvent_BrandGameInit=function(){},t.prototype.LogEvent_LikeUsInit=function(){},t.prototype.LogEvent_LikeUsSuccess=function(){},t.prototype.LogEvent_AddToHomeInit=function(){},t.prototype.LogEvent_AddToHomeComplete=function(){},t.prototype.LogEvent_NameEvent=function(){},t.prototype.LogEvent_GamePlayStart=function(){},t.prototype.LogEvent_PlayerClickedCreatePartyRoom=function(){},t.prototype.LogEvent_PlayerClickedStartPartyGame=function(){},t.prototype.LogEvent_InvitePartyInit=function(){},t.prototype.LogEvent_JointRoom=function(){},t.prototype.LogEvent_ReturnParty=function(){},t.prototype.LogEvent_LeaveParty=function(){},t.prototype.LogEvent_GameTechWarning=function(){},t.prototype.LogEvent_GameTechMessage=function(){},t.prototype.LogEvent_GameTechMessageRespond=function(){},t.prototype.LogEvent_GameTechMessageUnsupported=function(){},t.prototype.LogEvent_OnboardingDailyloginCollected=function(){},t.prototype.LogEvent_OnboardingDailyVideoRequest=function(){},t.prototype.LogEvent_OnboardingDailyVideoStart=function(){},t.prototype.LogEvent_OnboardingDailyVideoEnd=function(){},t.prototype.LogEvent_OnboardingPreR2InterRequest=function(){},t.prototype.LogEvent_OnboardingPreR2InterStart=function(){},t.prototype.LogEvent_OnboardingPreR2InterEnd=function(){},t.prototype.LogEvent_OnboardingGameSpectatorEnd=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoRequest=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoStart=function(){},t.prototype.LogEvent_OnboardingClaim2xVideoEnd=function(){},t.prototype.LogEvent_OnboardingGameRoundOverClicked=function(){},t.prototype.markOnboardingClaim2xVideoEvents=function(){},t.prototype._getParameter=function(){return new Promise(function(e){return e()})},t.prototype._setUserValue=function(){return new Promise(function(e){return e()})},t.prototype.getFirebaseRemoteConfig=function(){},a([c],t)}(i.NgcTelemetry));o.default=l,cc._RF.pop()},{"./Telemetry":"Telemetry"}],Telemetry:[function(e,t,o){"use strict";cc._RF.push(t,"8717aGhoURKYoeWnLABcJlE","Telemetry");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTelemetry=o.TelemetrySystem=void 0;var s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../../SDK/Nano/NanoSrv"),l=e("../Platform/Platform"),u=e("../Service"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.DevFake=0]="DevFake",e[e.Firebase=1]="Firebase",e[e.Null=2]="Null"}(o.TelemetrySystem||(o.TelemetrySystem={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isActive=!0,t._trackingConfig={mandatoryEvents:[],mandatoryParams:[]},t._isReceivedTrackingConfig=!1,t.timeStamp_loadingGameStart=null,t.initialized=!1,t.timersSuspendedAt=0,t.timers={},t.customParams={},t}var o;return r(t,e),o=t,t.prototype.preInit=function(e){return this._preInit(e)},Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!1,configurable:!0}),t.prototype.isPlatformBlocked=function(){return l.NgcPlatform.isOfflineMode()||this.blockedPlatforms().includes(s.NgcBuildConfig.buildPlatform)},t.prototype.blockedPlatforms=function(){var e=[];return e.push("GameDistribution","HUZ"),e},t.prototype.getGDPRTrackingConfig=function(){return this._isReceivedTrackingConfig?this._trackingConfig:this._getTrackingConfigs()},t.prototype.isMandatoryEvent=function(e){return this._isReceivedTrackingConfig||this.getGDPRTrackingConfig(),-1!==this._trackingConfig.mandatoryEvents.indexOf(e)},t.prototype.isMandatoryParam=function(e){return-1!==this._trackingConfig.mandatoryParams.indexOf(e)},t.prototype._getTrackingConfigs=function(){var e=c.default.inst.getCurGameInfo().gameParams,t=e&&e.GDPR_Tracking;return console.log("@@@@@@@@@@@@@@@@@_getTrackingConfigs ",t),this._isReceivedTrackingConfig=!0,this._trackingConfig.mandatoryEvents=(t.mandatoryEvents||"").trim().split(/\r\n|\r|\n|,| /),this._trackingConfig.mandatoryParams=(t.mandatoryParams||"").trim().split(/\r\n|\r|\n|,| /),console.log("@@@@@@@@@@@@@@@@@_getTrackingConfigs AFFTERRR",this._trackingConfig),this._trackingConfig},t.prototype.sendFunnelEvents=function(){var e=this,t=window.trackingFunnelEvents||[];t.forEach(function(n,r){var a=n.param;if("loading_gameStart"===n.name&&(e.timeStamp_loadingGameStart=n.param.clientTimestamp),r>0){var i=t[r-1].param;a.actualSec=a.clientTimestamp-i.clientTimestamp}o.inst.LogCustomEvent(n.name,a)}),window.trackingFunnelEvents=[]},t.prototype.isInitalized=function(){return this.initialized},t.prototype.init=function(e){var t=this;return this.initialized?new Promise(function(e){e(t.initialized)}):(console.log("Telemetry "+this.getName()+" init()"),this._init(e))},t.prototype.suspendTimers=function(){0!=this.timersSuspendedAt&&console.warn("Timers were already suspended when suspend was called again!"),this.timersSuspendedAt=Date.now()},t.prototype.resumeTimers=function(){if(0!=this.timersSuspendedAt){var e=Date.now()-this.timersSuspendedAt,t=this;Object.keys(this.timers).forEach(function(o){var n=t.timers[o];n.startTime+=e,t.timers[o]=n,console.log("Rolling back timer "+o+" by "+e+" MS")}),this.timersSuspendedAt=0}else console.warn("Timers were not suspended. Resume ignored")},t.prototype.login=function(e){return!!this.isLoggedIn()||(this._login(e,function(){}),!0)},t.setGameImportantInfos=function(e,t){o.gameImportantInfos={},o.gameImportantInfos.coinBalanceID=e,o.gameImportantInfos.itemCategories=t||[]},t.prototype.LogCustomEvent=function(e,t){this.LogEvent_CustomEvent(e,t)},t.prototype.LogEvent_BeginTimer=function(e){if(this.timers.hasOwnProperty(e))console.warn('Telemetry: beginTimer( "'+e+'" ) already called');else{var t=new Date;this.timers[e]={startTime:t.getTime()}}},t.prototype.LogEvent_EndTimer=function(e,t){if(this.timers.hasOwnProperty(e)){var o=new Date,n=this.timers[e],r=(o.getTime()-n.startTime)/1e3;return t&&this.LogEvent_ReportTiming(e,r),delete this.timers[e],r}console.warn('Telemetry: endTimer( "'+e+'" ) - did not get first get a beginTimer()!')},t.prototype.setCustomExtraParamsForEvent=function(e,t){this.customParams[e]=t},t.prototype.addExtraParams=function(e,t){if(this.customParams.hasOwnProperty(e)){var o=this.customParams[e];t=a(a({},t),o)}return t},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getParameter=function(e){return this._getParameter(e)},t.prototype.setUserValue=function(e){this._setUserValue(e)},t.srvInstances=[],t.inst=null,t.creationTable={},t.gameImportantInfos=null,o=i([d],t)}(u.NgcService);o.NgcTelemetry=f,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],ThemeManager:[function(e,t,o){"use strict";cc._RF.push(t,"71df3zwcgtD/YRzfxIB4lWa","ThemeManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_THEME_TYPE=void 0;var i,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.AC2=0]="AC2",e[e.FC3=1]="FC3",e[e.Heroes=2]="Heroes",e[e.JD=3]="JD",e[e.WDL=4]="WDL",e[e.COUNT=5]="COUNT"})(i=o.E_THEME_TYPE||(o.E_THEME_TYPE={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.softBlockSFArr=[],t.softBlockTopSFArr=[],t.hardBlockSFArr=[],t.hardBlockTopSFArr=[],t.borderBlockSFArr=[],t.borderBlockTopSFArr=[],t.floorSFArr=[],t.bombAppearanceMaterials=[],t._curThemeType=i.AC2,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"curThemeType",{get:function(){return this._curThemeType},set:function(e){e===i.COUNT&&(e=i.AC2),this._curThemeType=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst=this},t.prototype.getTotalThemes=function(){return i.COUNT-1},t.prototype.getSoftBlockSF=function(){return this.softBlockSFArr[this.curThemeType]},t.prototype.getSoftBlockTopSF=function(){return this.softBlockTopSFArr[this.curThemeType]},t.prototype.getHardBlockSF=function(){return this.hardBlockSFArr[this.curThemeType]},t.prototype.getHardBlockTopSF=function(){return this.hardBlockTopSFArr[this.curThemeType]},t.prototype.getBorderBlockSF=function(){return this.borderBlockSFArr[this.curThemeType]},t.prototype.getBorderBlockTopSF=function(){return this.borderBlockTopSFArr[this.curThemeType]},t.prototype.getFloorSF=function(){return this.floorSFArr[this.curThemeType]},t.prototype.getBombAppearanceMaterial=function(){return this.bombAppearanceMaterials[this.curThemeType]},t.inst=null,a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"softBlockSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"softBlockTopSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"hardBlockSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"hardBlockTopSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"borderBlockSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"borderBlockTopSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.SpriteFrame]})],t.prototype,"floorSFArr",void 0),a([l({tooltip:"0: AC, 1: FC3, 2: Heroes, 3: JD, 4: WDL",type:[cc.Material]})],t.prototype,"bombAppearanceMaterials",void 0),o=a([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],ThrobTween:[function(e,t,o){"use strict";cc._RF.push(t,"3bffbf3f1tNpaoKVr8xw8Y2","ThrobTween");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.cycleTimeSec/2,{scale:this.from*this.node.scale},{easing:function(e){return e*e}}).to(this.cycleTimeSec/2,{scale:this.to*this.node.scale},{easing:function(e){return e*e}})).start()},a([c],t.prototype,"from",void 0),a([c],t.prototype,"to",void 0),a([c],t.prototype,"cycleTimeSec",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TimerLabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"8d384wPOCZMxYqHIIwpxz2q","TimerLabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTimerLabelLocalized=o.TimerLabelType=void 0;var i,s=e("./LabelLocalized"),c=e("./LocalizedManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu;(function(e){e[e.SIMPLE=0]="SIMPLE",e[e.SEMI=1]="SEMI",e[e.DETAIL=2]="DETAIL"})(i=o.TimerLabelType||(o.TimerLabelType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayStyle=i.SIMPLE,t.showDay=!0,t.showHour=!0,t.showMin=!0,t.showSec=!0,t.autoRemoveWhenZero=!0,t.showUnderThresholdStatus=!0,t.dynamicFormat=!0,t._timeCountInterval=null,t._realTimeCounting=!1,t._counting=!1,t._originalRemainingTime=null,t._timerExpired=!1,t._timerExpiredCallback=null,t._timeText={day:"",hour:"",min:"",sec:""},t.isEnglish=!1,t}return r(t,e),t.prototype.onLoad=function(){this.displayStyle===i.SEMI&&(this._timeText.day="d",this._timeText.hour="h",this._timeText.min="m",this._timeText.sec="s"),this.isEnglish="en"==c.NgcLocalizedManager.curLang},t.prototype.setTimerExpiredCallback=function(e){this._timerExpiredCallback=e},t.prototype.onTimerExpiredCallback=function(){this._timerExpiredCallback&&this._timerExpiredCallback()},t.prototype.startCount=function(e,t){void 0===t&&(t=!0),this._timerExpired=!1,this._realTimeCounting=t,this._counting=!0;var o=Date.now()+e;this._realTimeCounting?(this._originalRemainingTime=o,this.updateLabelContent(this.getRemainingDayAndTime(o))):(this._originalRemainingTime=e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)))},t.prototype.update=function(e){this._counting&&!this._timerExpired&&(this._realTimeCounting?(this.updateLabelContent(this.getRemainingDayAndTime(this._originalRemainingTime)),this._originalRemainingTime-Date.now()<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)):(this._originalRemainingTime-=1e3*e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)),this._originalRemainingTime<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)))},t.prototype.getTimeText=function(e,t){return this.displayStyle===i.DETAIL&&(this._timeText.day=c.NgcLocalizedManager.t("NGG_TIME_DAY"+(e>1?"_MULTI":"")).text,this._timeText.hour=c.NgcLocalizedManager.t("NGG_TIME_HOUR"+(e>1?"_MULTI":"")).text,this._timeText.min=c.NgcLocalizedManager.t("NGG_TIME_MINUTE"+(e>1?"_MULTI":"")).text,this._timeText.sec=c.NgcLocalizedManager.t("NGG_TIME_SECOND"+(e>1?"_MULTI":"")).text),this._timeText[t]},t.prototype.updateLabelContentManually=function(e,t,o,n){this.updateLabelContent({day:e,hour:t,min:o,sec:n})},t.prototype.updateLabelContent=function(e){var t="",o=this.showDay,n=this.showHour,r=this.showMin,a=this.showSec;this.autoRemoveWhenZero&&(0===e.day&&(o=!1),0===e.hour&&(n=!1),0===e.min&&(r=!1),0===e.showSec&&(a=!1));var s=this.showUnderThresholdStatus&&0==e.hour&&0==e.day&&e.min<1;switch(this.displayStyle){case i.SEMI:this.dynamicFormat?e.day>0?(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":""):e.hour>0?(t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":""):e.min>0?t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"":e.sec>0&&(t+=a?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""):(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"",t+=a?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""),s&&(t=c.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case i.DETAIL:this.dynamicFormat?e.day>0?(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":""):e.hour>0?(t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):e.min>0&&(t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""),s&&(t=c.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case i.SIMPLE:if(o){t+=o?e.day.toString()+" "+this.getTimeText(e.day,"day")+" ":"";var l=!1;this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}else l=!1,this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}this.string=t},t.prototype.getRemainingDayAndTime=function(e){var t;return t=e-Date.now(),this.getTimeObject(t)},t.prototype.getTimeObject=function(e){var t=Math.floor(e/1e3%60),o=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3/60/60%24),r=Math.floor(e);!1===this.showDay&&(n=Math.floor(e/1e3/60/60));var a=Math.floor(e/1e3/60/60/24);return{day:a=a>0?a:0,hour:n=n>0?n:0,min:o=o>0?o:0,sec:t=t>0?t:0,extra:r=r>0?r:0}},t.prototype.onDestroy=function(){},a([p({type:cc.Enum(i)})],t.prototype,"displayStyle",void 0),a([p],t.prototype,"showDay",void 0),a([p],t.prototype,"showHour",void 0),a([p],t.prototype,"showMin",void 0),a([p],t.prototype,"showSec",void 0),a([p],t.prototype,"autoRemoveWhenZero",void 0),a([p],t.prototype,"showUnderThresholdStatus",void 0),a([p],t.prototype,"dynamicFormat",void 0),a([u,d("NGC/LocalizedTimerLabel")],t)}(s.NgcLabelLocalized);o.NgcTimerLabelLocalized=f,cc._RF.pop()},{"./LabelLocalized":"LabelLocalized","./LocalizedManager":"LocalizedManager"}],TipBackAndForth:[function(e,t,o){"use strict";cc._RF.push(t,"f42337A/lZC/54BOHCKt8dA","TipBackAndForth");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.angle=30,t.speed=2,t.cnt=0,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(e){this.cnt+=e;var t=this.cnt%this.speed/this.speed,o=Math.cos(6.28*t)*this.angle;this.node.angle=o},a([c(cc.Label)],t.prototype,"label",void 0),a([c],t.prototype,"text",void 0),a([c],t.prototype,"angle",void 0),a([c],t.prototype,"speed",void 0),a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TipManager:[function(e,t,o){"use strict";cc._RF.push(t,"b13ef1MjtVE/oPWhA3Etpi/","TipManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTipManager=o.Tip=o.Type_Tip=void 0;var i,s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop",e[e.Both=2]="Both"})(i=o.Type_Tip||(o.Type_Tip={}));var f=function(e,t,o,n){void 0===e&&(e=i.Both),void 0===t&&(t=""),void 0===o&&(o=""),void 0===n&&(n=null),this.type=e,this.textKey=t,this.imageName=o,this.spriteFrame=null};o.Tip=f;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tips=[],t.tipConfig=null,t.tipSprite=null,t.tipLabel=null,t.tipSpriteNext=null,t.tipLabelNext=null,t.COUNTDOWN_TIME_SHOW_TIP=3,t.arrowPre=null,t.arrowNext=null,t.timeShowTip=0,t._curTip=null,t.tipsDisplayed=[],t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"curTip",{get:function(){return this._curTip},set:function(e){var t=this;if(!(e>=this.tips.length||e<0)){var o=this.tips[e];if(null==this._curTip)cc.tween(this.tipLabel.node).call(function(){t.tipLabel.string=l.NgcLocalizedManager.t(o.textKey).text,t.tipLabel.node.x=0}).to(.3,{opacity:255}).start(),cc.tween(this.tipSprite.node).call(function(){o.spriteFrame&&(t.tipSprite.spriteFrame=o.spriteFrame),t.tipSprite.node.x=0}).to(.3,{opacity:255}).start();else{var n=this.tipLabel;this.tipLabel=this.tipLabelNext,this.tipLabelNext=n;var r=this.tipSprite;this.tipSprite=this.tipSpriteNext,this.tipSpriteNext=r,cc.tween(this.tipLabel.node).call(function(){t.tipLabel.string=l.NgcLocalizedManager.t(o.textKey).text,t.tipLabel.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipSprite.node).call(function(){t.tipSprite.spriteFrame=o.spriteFrame,t.tipSprite.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipLabelNext.node).to(.2,{x:-500}).start(),cc.tween(this.tipSpriteNext.node).to(.2,{x:-500}).start()}this.arrowPre.active=0!=e,this.timeShowTip=this.COUNTDOWN_TIME_SHOW_TIP,this._curTip=e}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst=this,this.parseInputConfigFile()&&this.loadTipSpriteFrames(),this.tipSprite.node.opacity=0,this.tipLabel.node.opacity=0,o.staticTipConfig=this.tipConfig},t.prototype.nextTip=function(){var e=s.Utils.randomFromTo(0,this.tips.length-1);for(this.tipsDisplayed.length==this.tips.length&&(this.tipsDisplayed=[]);this.tipsDisplayed.indexOf(e)>=0;)e=s.Utils.randomFromTo(0,this.tips.length-1);this.tipsDisplayed.push(e),this.curTip=e},t.prototype.update=function(e){if(!l.NgcLocalizedManager.firstTimeInit){if(null===this.curTip)return this.curTip=0,void this.tipsDisplayed.push(0);this.timeShowTip-=e,this.timeShowTip<0&&this.nextTip()}},t.prototype.parseInputConfigFile=function(){var e=this,t=this.tipConfig.text.split("\r\n");t.shift();try{t.forEach(function(t){var o=t.split("|"),n=o[0];if(null!=n&&0!=n.length&&""!=n){var r=o[1],a=i.Both;switch(o[2].toLowerCase()){case"mobile":a=i.Mobile;break;case"desktop":a=i.Desktop;break;default:a=i.Both}var s=new f(a,n,r,null);a==i.Both?e.tips.push(s):cc.sys.isMobile&&a==i.Mobile?e.tips.push(s):cc.sys.isMobile||a!=i.Desktop||e.tips.push(s)}})}catch(o){return console.error("Error reading configTip file. Format error?"),!1}return!0},t.prototype.loadTipSpriteFrames=function(){var e=this;cc.assetManager.loadBundle(c.NgcBuildConfig.services.Tips.bundles,function(t,o){e.tips.forEach(function(e){o.load(e.imageName,cc.SpriteFrame,function(t,o){t||(e.spriteFrame=o)})})})},t.inst=null,a([d(cc.TextAsset)],t.prototype,"tipConfig",void 0),a([d(cc.Sprite)],t.prototype,"tipSprite",void 0),a([d(cc.Label)],t.prototype,"tipLabel",void 0),a([d(cc.Sprite)],t.prototype,"tipSpriteNext",void 0),a([d(cc.Label)],t.prototype,"tipLabelNext",void 0),a([d],t.prototype,"COUNTDOWN_TIME_SHOW_TIP",void 0),a([d(cc.Node)],t.prototype,"arrowPre",void 0),a([d(cc.Node)],t.prototype,"arrowNext",void 0),o=a([p],t)}(cc.Component);o.NgcTipManager=h,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],TrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"1bdc4AMJOlNHoRvs3UK8yQT","TrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.TrackingEvent=void 0;var i,s=e("../../NanoGameCore/GameFramework/Scripts/NgcTrackingManager"),c=e("../TypeDefs"),l=e("../GameObjects/Bomb"),u=e("../Maps/ThemeManager"),p=e("../Player/PlayerData"),d=e("../Utils/FPS"),f=e("../Reward/GameReward"),h=e("../GameObjects/GameObjectBase"),g=e("../UserInfo"),m=cc._decorator,y=m.ccclass,_=(m.property,function(){function e(){}return e.from=function(t){return e._inst._from=t,e._inst},e.prototype.to=function(e){return Math.round((e-this._from)/1e3)},e._inst=new e,e.DAY_INSECOND=86400,e}());(function(e){e[e.Onboarding_RouletteStart=106]="Onboarding_RouletteStart",e[e.Onboarding_RouletteEnd=107]="Onboarding_RouletteEnd",e[e.Onboarding_GameQueueStart=108]="Onboarding_GameQueueStart",e[e.Onboarding_GameTutorialStart=109]="Onboarding_GameTutorialStart",e[e.Onboarding_TutorialControls=110]="Onboarding_TutorialControls",e[e.Onboarding_TutorialBomb=111]="Onboarding_TutorialBomb",e[e.Onboarding_TutorialSafeZone=112]="Onboarding_TutorialSafeZone",e[e.Onboarding_GameRoundStart=113]="Onboarding_GameRoundStart",e[e.Onboarding_PlayerDied=114]="Onboarding_PlayerDied",e[e.Onboarding_PlayerRevived=115]="Onboarding_PlayerRevived",e[e.Onboarding_GameRoundOver=116]="Onboarding_GameRoundOver",e[e.Onboarding_GameOverClicked=117]="Onboarding_GameOverClicked",e[e.Onboarding_RewardDailyLogin=118]="Onboarding_RewardDailyLogin",e[e.Onboarding_GameQueueStart2=119]="Onboarding_GameQueueStart2",e[e.Onboarding_GameRoundStart2=120]="Onboarding_GameRoundStart2",e[e.Onboarding_GameRoundOver2=121]="Onboarding_GameRoundOver2",e[e.Player_Purchase=202]="Player_Purchase",e[e.Character_Upgrade=203]="Character_Upgrade",e[e.Game_QueueStart=301]="Game_QueueStart",e[e.Game_RoundStart=302]="Game_RoundStart",e[e.Game_RoundOver=303]="Game_RoundOver",e[e.Player_Collect=304]="Player_Collect",e[e.Player_Die=305]="Player_Die",e[e.Player_Revived=306]="Player_Revived",e[e.Player_BombExplode=307]="Player_BombExplode",e[e.Game_SpikeBlock=308]="Game_SpikeBlock",e[e.Game_BombRain=309]="Game_BombRain",e[e.Game_AreaShrink=310]="Game_AreaShrink"})(i=o.TrackingEvent||(o.TrackingEvent={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fpsCounter=new d.default,t._isFPSCounterStart=!0,t._alreadyFTUEAtLaunch=!1,t._gameStartTS=0,t._startSceneLoadedTS=0,t._rouletteStartTS=0,t._rouletteEndTS=0,t._gameQueueStartTS=0,t._gameTutorialStartTS=0,t._gameTutorialControlsTS=0,t._gameTutorialBombTS=0,t._gameTutorialSafeZoneTS=0,t._gameRoundStartTS=0,t._playerDiedTS=0,t._playerRevivedTS=0,t._gameRoundOverTS=0,t._gameOverClickedTS=0,t._rewardDailyLoginTS=0,t._playerDiedByShrink=0,t}var o;return r(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst},enumerable:!1,configurable:!0}),t.formatPosInMap=function(e){return"C"+e.x.toString().padStart(1,"0")+"R"+e.y.toString().padStart(1,"0")},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o._inst=this,this._gameStartTS=window.funnel&&window.funnel.startTime?window.funnel.startTime:Date.now(),this._alreadyFTUEAtLaunch=g.UserInfo.alreadyFTUE,g.UserInfo.gameRoundCount},t.prototype._logEvent=function(e,t){var n=o._eventKeyMap.get(e);null!=n&&""!=n?this.LogCustomEvent(n,t):cc.warn("[Tracking] No event key "+e+" in the map")},Object.defineProperty(t.prototype,"fpsCounter",{get:function(){return this._fpsCounter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFPSCounterStart",{set:function(e){this._isFPSCounterStart=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerDiedByShrink",{get:function(){return this._playerDiedByShrink},set:function(e){this._playerDiedByShrink=e},enumerable:!1,configurable:!0}),t.prototype.update=function(e){this._isFPSCounterStart&&this._fpsCounter.update(e)},t.prototype.onGameStart=function(){this._gameStartTS=Date.now()},t.prototype.onStartSceneLoaded=function(){this._startSceneLoadedTS=Date.now()},t.prototype.onRouletteStart=function(){this._rouletteStartTS=Date.now(),this._logEvent(i.Onboarding_RouletteStart,{totalSec:_.from(this._gameStartTS).to(this._rouletteStartTS),actualSec:_.from(this._startSceneLoadedTS).to(this._rouletteStartTS)})},t.prototype.onRouletteEnd=function(e){this._rouletteEndTS=Date.now(),this._logEvent(i.Onboarding_RouletteEnd,{totalSec:_.from(this._gameStartTS).to(this._rouletteEndTS),actualSec:_.from(this._rouletteStartTS).to(this._rouletteEndTS),characterID:e})},t.prototype.onFirstGameQueueStart=function(e){this._gameQueueStartTS=Date.now(),this._logEvent(i.Onboarding_GameQueueStart,{totalSec:_.from(this._gameStartTS).to(this._gameQueueStartTS),actualSec:_.from(this._rouletteEndTS).to(this._gameQueueStartTS),characterID:e})},t.prototype.onGameTutorialStart=function(e){this._gameTutorialStartTS=Date.now(),this._logEvent(i.Onboarding_GameTutorialStart,{totalSec:_.from(this._gameStartTS).to(this._gameTutorialStartTS),actualSec:_.from(this._gameQueueStartTS).to(this._gameTutorialStartTS),characterID:e})},t.prototype.onTutorialControls=function(e){this._gameTutorialControlsTS=Date.now(),this._logEvent(i.Onboarding_TutorialControls,{totalSec:_.from(this._gameStartTS).to(this._gameTutorialControlsTS),actualSec:_.from(this._gameTutorialStartTS).to(this._gameTutorialControlsTS),characterID:e})},t.prototype.onTutorialBomb=function(e){this._gameTutorialBombTS=Date.now(),this._logEvent(i.Onboarding_TutorialBomb,{totalSec:_.from(this._gameStartTS).to(this._gameTutorialBombTS),actualSec:_.from(this._gameTutorialControlsTS).to(this._gameTutorialBombTS),characterID:e})},t.prototype.onTutorialSafeZone=function(e){this._gameTutorialSafeZoneTS=Date.now(),this._logEvent(i.Onboarding_TutorialSafeZone,{totalSec:_.from(this._gameStartTS).to(this._gameTutorialSafeZoneTS),actualSec:_.from(this._gameTutorialBombTS).to(this._gameTutorialSafeZoneTS),characterID:e})},t.prototype._onGameRoundStart=function(e,t,n){this._gameRoundStartTS=Date.now(),this._gameRoundCharacterID=n,this._gameRoundID=e,this._gameRoundMode=o._gameModeMap.get(t),this._playerDeathCount=0;var r=void 0;g.UserInfo.gameRoundCount++;var a=null;2!=g.UserInfo.gameRoundCount||this._alreadyFTUEAtLaunch||(a=i.Onboarding_GameRoundOver2),null!=a&&(g.UserInfo.gameRoundCount>1?r=_.DAY_INSECOND>=_.from(g.UserInfo.firstGameStartTime).to(Date.now())?"True":"False":g.UserInfo.firstGameStartTime=this._gameRoundStartTS,this._logEvent(i.Onboarding_GameRoundStart2,{totalSec:_.from(this._gameStartTS).to(this._gameRoundStartTS),actualSec:_.from(this._rewardDailyLoginTS).to(this._gameRoundStartTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:this._fpsCounter.current,checker:r}))},t.prototype.onBoardingGameRoundStart=function(){var e=_.DAY_INSECOND>=_.from(g.UserInfo.firstGameStartTime).to(Date.now())?"True":"False";this._logEvent(i.Onboarding_GameRoundStart,{totalSec:_.from(this._gameStartTS).to(this._gameRoundStartTS),actualSec:_.from(this._gameRoundStartTS).to(this._gameTutorialSafeZoneTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:this.fpsCounter.current,checker:e})},t.prototype.onPlayerCollect=function(e,t,n,r,a,s,c){this._logEvent(i.Player_Collect,{roundID:this._gameRoundID,currentFPS:c.current,roundTime:Math.round(t),playerTotalCount:a,itemType:o._collectableItemMap.get(e),amount:1,basicFireLevel:s.rangeOfBomb,basicSpeedLevel:s.curSpeed,basicBombLevel:s.curBombNum,basicHeartLevel:s.curHp,mapThemeID:o._themeMap.get(r),characterID:s.skin,characterLevel:s.level,gameMode:o._gameModeMap.get(n),startPosition:o.formatPosInMap(s.startingPos)})},t.prototype.onPlayerDead=function(e,t,n,r,a,s){this._playerDiedTS=Date.now(),this._playerDeathCount++;var c=new f.default({isVictory:!1,playerKill:a.curKill,playerRank:a.curRank});1==g.UserInfo.gameRoundCount&&this._logEvent(i.Onboarding_PlayerDied,{totalSec:_.from(this._gameStartTS).to(this._playerDiedTS),actualSec:_.from(this._gameRoundStartTS).to(this._playerDiedTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:s.current,causeOfDeath:o._deadCauseMap.get(a.deadCause),finalPosistionInActionPhase:a.curRank,checker:this._playerDeathCount<=1?"First":"Repeat",killCount:a.curKill,crownEarnings:c.crown.count}),this._logEvent(i.Player_Die,{roundID:this._gameRoundID,currentFPS:s.current,roundTime:Math.round(e),playerTotalCount:r,finalPositionInActionPhase:a.curRank,coinEarnings:c.coin.count,crownEarnings:c.crown.count,mapThemeID:o._themeMap.get(n),characterID:a.skin,characterLevel:a.level,gameMode:o._gameModeMap.get(t),startPosition:o.formatPosInMap(a.startingPos),checker:this._playerDeathCount<=1?"First":"Repeat",causeOfDeath:o._deadCauseMap.get(a.deadCause),killCount:a.curKill,basicFireLevel:a.rangeOfBomb,basicSpeedLevel:a.curSpeed,basicBombLevel:a.curBombNum,basicFireUpCollected:a.totalFireUpCollected,basicSpeedUpCollected:a.totalSpeedUpCollected,basicBombUpCollected:a.totalBombUpCollected,basicHeartCollected:a.totalHeartCollected,abilityPushBomb:"",abilityBombPass:"",BombPierceCollected:a.totalBombPierceCollected,BombPowerCollected:a.totalBombPowerCollected})},t.prototype.onPlayerRevived=function(e,t,n,r,a,s){this._playerRevivedTS=Date.now();var c=new f.default({isVictory:!1,playerKill:a.curKill,playerRank:a.curRank});1==g.UserInfo.gameRoundCount&&this._logEvent(i.Onboarding_PlayerRevived,{totalSec:_.from(this._gameStartTS).to(this._playerRevivedTS),actualSec:_.from(this._playerDiedTS).to(this._playerRevivedTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:s.current,causeOfDeath:o._deadCauseMap.get(a.deadCause),finalPosistionInActionPhase:a.curRank,checker:this._playerDeathCount<=1?"First":"Repeat",killCount:a.curKill,crownEarnings:c.crown.count}),this._logEvent(i.Player_Revived,{roundID:this._gameRoundID,currentFPS:s.current,roundTime:Math.round(e),playerTotalCount:r,finalPositionInActionPhase:a.curRank,coinEarnings:c.coin.count,crownEarnings:c.crown.count,mapThemeID:o._themeMap.get(n),characterID:a.skin,characterLevel:a.level,gameMode:this._gameRoundMode,causeOfDeath:o._deadCauseMap.get(a.deadCause)})},t.prototype._onGameRoundOver=function(e,t,n){this._gameRoundOverTS=Date.now();var r=void 0;r=g.UserInfo.gameRoundCount>1?_.DAY_INSECOND>=_.from(g.UserInfo.firstGameStartTime).to(Date.now())?"True":"False":this._playerDeathCount<=1?"First":"Repeat";var a=null;1==g.UserInfo.gameRoundCount?a=i.Onboarding_GameRoundOver:2!=g.UserInfo.gameRoundCount||this._alreadyFTUEAtLaunch||(a=i.Onboarding_GameRoundOver2),null!=a&&this._logEvent(a,{totalSec:_.from(this._gameStartTS).to(this._gameRoundOverTS),actualSec:_.from(this._playerDiedTS).to(this._gameRoundOverTS),characterID:t.skin,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:n.current,causeOfDeath:o._deadCauseMap.get(t.deadCause),finalPosistionInActionPhase:t.curRank,coinEarnings:e.coin.count,checker:r,killCount:t.curKill,crownEarnings:e.crown.count})},t.prototype.onGameOverClicked=function(e,t,n){1==g.UserInfo.gameRoundCount&&(this._gameOverClickedTS=Date.now(),this._logEvent(i.Onboarding_GameOverClicked,{totalSec:_.from(this._gameStartTS).to(this._gameOverClickedTS),actualSec:_.from(this._playerDiedTS).to(this._gameOverClickedTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:t.current,causeOfDeath:o._deadCauseMap.get(e.deadCause),finalPosistionInActionPhase:e.curRank,checker:this._playerDeathCount<=1?"First":"Repeat",killCount:e.curKill,crownEarnings:n}))},t.prototype.onRewardDailyLogin=function(e,t,o,n,r){this._rewardDailyLoginTS=Date.now(),this._logEvent(i.Onboarding_RewardDailyLogin,{totalSec:_.from(this._gameStartTS).to(this._rewardDailyLoginTS),actualSec:_.from(this._gameOverClickedTS).to(this._rewardDailyLoginTS),multiplierOffer:e,itemRewardID:t,itemRewardValue:o,stepID:n,viewedAd:r?1:0})},t.prototype._onGameQueueStart2=function(e,t,n){var r=_.DAY_INSECOND>=_.from(g.UserInfo.firstGameStartTime).to(Date.now());this._gameQueueStartTS=Date.now(),this._gameRoundCharacterID=n,this._gameRoundID=e,this._gameRoundMode=o._gameModeMap.get(t),this._playerDeathCount=0,this._logEvent(i.Onboarding_GameQueueStart2,{totalSec:_.from(this._gameStartTS).to(this._gameQueueStartTS),actualSec:_.from(this._rewardDailyLoginTS).to(this._gameQueueStartTS),characterID:this._gameRoundCharacterID,roundID:this._gameRoundID,gameMode:this._gameRoundMode,currentFPS:this._fpsCounter.current,checker:r?"True":"False"})},t.prototype.onPlayerPurchase=function(e,t,o,n){this._logEvent(i.Player_Purchase,{itemPurchaseID:e,itemPurchaseValue:t,itemSpentValue:o,checker:n?"True":"False"})},t.prototype.onCharacterUpgrade=function(e,t,o,n){this._logEvent(i.Character_Upgrade,{characterID:e,characterLevel:t,itemPurchaseValue:o,itemSpentValue:n})},t.prototype.onGameQueueStart=function(e,t,n,r){0==g.UserInfo.gameRoundCount?this.onFirstGameQueueStart(n):1!=g.UserInfo.gameRoundCount||this._alreadyFTUEAtLaunch||this._onGameQueueStart2(e,t,n),this._logEvent(i.Game_QueueStart,{roundID:e,characterID:n,characterLevel:r,gameMode:o._gameModeMap.get(t),currentFPS:this._fpsCounter.current})},t.prototype.onGameRoundStart=function(e,t,n,r,a,s,c,l){this._onGameRoundStart(e,n,s.skin),this._logEvent(i.Game_RoundStart,{roundId:e,humanPlayersInGame:a,currentFPS:this._fpsCounter.current,roundTime:Math.round(t),mapThemeID:o._themeMap.get(r),characterID:c,characterLevel:l,gameMode:o._gameModeMap.get(n),startPosition:o.formatPosInMap(s.startingPos)})},t.prototype.onGameRoundOver=function(e,t,n,r,a,s,c,l){this._onGameRoundOver(r,c,l),this._logEvent(i.Game_RoundOver,{roundId:e,roundTime:Math.round(t),currentFPS:l.current,averageFPS:l.average,maxFPS:l.max,minFPS:l.min,playerTotalCount:s,finalPositionInActionPhase:c.curRank,coinEarnings:r.coin.count,crownEarnings:r.crown.count,mapThemeID:o._themeMap.get(a),characterID:c.skin,characterLevel:c.level.toString(),gameMode:o._gameModeMap.get(n),startPosition:o.formatPosInMap(c.startingPos),checker:this._playerDeathCount<=1?"First":"Repeat",causeOfDeath:o._deadCauseMap.get(c.deadCause),killCount:c.curKill,basicFireLevel:c.rangeOfBomb,basicSpeedLevel:c.amountSpeedUpdate,basicBombLevel:c.curBombNum,basicHeartCollected:c.totalHeartCollected,abilityPushBomb:"Inactive",abilityBombPass:"Inactive",BombPierceCollected:c.totalBombPierceCollected,BombPowerCollected:c.totalBombPowerCollected})},t.prototype.onBombExplode=function(e,t,n,r,a,s,c,u){this._logEvent(i.Player_BombExplode,{roundID:this._gameRoundID,currentFPS:u.current,roundTime:Math.round(r),playerTotalCount:s,playerCount:t,killCount:c.curKill,crateDestroyed:n,basicFireLevel:c.rangeOfBomb,basicBombLevel:c.curBombNum,gameMode:o._gameModeMap.get(a),BombPierceActive:e==l.E_BOMB_TYPE.Pierce?"True":"False",BombPowerActive:e==l.E_BOMB_TYPE.Power?"True":"False"})},t.prototype.onMapShink=function(e,t,n,r,a){this._logEvent(i.Game_AreaShrink,{roundID:this._gameRoundID,gameMode:o._gameModeMap.get(e),humanPlayersInGame:t,counter:a,playerTotalCount:n,playerCount:this._playerDiedByShrink,mapThemeID:o._themeMap.get(r)})},t._inst=null,t._gameModeMap=new Map([[c.GameMode.ClassicBattleRoyale,"Classic Battle Royale"],[c.GameMode.Inferno,"Inferno"],[c.GameMode.FullPower,"Full-Power"],[c.GameMode.MiniMini,"Mini-Mini"],[c.GameMode.Panic,"Panic"],[c.GameMode.PaintSplash,"Paint Splash"],[c.GameMode.BonusReward,"Bonus Reward"]]),t._themeMap=new Map([[u.E_THEME_TYPE.AC2,"AC2"],[u.E_THEME_TYPE.FC3,"FC3"],[u.E_THEME_TYPE.Heroes,"Heroes"]]),t._deadCauseMap=new Map([[p.DeadCause.Alive,"Alive"],[p.DeadCause.Killed,"Killed"],[p.DeadCause.Suicide,"Suicide"],[p.DeadCause.Bombrain,"Bombrain"],[p.DeadCause.Shrinking,"Spikeblock"]]),t._collectableItemMap=new Map([[h.GameObjectType.PU_Bomb_Range,"Fireup"],[h.GameObjectType.PD_Bomb_Range,"Firedown"],[h.GameObjectType.PU_Bomb_Number,"Bombup"],[h.GameObjectType.PD_Bomb_Number,"Bombdown"],[h.GameObjectType.PU_Mov_Speed,"Speedup"],[h.GameObjectType.PD_Mov_Speed,"Speeddown"],[h.GameObjectType.PU_Heart,"Heart"],[h.GameObjectType.PU_Bomb_Pierce,"PierceBomb"],[h.GameObjectType.NEG_Slow,"SlowNegative"]]),t._eventKeyMap=new Map([[i.Onboarding_RouletteStart,"onboarding_rouletteStart"],[i.Onboarding_RouletteEnd,"onboarding_rouletteEnd"],[i.Onboarding_GameQueueStart,"onboarding_gameQueueStart"],[i.Onboarding_GameTutorialStart,"onboarding_gameTutorialStart"],[i.Onboarding_TutorialControls,"onboarding_tutorialControls"],[i.Onboarding_TutorialBomb,"onboarding_tutorialBomb"],[i.Onboarding_TutorialSafeZone,"onboarding_tutorialSafeZone"],[i.Onboarding_GameRoundStart,"onboarding_gameRoundStart"],[i.Onboarding_PlayerDied,"onboarding_playerDied"],[i.Onboarding_PlayerRevived,"onboarding_playerRevived"],[i.Onboarding_GameRoundOver,"onboarding_gameRoundOver"],[i.Onboarding_GameOverClicked,"onboarding_gameOverClicked"],[i.Onboarding_RewardDailyLogin,"onboarding_dailyloginCollected"],[i.Onboarding_GameQueueStart2,"onboarding_gameQueueStart2"],[i.Onboarding_GameRoundStart2,"onboarding_gameRoundStart2"],[i.Onboarding_GameRoundOver2,"onboarding_gameRoundOver2"],[i.Player_Purchase,"player_purchase"],[i.Character_Upgrade,"character_upgrade"],[i.Game_QueueStart,"game_queueStart"],[i.Game_RoundStart,"game_roundStart"],[i.Game_RoundOver,"game_roundOver"],[i.Player_Collect,"player_collect"],[i.Player_Die,"player_died"],[i.Player_Revived,"player_revived"],[i.Player_BombExplode,"player_bombExplode"],[i.Game_SpikeBlock,"game_spikeBlock"],[i.Game_BombRain,"game_bombRain"],[i.Game_AreaShrink,"game_areaShrink"]]),o=a([y],t)}(s.default);o.default=v,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/NgcTrackingManager":"NgcTrackingManager","../GameObjects/Bomb":"Bomb","../GameObjects/GameObjectBase":"GameObjectBase","../Maps/ThemeManager":"ThemeManager","../Player/PlayerData":"PlayerData","../Reward/GameReward":"GameReward","../TypeDefs":"TypeDefs","../UserInfo":"UserInfo","../Utils/FPS":"FPS"}],TuningData:[function(e,t,o){"use strict";cc._RF.push(t,"54fac4lEqpHJKbQ+cvJs7Q2","TuningData");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("js-yaml"),s=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=e("./Game"),l=e("./GameCamera"),u=e("./GameModeDataBase"),p=e("./GameObjects/Bomb"),d=e("./Player/PlayerController"),f=e("./Player/PlayerData"),h=cc._decorator,g=h.ccclass,m=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.yamlURL="http://dan-build1.ubisoft.org/UASB/ParametersConfig/GameParameters.yaml",t._isLoaded=!1,t.params=null,t.localParameters=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=this;if(console.log("Tuning Data onload()"),o.inst&&console.error("More than one TuningData!!"),o.inst=this,this.yamlURL=s.NgcBuildConfig.tuningDataURL,!s.NgcBuildConfig.offlineMode&&!s.NgcBuildConfig.enabledDebugMode&&this.yamlURL.length>0){var t=new XMLHttpRequest;t.open("GET",this.yamlURL+(/\?/.test(this.yamlURL)?"&":"?")+(new Date).getTime()),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.loadObjectFromYAMLString(t.responseText):(cc.error("Error while trying to load GameParemeter.yaml: "+t.statusText),e.loadConfigFromLocal()))},t.send(null),console.log("Load data from liveops tool")}else this.loadConfigFromLocal();u.default.loadFile()},t.prototype.loadConfigFromLocal=function(){cc.log("loading game param from local"),this.loadObjectFromYAMLString(this.localParameters.text)},t.prototype.loadObjectFromYAMLString=function(e){var t=i.safeLoad(e);this.params=t,this.setParamsToStaticVariable(),this._isLoaded=!0},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.getParamsValue=function(e,t,o){return null==e||null==e?(cc.warn("Params "+o+" value is null or undefined"),cc.warn("Use default value, "+o+" = "+t),t):("Live"!==s.NgcBuildConfig.deploymentEnvironment&&cc.log("%c"+o+" = "+e,"color: green"),e)},t.prototype.setParamsToStaticVariable=function(){var e,t,o,n,r,a,i,s,u,h,g,m,y,_,v,S,b,N,P,I,C,w,O,T,E,M,D,R,B,A,k,L,G,F,j,U,x,H,V,z,W,K,Y,q,J,X,Q,Z,$,ee,te,oe,ne,re;f.default.SPEED_DEFAULT=this.getParamsValue(null===(t=null===(e=this.params)||void 0===e?void 0:e.playerController)||void 0===t?void 0:t.speedDefault,f.default.SPEED_DEFAULT,"SPEED_DEFAULT"),f.default.MAX_HEALTH=this.getParamsValue(null===(n=null===(o=this.params)||void 0===o?void 0:o.playerController)||void 0===n?void 0:n.maxHealth,f.default.MAX_HEALTH,"MAX_HEALTH"),f.default.BOMB_MAX_UPGRADE=this.getParamsValue(null===(a=null===(r=this.params)||void 0===r?void 0:r.playerController)||void 0===a?void 0:a.bombMaxUpgrade,f.default.BOMB_MAX_UPGRADE,"BOMB_MAX_UPGRADE"),f.default.FIRE_MAX_UPGRADE=this.getParamsValue(null===(s=null===(i=this.params)||void 0===i?void 0:i.playerController)||void 0===s?void 0:s.fireMaxUpgrade,f.default.FIRE_MAX_UPGRADE,"FIRE_MAX_UPGRADE"),f.default.SPEED_MAX_UPGRADE=this.getParamsValue(null===(h=null===(u=this.params)||void 0===u?void 0:u.playerController)||void 0===h?void 0:h.speedMaxUpgrade,f.default.SPEED_MAX_UPGRADE,"SPEED_MAX_UPGRADE"),f.default.SPEED_PER_UPGRADE=this.getParamsValue(null===(m=null===(g=this.params)||void 0===g?void 0:g.playerController)||void 0===m?void 0:m.speedPerUpgrade,f.default.SPEED_PER_UPGRADE,"SPEED_PER_UPGRADE"),l.default.ZOOM_RATIO_PC=this.getParamsValue(null===(_=null===(y=this.params)||void 0===y?void 0:y.camera)||void 0===_?void 0:_.zoomRatioPC,l.default.ZOOM_RATIO_PC,"ZOOM_RATIO_PC"),l.default.ZOOM_RATIO_MOBILE=this.getParamsValue(null===(S=null===(v=null==this?void 0:this.params)||void 0===v?void 0:v.camera)||void 0===S?void 0:S.zoomRatioMobile,l.default.ZOOM_RATIO_MOBILE,"ZOOM_RATIO_MOBILE"),l.default.SMALL_SHAKE_INTENSITY=this.getParamsValue(null===(N=null===(b=this.params)||void 0===b?void 0:b.camera)||void 0===N?void 0:N.smallShakeIntensity,l.default.SMALL_SHAKE_INTENSITY,"SMALL_SHAKE_INTENSITY"),l.default.MEDIUM_SHAKE_INTENSITY=this.getParamsValue(null===(I=null===(P=this.params)||void 0===P?void 0:P.camera)||void 0===I?void 0:I.mediumShakeIntensity,l.default.MEDIUM_SHAKE_INTENSITY,"MEDIUM_SHAKE_INTENSITY"),l.default.BIG_SHAKE_INTENSITY=this.getParamsValue(null===(w=null===(C=this.params)||void 0===C?void 0:C.camera)||void 0===w?void 0:w.bigShakeIntensity,l.default.BIG_SHAKE_INTENSITY,"BIG_SHAKE_INTENSITY"),l.default.FAR_BOMB_DIST=this.getParamsValue(null===(T=null===(O=this.params)||void 0===O?void 0:O.camera)||void 0===T?void 0:T.farBombDist,l.default.FAR_BOMB_DIST,"FAR_BOMB_DIST"),l.default.MEDIUM_BOMB_DIST=this.getParamsValue(null===(M=null===(E=this.params)||void 0===E?void 0:E.camera)||void 0===M?void 0:M.mediumBombDist,l.default.MEDIUM_BOMB_DIST,"MEDIUM_BOMB_DIST"),l.default.NEAR_BOMB_DIST=this.getParamsValue(null===(R=null===(D=this.params)||void 0===D?void 0:D.camera)||void 0===R?void 0:R.nearBombDist,l.default.NEAR_BOMB_DIST,"NEAR_BOMB_DIST"),l.default.SHAKE_DURATION=this.getParamsValue(null===(A=null===(B=this.params)||void 0===B?void 0:B.camera)||void 0===A?void 0:A.shakeDuration,l.default.SHAKE_DURATION,"SHAKE_DURATION"),p.default.BOMB_TIMER=this.getParamsValue(1e3*(null===(L=null===(k=this.params)||void 0===k?void 0:k.bomb)||void 0===L?void 0:L.bombTimer),p.default.BOMB_TIMER,"BOMB_TIMER"),d.PlayerController.INVI_TIMER=this.getParamsValue(null===(F=null===(G=this.params)||void 0===G?void 0:G.bomb)||void 0===F?void 0:F.inviTimer,d.PlayerController.INVI_TIMER,"INVI_TIMER"),p.default.DANGEROUS_BOMB_MAX_LENGTH=this.getParamsValue(null===(U=null===(j=this.params)||void 0===j?void 0:j.bomb)||void 0===U?void 0:U.dangerousBombMaxLength,p.default.DANGEROUS_BOMB_MAX_LENGTH,"DANGEROUS_BOMB_MAX_LENGTH"),p.default.SELF_BOMB_TOGGLE=this.getParamsValue(null===(H=null===(x=this.params)||void 0===x?void 0:x.bomb)||void 0===H?void 0:H.selfBombToggle,p.default.SELF_BOMB_TOGGLE,"SELF_BOMB_TOGGLE"),p.default.ENEMY_BOMB_TOGGLE=this.getParamsValue(null===(z=null===(V=this.params)||void 0===V?void 0:V.bomb)||void 0===z?void 0:z.enemyBombToggle,p.default.ENEMY_BOMB_TOGGLE,"ENEMY_BOMB_TOGGLE"),p.default.FLASH_DURATION_PERCT=this.getParamsValue(null===(K=null===(W=this.params)||void 0===W?void 0:W.bomb)||void 0===K?void 0:K.flashDurationPerct,p.default.FLASH_DURATION_PERCT,"FLASH_DURATION_PERCT"),p.default.TILE_DISTANCE=this.getParamsValue(null===(q=null===(Y=this.params)||void 0===Y?void 0:Y.bomb)||void 0===q?void 0:q.tileDistance,p.default.TILE_DISTANCE,"TILE_DISTANCE"),p.default.INDICATOR_OPACITY=this.getParamsValue(null===(X=null===(J=this.params)||void 0===J?void 0:J.bomb)||void 0===X?void 0:X.indicatorOpacity,p.default.INDICATOR_OPACITY,"INDICATOR_OPACITY"),d.PlayerController.MOV_SPEED_SLOW_NEGATIVE=this.getParamsValue(null===(Z=null===(Q=this.params)||void 0===Q?void 0:Q.skull)||void 0===Z?void 0:Z.slowFactor,d.PlayerController.MOV_SPEED_SLOW_NEGATIVE,"MOV_SPEED_SLOW_NEGATIVE"),d.PlayerController.SLOW_NEGATIVE_DURATION=this.getParamsValue(null===(ee=null===($=this.params)||void 0===$?void 0:$.skull)||void 0===ee?void 0:ee.slowDuration,d.PlayerController.SLOW_NEGATIVE_DURATION,"SLOW_NEGATIVE_DURATION"),c.default.FINAL_SHOWDOWN_DURATION=this.getParamsValue(null===(oe=null===(te=this.params)||void 0===te?void 0:te.game)||void 0===oe?void 0:oe.finalShowdownDuration,c.default.FINAL_SHOWDOWN_DURATION,"FINAL_SHOWDOWN_DURATION"),c.default.FINAL_SHOWDOWN_TILES=this.getParamsValue(null===(re=null===(ne=this.params)||void 0===ne?void 0:ne.game)||void 0===re?void 0:re.finalShowdownTiles,c.default.FINAL_SHOWDOWN_TILES,"FINAL_SHOWDOWN_TILES")},t.prototype.getGameParameters=function(){return this.params},t.inst=null,a([m(cc.TextAsset)],t.prototype,"localParameters",void 0),o=a([g],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","./Game":"Game","./GameCamera":"GameCamera","./GameModeDataBase":"GameModeDataBase","./GameObjects/Bomb":"Bomb","./Player/PlayerController":"PlayerController","./Player/PlayerData":"PlayerData","js-yaml":69}],Tutorial:[function(e,t,o){"use strict";cc._RF.push(t,"e50ffA6hPNEeJV1HxY3fSbM","Tutorial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.E_TUTORIAL_TURN=void 0;var i,s=e("../Game"),c=e("../Player/PlayerSkinMgr"),l=e("../Tracking/TrackingManager"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.FIRST_MOVE=0]="FIRST_MOVE",e[e.PLANT_BOMB=1]="PLANT_BOMB",e[e.MOVE_SAFER=2]="MOVE_SAFER",e[e.ELIMINATE=3]="ELIMINATE",e[e.PRE_CHANGE=4]="PRE_CHANGE"})(i=o.E_TUTORIAL_TURN||(o.E_TUTORIAL_TURN={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragToControlTurn1Node=null,t.wasdToMoveTurn1Node=null,t.tapToPlantBombTurn2Node=null,t.pressSpaceToPlantBombTurn2Node=null,t.tapMoveToSaferTurn3Node=null,t.pressMoveToSaferTurn3Node=null,t.eliminateTurn4Node=null,t._curNodeActive=null,t._curTurn=i.FIRST_MOVE,t}return r(t,e),t.prototype.onEnable=function(){this.node.children.forEach(function(e){return e.active=!1})},t.prototype.startTutorialTurn=function(e){var t,o,n,r,a=this;switch(this._curTurn=i.PRE_CHANGE,e){case i.FIRST_MOVE:null===(t=l.default.inst)||void 0===t||t.onGameTutorialStart(c.default.inst.getCurHero());var u=cc.sys.isMobile?this.dragToControlTurn1Node:this.wasdToMoveTurn1Node;this.changeCurNodeActive(u),this._curTurn=e,s.default.inst.gameInput.touchBombArea.active=!1;break;case i.PLANT_BOMB:null===(o=l.default.inst)||void 0===o||o.onTutorialControls(c.default.inst.getCurHero()),this.scheduleOnce(function(){var t=cc.sys.isMobile?a.tapToPlantBombTurn2Node:a.pressSpaceToPlantBombTurn2Node;a.changeCurNodeActive(t),s.default.inst.gameInput.touchBombArea.active=!0,a._curTurn=e},1);break;case i.MOVE_SAFER:null===(n=l.default.inst)||void 0===n||n.onTutorialBomb(c.default.inst.getCurHero()),u=cc.sys.isMobile?this.tapMoveToSaferTurn3Node:this.pressMoveToSaferTurn3Node,this.changeCurNodeActive(u),this._curTurn=e,this.scheduleOnce(function(){a._curTurn===i.MOVE_SAFER&&(a._curNodeActive.active=!1)},2);break;case i.ELIMINATE:null===(r=l.default.inst)||void 0===r||r.onTutorialSafeZone(c.default.inst.getCurHero()),this.changeCurNodeActive(this.eliminateTurn4Node),setTimeout(function(){a.endTutorial(),l.default.inst.onBoardingGameRoundStart()},3e3)}},t.prototype.endTutorial=function(){var e;this._curNodeActive&&(this._curNodeActive.active=!1),s.default.inst.onTutorialEnds(),null===(e=this.node)||void 0===e||e.destroy()},t.prototype.changeCurNodeActive=function(e){this._curNodeActive&&(this._curNodeActive.active=!1),this._curNodeActive=e,this._curNodeActive.active=!0},t.prototype.getTutorialCurTurn=function(){return this._curTurn},a([d(cc.Node)],t.prototype,"dragToControlTurn1Node",void 0),a([d(cc.Node)],t.prototype,"wasdToMoveTurn1Node",void 0),a([d(cc.Node)],t.prototype,"tapToPlantBombTurn2Node",void 0),a([d(cc.Node)],t.prototype,"pressSpaceToPlantBombTurn2Node",void 0),a([d(cc.Node)],t.prototype,"tapMoveToSaferTurn3Node",void 0),a([d(cc.Node)],t.prototype,"pressMoveToSaferTurn3Node",void 0),a([d(cc.Node)],t.prototype,"eliminateTurn4Node",void 0),a([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../Game":"Game","../Player/PlayerSkinMgr":"PlayerSkinMgr","../Tracking/TrackingManager":"TrackingManager"}],TypeDefs:[function(e,t,o){"use strict";cc._RF.push(t,"88078EXJhBGeauCShpA6EXI","TypeDefs"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameMode=void 0,function(e){e[e.ClassicBattleRoyale=0]="ClassicBattleRoyale",e[e.Inferno=1]="Inferno",e[e.FullPower=2]="FullPower",e[e.MiniMini=3]="MiniMini",e[e.Panic=4]="Panic",e[e.PaintSplash=5]="PaintSplash",e[e.BonusReward=6]="BonusReward"}(o.GameMode||(o.GameMode={})),cc._RF.pop()},{}],UplaySrv:[function(e,t,o){"use strict";cc._RF.push(t,"6a053VneNRH/qqeZJLF7A8h","UplaySrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../../GameFramework/Scripts/NgcMain"),l=e("../../GameFramework/Scripts/NgcUserInfo"),u=e("../Nano/NanoSrv"),p=e("../SDK"),d=e("../../Services/Platform/Platform"),f=e("../../Core/Utils"),h=cc._decorator,g=(h.ccclass,h.property,function(e){function t(){var o=e.call(this)||this;if(o.isIframeLoaded=!1,o.myAppId="b2f1dcc3-b629-4fdd-b8c3-a8d580dab056",o.myGenomeId=s.NgcBuildConfig.uplayGenomeId,o.myLang="en-US",o.locationHref=d.NgcPlatform.getLocationHref(),o.myNextUrlIframe=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGameIframe.html",o.myNextUrlPopUp=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGamePopUp.html?myGenomeId="+o.myGenomeId,o.MY_CALLBACK_PAGE=location.href.slice(0,location.href.lastIndexOf("index.html"))+"callback_thirdPartyCookiesBlockedGame.html",o.extraParam=o.locationHref,o.isStandalone=!1,o.areTPCenabled=!0,o.connectSDK=null,o.userTicket=null,o.userSessionId=null,o.userId=null,o.tdata=null,o.onLoginCompleted=null,o.urlWindow=null,o.userData={nameOnPlatform:null,userId:null,avatarMobile:null,avatarDesktop:null},o.isConflict=!1,o.loginFromHost=!1,t.inst){if(d.NgcPlatform.isOfflineMode())return o;cc.error("There are multiple places constructing UplaySrv!!!")}return t.inst=o,o}return r(t,e),t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return t.inst.getUplayId()},t.prototype.getName=function(){return"UplaySrv"},t.prototype._preInit=function(){return new Promise(function(e){t.inst.preInitialized=!0;try{window.location!==window.parent.location?t.inst.isStandalone=!1:t.inst.isStandalone=!0}catch(o){t.inst.isStandalone=!1}window.retrieveTicketData=t.inst.retrieveTicketData,window.retrieveTicketDataFromCallback=t.inst.retrieveTicketDataFromCallback,e("UplaySrv pre-initialized")})},t.prototype._init=function(){var e=this;if("HUZ"==s.NgcBuildConfig.buildPlatform)return new Promise(function(e){return e(null)});var o=window.location.search,n=(new URLSearchParams(o).get("gameID"),btoa(this.extraParam));return this.MY_CALLBACK_PAGE.includes("?")?this.MY_CALLBACK_PAGE+="&extra="+n:this.MY_CALLBACK_PAGE+="?&extra="+n,new Promise(function(o){console.log("[UplaySrv] `_init` UbiConnect called ",e.MY_CALLBACK_PAGE),window.Connect?(Connect.init({env:s.NgcBuildConfig.SDK.UplaySrv.env,appId:t.inst.myAppId,genomeId:t.inst.myGenomeId,lang:t.inst.myLang,nextUrl:encodeURIComponent(e.MY_CALLBACK_PAGE),thirdPartyCookiesSupport:!d.NgcPlatform.isRunAsIframeOnNano()}),Connect.sdk.subscribe(function(e){t.inst.connectSDK=e,t.inst.connectSDK.getTicket().subscribe(function(e){if(console.log("[UplaySrv] `_init`  getTicket = "+e.status),"ok"===e.status)t.inst.areTPCenabled=!0,t.inst.retrieveTicketData();else if(t.inst.areTPCenabled=!1,!1===t.inst.isStandalone)try{window.parent}catch(o){console.log(o)}})}),o("UbiConnect initialized")):o()})},t.prototype.retrieveTicketData=function(){console.log("[UplaySrv] retrieveTicketData"),t.inst.connectSDK.getTicket().subscribe(function(e){if(console.log("[UplaySrv] `retrieveTicketData` getTicketResponse = "+e.status),t.inst.ticketResponse=e,"ok"===e.status){var o=e.payload;t.inst.tdata=o,t.inst.userTicket=o.ticket,t.inst.userSessionId=o.sessionId,t.inst.userId=o.userId,t.inst.areTPCenabled}t.inst.onLoginCompleted&&(t.inst.onLoginCompleted(e.status),t.inst.onLoginCompleted=null)})},t.prototype._login=function(){return this.loginFromHost?(this.loginFromHost=!1,new Promise(function(e){t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(l.default.socialId=t.inst.getUplayId(),l.default.avatarUrl=t.inst.getProfilePictureUrl(),l.default.localUserName=c.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})})):new Promise(function(e,o){t.inst.uplayLogin(function(n){console.log("[UplaySrv] `_login` uplayLogin response"),"ok"===n?t.inst.getProfile().then(function(){window.uplayLoginData&&window.uplayLoginData.loginInfo||o("getProfile error");var n=window.uplayLoginData.loginInfo.userData;n?(n.hasOwnProperty("userId")&&(t.inst.userData.userId=n.userId),n.hasOwnProperty("nameOnPlatform")&&(t.inst.userData.nameOnPlatform=n.nameOnPlatform),t.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,t.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop):o("Parse JSON profile error"),t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(l.default.socialId=t.inst.getUplayId(),l.default.avatarUrl=t.inst.getProfilePictureUrl(),l.default.localUserName=c.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})},function(){o("getProfile error")}):o(n)})})},t.prototype._logout=function(){return new Promise(function(e){t.inst.connectSDK.logout(t.inst.userTicket,t.inst.userSessionId).subscribe(function(t){console.log("[UplaySrv] `_logOut` user Uplay log out"),e(t)})})},t.prototype.uplayLogin=function(e){t.inst.onLoginCompleted=function(t){console.log("[UplaySrv] `uplayLogin` onLoginComplete. status = "+t),e(t)},f.Utils.isRunningWithFacebookApp()||!t.inst.areTPCenabled&&!t.inst.isStandalone||!0===t.inst.areTPCenabled&&!0===t.inst.isStandalone&&!cc.sys.isMobile?t.inst.loginIframe(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+t.inst.myAppId+"&genomeId="+t.inst.myGenomeId+"&lang="+t.inst.myLang+"&nextUrl="+encodeURIComponent(t.inst.myNextUrlIframe)):t.inst.loginPopUp(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+t.inst.myAppId+"&genomeId="+t.inst.myGenomeId+"&lang="+t.inst.myLang+"&nextUrl="+encodeURIComponent(t.inst.myNextUrlPopUp))},t.prototype.loginIframe=function(e){console.log("[UplaySrv] login iframe called");var t=document.getElementById("uplay-iframe-container"),o=document.getElementById("uplay-iframe");t.classList.contains("hide")&&(o.src=e,t.classList.remove("hide"))},t.prototype.loginPopUp=function(e){console.log("[UplaySrv] login popup called");var o=window.screenX+screen.width/2-240,n=screen.height/2-360;t.loginPopUp=window.op3n(e,"Ubisoft Connect","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=480, height=720, top="+n+", left="+o)},t.prototype.isLoginPopUpOpen=function(){var e=document.getElementById("uplay-iframe-container");return t.loginPopUp?!t.loginPopUp.closed:!(!e||e.classList.contains("hide"))},t.prototype.retrieveTicketDataFromCallback=function(e){var o=e.payload;t.inst.ticketResponse=e,t.inst.tdata=o,t.inst.userTicket=o.ticket,t.inst.userSessionId=o.sessionId,t.inst.userId=o.userId,t.inst.onLoginCompleted(e.status),t.inst.onLoginCompleted=null},t.prototype.getProfile=function(){return new Promise(function(e,o){console.log("UplaySrv.inst.userId = "+t.inst.userId),console.log("UplaySrv.inst.userSessionId = "+t.inst.userSessionId),t.inst.connectSDK.getProfiles(t.inst.userTicket,t.inst.userSessionId,t.inst.userId).subscribe(function(n){console.log("[UplaySrv] Getprofile"),console.log("[UplaySrv] getProfilesResponse = "+JSON.stringify(n)),n?(n.payload.profiles.forEach(function(o){if(console.log("profile = "+JSON.stringify(o)),"uplay"===o.platformType){console.log("uplay"===o.platformType);var n="https://ubisoft-avatars.akamaized.net/"+t.inst.userId+"/default_146_146.png",r="https://ubisoft-avatars.akamaized.net/"+t.inst.userId+"/default_256_256.png";return o.nameOnPlatform,window.uplayLoginData={platform:o.platformType,loginInfo:{userData:o,ticket:t.inst.tdata,loginAvatarMobile:n,loginAvatarDesktop:r},env:s.NgcBuildConfig.SDK.UplaySrv.env},void e(null)}}),e(null)):o()})})},t.prototype.reLogin=function(){Connect.sdk.subscribe(function(e){t.inst.connectSDK=e,t.inst.connectSDK.getTicket().subscribe(function(e){if("ok"===e.status)t.inst.areTPCenabled=!0,t.inst.retrieveTicketData();else if(console.log("TPC are disabled"),t.inst.areTPCenabled=!1,!1===t.inst.isStandalone)try{window.parent}catch(o){console.log(o)}})})},t.prototype.ubiConnect=function(){},t.prototype.sendInfoToServer=function(){var e={name:t.inst.getFormatName(),socialId:t.inst.getUplayId(),avatar:t.inst.getProfilePictureUrl(),platform:"uplay"},o=!1;return new Promise(function(n,r){u.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(e),function(e,a){if(e)r(e);else{console.log(a),console.log("update info success");var i=JSON.parse(a).data;i&&i.conflict_info&&(o=!0,t.inst.dataConflict=i.conflict_info),t.inst.isConflict=o,n(o)}})})},t.prototype.getFriendsData=function(){return[]},t.prototype.isConnected=function(){return"ok"===t.inst.ticketResponse.status},t.prototype.getUplayId=function(){return t.inst.userData.userId},t.prototype.forceLinkInfoToServer=function(e){return a(this,void 0,void 0,function(){var o,n,r;return i(this,function(a){switch(a.label){case 0:return o=e?"local":"server",n=t.inst.getFormatName(),r={name:n,socialId:t.inst.getUplayId(),avatar:t.inst.getProfilePictureUrl(),platform:"uplay",resolve:o},[4,new Promise(function(o){u.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(r),function(n,r){if(n)o(n);else{if(console.log(r),!e){var a=JSON.parse(r).data;if(a&&a.hasOwnProperty("id")&&(t.inst.dataConflict.id=a.id),a&&a.hasOwnProperty("secretKey")){var i=a.secretKey;l.default.secretKey=i}}console.log("force update info success"),o(null)}})})];case 1:return a.sent(),[2]}})})},t.prototype.sendAvatarToServer=function(){console.log("Method not implemented for Uplay")},t.prototype.sendNameToServer=function(){console.log("Method not implemented for Uplay")},t.prototype.getProfilePictureUrl=function(){return cc.sys.isMobile?t.inst.userData.avatarMobile:t.inst.userData.avatarDesktop},t.prototype.getFormatName=function(){return l.default.correctNameFormat(t.inst.getFullName())},t.prototype.getFullName=function(){return t.inst.userData.nameOnPlatform},t.prototype.checkLoginStatus=function(){return new Promise(function(e){console.log("[Uplay] `checkLoginStatus` userTicket = "+t.inst.userTicket),e(null)})},t.prototype.sendFriendListToServer=function(){console.log("Uplay has no friends")},t.prototype.fetchInfoWithAccessToken=function(){return new Promise(function(e){t.inst.getProfile().then(function(){if(window.uplayLoginData&&window.uplayLoginData.loginInfo){var o=window.uplayLoginData.loginInfo.userData;o&&(o.hasOwnProperty("userId")&&(t.inst.userData.userId=o.userId),o.hasOwnProperty("nameOnPlatform")&&(t.inst.userData.nameOnPlatform=o.nameOnPlatform),t.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,t.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop),e(null)}else e(null)})})},t.prototype.getDataConflict=function(){return t.inst.dataConflict},t.inst=null,t.loginPopUp=null,t}(p.NgcSDK));o.default=g,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../Nano/NanoSrv":"NanoSrv","../SDK":"SDK"}],UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"69b455Pup1N0qkLQD+Htumb","UserInfo");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UserInfo=o.boosterType=o.ItemsBought=void 0;var a,i=e("./Utils/ConstConfig"),s=e("./Screens/StartScreen/StartMain"),c=e("../NanoGameCore/Services/Inventory/Inventory"),l=e("../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager"),u=e("../NanoGameCore/SDK/Nano/NanoSrv"),p=e("../NanoGameCore/Services/Social/Social"),d=e("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),f=e("../NanoGameCore/Services/Leaderboard/Leaderboard"),h=e("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),g=e("../NanoGameCore/Services/Platform/Platform"),m=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),y=e("../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),_=e("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),v=e("./Dialog/NavBarConflictDialogOverwrite/NavBarConflictDialogOverwrite"),S=e("./Player/PlayerSkinMgr"),b=e("../NanoGameCore/GameFramework/Scripts/NgcShopManager"),N=e("../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager"),P=function(){};o.ItemsBought=P,function(e){e[e.none=0]="none",e[e.speed_up=1]="speed_up",e[e.bomb_up=2]="bomb_up",e[e.fire_up=3]="fire_up"}(a=o.boosterType||(o.boosterType={}));var I=function(){function e(){}return Object.defineProperty(e,"curCoin",{get:function(){return e._curCoin?e._curCoin:(e._curCoin=m.convertToNum(y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.COIN_AMOUNT,0)),e._curCoin)},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.COIN_AMOUNT,t),e._curCoin=t,s.default.inst&&(s.default.inst.curCoin=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curCrown",{get:function(){return e._curCrown?e._curCrown:(e._curCrown=m.convertToNum(y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.CROWN_AMOUNT,0)),e._curCrown)},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.CROWN_AMOUNT,t),e._curCrown=t,s.default.inst&&(s.default.inst.crownNumber.string=""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalTimeSpent",{get:function(){return m.convertToNum(y.default.getKey(i.ConstConfig.TOTAL_TIME_SPENT,0))},enumerable:!1,configurable:!0}),e.accumulateTotalTimeSpent=function(t){y.default.setKey(i.ConstConfig.TOTAL_TIME_SPENT,e.totalTimeSpent+t)},Object.defineProperty(e,"bestScore",{get:function(){return m.convertToNum(y.default.getKey(i.ConstConfig.BEST_SCORE,0))},set:function(e){y.default.setKey(i.ConstConfig.BEST_SCORE,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"playerSkinData",{get:function(){if(e._curPlayerSkinData)return e._curPlayerSkinData;var t=y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.PLAYER_SKIN_DATA,{heroes:[],curHero:""});return e._curPlayerSkinData=t,e._curPlayerSkinData},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.PLAYER_SKIN_DATA,t),e._curPlayerSkinData=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"itemsBought",{get:function(){return null},set:function(){},enumerable:!1,configurable:!0}),e.onItemEquipListRefresh=function(e){var t=S.default.inst.getCurHero();b.NgcShopManager.getInstance().updateEquippedItemList([t]),e.player.setSkinByName(t),e.punkRiderSmokePreviewHandler.enableOrDisableSmokeBasedOnSkin(t),e.skinName.setLocalizedText(S.default.getSkinLocalizedName(t)),e.charUpgradeUI.updateUI(t)},e.updateInventoryWithPlatform=function(){return n(this,void 0,void 0,function(){var t,o,n,l,u;return r(this,function(r){switch(r.label){case 0:for(l in c.NgcInventory.inst.forceFetchInventory(),t=[],o=function(o,n){return new Promise(function(r){c.NgcInventory.inst.getItemCount(o,function(s,c){switch(n){case i.ConstConfig.INVENTORY.TYPE.CURRENCY:o===i.ConstConfig.INVENTORY.ITEM_ID.COIN?c&&(e.curCoin=c.count):o===i.ConstConfig.INVENTORY.ITEM_ID.CROWN&&c&&(e.curCrown=c.count);break;case i.ConstConfig.INVENTORY.TYPE.EQUIPPABLE:c&&c.count>0&&!t.includes(o)&&t.push(o);break;case i.ConstConfig.INVENTORY.TYPE.UPGRADE:var l=o.slice(0,o.lastIndexOf("_"));c&&S.default.inst.setHeroUpgradeSlot(l,c.count);break;case i.ConstConfig.INVENTORY.TYPE.CONSUMABLE:o===i.ConstConfig.INVENTORY.ITEM_ID.SPEED_UP?c&&c.count>0&&(e.curBooster=a.speed_up):o===i.ConstConfig.INVENTORY.ITEM_ID.BOMB_UP?c&&c.count>0&&(e.curBooster=a.bomb_up):o===i.ConstConfig.INVENTORY.ITEM_ID.FIRE_UP?c&&c.count>0&&(e.curBooster=a.fire_up):console.log("[UserInfo] 'updateInventoryWithPlatform' - booster type: "+o+" is not FOUND")}s&&cc.error(s),r()})})},n=[],c.NgcInventory.inst.objectTypeTable)u=c.NgcInventory.inst.objectTypeTable[l],n.push(o(u.itemID,u.type));return[4,Promise.all(n).then(function(){var e,o=S.default.inst.getCurHero();!t.includes(o)&&t[0]&&(o=t[0]),S.default.inst.setPlayerSkinData({curHero:o,heroes:t}),null===(e=s.default.inst)||void 0===e||e.updateCurrentHeroDisplay()})];case 1:return r.sent(),[2]}})})},e.setBestScore=function(e){return e>this.bestScore&&(this.bestScore=e),this.bestScore},e.isNameCorrectFormat=function(e){if(e.length>12)return!1;var t=e.split(" ");return!(t[0].length>9||t.length>1&&(2!==t[1].length||"."!==t[1][1]))},e.correctNameFormat=function(t){if(e.isNameCorrectFormat(t))return t;var o=t.split(" ");if(1!==o.length){var n=o[0];n.length>9&&(n=n.slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...");var r=o[1];return r.length>0&&(r=r[0]+"."),n+" "+r}return o[0].length>9?o[0].slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...":t},Object.defineProperty(e,"curBooster",{get:function(){return e._curBooster||(e._curBooster=y.default.getKey(i.ConstConfig.CUR_BOOSTER,a.none)),e._curBooster},set:function(t){e._curBooster=t,y.default.setKey(i.ConstConfig.CUR_BOOSTER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isHardResetData",{get:function(){return m.convertToBoolean(y.default.getKey(i.ConstConfig.IS_HARD_RESET_DATA,!1))},set:function(e){y.default.setKey(i.ConstConfig.IS_HARD_RESET_DATA,e)},enumerable:!1,configurable:!0}),e.resolveConflict=function(t){return n(this,void 0,void 0,function(){var o,a,i=this;return r(this,function(y){switch(y.label){case 0:return[4,_.NgcDialogManager.createDialog(v.default.dialogType,v.default.urlPrefab,v.default.bundleName)];case 1:return o=y.sent(),(a=o.getComponent(v.default)).init(function(o){return n(i,void 0,void 0,function(){var a,i=this;return r(this,function(y){switch(y.label){case 0:return s.default.inst.loadingNode.active=!0,[4,p.NgcSocial.inst.forceLinkInfoToServer(o)];case 1:return y.sent(),o?(m.default.localUserName=p.NgcSocial.inst.getFormatName(),m.default.avatarUrl=p.NgcSocial.inst.getProfilePictureUrl(),[3,4]):[3,2];case 2:return e.resetPrivateData(),a=p.NgcSocial.inst.getConflictedData(),u.default.inst.userID=a.id,m.default.userIdKey=a.id,m.default.localUserName=e.correctNameFormat(a.name),m.default.avatarUrl=a.avatar,a.hasOwnProperty("playerData")&&(a.playerData.hasOwnProperty("_bestScore")?e.bestScore=a.playerData._bestScore:e.bestScore=0,a.playerData.hasOwnProperty("_isAlreadyFirstShow")&&(l.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow=a.playerData._isAlreadyFirstShow)),[4,u.default.inst.refreshAccessToken()];case 3:y.sent(),y.label=4;case 4:return m.default.socialId=p.NgcSocial.inst.getSocialID(),p.NgcSocial.inst.checkLoginStatus().then(function(){return n(i,void 0,void 0,function(){var n,a,i,s;return r(this,function(r){switch(r.label){case 0:return n=p.NgcSocial.inst.isConnected(),a=d.NgcLeaderboardManager.inst?d.NgcLeaderboardManager.inst.getLeaderBoardUIComponent():null,[4,d.NgcLeaderboardManager.inst.getLocalPlayerRank(a.curTimeFilter,a.curPopulationFilter)];case 1:return i=r.sent(),a.localUserData=i,a.updateContentFacebookProfile(),a.reloadFilter(),a&&a.setLoginStatus(n),[4,d.NgcLeaderboardManager.inst.getAllTimeBestScore()];case 2:return(s=r.sent())&&e.setBestScore(s),o?[3,4]:[4,c.NgcInventory.inst.forceFetchInventory()];case 3:r.sent(),e.updateInventoryWithPlatform(),r.label=4;case 4:return cc.error("NgcSocial.inst.isConnected()",p.NgcSocial.inst.isConnected()),t&&p.NgcSocial.inst.isConnected()&&p.NgcSocial.inst.sendFriendListToServer(),t&&t(null,"login"),f.NgcLeaderboard.inst.clearCacheRequestData(),h.NgcNavBarManager.inst.updateListEffectBtn(),h.NgcNavBarManager.inst.setNavBarInfo(),N.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),[2]}})})}).finally(function(){s.default.inst.loadingNode.active=!1}),g.NgcPlatform.inst.isSupportBridgeSocial()&&g.NgcPlatform.inst.onSocialLogInFromGame(),s.default.inst.updateNameBox(),[2]}})})}),a.show(),[2]}})})},e.resetPrivateData=function(){var t;m.default.changedName=!1,e.isFirstTimeClicked=!1,e.curCoin=0,N.NgcLuckyBoosterManager.getInstance().AvailableBooster="",e.curBooster=a.none,N.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),e.curCrown=0,S.default.inst.setPlayerSkinData({heroes:[i.ConstConfig.INVENTORY.ITEM_ID.EZIO],curHero:i.ConstConfig.INVENTORY.ITEM_ID.EZIO}),null===(t=c.NgcInventory.inst)||void 0===t||t.addItem(i.ConstConfig.INVENTORY.ITEM_ID.EZIO,1,function(e){e&&cc.error(e),b.NgcShopManager.getInstance().updateBoughtItem(i.ConstConfig.INVENTORY.ITEM_ID.EZIO)})},Object.defineProperty(e,"alreadyFTUE",{get:function(){return void 0===e._alreadyFTUE&&(e._alreadyFTUE=m.convertToBoolean(y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.ALREADY_FTUE,!1,!0))),e._alreadyFTUE},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.ALREADY_FTUE,t,!0),e._alreadyFTUE=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameRoundCount",{get:function(){return void 0===e._gameRoundCount&&(e._gameRoundCount=m.convertToNum(y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.GAME_ROUND_COUNT,0,!0))),e._gameRoundCount},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.GAME_ROUND_COUNT,t,!0),e._gameRoundCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"firstGameStartTime",{get:function(){return void 0===e._firstGameStartTime&&(e._firstGameStartTime=m.convertToNum(y.default.getKey(i.ConstConfig.LOCAL_SAVE_KEY.FIRST_GAME_TIME,Date.now(),!0))),e._firstGameStartTime},set:function(t){y.default.setKey(i.ConstConfig.LOCAL_SAVE_KEY.FIRST_GAME_TIME,t,!0),e._firstGameStartTime=t},enumerable:!1,configurable:!0}),e.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},Object.defineProperty(e,"isFirstTimeClicked",{get:function(){return m.convertToBoolean(cc.sys.localStorage.getItem(e.keymangle("FirstTimeClickPlay")))},set:function(t){cc.sys.localStorage.setItem(e.keymangle("FirstTimeClickPlay"),t)},enumerable:!1,configurable:!0}),e._bestScore=0,e._curPlayerSkinData=null,e._itemsBought=new P,e.MAX_FIRST_NAME_LENGHT=9,e._curBooster=void 0,e._alreadyFTUE=void 0,e._gameRoundCount=void 0,e._firstGameStartTime=void 0,e}();o.UserInfo=I,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Social/Social":"Social","./Dialog/NavBarConflictDialogOverwrite/NavBarConflictDialogOverwrite":"NavBarConflictDialogOverwrite","./Player/PlayerSkinMgr":"PlayerSkinMgr","./Screens/StartScreen/StartMain":"StartMain","./Utils/ConstConfig":"ConstConfig"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"239e4yYMtdDs7sZISNvCfcX","Utils");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.findNode=o.csv2arr=o.LoadAsset=o.LoadBundleAsset=o.LoadResourceAsset=o.Utils=o.OS_TYPE=o.BROWSER_TYPE=void 0;var i,s,c=e("../Services/Platform/Platform");(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.CHROME=0]="CHROME",e[e.FIREFOX=1]="FIREFOX",e[e.EDGE=2]="EDGE",e[e.SAFARI=3]="SAFARI",e[e.SAMSUNG_INTERNET=4]="SAMSUNG_INTERNET",e[e.ANDROID_WEBVIEW=5]="ANDROID_WEBVIEW",e[e.SAFARI_IN_APP=6]="SAFARI_IN_APP"})(i=o.BROWSER_TYPE||(o.BROWSER_TYPE={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WINDOWS=1]="WINDOWS",e[e.ANDROID=2]="ANDROID",e[e.IOS=3]="IOS",e[e.MAC_OS=4]="MAC_OS"}(s=o.OS_TYPE||(o.OS_TYPE={}));var l=function(){function e(){}return e.getHttp=function(e,t,o,n){if(void 0===n&&(n=null),c.NgcPlatform.isOfflineMode())o("offline",null);else{var r=new XMLHttpRequest,a="";if(t&&Array.isArray(t)&&t.length>0)for(var i=0;i<t.length;i++)a=0==i?a+"?"+t[i][0]+"="+t[i][1]:a+"&"+t[i][0]+"="+t[i][1];else if("object"==typeof t){for(var s in a+="?",t)a+=s+"="+t[s]+"&";a=a.substr(0,a.length-1)}var l=e+a;l.includes("?")?l+="&dummy="+Date.now().toString():l+="?dummy="+Date.now().toString(),r.open("GET",l,!0),r.onloadend=function(){4==r.readyState&&200==r.status?o(null,r.responseText):4==r.readyState&&o(r.responseText,null)},r.onerror=function(t){console.log("Error getting URL "+e+": "+t),o(t,null)},r.ontimeout=function(t){console.log("Timeout getting URL "+e),o(t,null)},n&&r.setRequestHeader("Authorization","Bearer "+n),r.send()}},e.parseFunctionCallString=function(e){var t=/([a-zA-Z_$][-a-zA-Z_$0-9]*).*/.exec(e);if(!t)return[];var o=[],n=t[1].trim();return o[0]=n,(t=/.*\((.*)\)/.exec(e))&&t[1].trim().split(",").forEach(function(e){var t=e.trim();t.length>0&&o.push(t)}),o},e.postHttp=function(e,t,o,n){return void 0===o&&(o="application/json"),void 0===n&&(n=null),new Promise(function(r,a){c.NgcPlatform.isOfflineMode()&&a("Offline Mode");var i=new XMLHttpRequest;console.log("pars:",t),i.open("POST",e,!0),i.setRequestHeader("Content-type",o),i.onloadend=function(){4===i.readyState&&200===i.status?r(i.response):4===i.readyState&&a(i.response)},i.onerror=function(t){a("Error post URL "+e+": "+t)},i.ontimeout=function(){a("Timeout post URL "+e)},n&&i.setRequestHeader("Authorization","Bearer "+n),i.send(t)})},e.addQuery=function(e,t){return e.indexOf("?")>=0?e+"&"+t:e+"?"+t},e.numberRaise=function(e,t,o,n){o||(o=""),n||(n="");for(var r=e.string,a=0;a<r.length;a++)r=r.replace(".","");r=(r=r.replace(o,"")).replace(n,"");var i=parseInt(r);if(t!==i){t=Math.round(t);var s=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"};("number"!=typeof i||isNaN(i))&&(i=0);var c=i,l=(t-i)/30;e.node.stopAllActions;var u=cc.sequence(cc.delayTime(.03),cc.callFunc(function(){c+=l,e.string=n+s(Math.round(c))+o,(c>=t&&t>i||c<=t&&t<i)&&(e.string=n+s(t)+o)}));e.node.runAction(cc.sequence(cc.scaleTo(.2,2),cc.repeat(u,31),cc.scaleTo(.2,1)))}},e.changeParent=function(e,t){if(e.parent!==t){var o=function(e){var t=e,o=t.angle;do{o+=(t=t.parent).angle}while(null!=t.parent);return o%360},n=o(e)-o(t),r=e.convertToWorldSpaceAR(cc.v3(0,0)),a=t.convertToNodeSpaceAR(r);e.parent=t,e.position=a,e.angle=n}},e.clearChild=function(e){e.removeAllChildren()},e.randomArr=function(e){return e[Math.floor(Math.random()*e.length)]},e.randomFromTo=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.shuffleArr=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}return e},e.differenceOf2Arrays=function(e,t){var o=[],n=e.toString().split(",").map(Number),r=t.toString().split(",").map(Number);for(var a in n)-1===r.indexOf(n[a])&&o.push(n[a]);for(var a in r)-1===n.indexOf(r[a])&&o.push(r[a]);return o.sort(function(e,t){return e-t})},e.intersect_arrays=function(e,t){for(var o=e.concat().sort(),n=t.concat().sort(),r=[],a=0,i=0;a<e.length&&i<t.length;)o[a]===n[i]?(r.push(o[a]),a++,i++):o[a]<n[i]?a++:i++;return r},e.union_arrays=function(e,t){for(var o={},n=e.length-1;n>=0;--n)o[e[n]]=e[n];for(n=t.length-1;n>=0;--n)o[t[n]]=t[n];var r=[];for(var a in o)o.hasOwnProperty(a)&&r.push(o[a]);return r},e.sumArr=function(e){var t=0;return e.forEach(function(e){t+=e}),t},e.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.randomProperty=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},e.compareObj=function(e,t){for(var o in e){if(e.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;switch(typeof e[o]){case"object":if(!this.compareObj(e[o],t[o]))return!1;break;case"function":if(void 0===t[o]||"compare"!=o&&e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}}for(var o in t)if(void 0===e[o])return!1;return!0},e.arrayUnion=function(e,t){for(var o=e.concat(t),n=0;n<o.length;n++)for(var r=n+1;r<o.length;r++)this.compareObj(o[n],o[r])&&(o.splice(r,1),r--);return o},e.cloneNumberArray=function(e){return JSON.parse(JSON.stringify(e))},e.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},e.setWorldPos=function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},e.enumToString=function(e,t){for(var o in e)if(e[o]==t)return o;return null},e.loadPrefab=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(t,o){cc.loader.loadRes(e,function(e,n){if(e)return cc.error(e.message||e),void o(e);t(n)})}).then(function(e){t=e})];case 1:return o.sent(),[2,t]}})})},e.getHash=function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return t},e.getKeys=function(e){var t=[];for(var o in e)t.push(o);return t},e.loadSpriteFrameFromURL=function(e){return new Promise(function(t,o){cc.loader.load({url:e,type:"jpg"},function(e,n){if(e)o(e);else{var r=new cc.SpriteFrame(n);t(r)}})})},e.spawCoin=function(e,t,o,n){e=cc.find("Canvas").convertToNodeSpaceAR(e),t=cc.find("Canvas").convertToNodeSpaceAR(t);for(var r=function(o){var r=cc.instantiate(n);r.parent=cc.find("Canvas"),r.active=!0,r.setPosition(e),r.opacity=0,r.runAction(cc.sequence(cc.delayTime(.05*o),cc.fadeIn(0),cc.spawn(cc.jumpTo(.6,t,t.y-100-200*Math.random(),1),cc.rotateBy(.6,360)),cc.callFunc(function(){r.destroy()})))},a=0;a<o;a++)r(a)},e.createURLFromObject=function(e){var t="http://game.js/search?";for(var o in e)t+=o+"="+e[o]+"&";return t},e.secondsToHoursMinutesSeconds=function(e){return[Math.floor(e/3600),Math.floor(e%3600/60),e%3600%60]},e.secondsToMinutesSeconds=function(e){return[Math.floor(e%3600/60),e%3600%60]},e.loadBundle=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(o,n){var r=cc.assetManager.getBundle(e);r?(t=r,cc.log(e+" is existing"),o()):cc.assetManager.loadBundle(e,function(r,a){r?(cc.error(r),n()):(cc.log(e+" is loaded"),t=a,o())})})];case 1:return o.sent(),[2,t]}})})},e.convertUint8ArrayToArrayBuffer=function(e){for(var t=e.length,o=new ArrayBuffer(t),n=0;n<t;n++)new Int8Array(o)[n]=e[n];return o},e.isRunningWithFacebookApp=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1},e.isNetWorkAvailable=function(){return cc.sys.isBrowser?navigator.onLine:cc.sys.getNetworkType()!==cc.sys.NetworkType.NONE},e.reloadPage=function(){if(window.parent.location!==window.location)try{window.parent.location.reload()}catch(e){window.location.reload(),console.log(e)}else window.location.reload()},e.deleteCookie=function(e){document.cookie=e+"=; Path=/;  Domain="+location.host+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.copyToClipboard=function(e){var t=this;return new Promise(function(o){return n(t,void 0,void 0,function(){var t,n,a;return r(this,function(r){switch(r.label){case 0:if("function"!=typeof(null===(a=navigator.clipboard)||void 0===a?void 0:a.writeText))return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e)];case 2:return r.sent(),o(!0),[3,4];case 3:return t=r.sent(),cc.error(t),o(!1),[3,4];case 4:return[2];case 5:return(n=document.createElement("textarea")).value=e,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select(),setTimeout(function(){try{var e=document.execCommand("copy");o(!!e)}catch(t){cc.error(t),o(!1)}finally{document.body.removeChild(n)}},250),[2]}})})})},e.getCameraNode=function(){return e._cameraNode||(e._cameraNode=new cc.Node,e._cameraNode.addComponent(cc.Camera)),e._cameraNode},e.getScreenshotTexture=function(t){var o=e.getCameraNode();o.parent=t,o.setPosition(0,0);var n=o.getComponent(cc.Camera);n.cullingMask=4294967295,n.backgroundColor=cc.Color.BLACK,n.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR;var r=new cc.RenderTexture,a=cc.game._renderContext;return r.initWithSize(cc.visibleRect.width,cc.visibleRect.height,a.STENCIL_INDEX8),n.targetTexture=r,n.render(t),o.parent=null,r},e.tweenNumber=function(e,t,o,n){var r={value:e};return cc.tween(r).to(o,{value:t},{progress:function(e,t,o,r){var a=e+(t-e)*r;return n(Math.floor(a),!1),a}}).call(function(){n(t,!0)})},e.tweenNodeToNode=function(t,o,n,r,a,i,s,c,l){void 0===a&&(a=.5),void 0===i&&(i="quartInOut"),void 0===s&&(s=!1),void 0===c&&(c=null),void 0===l&&(l=null);var u=e.getWorldPos(o);n&&(u.x+=n.x,u.y+=n.y);var p=t.parent.convertToNodeSpaceAR(u);if(r=r||{},s){var d=c||cc.v2(t.x+60,t.y),f=l||cc.v2(p.x+60,(p.y-t.y)/2);return cc.tween(t).parallel(cc.tween().bezierTo(a,d,f,p,{easing:i}),cc.tween().to(a,r,{easing:i}))}return r.position=p,cc.tween(t).to(a,r,{easing:i})},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o="\ud83d\udd25\ud83d\udd25\ud83d\udd25";cc.log.apply(cc,a([o],e))},e.areNodesIntersection=function(t,o){var n=e.getWorldPos(t),r=new cc.Rect(n.x-t.width/2,n.y-t.height/2,t.width,t.height),a=e.getWorldPos(o),i=new cc.Rect(a.x-o.width/2,a.y-o.height/2,o.width,o.height);return r.intersects(i)},e.vibrate=function(e){void 0===e&&(e=200),"vibrate"in navigator&&navigator.vibrate(e)},e.shareNative=function(e,t){navigator.share({url:e}).then(function(){"function"==typeof t&&t(),console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},e.getBrowserType=function(){var t=i.CHROME,o=i.EDGE,n=i.FIREFOX,r=i.SAFARI,a=i.SAMSUNG_INTERNET,s=i.ANDROID_WEBVIEW,c=i.SAFARI_IN_APP;if(e.isRunningWithFacebookApp())return cc.sys.os===cc.sys.OS_ANDROID?s:c;if(navigator.userAgent.includes("FxiOS"))return n;if(navigator.userAgent.includes("EdgiOS"))return o;if(navigator.userAgent.includes("CriOS"))return t;if(navigator.userAgent.includes("SamsungBrowser"))return a;if(navigator.userAgent.includes("Edg")||navigator.userAgent.includes("Edge"))return o;var l=i.UNKNOWN;switch(cc.sys.browserType){case cc.sys.BROWSER_TYPE_SAFARI:l=r;break;case cc.sys.BROWSER_TYPE_CHROME:l=t;break;case cc.sys.BROWSER_TYPE_EDGE:l=o;break;case cc.sys.BROWSER_TYPE_FIREFOX:l=n}return l},e.getOSType=function(){var e=s.UNKNOWN,t=s.WINDOWS,o=s.ANDROID,n=s.IOS,r=s.MAC_OS,a=e;switch(cc.sys.os){case cc.sys.OS_WINDOWS:a=t;break;case cc.sys.OS_ANDROID:a=o;break;case cc.sys.OS_IOS:a=n;break;case cc.sys.OS_OSX:a=r}return a},e.getTimeZone=function(){var e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=-(new Date).getTimezoneOffset()/60;return e+" UTC"+(t<0?"-":"+")+t},e.convertRecordToString=function(e){return 0===Object.keys(e).length?"":Object.entries(e).join("&").replace(new RegExp(",","g"),"=")},e._cameraNode=null,e}();function u(e,t){return n(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(o,n){cc.resources.load(e,t,function(e,t){e?n(e):o(t)})})]})})}function p(e,t,o){return n(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(n,r){cc.assetManager.loadBundle(e,function(e,a){e?r(e):o?a.load(t,o,function(e,t){e?r(e):n(t)}):a.load(t,function(e,t){e?r(e):n(t)})})})]})})}function d(e,t){void 0===t&&(t="");var o=[];return e.children.forEach(function(e){var n=t+">"+e.name;o.push({path:n,node:e}),d(e,n).forEach(function(e){return o.push(e)})}),o}o.Utils=l,o.LoadResourceAsset=u,o.LoadBundleAsset=p,o.LoadAsset=function(e,t){return n(this,void 0,void 0,function(){var o,n,a;return r(this,function(){return e.includes(":")?(o=e.split(":"),n=o[0],a=o[1],[2,p(n,a,t)]):[2,u(e,t)]})})},o.csv2arr=function(e){return e.trim().split("\n").slice(1).map(function(e){return e.split("|").map(function(e){return e.trim()})})},o.findNode=function(e,t){return e?d(e instanceof cc.Component?e.node:e).find(function(e){return t.test(e.path)}).node:null},cc._RF.pop()},{"../Services/Platform/Platform":"Platform"}],VersionCheck:[function(e,t,o){"use strict";cc._RF.push(t,"ec65aMcviJAormZskL3IhYJ","VersionCheck");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../NanoGameCore/Core/Utils"),s=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versionDocURL="",t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.warn("More than one version check???"):(o.inst=this,this.versionDocURL=s.NgcBuildConfig.versionValidURL)},t.prototype.run=function(e){if(0!=this.versionDocURL.length){var t=this.versionDocURL+"?dummy="+Date.now().toString();i.Utils.getHttp(t,null,function(t,o){if(!t)return o.startsWith(e)?void console.log("Version check OK"):(console.log("Version mismatch. Code is "+e+" Server says we should be on "+o),void document.location.reload(!0));console.warn("Failed to get version check doc")})}else console.warn("** URL for version check doc not set!")},t.prototype.start=function(){},t.inst=null,o=a([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig"}],VictoryDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b5be7CqB8VHO4SsAANMTa5a","VictoryDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler"),s=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase"),c=e("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),l=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),u=e("../../Player/PlayerAnim"),p=e("../../Player/PlayerSkinMgr"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.charNameLabel=null,t.flagSprite=null,t.playerAnim=null,t.smokeVfxPreviewHandler=null,t._onCloseCB=null,t}var o;return r(t,e),o=t,t.prototype.init=function(e){this.charNameLabel.string=l.default.localUserName,this.playerAnim.setSkinByName(p.default.inst.getCurHero()),this.smokeVfxPreviewHandler.enableOrDisableSmokeBasedOnSkin(p.default.inst.getCurHero()),this.playerAnim.getSkeleton().setAnimation(0,this.playerAnim.winAnims[0],!0),this.flagSprite.spriteFrame=c.NgcCountryFlagsManager.inst.getFlagSpriteFrame(c.NgcCountryFlagsManager.localCountry),this._onCloseCB=e},t.prototype.hide=function(){this._onCloseCB&&this._onCloseCB(),e.prototype.hide.call(this)},t.prototype.show=function(t){e.prototype.show.call(this,t),this.scheduleOnce(this.hide.bind(this),o.TIME_TO_SHOW)},t.urlPrefab="GameResources/Prefabs/Dialogs/VideoRewardDialog/VictoryDialog",t.bundleName="resources",t.dialogType="VictoryDialog",t.TIME_TO_SHOW=3,a([h(cc.Label)],t.prototype,"charNameLabel",void 0),a([h(cc.Sprite)],t.prototype,"flagSprite",void 0),a([h(u.default)],t.prototype,"playerAnim",void 0),a([h(i.default)],t.prototype,"smokeVfxPreviewHandler",void 0),o=a([f],t)}(s.NgcDialogBase);o.default=g,cc._RF.pop()},{"../../../GameAssets/VFX/PunkRiderSmokeVfx/Scripts/PunkRiderPreviewVfxHandler":"PunkRiderPreviewVfxHandler","../../../NanoGameCore/CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Player/PlayerAnim":"PlayerAnim","../../Player/PlayerSkinMgr":"PlayerSkinMgr"}],WaitSpinner:[function(e,t,o){"use strict";cc._RF.push(t,"e83367tE1NFlLBJpJNTwqX/","WaitSpinner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.requireComponent,l=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotSteps=16,t.rotStepTimeSec=.25,t.explodeTimeSec=.25,t.explodeTopScale=2,t.homeScale=1,t.homeOpacity=255,t.mySprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.homeScale=this.node.scale,this.homeOpacity=this.node.opacity,this.mySprite=this.node.getComponent(cc.Sprite)},t.prototype.rotateOneTick=function(){var e=this.node.angle;e-=360/this.rotSteps,this.node.angle=e},t.prototype.reset=function(){this.node.opacity=this.homeOpacity,this.node.scale=this.homeScale,this.mySprite.enabled=!0},t.prototype.collapse=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:0}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.boom=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:e.explodeTopScale}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.start=function(){this.schedule(this.rotateOneTick,this.rotStepTimeSec)},a([l],t.prototype,"rotSteps",void 0),a([l],t.prototype,"rotStepTimeSec",void 0),a([l],t.prototype,"explodeTimeSec",void 0),a([l],t.prototype,"explodeTopScale",void 0),a([c(cc.Sprite)],t.prototype,"mySprite",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],globals:[function(e,t,o){"use strict";cc._RF.push(t,"2b7a2SQF+JHup0IJkUV1eEK","globals"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={Main:null,PlayerController:null,Game:null,EnemyControllerBase:null,SceneManager:null,AutoTest:null,GameUI:null,NetClient:null,AppState:null,PlayerState:null,NgcLocalizedManager:null,OfflineMode:null,UserInfo:null},cc._RF.pop()},{}],messagesJson:[function(e,t){"use strict";cc._RF.push(t,"7331cfN4P5Pb5rCLvCYfG5y","messagesJson");var o={ClientRequestJoinGame:"ClientMsg_RequestJoinGame",ClientPing:"ClientMsg_Ping",ClientPlayerStateData:"ClientMsg_PlayerStateData",ClientPlayerStateData_Multi:"ClientMsg_PlayerStateData_Multi",ClientPlayerExitGame:"ClientMsg_ExitGame",ClientBroadcastMessage:"ClientMsg_BroadcastMessage",ServerGameStartingStatus:"ServerMsg_GameStartingStatus",ServerPing:"ServerMsg_Ping",ServerFullGameState:"ServerMsg_FullGameState",ServerOrderCreateBot:"ServerMsg_OrderCreateBot",ServerBroadcastMessage:"ServerMsg_BroadcastMessage",ServerBroadcastTechMessage:"ServerMsg_TechMessage"};Object.freeze(o),t.exports={MessageType:o,ClientMessage_BroadcastMessage:function(e,t,n,r,a){return{message:o.ClientBroadcastMessage,gameID:r,playerID:e,type:t,payload:n,timestamp:a}},ServerMessage_BroadcastMessage:function(e,t,n,r,a){return{message:o.ServerBroadcastMessage,type:t,gameID:r,fromID:e,payload:n,timestamp:a}}},cc._RF.pop()},{}],messages:[function(e,t){"use strict";function o(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=n(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(o=e[Symbol.iterator]()).next.bind(o)}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}cc._RF.push(t,"8c20cblTohLBZNCA/qAdcmM","messages");var a=e("./messages/rpb"),i={ClientRequestJoinGame:"ClientMsg_RequestJoinGame",ClientPing:"ClientMsg_Ping",ClientSendVersion:"ClientMsg_SendVersion",ClientPlayerStateData:"ClientMsg_PlayerStateData",ClientPlayerStateData_Multi:"ClientMsg_PlayerStateData_Multi",ClientPlayerExitGame:"ClientMsg_ExitGame",ClientBroadcastMessage:"ClientMsg_BroadcastMessage",ClientRequestJoinParty:"ClientMsg_RequestJoinParty",ClientSendMessageToParty:"ClientMsg_SendMessageToParty",ClientClaimUniqueItem:"ClientMsg_ClaimUniqueItem",ServerGameStartingStatus:"ServerMsg_GameStartingStatus",ServerPing:"ServerMsg_Ping",ServerFullGameState:"ServerMsg_FullGameState",ServerOrderCreateBot:"ServerMsg_OrderCreateBot",ServerBroadcastMessage:"ServerMsg_BroadcastMessage",ServerCheckVersion:"ServerMsg_CheckVersion",ServerPartyStatus:"ServerMessage_PartyStatus",ServerTechMessage:"ServerMsg_TechMessage",ServerUniqueItemClaimed:"ServerMsg_UniqueItemClaimed"};Object.freeze(i),t.exports={MessageType:i,ClientMessage_RequestJoinGame:function(e,t,o,n,r,i){return a.Client_RequestJoinGame.create({message:a.MessageType.CLIENT_REQUESTJOINGAME,gameID:e,playerName:t,playerNetID:o,skin:n,gameMode:r,botOwnerNetID:i})},ClientMessage_Ping:function(e,t){return a.Client_Ping.create({message:a.MessageType.CLIENT_PING,id:e,pong:t})},ClientMessage_PlayerStateData:function(e,t,o){var n=a.Client_PlayerStateData.create({message:a.MessageType.CLIENT_PLAYERSTATEDATA,gameID:o,netID:t,data:a.PlayerState.create(e)});return n.data.lastPosition=a.POSITION.create(n.data.lastPosition),n.data.lastVel=a.POSITION.create(n.data.lastVel),n.data.lastAccel=a.POSITION.create(n.data.lastAccel),n.data.lastJerk=a.POSITION.create(n.data.lastJerk),n},ClientMessage_PlayerStateData_Multi:function(e,t){for(var n,r=a.Client_PlayerStateData.create({message:a.MessageType.CLIENT_PLAYERSTATEDATA_MULTI,gameID:t,playerData:[]}),i=o(e.playerData);!(n=i()).done;){var s=n.value;s.position=a.POSITION.create(s.position),r.playerData.push(a.PlayerState.create(s))}return r},ClientMessage_PlayerExitGame:function(e,t){return a.Client_PlayerExitGame.create({message:a.MessageType.CLIENT_EXITGAME,gameID:t,netID:e})},ClientMessage_BroadcastMessage:function(e,t,o,n,r){return a.Client_BroadcastMessage.create({message:a.MessageType.CLIENT_BROADCASTMESSAGE,gameID:n,playerID:e,type:t,payload:o,timestamp:r})},ClientMessage_ClientSendVersion:function(e){return{message:i.ClientSendVersion,version:e}},ClientMessage_ClaimUniqueItem:function(e,t,o,n,r){return a.Client_ClaimUniqueItem.create({message:a.MessageType.CLIENT_CLAIM_UNIQUE_ITEM,gameID:t,playerNetID:e,uniqueItemID:o,uniqueItemInfo:n,posInMap:r})},ClientMessage_PlantBomb:function(e,t,o,n,r,i,s,c){return a.Client_PlantBomb.create({message:a.MessageType.CLIENT_PLANTBOMB,gameID:e,planterStartPoint:s,gridX:t,gridY:o,srvTimePlanted:i,type:n,range:r,ownerWorldPos:c})},ServerMessage_GameStartingStatus:function(e,t,n){for(var r,i=a.Server_GameStartingStatus.create({message:a.MessageType.SERVER_GAMESTARTINGSTATUS,gameID:e,gameParameters:n,playerList:[],serverTime:Date.now()}),s=o(t);!(r=s()).done;){var c=r.value;i.playerList.push(a.PLAYERLIST.create(c))}return i},ServerMessage_Ping:function(e,t){return a.Server_Ping.create({message:a.MessageType.SERVER_PING,id:e,pong:t,serverTime:Date.now()})},ServerMessage_FullGameState:function(e,t){return a.Server_FullGameState.create({message:a.MessageType.SERVER_FULLGAMESTATE,gameID:e,gameClock:0,gameState:t,playerState:[]})},ServerMessage_OrderCreateBot:function(e){return a.Server_OrderCreateBot.create({message:a.MessageType.SERVER_ORDERCREATEBOT,requestID:e})},ServerMessage_BroadcastMessage:function(e,t,o,n,r){return{message:i.ServerBroadcastMessage,type:t,gameID:n,fromID:e,payload:o,timestamp:r}},ServerMessage_CheckVersion:function(e,t){return{message:i.ServerCheckVersion,minVerAllow:e,allowed:t}},ServerMessage_PartyStatus:function(e,t,o){return{message:i.ServerPartyStatus,partyID:e,partyParameters:o,playerList:t,serverTime:Date.now()}},ServerMessage_TechMessage:function(e,t,o){return{message:i.ServerTechMessage,type:e,title:t,description:o}},ServerMessage_UniqueItemClaimed:function(e,t,o,n){return{message:a.MessageType.SERVER_UNIQUE_ITEM_CLAIMED,gameID:e,playerNetID:t,uniqueItemID:o,uniqueItemInfo:n}},PlayerStateData:function(){return{netID:"",position:{x:0,y:0},curDirection:0,curSpeed:0,timeChangeState:0}}},cc._RF.pop()},{"./messages/rpb":"rpb"}],nCSV:[function(e,t,o){"use strict";cc._RF.push(t,"90ad90PWAVNkYVdJPnaTlnT","nCSV"),Object.defineProperty(o,"__esModule",{value:!0}),o.nCSV=void 0;var n=function(){function e(){}return e.parseLineSingle=function(e,t){void 0===t&&(t=!1);for(var o=[],n=e.length,r=!1,a="",i=0;i<n;i++){var s=e.charAt(i);if(t||!/\s/.test(s)){if(r){if('"'==s){r=!1;continue}}else if('"'==s){r=!0;continue}","!=s||r?a+=s:(o.push(a),a="")}}return a.length>0&&o.push(a),o},e.parseParameters=function(t){var o=t.split("\r\n"),n={};return o.forEach(function(t){if(t.startsWith("#")){var o=e.parseLineSingle(t),r=o[0].substr(1);n[r]=o[1]}}),n},e.parseTable=function(t,o){if(void 0===o&&(o=!1),!t)return!1;var n=t.split("\r\n"),r=[];n.forEach(function(e){e.startsWith("#")||r.push(e)});for(var a=e.parseLineSingle(r[0]),i=r.length,s=a.length,c=[],l=1;l<i;l++){for(var u=e.parseLineSingle(r[l],o),p={},d=0;d<s;d++)d>=u.length?p[a[d]]="":p[a[d]]=u[d];c.push(p)}return c},e}();o.nCSV=n,cc._RF.pop()},{}],nodeAnimInfo:[function(e,t,o){"use strict";cc._RF.push(t,"a972962C7RG9L1LfxXAraY1","nodeAnimInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNodeAnimInfo=void 0;var i,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(i||(i={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slideDirection=i.Horizontal,t.slidingDistance=150,t.slidingDuration=.1,t.applyMobileOnly=!1,t.atEndPoint=!1,t.startPoint=0,t.endPoint=0,t.widget=null,t}return r(t,e),t.prototype.onLoad=function(){this.widget=this.node.getComponent(cc.Widget),this.widget&&!this.widget.enabled&&(this.widget=null)},t.prototype.animShow=function(e){var t=this;void 0===e&&(e=!0);var o=cc.sys.isMobile;if((!this.applyMobileOnly||o)&&!this.atEndPoint!=!e)if(this.atEndPoint?(this.endPoint=this.slideDirection===i.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.startPoint=this.endPoint-this.slidingDistance):(this.startPoint=this.slideDirection===i.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.endPoint=this.startPoint+this.slidingDistance),this.widget&&(this.widget.enabled=!1),this.node.stopActionByTag(0),e){var n=this.node.getPosition(),r=this.node.getPosition();this.slideDirection==i.Horizontal?(n.x=this.startPoint,r.x=this.endPoint):(n.y=this.startPoint,r.y=this.endPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!0}).start()}else n=this.node.getPosition(),r=this.node.getPosition(),this.slideDirection==i.Horizontal?(n.x=this.endPoint,r.x=this.startPoint):(n.y=this.endPoint,r.y=this.startPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!1,t.widget&&(t.widget.enabled=!0)}).start()},a([l({type:cc.Enum(i)})],t.prototype,"slideDirection",void 0),a([l],t.prototype,"slidingDistance",void 0),a([l],t.prototype,"slidingDuration",void 0),a([l],t.prototype,"applyMobileOnly",void 0),a([l(cc.Boolean)],t.prototype,"atEndPoint",void 0),a([c],t)}(cc.Component);o.NgcNodeAnimInfo=u,cc._RF.pop()},{}],rpb:[function(e,t){"use strict";var o;cc._RF.push(t,"745860fOVhKYYwTurYb0lzp","rpb"),o=function(e){var t,o,n=e.Reader,r=e.Writer,a=e.util,i=e.roots.default||(e.roots.default={});return i.MessageType=(t={},(o=Object.create(t))[t[0]="CLIENT_REQUESTJOINGAME"]=0,o[t[1]="CLIENT_PING"]=1,o[t[2]="CLIENT_SENDVERSION"]=2,o[t[3]="CLIENT_PLAYERSTATEDATA"]=3,o[t[4]="CLIENT_PLAYERSTATEDATA_MULTI"]=4,o[t[5]="CLIENT_EXITGAME"]=5,o[t[6]="CLIENT_BROADCASTMESSAGE"]=6,o[t[7]="SERVER_GAMESTARTINGSTATUS"]=7,o[t[8]="SERVER_PING"]=8,o[t[9]="SERVER_FULLGAMESTATE"]=9,o[t[10]="SERVER_ORDERCREATEBOT"]=10,o[t[11]="SERVER_HANDOVERBOT"]=11,o[t[12]="SERVER_BROADCASTMESSAGE"]=12,o[t[13]="SERVER_CHECKVERSION"]=13,o[t[14]="CLIENT_REQUESTJOINPARTY"]=14,o[t[15]="CLIENT_SENDMESSAGETOPARTY"]=15,o[t[16]="SERVER_PARTYSTATUS"]=16,o[t[17]="CLIENT_CLAIM_UNIQUE_ITEM"]=17,o[t[18]="SERVER_UNIQUE_ITEM_CLAIMED"]=18,o[t[19]="SERVER_REQUESTGAMEMAP"]=19,o[t[20]="CLIENT_PROVIDEGAMEMAP"]=20,o[t[21]="SERVER_DELIVERGAMEMAP"]=21,o[t[22]="SERVER_MAPSHRINKED"]=22,o[t[23]="CLIENT_PLANTBOMB"]=23,o[t[24]="NONE"]=24,o),i.MapObjectType=function(){var e={},t=Object.create(e);return t[e[1]="EMPTY"]=1,t[e[2]="FLOOR"]=2,t[e[3]="BORDER"]=3,t[e[4]="HARD_BLOCK"]=4,t[e[11]="PLAYER"]=11,t[e[12]="BOMB"]=12,t[e[13]="EXPLOSION"]=13,t[e[21]="PU_BOMB_RANGE"]=21,t[e[22]="PU_BOMB_NUMBER"]=22,t[e[23]="PU_MOVE_SPEED"]=23,t[e[24]="PU_HEART"]=24,t[e[25]="PU_BOMB_PIERCE"]=25,t[e[26]="PU_BOMB_PASS"]=26,t[e[27]="PU_BOMB_DANGER"]=27,t[e[28]="PU_BOMB_POWER"]=28,t[e[41]="PD_BOMB_RANGE"]=41,t[e[42]="PD_BOMB_NUMBER"]=42,t[e[43]="PD_MOVE_SPEED"]=43,t[e[44]="NEG_SLOW"]=44,t[e[64]="SOFT_BLOCK"]=64,t[e[128]="AI_DANGEROUS"]=128,t}(),i.SKIN=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.Booster=0,t.prototype.Hat="",t.prototype.Glasses="",t.prototype.Dress="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.Booster&&Object.hasOwnProperty.call(e,"Booster")&&t.uint32(0).int32(e.Booster),null!=e.Hat&&Object.hasOwnProperty.call(e,"Hat")&&t.uint32(10).string(e.Hat),null!=e.Glasses&&Object.hasOwnProperty.call(e,"Glasses")&&t.uint32(18).string(e.Glasses),null!=e.Dress&&Object.hasOwnProperty.call(e,"Dress")&&t.uint32(26).string(e.Dress),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.SKIN;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.Booster=e.int32();break;case 1:r.Hat=e.string();break;case 2:r.Glasses=e.string();break;case 3:r.Dress=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.Booster&&e.hasOwnProperty("Booster")&&!a.isInteger(e.Booster)?"Booster: integer expected":null!=e.Hat&&e.hasOwnProperty("Hat")&&!a.isString(e.Hat)?"Hat: string expected":null!=e.Glasses&&e.hasOwnProperty("Glasses")&&!a.isString(e.Glasses)?"Glasses: string expected":null!=e.Dress&&e.hasOwnProperty("Dress")&&!a.isString(e.Dress)?"Dress: string expected":null},t.fromObject=function(e){if(e instanceof i.SKIN)return e;var t=new i.SKIN;return null!=e.Booster&&(t.Booster=0|e.Booster),null!=e.Hat&&(t.Hat=String(e.Hat)),null!=e.Glasses&&(t.Glasses=String(e.Glasses)),null!=e.Dress&&(t.Dress=String(e.Dress)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.Booster=0,o.Hat="",o.Glasses="",o.Dress=""),null!=e.Booster&&e.hasOwnProperty("Booster")&&(o.Booster=e.Booster),null!=e.Hat&&e.hasOwnProperty("Hat")&&(o.Hat=e.Hat),null!=e.Glasses&&e.hasOwnProperty("Glasses")&&(o.Glasses=e.Glasses),null!=e.Dress&&e.hasOwnProperty("Dress")&&(o.Dress=e.Dress),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.POSITION=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.x=0,t.prototype.y=0,t.prototype.z=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&t.uint32(5).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&t.uint32(13).float(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&t.uint32(21).float(e.z),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.POSITION;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.x=e.float();break;case 1:r.y=e.float();break;case 2:r.z=e.float();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x?"x: number expected":null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y?"y: number expected":null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z?"z: number expected":null},t.fromObject=function(e){if(e instanceof i.POSITION)return e;var t=new i.POSITION;return null!=e.x&&(t.x=Number(e.x)),null!=e.y&&(t.y=Number(e.y)),null!=e.z&&(t.z=Number(e.z)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.x=0,o.y=0,o.z=0),null!=e.x&&e.hasOwnProperty("x")&&(o.x=t.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(o.y=t.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(o.z=t.json&&!isFinite(e.z)?String(e.z):e.z),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.PlayerState=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.netID="",t.prototype.posInMap=0,t.prototype.position=null,t.prototype.curDirection=0,t.prototype.curSpeed=0,t.prototype.timeChangeState=a.Long?a.Long.fromBits(0,0,!0):0,t.prototype.curState=0,t.prototype.data=a.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(10).string(e.netID),null!=e.posInMap&&Object.hasOwnProperty.call(e,"posInMap")&&t.uint32(16).uint32(e.posInMap),null!=e.position&&Object.hasOwnProperty.call(e,"position")&&i.POSITION.encode(e.position,t.uint32(26).fork()).ldelim(),null!=e.curDirection&&Object.hasOwnProperty.call(e,"curDirection")&&t.uint32(32).int32(e.curDirection),null!=e.curSpeed&&Object.hasOwnProperty.call(e,"curSpeed")&&t.uint32(40).int32(e.curSpeed),null!=e.timeChangeState&&Object.hasOwnProperty.call(e,"timeChangeState")&&t.uint32(48).uint64(e.timeChangeState),null!=e.curState&&Object.hasOwnProperty.call(e,"curState")&&t.uint32(56).int32(e.curState),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(66).bytes(e.data),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.PlayerState;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.netID=e.string();break;case 2:r.posInMap=e.uint32();break;case 3:r.position=i.POSITION.decode(e,e.uint32());break;case 4:r.curDirection=e.int32();break;case 5:r.curSpeed=e.int32();break;case 6:r.timeChangeState=e.uint64();break;case 7:r.curState=e.int32();break;case 8:r.data=e.bytes();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID))return"netID: string expected";if(null!=e.posInMap&&e.hasOwnProperty("posInMap")&&!a.isInteger(e.posInMap))return"posInMap: integer expected";if(null!=e.position&&e.hasOwnProperty("position")){var t=i.POSITION.verify(e.position);if(t)return"position."+t}return null!=e.curDirection&&e.hasOwnProperty("curDirection")&&!a.isInteger(e.curDirection)?"curDirection: integer expected":null!=e.curSpeed&&e.hasOwnProperty("curSpeed")&&!a.isInteger(e.curSpeed)?"curSpeed: integer expected":null!=e.timeChangeState&&e.hasOwnProperty("timeChangeState")&&!(a.isInteger(e.timeChangeState)||e.timeChangeState&&a.isInteger(e.timeChangeState.low)&&a.isInteger(e.timeChangeState.high))?"timeChangeState: integer|Long expected":null!=e.curState&&e.hasOwnProperty("curState")&&!a.isInteger(e.curState)?"curState: integer expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||a.isString(e.data))?"data: buffer expected":null},t.fromObject=function(e){if(e instanceof i.PlayerState)return e;var t=new i.PlayerState;if(null!=e.netID&&(t.netID=String(e.netID)),null!=e.posInMap&&(t.posInMap=e.posInMap>>>0),null!=e.position){if("object"!=typeof e.position)throw TypeError(".PlayerState.position: object expected");t.position=i.POSITION.fromObject(e.position)}return null!=e.curDirection&&(t.curDirection=0|e.curDirection),null!=e.curSpeed&&(t.curSpeed=0|e.curSpeed),null!=e.timeChangeState&&(a.Long?(t.timeChangeState=a.Long.fromValue(e.timeChangeState)).unsigned=!0:"string"==typeof e.timeChangeState?t.timeChangeState=parseInt(e.timeChangeState,10):"number"==typeof e.timeChangeState?t.timeChangeState=e.timeChangeState:"object"==typeof e.timeChangeState&&(t.timeChangeState=new a.LongBits(e.timeChangeState.low>>>0,e.timeChangeState.high>>>0).toNumber(!0))),null!=e.curState&&(t.curState=0|e.curState),null!=e.data&&("string"==typeof e.data?a.base64.decode(e.data,t.data=a.newBuffer(a.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.netID="",o.posInMap=0,o.position=null,o.curDirection=0,o.curSpeed=0,a.Long){var n=new a.Long(0,0,!0);o.timeChangeState=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timeChangeState=t.longs===String?"0":0;o.curState=0,t.bytes===String?o.data="":(o.data=[],t.bytes!==Array&&(o.data=a.newBuffer(o.data)))}return null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.posInMap&&e.hasOwnProperty("posInMap")&&(o.posInMap=e.posInMap),null!=e.position&&e.hasOwnProperty("position")&&(o.position=i.POSITION.toObject(e.position,t)),null!=e.curDirection&&e.hasOwnProperty("curDirection")&&(o.curDirection=e.curDirection),null!=e.curSpeed&&e.hasOwnProperty("curSpeed")&&(o.curSpeed=e.curSpeed),null!=e.timeChangeState&&e.hasOwnProperty("timeChangeState")&&("number"==typeof e.timeChangeState?o.timeChangeState=t.longs===String?String(e.timeChangeState):e.timeChangeState:o.timeChangeState=t.longs===String?a.Long.prototype.toString.call(e.timeChangeState):t.longs===Number?new a.LongBits(e.timeChangeState.low>>>0,e.timeChangeState.high>>>0).toNumber(!0):e.timeChangeState),null!=e.curState&&e.hasOwnProperty("curState")&&(o.curState=e.curState),null!=e.data&&e.hasOwnProperty("data")&&(o.data=t.bytes===String?a.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.PLAYERLIST=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.name="",t.prototype.netID="",t.prototype.startPointIndex=0,t.prototype.skin="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(2).string(e.name),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(10).string(e.netID),null!=e.startPointIndex&&Object.hasOwnProperty.call(e,"startPointIndex")&&t.uint32(16).int32(e.startPointIndex),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(26).string(e.skin),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.PLAYERLIST;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.name=e.string();break;case 1:r.netID=e.string();break;case 2:r.startPointIndex=e.int32();break;case 3:r.skin=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.name&&e.hasOwnProperty("name")&&!a.isString(e.name)?"name: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&!a.isInteger(e.startPointIndex)?"startPointIndex: integer expected":null!=e.skin&&e.hasOwnProperty("skin")&&!a.isString(e.skin)?"skin: string expected":null},t.fromObject=function(e){if(e instanceof i.PLAYERLIST)return e;var t=new i.PLAYERLIST;return null!=e.name&&(t.name=String(e.name)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.startPointIndex&&(t.startPointIndex=0|e.startPointIndex),null!=e.skin&&(t.skin=String(e.skin)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.name="",o.netID="",o.startPointIndex=0,o.skin=""),null!=e.name&&e.hasOwnProperty("name")&&(o.name=e.name),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.startPointIndex&&e.hasOwnProperty("startPointIndex")&&(o.startPointIndex=e.startPointIndex),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.BombStatus=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.mixedValue=0,t.prototype.timePlaced=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.mixedValue&&Object.hasOwnProperty.call(e,"mixedValue")&&t.uint32(8).uint32(e.mixedValue),null!=e.timePlaced&&Object.hasOwnProperty.call(e,"timePlaced")&&t.uint32(16).uint64(e.timePlaced),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.BombStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.mixedValue=e.uint32();break;case 2:r.timePlaced=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.mixedValue&&e.hasOwnProperty("mixedValue")&&!a.isInteger(e.mixedValue)?"mixedValue: integer expected":null!=e.timePlaced&&e.hasOwnProperty("timePlaced")&&!(a.isInteger(e.timePlaced)||e.timePlaced&&a.isInteger(e.timePlaced.low)&&a.isInteger(e.timePlaced.high))?"timePlaced: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.BombStatus)return e;var t=new i.BombStatus;return null!=e.mixedValue&&(t.mixedValue=e.mixedValue>>>0),null!=e.timePlaced&&(a.Long?(t.timePlaced=a.Long.fromValue(e.timePlaced)).unsigned=!0:"string"==typeof e.timePlaced?t.timePlaced=parseInt(e.timePlaced,10):"number"==typeof e.timePlaced?t.timePlaced=e.timePlaced:"object"==typeof e.timePlaced&&(t.timePlaced=new a.LongBits(e.timePlaced.low>>>0,e.timePlaced.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.mixedValue=0,a.Long){var n=new a.Long(0,0,!0);o.timePlaced=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timePlaced=t.longs===String?"0":0;return null!=e.mixedValue&&e.hasOwnProperty("mixedValue")&&(o.mixedValue=e.mixedValue),null!=e.timePlaced&&e.hasOwnProperty("timePlaced")&&("number"==typeof e.timePlaced?o.timePlaced=t.longs===String?String(e.timePlaced):e.timePlaced:o.timePlaced=t.longs===String?a.Long.prototype.toString.call(e.timePlaced):t.longs===Number?new a.LongBits(e.timePlaced.low>>>0,e.timePlaced.high>>>0).toNumber(!0):e.timePlaced),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_RequestJoinGame=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.playerNetID="",t.prototype.playerName="",t.prototype.skin="",t.prototype.gameMode="",t.prototype.botOwnerNetID="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.playerName&&Object.hasOwnProperty.call(e,"playerName")&&t.uint32(34).string(e.playerName),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(42).string(e.skin),null!=e.gameMode&&Object.hasOwnProperty.call(e,"gameMode")&&t.uint32(50).string(e.gameMode),null!=e.botOwnerNetID&&Object.hasOwnProperty.call(e,"botOwnerNetID")&&t.uint32(58).string(e.botOwnerNetID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_RequestJoinGame;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.playerName=e.string();break;case 5:r.skin=e.string();break;case 6:r.gameMode=e.string();break;case 7:r.botOwnerNetID=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!a.isString(e.playerNetID)?"playerNetID: string expected":null!=e.playerName&&e.hasOwnProperty("playerName")&&!a.isString(e.playerName)?"playerName: string expected":null!=e.skin&&e.hasOwnProperty("skin")&&!a.isString(e.skin)?"skin: string expected":null!=e.gameMode&&e.hasOwnProperty("gameMode")&&!a.isString(e.gameMode)?"gameMode: string expected":null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&!a.isString(e.botOwnerNetID)?"botOwnerNetID: string expected":null},t.fromObject=function(e){if(e instanceof i.Client_RequestJoinGame)return e;var t=new i.Client_RequestJoinGame;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.playerName&&(t.playerName=String(e.playerName)),null!=e.skin&&(t.skin=String(e.skin)),null!=e.gameMode&&(t.gameMode=String(e.gameMode)),null!=e.botOwnerNetID&&(t.botOwnerNetID=String(e.botOwnerNetID)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.playerNetID="",o.playerName="",o.skin="",o.gameMode="",o.botOwnerNetID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.playerName&&e.hasOwnProperty("playerName")&&(o.playerName=e.playerName),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),null!=e.gameMode&&e.hasOwnProperty("gameMode")&&(o.gameMode=e.gameMode),null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&(o.botOwnerNetID=e.botOwnerNetID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_Ping=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.id="",t.prototype.pong=!1,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_Ping;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.id&&e.hasOwnProperty("id")&&!a.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null},t.fromObject=function(e){if(e instanceof i.Client_Ping)return e;var t=new i.Client_Ping;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.id="",o.pong=!1),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_PlantBomb=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.planterStartPoint=0,t.prototype.gridX=0,t.prototype.gridY=0,t.prototype.srvTimePlanted=a.Long?a.Long.fromBits(0,0,!0):0,t.prototype.type=0,t.prototype.range=0,t.prototype.ownerWorldPos=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.planterStartPoint&&Object.hasOwnProperty.call(e,"planterStartPoint")&&t.uint32(24).uint32(e.planterStartPoint),null!=e.gridX&&Object.hasOwnProperty.call(e,"gridX")&&t.uint32(32).uint32(e.gridX),null!=e.gridY&&Object.hasOwnProperty.call(e,"gridY")&&t.uint32(40).uint32(e.gridY),null!=e.srvTimePlanted&&Object.hasOwnProperty.call(e,"srvTimePlanted")&&t.uint32(48).uint64(e.srvTimePlanted),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(56).uint32(e.type),null!=e.range&&Object.hasOwnProperty.call(e,"range")&&t.uint32(64).uint32(e.range),null!=e.ownerWorldPos&&Object.hasOwnProperty.call(e,"ownerWorldPos")&&t.uint32(72).uint32(e.ownerWorldPos),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlantBomb;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.planterStartPoint=e.uint32();break;case 4:r.gridX=e.uint32();break;case 5:r.gridY=e.uint32();break;case 6:r.srvTimePlanted=e.uint64();break;case 7:r.type=e.uint32();break;case 8:r.range=e.uint32();break;case 9:r.ownerWorldPos=e.uint32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.planterStartPoint&&e.hasOwnProperty("planterStartPoint")&&!a.isInteger(e.planterStartPoint)?"planterStartPoint: integer expected":null!=e.gridX&&e.hasOwnProperty("gridX")&&!a.isInteger(e.gridX)?"gridX: integer expected":null!=e.gridY&&e.hasOwnProperty("gridY")&&!a.isInteger(e.gridY)?"gridY: integer expected":null!=e.srvTimePlanted&&e.hasOwnProperty("srvTimePlanted")&&!(a.isInteger(e.srvTimePlanted)||e.srvTimePlanted&&a.isInteger(e.srvTimePlanted.low)&&a.isInteger(e.srvTimePlanted.high))?"srvTimePlanted: integer|Long expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isInteger(e.type)?"type: integer expected":null!=e.range&&e.hasOwnProperty("range")&&!a.isInteger(e.range)?"range: integer expected":null!=e.ownerWorldPos&&e.hasOwnProperty("ownerWorldPos")&&!a.isInteger(e.ownerWorldPos)?"ownerWorldPos: integer expected":null},t.fromObject=function(e){if(e instanceof i.Client_PlantBomb)return e;var t=new i.Client_PlantBomb;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.planterStartPoint&&(t.planterStartPoint=e.planterStartPoint>>>0),null!=e.gridX&&(t.gridX=e.gridX>>>0),null!=e.gridY&&(t.gridY=e.gridY>>>0),null!=e.srvTimePlanted&&(a.Long?(t.srvTimePlanted=a.Long.fromValue(e.srvTimePlanted)).unsigned=!0:"string"==typeof e.srvTimePlanted?t.srvTimePlanted=parseInt(e.srvTimePlanted,10):"number"==typeof e.srvTimePlanted?t.srvTimePlanted=e.srvTimePlanted:"object"==typeof e.srvTimePlanted&&(t.srvTimePlanted=new a.LongBits(e.srvTimePlanted.low>>>0,e.srvTimePlanted.high>>>0).toNumber(!0))),null!=e.type&&(t.type=e.type>>>0),null!=e.range&&(t.range=e.range>>>0),null!=e.ownerWorldPos&&(t.ownerWorldPos=e.ownerWorldPos>>>0),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.planterStartPoint=0,o.gridX=0,o.gridY=0,a.Long){var n=new a.Long(0,0,!0);o.srvTimePlanted=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.srvTimePlanted=t.longs===String?"0":0;o.type=0,o.range=0,o.ownerWorldPos=0}return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.planterStartPoint&&e.hasOwnProperty("planterStartPoint")&&(o.planterStartPoint=e.planterStartPoint),null!=e.gridX&&e.hasOwnProperty("gridX")&&(o.gridX=e.gridX),null!=e.gridY&&e.hasOwnProperty("gridY")&&(o.gridY=e.gridY),null!=e.srvTimePlanted&&e.hasOwnProperty("srvTimePlanted")&&("number"==typeof e.srvTimePlanted?o.srvTimePlanted=t.longs===String?String(e.srvTimePlanted):e.srvTimePlanted:o.srvTimePlanted=t.longs===String?a.Long.prototype.toString.call(e.srvTimePlanted):t.longs===Number?new a.LongBits(e.srvTimePlanted.low>>>0,e.srvTimePlanted.high>>>0).toNumber(!0):e.srvTimePlanted),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.range&&e.hasOwnProperty("range")&&(o.range=e.range),null!=e.ownerWorldPos&&e.hasOwnProperty("ownerWorldPos")&&(o.ownerWorldPos=e.ownerWorldPos),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_ProvideGameMap=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.mapData=a.newBuffer([]),t.prototype.mapSize=0,t.prototype.finalShowdownTiles=0,t.prototype.matchDuration=0,t.prototype.extraDuration=0,t.prototype.finalShowdownDuration=0,t.prototype.bombDuration=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.mapData&&Object.hasOwnProperty.call(e,"mapData")&&t.uint32(26).bytes(e.mapData),null!=e.mapSize&&Object.hasOwnProperty.call(e,"mapSize")&&t.uint32(32).uint32(e.mapSize),null!=e.finalShowdownTiles&&Object.hasOwnProperty.call(e,"finalShowdownTiles")&&t.uint32(40).uint32(e.finalShowdownTiles),null!=e.matchDuration&&Object.hasOwnProperty.call(e,"matchDuration")&&t.uint32(48).uint32(e.matchDuration),null!=e.extraDuration&&Object.hasOwnProperty.call(e,"extraDuration")&&t.uint32(56).uint32(e.extraDuration),null!=e.finalShowdownDuration&&Object.hasOwnProperty.call(e,"finalShowdownDuration")&&t.uint32(64).uint32(e.finalShowdownDuration),null!=e.bombDuration&&Object.hasOwnProperty.call(e,"bombDuration")&&t.uint32(72).uint32(e.bombDuration),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_ProvideGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.mapData=e.bytes();break;case 4:r.mapSize=e.uint32();break;case 5:r.finalShowdownTiles=e.uint32();break;case 6:r.matchDuration=e.uint32();break;case 7:r.extraDuration=e.uint32();break;case 8:r.finalShowdownDuration=e.uint32();break;case 9:r.bombDuration=e.uint32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.mapData&&e.hasOwnProperty("mapData")&&!(e.mapData&&"number"==typeof e.mapData.length||a.isString(e.mapData))?"mapData: buffer expected":null!=e.mapSize&&e.hasOwnProperty("mapSize")&&!a.isInteger(e.mapSize)?"mapSize: integer expected":null!=e.finalShowdownTiles&&e.hasOwnProperty("finalShowdownTiles")&&!a.isInteger(e.finalShowdownTiles)?"finalShowdownTiles: integer expected":null!=e.matchDuration&&e.hasOwnProperty("matchDuration")&&!a.isInteger(e.matchDuration)?"matchDuration: integer expected":null!=e.extraDuration&&e.hasOwnProperty("extraDuration")&&!a.isInteger(e.extraDuration)?"extraDuration: integer expected":null!=e.finalShowdownDuration&&e.hasOwnProperty("finalShowdownDuration")&&!a.isInteger(e.finalShowdownDuration)?"finalShowdownDuration: integer expected":null!=e.bombDuration&&e.hasOwnProperty("bombDuration")&&!a.isInteger(e.bombDuration)?"bombDuration: integer expected":null},t.fromObject=function(e){if(e instanceof i.Client_ProvideGameMap)return e;var t=new i.Client_ProvideGameMap;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.mapData&&("string"==typeof e.mapData?a.base64.decode(e.mapData,t.mapData=a.newBuffer(a.base64.length(e.mapData)),0):e.mapData.length&&(t.mapData=e.mapData)),null!=e.mapSize&&(t.mapSize=e.mapSize>>>0),null!=e.finalShowdownTiles&&(t.finalShowdownTiles=e.finalShowdownTiles>>>0),null!=e.matchDuration&&(t.matchDuration=e.matchDuration>>>0),null!=e.extraDuration&&(t.extraDuration=e.extraDuration>>>0),null!=e.finalShowdownDuration&&(t.finalShowdownDuration=e.finalShowdownDuration>>>0),null!=e.bombDuration&&(t.bombDuration=e.bombDuration>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",t.bytes===String?o.mapData="":(o.mapData=[],t.bytes!==Array&&(o.mapData=a.newBuffer(o.mapData))),o.mapSize=0,o.finalShowdownTiles=0,o.matchDuration=0,o.extraDuration=0,o.finalShowdownDuration=0,o.bombDuration=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.mapData&&e.hasOwnProperty("mapData")&&(o.mapData=t.bytes===String?a.base64.encode(e.mapData,0,e.mapData.length):t.bytes===Array?Array.prototype.slice.call(e.mapData):e.mapData),null!=e.mapSize&&e.hasOwnProperty("mapSize")&&(o.mapSize=e.mapSize),null!=e.finalShowdownTiles&&e.hasOwnProperty("finalShowdownTiles")&&(o.finalShowdownTiles=e.finalShowdownTiles),null!=e.matchDuration&&e.hasOwnProperty("matchDuration")&&(o.matchDuration=e.matchDuration),null!=e.extraDuration&&e.hasOwnProperty("extraDuration")&&(o.extraDuration=e.extraDuration),null!=e.finalShowdownDuration&&e.hasOwnProperty("finalShowdownDuration")&&(o.finalShowdownDuration=e.finalShowdownDuration),null!=e.bombDuration&&e.hasOwnProperty("bombDuration")&&(o.bombDuration=e.bombDuration),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_BroadcastMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.type="",t.prototype.payload="",t.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(34).string(e.type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_BroadcastMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.type=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!a.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(a.isInteger(e.timestamp)||e.timestamp&&a.isInteger(e.timestamp.low)&&a.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Client_BroadcastMessage)return e;var t=new i.Client_BroadcastMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.type&&(t.type=String(e.type)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID="",o.type="",o.payload="",a.Long){var n=new a.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?a.Long.prototype.toString.call(e.timestamp):t.longs===Number?new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_PlayerExitGame=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlayerExitGame;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID)?"netID: string expected":null},t.fromObject=function(e){if(e instanceof i.Client_PlayerExitGame)return e;var t=new i.Client_PlayerExitGame;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_ClaimUniqueItem=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.playerNetID="",t.prototype.uniqueItemID="",t.prototype.uniqueItemInfo="",t.prototype.posInMap=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.uniqueItemID&&Object.hasOwnProperty.call(e,"uniqueItemID")&&t.uint32(34).string(e.uniqueItemID),null!=e.uniqueItemInfo&&Object.hasOwnProperty.call(e,"uniqueItemInfo")&&t.uint32(42).string(e.uniqueItemInfo),null!=e.posInMap&&Object.hasOwnProperty.call(e,"posInMap")&&t.uint32(48).uint32(e.posInMap),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_ClaimUniqueItem;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.uniqueItemID=e.string();break;case 5:r.uniqueItemInfo=e.string();break;case 6:r.posInMap=e.uint32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!a.isString(e.playerNetID)?"playerNetID: string expected":null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&!a.isString(e.uniqueItemID)?"uniqueItemID: string expected":null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&!a.isString(e.uniqueItemInfo)?"uniqueItemInfo: string expected":null!=e.posInMap&&e.hasOwnProperty("posInMap")&&!a.isInteger(e.posInMap)?"posInMap: integer expected":null},t.fromObject=function(e){if(e instanceof i.Client_ClaimUniqueItem)return e;var t=new i.Client_ClaimUniqueItem;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.uniqueItemID&&(t.uniqueItemID=String(e.uniqueItemID)),null!=e.uniqueItemInfo&&(t.uniqueItemInfo=String(e.uniqueItemInfo)),null!=e.posInMap&&(t.posInMap=e.posInMap>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.playerNetID="",o.uniqueItemID="",o.uniqueItemInfo="",o.posInMap=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&(o.uniqueItemID=e.uniqueItemID),null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&(o.uniqueItemInfo=e.uniqueItemInfo),null!=e.posInMap&&e.hasOwnProperty("posInMap")&&(o.posInMap=e.posInMap),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Client_PlayerStateData=function(){function t(e){if(this.playerData=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.playerData=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.playerData&&e.playerData.length)for(var o=0;o<e.playerData.length;++o)i.PlayerState.encode(e.playerData[o],t.uint32(34).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Client_PlayerStateData;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.playerData&&r.playerData.length||(r.playerData=[]),r.playerData.push(i.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.netID&&e.hasOwnProperty("netID")&&!a.isString(e.netID))return"netID: string expected";if(null!=e.playerData&&e.hasOwnProperty("playerData")){if(!Array.isArray(e.playerData))return"playerData: array expected";for(var t=0;t<e.playerData.length;++t){var o=i.PlayerState.verify(e.playerData[t]);if(o)return"playerData."+o}}return null},t.fromObject=function(e){if(e instanceof i.Client_PlayerStateData)return e;var t=new i.Client_PlayerStateData;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),e.playerData){if(!Array.isArray(e.playerData))throw TypeError(".Client_PlayerStateData.playerData: array expected");t.playerData=[];for(var o=0;o<e.playerData.length;++o){if("object"!=typeof e.playerData[o])throw TypeError(".Client_PlayerStateData.playerData: object expected");t.playerData[o]=i.PlayerState.fromObject(e.playerData[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerData=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.netID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),e.playerData&&e.playerData.length){o.playerData=[];for(var n=0;n<e.playerData.length;++n)o.playerData[n]=i.PlayerState.toObject(e.playerData[n],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_RequestGameMap=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_RequestGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null},t.fromObject=function(e){if(e instanceof i.Server_RequestGameMap)return e;var t=new i.Server_RequestGameMap;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_DeliverGameMap=function(){function t(e){if(this.explodedPosList=[],this.bombs=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.explodedPosList=a.emptyArray,t.prototype.mapData=a.newBuffer([]),t.prototype.bombs=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.explodedPosList&&e.explodedPosList.length){t.uint32(18).fork();for(var o=0;o<e.explodedPosList.length;++o)t.uint32(e.explodedPosList[o]);t.ldelim()}if(null!=e.mapData&&Object.hasOwnProperty.call(e,"mapData")&&t.uint32(26).bytes(e.mapData),null!=e.bombs&&e.bombs.length)for(o=0;o<e.bombs.length;++o)i.BombStatus.encode(e.bombs[o],t.uint32(34).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_DeliverGameMap;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:if(r.explodedPosList&&r.explodedPosList.length||(r.explodedPosList=[]),2==(7&a))for(var s=e.uint32()+e.pos;e.pos<s;)r.explodedPosList.push(e.uint32());else r.explodedPosList.push(e.uint32());break;case 3:r.mapData=e.bytes();break;case 4:r.bombs&&r.bombs.length||(r.bombs=[]),r.bombs.push(i.BombStatus.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.explodedPosList&&e.hasOwnProperty("explodedPosList")){if(!Array.isArray(e.explodedPosList))return"explodedPosList: array expected";for(var t=0;t<e.explodedPosList.length;++t)if(!a.isInteger(e.explodedPosList[t]))return"explodedPosList: integer[] expected"}if(null!=e.mapData&&e.hasOwnProperty("mapData")&&!(e.mapData&&"number"==typeof e.mapData.length||a.isString(e.mapData)))return"mapData: buffer expected";if(null!=e.bombs&&e.hasOwnProperty("bombs")){if(!Array.isArray(e.bombs))return"bombs: array expected";for(t=0;t<e.bombs.length;++t){var o=i.BombStatus.verify(e.bombs[t]);if(o)return"bombs."+o}}return null},t.fromObject=function(e){if(e instanceof i.Server_DeliverGameMap)return e;var t=new i.Server_DeliverGameMap;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}if(e.explodedPosList){if(!Array.isArray(e.explodedPosList))throw TypeError(".Server_DeliverGameMap.explodedPosList: array expected");t.explodedPosList=[];for(var o=0;o<e.explodedPosList.length;++o)t.explodedPosList[o]=e.explodedPosList[o]>>>0}if(null!=e.mapData&&("string"==typeof e.mapData?a.base64.decode(e.mapData,t.mapData=a.newBuffer(a.base64.length(e.mapData)),0):e.mapData.length&&(t.mapData=e.mapData)),e.bombs){if(!Array.isArray(e.bombs))throw TypeError(".Server_DeliverGameMap.bombs: array expected");for(t.bombs=[],o=0;o<e.bombs.length;++o){if("object"!=typeof e.bombs[o])throw TypeError(".Server_DeliverGameMap.bombs: object expected");t.bombs[o]=i.BombStatus.fromObject(e.bombs[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.explodedPosList=[],o.bombs=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,t.bytes===String?o.mapData="":(o.mapData=[],t.bytes!==Array&&(o.mapData=a.newBuffer(o.mapData)))),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),e.explodedPosList&&e.explodedPosList.length){o.explodedPosList=[];for(var n=0;n<e.explodedPosList.length;++n)o.explodedPosList[n]=e.explodedPosList[n]}if(null!=e.mapData&&e.hasOwnProperty("mapData")&&(o.mapData=t.bytes===String?a.base64.encode(e.mapData,0,e.mapData.length):t.bytes===Array?Array.prototype.slice.call(e.mapData):e.mapData),e.bombs&&e.bombs.length)for(o.bombs=[],n=0;n<e.bombs.length;++n)o.bombs[n]=i.BombStatus.toObject(e.bombs[n],t);return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_MapShrinked=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.curRound=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.curRound&&Object.hasOwnProperty.call(e,"curRound")&&t.uint32(16).uint32(e.curRound),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_MapShrinked;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.curRound=e.uint32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.curRound&&e.hasOwnProperty("curRound")&&!a.isInteger(e.curRound)?"curRound: integer expected":null},t.fromObject=function(e){if(e instanceof i.Server_MapShrinked)return e;var t=new i.Server_MapShrinked;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.curRound&&(t.curRound=e.curRound>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.curRound=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.curRound&&e.hasOwnProperty("curRound")&&(o.curRound=e.curRound),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_FullGameState=function(){function t(e){if(this.playerState=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.gameClock=0,t.prototype.gameState="",t.prototype.gameStateMsgID=0,t.prototype.playerState=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameClock&&Object.hasOwnProperty.call(e,"gameClock")&&t.uint32(24).uint32(e.gameClock),null!=e.gameState&&Object.hasOwnProperty.call(e,"gameState")&&t.uint32(34).string(e.gameState),null!=e.gameStateMsgID&&Object.hasOwnProperty.call(e,"gameStateMsgID")&&t.uint32(40).uint32(e.gameStateMsgID),null!=e.playerState&&e.playerState.length)for(var o=0;o<e.playerState.length;++o)i.PlayerState.encode(e.playerState[o],t.uint32(50).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_FullGameState;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.gameClock=e.uint32();break;case 4:r.gameState=e.string();break;case 5:r.gameStateMsgID=e.uint32();break;case 6:r.playerState&&r.playerState.length||(r.playerState=[]),r.playerState.push(i.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.gameClock&&e.hasOwnProperty("gameClock")&&!a.isInteger(e.gameClock))return"gameClock: integer expected";if(null!=e.gameState&&e.hasOwnProperty("gameState")&&!a.isString(e.gameState))return"gameState: string expected";if(null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&!a.isInteger(e.gameStateMsgID))return"gameStateMsgID: integer expected";if(null!=e.playerState&&e.hasOwnProperty("playerState")){if(!Array.isArray(e.playerState))return"playerState: array expected";for(var t=0;t<e.playerState.length;++t){var o=i.PlayerState.verify(e.playerState[t]);if(o)return"playerState."+o}}return null},t.fromObject=function(e){if(e instanceof i.Server_FullGameState)return e;var t=new i.Server_FullGameState;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameClock&&(t.gameClock=e.gameClock>>>0),null!=e.gameState&&(t.gameState=String(e.gameState)),null!=e.gameStateMsgID&&(t.gameStateMsgID=e.gameStateMsgID>>>0),e.playerState){if(!Array.isArray(e.playerState))throw TypeError(".Server_FullGameState.playerState: array expected");t.playerState=[];for(var o=0;o<e.playerState.length;++o){if("object"!=typeof e.playerState[o])throw TypeError(".Server_FullGameState.playerState: object expected");t.playerState[o]=i.PlayerState.fromObject(e.playerState[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerState=[]),t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.gameClock=0,o.gameState="",o.gameStateMsgID=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameClock&&e.hasOwnProperty("gameClock")&&(o.gameClock=e.gameClock),null!=e.gameState&&e.hasOwnProperty("gameState")&&(o.gameState=e.gameState),null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&(o.gameStateMsgID=e.gameStateMsgID),e.playerState&&e.playerState.length){o.playerState=[];for(var n=0;n<e.playerState.length;++n)o.playerState[n]=i.PlayerState.toObject(e.playerState[n],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_OrderCreateBot=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.requestID=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.requestID&&Object.hasOwnProperty.call(e,"requestID")&&t.uint32(16).uint32(e.requestID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_OrderCreateBot;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.requestID=e.uint32();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.requestID&&e.hasOwnProperty("requestID")&&!a.isInteger(e.requestID)?"requestID: integer expected":null},t.fromObject=function(e){if(e instanceof i.Server_OrderCreateBot)return e;var t=new i.Server_OrderCreateBot;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.requestID&&(t.requestID=e.requestID>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.requestID=0),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.requestID&&e.hasOwnProperty("requestID")&&(o.requestID=e.requestID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_HandoverBot=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.botNetID="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.botNetID&&Object.hasOwnProperty.call(e,"botNetID")&&t.uint32(18).string(e.botNetID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_HandoverBot;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.botNetID=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.botNetID&&e.hasOwnProperty("botNetID")&&!a.isString(e.botNetID)?"botNetID: string expected":null},t.fromObject=function(e){if(e instanceof i.Server_HandoverBot)return e;var t=new i.Server_HandoverBot;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.botNetID&&(t.botNetID=String(e.botNetID)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.botNetID=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.botNetID&&e.hasOwnProperty("botNetID")&&(o.botNetID=e.botNetID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_GameStartingStatus=function(){function t(e){if(this.playerList=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.gameParameters=null,t.prototype.playerList=a.emptyArray,t.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameParameters&&Object.hasOwnProperty.call(e,"gameParameters")&&i.Server_GameStartingStatus.GAMEPARAMETER.encode(e.gameParameters,t.uint32(26).fork()).ldelim(),null!=e.playerList&&e.playerList.length)for(var o=0;o<e.playerList.length;++o)i.PLAYERLIST.encode(e.playerList[o],t.uint32(34).fork()).ldelim();return null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_GameStartingStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.decode(e,e.uint32());break;case 4:r.playerList&&r.playerList.length||(r.playerList=[]),r.playerList.push(i.PLAYERLIST.decode(e,e.uint32()));break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID))return"gameID: string expected";if(null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o=i.Server_GameStartingStatus.GAMEPARAMETER.verify(e.gameParameters)))return"gameParameters."+o;if(null!=e.playerList&&e.hasOwnProperty("playerList")){if(!Array.isArray(e.playerList))return"playerList: array expected";for(var t=0;t<e.playerList.length;++t){var o;if(o=i.PLAYERLIST.verify(e.playerList[t]))return"playerList."+o}}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Server_GameStartingStatus)return e;var t=new i.Server_GameStartingStatus;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameParameters){if("object"!=typeof e.gameParameters)throw TypeError(".Server_GameStartingStatus.gameParameters: object expected");t.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.fromObject(e.gameParameters)}if(e.playerList){if(!Array.isArray(e.playerList))throw TypeError(".Server_GameStartingStatus.playerList: array expected");t.playerList=[];for(var o=0;o<e.playerList.length;++o){if("object"!=typeof e.playerList[o])throw TypeError(".Server_GameStartingStatus.playerList: object expected");t.playerList[o]=i.PLAYERLIST.fromObject(e.playerList[o])}}return null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerList=[]),t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.gameParameters=null,a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;if(null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o.gameParameters=i.Server_GameStartingStatus.GAMEPARAMETER.toObject(e.gameParameters,t)),e.playerList&&e.playerList.length){o.playerList=[];for(var r=0;r<e.playerList.length;++r)o.playerList[r]=i.PLAYERLIST.toObject(e.playerList[r],t)}return null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t.GAMEPARAMETER=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.gameMinPlayers=0,t.prototype.gameMaxPlayers=0,t.prototype.timeGameStart=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.gameMinPlayers&&Object.hasOwnProperty.call(e,"gameMinPlayers")&&t.uint32(0).int32(e.gameMinPlayers),null!=e.gameMaxPlayers&&Object.hasOwnProperty.call(e,"gameMaxPlayers")&&t.uint32(8).int32(e.gameMaxPlayers),null!=e.timeGameStart&&Object.hasOwnProperty.call(e,"timeGameStart")&&t.uint32(16).uint64(e.timeGameStart),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_GameStartingStatus.GAMEPARAMETER;e.pos<o;){var a=e.uint32();switch(a>>>3){case 0:r.gameMinPlayers=e.int32();break;case 1:r.gameMaxPlayers=e.int32();break;case 2:r.timeGameStart=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&!a.isInteger(e.gameMinPlayers)?"gameMinPlayers: integer expected":null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&!a.isInteger(e.gameMaxPlayers)?"gameMaxPlayers: integer expected":null!=e.timeGameStart&&e.hasOwnProperty("timeGameStart")&&!(a.isInteger(e.timeGameStart)||e.timeGameStart&&a.isInteger(e.timeGameStart.low)&&a.isInteger(e.timeGameStart.high))?"timeGameStart: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Server_GameStartingStatus.GAMEPARAMETER)return e;var t=new i.Server_GameStartingStatus.GAMEPARAMETER;return null!=e.gameMinPlayers&&(t.gameMinPlayers=0|e.gameMinPlayers),null!=e.gameMaxPlayers&&(t.gameMaxPlayers=0|e.gameMaxPlayers),null!=e.timeGameStart&&(a.Long?(t.timeGameStart=a.Long.fromValue(e.timeGameStart)).unsigned=!0:"string"==typeof e.timeGameStart?t.timeGameStart=parseInt(e.timeGameStart,10):"number"==typeof e.timeGameStart?t.timeGameStart=e.timeGameStart:"object"==typeof e.timeGameStart&&(t.timeGameStart=new a.LongBits(e.timeGameStart.low>>>0,e.timeGameStart.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.gameMinPlayers=0,o.gameMaxPlayers=0,a.Long){var n=new a.Long(0,0,!0);o.timeGameStart=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timeGameStart=t.longs===String?"0":0;return null!=e.gameMinPlayers&&e.hasOwnProperty("gameMinPlayers")&&(o.gameMinPlayers=e.gameMinPlayers),null!=e.gameMaxPlayers&&e.hasOwnProperty("gameMaxPlayers")&&(o.gameMaxPlayers=e.gameMaxPlayers),null!=e.timeGameStart&&e.hasOwnProperty("timeGameStart")&&("number"==typeof e.timeGameStart?o.timeGameStart=t.longs===String?String(e.timeGameStart):e.timeGameStart:o.timeGameStart=t.longs===String?a.Long.prototype.toString.call(e.timeGameStart):t.longs===Number?new a.LongBits(e.timeGameStart.low>>>0,e.timeGameStart.high>>>0).toNumber(!0):e.timeGameStart),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),t}(),i.Server_Ping=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.id="",t.prototype.pong=!1,t.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(18).string(e.id),null!=e.pong&&Object.hasOwnProperty.call(e,"pong")&&t.uint32(24).bool(e.pong),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(32).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_Ping;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.id=e.string();break;case 3:r.pong=e.bool();break;case 4:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.id&&e.hasOwnProperty("id")&&!a.isString(e.id)?"id: string expected":null!=e.pong&&e.hasOwnProperty("pong")&&"boolean"!=typeof e.pong?"pong: boolean expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Server_Ping)return e;var t=new i.Server_Ping;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.id&&(t.id=String(e.id)),null!=e.pong&&(t.pong=Boolean(e.pong)),null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.id="",o.pong=!1,a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.id&&e.hasOwnProperty("id")&&(o.id=e.id),null!=e.pong&&e.hasOwnProperty("pong")&&(o.pong=e.pong),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_UniqueItemClaimed=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.playerNetID="",t.prototype.uniqueItemID="",t.prototype.uniqueItemInfo="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.playerNetID&&Object.hasOwnProperty.call(e,"playerNetID")&&t.uint32(26).string(e.playerNetID),null!=e.uniqueItemID&&Object.hasOwnProperty.call(e,"uniqueItemID")&&t.uint32(34).string(e.uniqueItemID),null!=e.uniqueItemInfo&&Object.hasOwnProperty.call(e,"uniqueItemInfo")&&t.uint32(42).string(e.uniqueItemInfo),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_UniqueItemClaimed;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.playerNetID=e.string();break;case 4:r.uniqueItemID=e.string();break;case 5:r.uniqueItemInfo=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&!a.isString(e.playerNetID)?"playerNetID: string expected":null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&!a.isString(e.uniqueItemID)?"uniqueItemID: string expected":null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&!a.isString(e.uniqueItemInfo)?"uniqueItemInfo: string expected":null},t.fromObject=function(e){if(e instanceof i.Server_UniqueItemClaimed)return e;var t=new i.Server_UniqueItemClaimed;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.playerNetID&&(t.playerNetID=String(e.playerNetID)),null!=e.uniqueItemID&&(t.uniqueItemID=String(e.uniqueItemID)),null!=e.uniqueItemInfo&&(t.uniqueItemInfo=String(e.uniqueItemInfo)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.playerNetID="",o.uniqueItemID="",o.uniqueItemInfo=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.playerNetID&&e.hasOwnProperty("playerNetID")&&(o.playerNetID=e.playerNetID),null!=e.uniqueItemID&&e.hasOwnProperty("uniqueItemID")&&(o.uniqueItemID=e.uniqueItemID),null!=e.uniqueItemInfo&&e.hasOwnProperty("uniqueItemInfo")&&(o.uniqueItemInfo=e.uniqueItemInfo),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_BroadcastMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.gameID="",t.prototype.type="",t.prototype.playerID="",t.prototype.payload="",t.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(26).string(e.type),null!=e.playerID&&Object.hasOwnProperty.call(e,"playerID")&&t.uint32(34).string(e.playerID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_BroadcastMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.type=e.string();break;case 4:r.playerID=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!a.isString(e.gameID)?"gameID: string expected":null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.playerID&&e.hasOwnProperty("playerID")&&!a.isString(e.playerID)?"playerID: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!a.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(a.isInteger(e.timestamp)||e.timestamp&&a.isInteger(e.timestamp.low)&&a.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Server_BroadcastMessage)return e;var t=new i.Server_BroadcastMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.type&&(t.type=String(e.type)),null!=e.playerID&&(t.playerID=String(e.playerID)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(a.Long?(t.timestamp=a.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.gameID="",o.type="",o.playerID="",o.payload="",a.Long){var n=new a.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.playerID&&e.hasOwnProperty("playerID")&&(o.playerID=e.playerID),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?a.Long.prototype.toString.call(e.timestamp):t.longs===Number?new a.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.Server_PartyStatus=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.partyID="",t.prototype.partyParamemters="",t.prototype.playerList="",t.prototype.serverTime=a.Long?a.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.partyID&&Object.hasOwnProperty.call(e,"partyID")&&t.uint32(18).string(e.partyID),null!=e.partyParamemters&&Object.hasOwnProperty.call(e,"partyParamemters")&&t.uint32(26).string(e.partyParamemters),null!=e.playerList&&Object.hasOwnProperty.call(e,"playerList")&&t.uint32(34).string(e.playerList),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.Server_PartyStatus;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.partyID=e.string();break;case 3:r.partyParamemters=e.string();break;case 4:r.playerList=e.string();break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.partyID&&e.hasOwnProperty("partyID")&&!a.isString(e.partyID)?"partyID: string expected":null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&!a.isString(e.partyParamemters)?"partyParamemters: string expected":null!=e.playerList&&e.hasOwnProperty("playerList")&&!a.isString(e.playerList)?"playerList: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(a.isInteger(e.serverTime)||e.serverTime&&a.isInteger(e.serverTime.low)&&a.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof i.Server_PartyStatus)return e;var t=new i.Server_PartyStatus;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.partyID&&(t.partyID=String(e.partyID)),null!=e.partyParamemters&&(t.partyParamemters=String(e.partyParamemters)),null!=e.playerList&&(t.playerList=String(e.playerList)),null!=e.serverTime&&(a.Long?(t.serverTime=a.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.partyID="",o.partyParamemters="",o.playerList="",a.Long){var n=new a.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.partyID&&e.hasOwnProperty("partyID")&&(o.partyID=e.partyID),null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&(o.partyParamemters=e.partyParamemters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?a.Long.prototype.toString.call(e.serverTime):t.longs===Number?new a.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i.ServerMessage_TechMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.message=0,t.prototype.type="",t.prototype.title="",t.prototype.description="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(8).int32(e.message),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).string(e.title),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(34).string(e.description),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new i.ServerMessage_TechMessage;e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:r.message=e.int32();break;case 2:r.type=e.string();break;case 3:r.title=e.string();break;case 4:r.description=e.string();break;default:e.skipType(7&a)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message"))switch(e.message){default:return"message: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:}return null!=e.type&&e.hasOwnProperty("type")&&!a.isString(e.type)?"type: string expected":null!=e.title&&e.hasOwnProperty("title")&&!a.isString(e.title)?"title: string expected":null!=e.description&&e.hasOwnProperty("description")&&!a.isString(e.description)?"description: string expected":null},t.fromObject=function(e){if(e instanceof i.ServerMessage_TechMessage)return e;var t=new i.ServerMessage_TechMessage;switch(e.message){case"CLIENT_REQUESTJOINGAME":case 0:t.message=0;break;case"CLIENT_PING":case 1:t.message=1;break;case"CLIENT_SENDVERSION":case 2:t.message=2;break;case"CLIENT_PLAYERSTATEDATA":case 3:t.message=3;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 4:t.message=4;break;case"CLIENT_EXITGAME":case 5:t.message=5;break;case"CLIENT_BROADCASTMESSAGE":case 6:t.message=6;break;case"SERVER_GAMESTARTINGSTATUS":case 7:t.message=7;break;case"SERVER_PING":case 8:t.message=8;break;case"SERVER_FULLGAMESTATE":case 9:t.message=9;break;case"SERVER_ORDERCREATEBOT":case 10:t.message=10;break;case"SERVER_HANDOVERBOT":case 11:t.message=11;break;case"SERVER_BROADCASTMESSAGE":case 12:t.message=12;break;case"SERVER_CHECKVERSION":case 13:t.message=13;break;case"CLIENT_REQUESTJOINPARTY":case 14:t.message=14;break;case"CLIENT_SENDMESSAGETOPARTY":case 15:t.message=15;break;case"SERVER_PARTYSTATUS":case 16:t.message=16;break;case"CLIENT_CLAIM_UNIQUE_ITEM":case 17:t.message=17;break;case"SERVER_UNIQUE_ITEM_CLAIMED":case 18:t.message=18;break;case"SERVER_REQUESTGAMEMAP":case 19:t.message=19;break;case"CLIENT_PROVIDEGAMEMAP":case 20:t.message=20;break;case"SERVER_DELIVERGAMEMAP":case 21:t.message=21;break;case"SERVER_MAPSHRINKED":case 22:t.message=22;break;case"CLIENT_PLANTBOMB":case 23:t.message=23;break;case"NONE":case 24:t.message=24}return null!=e.type&&(t.type=String(e.type)),null!=e.title&&(t.title=String(e.title)),null!=e.description&&(t.description=String(e.description)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.message=t.enums===String?"CLIENT_REQUESTJOINGAME":0,o.type="",o.title="",o.description=""),null!=e.message&&e.hasOwnProperty("message")&&(o.message=t.enums===String?i.MessageType[e.message]:e.message),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.title&&e.hasOwnProperty("title")&&(o.title=e.title),null!=e.description&&e.hasOwnProperty("description")&&(o.description=e.description),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),i},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":101}],scrollRecognition:[function(e,t){"use strict";cc._RF.push(t,"6bf00ca5nhFD6dGJJMLCmnM","scrollRecognition"),cc.Class({extends:cc.ViewGroup,properties:{scrollView:{default:null,type:cc.ScrollView}},onLoad:function(){var e=cc.director.getScene().getChildByName("Canvas").getComponentsInChildren(cc.PageView);e.length>0&&(this.pageView=e[0]),this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},_hasNestedViewGroup:function(e,t){if(e.eventPhase===cc.Event.CAPTURING_PHASE){if(t)for(var o=0;o<t.length;++o){var n=t[o];if(this.node===n)return!!e.target.getComponent(cc.ViewGroup);if(n.getComponent(cc.ViewGroup))return!0}return!1}},_stopPropagationIfTargetIsMe:function(e){e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node&&e.stopPropagation()},_onTouchBegan:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&(this.pageView&&this.pageView._handlePressLogic(o),this.scrollView&&this.scrollView._handlePressLogic(o)),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleMoveLogic(o);var n=o.getLocation().sub(o.getStartLocation());if(cc.Vec2.mag(n)>7&&!this._touchMoved&&e.target!==this.node){var r=new cc.Event.EventTouch(e.getTouches(),e.bubbles);r.type=cc.Node.EventType.TOUCH_CANCEL,r.touch=e.touch,r.simulate=!0,e.target.dispatchEvent(r),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}},_onTouchEnded:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleReleaseLogic(o),this.pageView&&this.pageView._dispatchEvent("touch-up"),this.scrollView&&this.scrollView._dispatchEvent("touch-up"),this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e)}},_onTouchCancelled:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){if(!e.simulate){var o=e.touch;this.node&&this._handleReleaseLogic(o)}this._stopPropagationIfTargetIsMe(e)}},_clampDelta:function(e){return Math.abs(e.x)<Math.abs(e.y)?e.x=0:e.y=0,e},_handleMoveLogic:function(e){var t=this._clampDelta(e.getDelta());this.pageView&&this.pageView._processDeltaMove(t),t=this._clampDelta(e.getDelta()),this.scrollView&&this.scrollView._processDeltaMove(t)},_handleReleaseLogic:function(e){var t=e.getDelta();t=this._clampDelta(t),this.pageView&&this.pageView._handleReleaseLogic(),this.scrollView&&(this.scrollView._gatherTouchMove(t),this.scrollView._processInertiaScroll())}}),cc._RF.pop()},{}],utils:[function(e,t){"use strict";cc._RF.push(t,"616d1YasLxJ5IqQfIuXEgeJ","utils");var o=e("./rpb"),n=e("protobufjs/minimal");t.exports={GetMessageType:function(e){var t=n.Reader.create(e);return t.uint32()>>>3==1?t.int32():o.MessageType.NONE}},cc._RF.pop()},{"./rpb":"rpb","protobufjs/minimal":101}]},{},["PunkRiderPreviewVfxHandler","PunkRiderVfxHandler","Delegate","Event","LocalizedRichText","ResizableComponent","Utils","nCSV","scrollRecognition","ControlHint","CrownRoadComp","CrownRoadItem","CrownRoadManager","CrownRoadMilestoneItem","CrownRoadProgressionDialog","CrownRoadUI","BigDay","DailyRewardManager","DailyRewardUI","Day","RewardClaimAnimation","DeliveryRewardAnimation","DialogBase","DialogOnSceneBase","MessageDialog","NgcDialogManager","NoticeDialog","ItemSelectLanguage","SelectLanguageDialog","Emoji","EmojiAnimationHandler","EmojiScrollItem","EmotesManager","EmotesUI","nodeAnimInfo","ResultUI","RewardItem","NgcRevive","ReviveDialog","RewardUI","SpectatorItem","SpectatorManager","CCGIF","CCGIFTest","GIF","LZW","NgcGDPR","GameModeInfoDialog","GameModeManager","ModeButton","BundleAsset","InteractionButtonAsset","ItemTabAsset","SingleItemAsset","InteractionButton","ItemCategory","ItemContainer","ItemPool","Bundle","ItemShop","SingleItem","SingleItemType1","SingleItemType2","SingleItemType3","ItemStatus","ItemStatusEquipped","ItemStatusUnlock","PurchaseMethodAchievement","PurchaseMethodComingSoon","PurchaseMethodCrownRoad","PurchaseMethodCurrency","PurchaseMethodDailyReward","PurchaseMethodIAP","PurchaseMethodLoginSocial","PurchaseMethodWatchAds","ItemTab","InteractionContent","InteractionContentBundle","InteractionContentComingSoon","InteractionContentEquipped","InteractionContentPurchaseAchievement","InteractionContentPurchaseComingSoon","InteractionContentPurchaseCrownRoad","InteractionContentPurchaseCurrency","InteractionContentPurchaseDailyReward","InteractionContentPurchaseIAP","InteractionContentPurchaseLoginSocial","InteractionContentPurchaseWatchAds","InteractionContentUnlock","NgcAchievementHelper","LB_UserInfo","LeaderBoardManager","NgcBoosterTypeHelper","NgcBoosterTypeInGameHelper","NgcBoosterTypeInMainMenuHelper","DailyBoosterUI","NgcBoosterItem","NgcBoosterScroll","NgcLuckyBoosterManager","NavBarA2HSInstalledNotice","NavBarA2HSNotSupportTotally_Mobile","NavBarA2HSNotSupport_Mobile","NavBarA2HSNotSupport_PC","NavBarA2HSNoticeDialog","NavBarAboutDialog","NavBarConfirmDialog","NavBarConflictDialog","NavBarDialogBase","NavBarEditNameDialog","NavBarFBBrowserDialog","NavBarFBPagePluginDialog","NavBarGDPRDialog","NavBarHowToPlayDialog","NavBarItemSelectLanguage","NavBarLeaveGameDialog","NavBarLoginSocialDialog","NavBarManager","NavBarNoticeDialog","NavBarSelectLanguageDialog","NavBarSettingsDialog","NavBarShareDialog","NavBarTipItem","NavBarUserConflictInfo","NgcA2HSManager.ts","OfflineMode","PartyRoomConfirmDialog","PartyRoomDialogBase","PartyRoomEnterCodeDialog","PartyRoomNoticeDialog","ScanQRCodeDialog","PartyAnimation","PartyInfoBuilder","PartyPlayerItem","QRCodeGenerator","RealPrizeBuyTicketDialog","RealPrizeDialogBase","RealPrizeTicketProgressTimer","NgcRedirection","NgcRedirectionDialog","TabBarManager","TabButton","BadConnectionNotification","NgcTechMessageUpdateIOS","TechMessageAndroidWebview","TechMessageFPS","TechMessageIdleDisconnect","TechMessageIdleFPSWarning","TechMessageIdleWarningDialog","TechMessageLatencyDisconnect","TechMessageLatencyWarning","TechMessageNetworkDisconnect","TechMessageSupportBrowser","TechMessages","TechMessagesDialog","TechMessagesPortraitOnly","TipManager","AdsManager_impl","NgcAdsManager","BuildConfig","CONSTANTS","CountryFlagsManager","FontsManager","LabelLocalized","LocalizationDebugPanel","LocalizedManager","SpriteLocalized","TimerLabelLocalized","MessageBuilder","MessageDefines","Protocol","NetStatsTracker","NetUtils","NetworkInterface","NgcNetClient","NgcNetClientRefactor","NgcGame","NgcGameCamera","NgcItemInfoManager","NgcLocalStorage","NgcMain","NgcSceneManager","NgcScreenBase","NgcScreenManager","NgcShopManager","NgcSoundManager","NgcTrackingManager","NgcUserInfo","NgcWorldPosInterface","ProfanityCheck","NgcVersion","FacebookSrv","GameDistributionSrv","NanoSrv","SDK","UplaySrv","Ads","Ads_impl_AdInPlaySrv","Ads_impl_AdSenseSrv","Ads_impl_GameDistributionSrv","DailyReward","DailyReward_impl_NanoSrv","GameShop","GameShop_impl_NanoSrv","Inventory","Inventory_impl_NanoSrv","Leaderboard","Leaderboard_impl_NanoSrv","PartyRoom","PartyRoom_impl_DouyinSrv","PartyRoom_impl_GameServerSrv","Platform","Platform_impl_GameDistributionSrv","Platform_impl_NanoSrv","Platform_impl_NativeOSBase","Platform_impl_SocialBase","Platform_impl_WebBase","Service","ServicesMgr","Social","Social_impl_FacebookSrv","Social_impl_UplaySrv","Telemetry","Telemetry_impl_FirebaseSrv","Telemetry_impl_NullSrv","AddODRToChildren","PopInPopOutAnim","AsbBuildConfig","AssetPreloader","AutoTest","BlendAnimBase","CameraHelper","CharacterControllerBase","DebugLog","DebugUtils","GameScreenDebugUI","AdsCoolDownMessage","AlreadyActivatedBoosterDialog","MatchLoadingDialog","NavBarConflictDialogOverwrite","ParamsDebugDialog","ResultDialog","RewardDialog","VictoryDialog","FakeNames","FakeRandomNumberGenerator","Game","GameCamera","GameCameraTarget","GameModeDataBase","Block","BlockExplosion","BlockTop","Bomb","Explosion","Floor","FloorPlate","GameObjMgr","GameObjectBase","PickupItem","PowerUpItem","ShrinkingSmoke","GameSpriteFrameMgr","Input","IntroCamera","ProgressLookingPlayers","LoadingScene","Main","AStar","AStarNodeBase","AStarNode_UASB","AStar_UASB","MapGenerator","MapInfo","MapManager","MapShrinkingAnim","ThemeManager","MaterialMgr","ImprovedNetClient","NetClient","messages","messagesJson","ASBMessageDefines","ASBMessages","rpb","utils","OffscreenDisableRender","PersitNodeManager","CharacterUpgradesMgr","PlayerAnim","PlayerAudio","PlayerController","PlayerController_Bot","PlayerController_Remote","PlayerData","PlayerInfoTag","PlayerMagnetCircle","PlayerParameters","PlayerSkinMgr","PlayerWinVFXHandler","PowerCollecting","PoolNodesManager","ReScaleObject","GameReward","SceneManager","ScreenManager","GameScreen","LeaderBoardUI","PartyRoomManager","PartyRoomUI","PrizeScreen","RouletteScreen","CharacterUpgradeUI","ItemUpgrade","ShopScreen","StartInputHandler","StartMain","SoundManager","AvatarSFHandler","BombSFHandler","BrandLogoSFHandler","PowerUpSFHandler","TrackingManager","TuningData","DragToControl","Tutorial","TypeDefs","DigitCountUp","FullScreenButton","BombButton","CountDown","GameUI","GameUIClock","GameUIMessage","HeartBoard","HeartItem","KillAndLiveBoard","MapIntroduction","RightHUD","MapUI","NetLatencyDisplay","ShieldAnimHandler","ThrobTween","TipBackAndForth","WaitSpinner","UserInfo","AsbLog","ConstConfig","FPS","VersionCheck","globals"]);